var wT=Object.defineProperty,MT=Object.defineProperties;var IT=Object.getOwnPropertyDescriptors;var ou=Object.getOwnPropertySymbols,CT=Object.getPrototypeOf,pb=Object.prototype.hasOwnProperty,gb=Object.prototype.propertyIsEnumerable,ET=Reflect.get;var Nf=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),TT=t=>{throw TypeError(t)};var fb=(t,e,n)=>e in t?wT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M=(t,e)=>{for(var n in e||={})pb.call(e,n)&&fb(t,n,e[n]);if(ou)for(var n of ou(e))gb.call(e,n)&&fb(t,n,e[n]);return t},N=(t,e)=>MT(t,IT(e));var Ve=(t,e)=>{var n={};for(var i in t)pb.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&ou)for(var i of ou(t))e.indexOf(i)<0&&gb.call(t,i)&&(n[i]=t[i]);return n};var br=(t,e,n)=>ET(CT(t),n,e);var k=(t,e,n)=>new Promise((i,r)=>{var s=l=>{try{a(n.next(l))}catch(c){r(c)}},o=l=>{try{a(n.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),AT=function(t,e){this[0]=t,this[1]=e};var au=t=>{var e=t[Nf("asyncIterator")],n=!1,i,r={};return e==null?(e=t[Nf("iterator")](),i=s=>r[s]=o=>e[s](o)):(e=e.call(t),i=s=>r[s]=o=>{if(n){if(n=!1,s==="throw")throw o;return o}return n=!0,{done:!1,value:new AT(new Promise(a=>{var l=e[s](o);l instanceof Object||TT("Object expected"),a(l)}),1)}}),r[Nf("iterator")]=()=>r,i("next"),"throw"in e?i("throw"):r.throw=s=>{throw s},"return"in e&&i("return"),r};function NT(t,e){return Object.is(t,e)}var pt=null,Za=!1,lu=1,xr=Symbol("SIGNAL");function Ee(t){let e=pt;return pt=t,e}function mb(){return pt}function kT(){return Za}var Qa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yb(t){if(Za)throw new Error("");if(pt===null)return;pt.consumerOnSignalRead(t);let e=pt.nextProducerIndex++;if(fu(pt),e<pt.producerNode.length&&pt.producerNode[e]!==t&&Xa(pt)){let n=pt.producerNode[e];hu(n,pt.producerIndexOfThis[e])}pt.producerNode[e]!==t&&(pt.producerNode[e]=t,pt.producerIndexOfThis[e]=Xa(pt)?Db(t,pt,e):0),pt.producerLastReadVersion[e]=t.version}function RT(){lu++}function LT(t){if(!(Xa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lu)){if(!t.producerMustRecompute(t)&&!uu(t)){t.dirty=!1,t.lastCleanEpoch=lu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=lu}}function vb(t){if(t.liveConsumerNode===void 0)return;let e=Za;Za=!0;try{for(let n of t.liveConsumerNode)n.dirty||xb(n)}finally{Za=e}}function bb(){return pt?.consumerAllowSignalWrites!==!1}function xb(t){t.dirty=!0,vb(t),t.consumerMarkedDirty?.(t)}function cu(t){return t&&(t.nextProducerIndex=0),Ee(t)}function Rf(t,e){if(Ee(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Xa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function uu(t){fu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(LT(n),i!==n.version))return!0}return!1}function du(t){if(fu(t),Xa(t))for(let e=0;e<t.producerNode.length;e++)hu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Db(t,e,n){if(Sb(t),t.liveConsumerNode.length===0&&wb(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=Db(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function hu(t,e){if(Sb(t),t.liveConsumerNode.length===1&&wb(t))for(let i=0;i<t.producerNode.length;i++)hu(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];fu(r),r.producerIndexOfThis[i]=e}}function Xa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function fu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Sb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function wb(t){return t.producerNode!==void 0}function OT(){throw new Error}var Mb=OT;function Ib(){Mb()}function Cb(t){Mb=t}var _T=null;function Eb(t){let e=Object.create(Ab);e.value=t;let n=()=>(yb(e),e.value);return n[xr]=e,n}function Lf(t,e){bb()||Ib(),t.equal(t.value,e)||(t.value=e,PT(t))}function Tb(t,e){bb()||Ib(),Lf(t,e(t.value))}var Ab=N(M({},Qa),{equal:NT,value:void 0});function PT(t){t.version++,RT(),vb(t),_T?.()}function Nb(t,e,n){let i=Object.create(FT);n&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;let r=l=>{i.cleanupFn=l};function s(l){return l.fn===null&&l.schedule===null}function o(l){s(l)||(du(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=kf)}let a=()=>{if(i.fn===null)return;if(kT())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!uu(i))return;i.hasRun=!0;let l=cu(i);try{i.cleanupFn(),i.cleanupFn=kf,i.fn(r)}finally{Rf(i,l)}};return i.ref={notify:()=>xb(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>o(i),[xr]:i},i.ref}var kf=()=>{},FT=N(M({},Qa),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:kf});function W(t){return typeof t=="function"}function ao(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var pu=ao(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ja(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ct=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(W(i))try{i()}catch(s){e=s instanceof pu?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{kb(s)}catch(o){e=e??[],o instanceof pu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)kb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ja(n,e)}remove(e){let{_finalizers:n}=this;n&&Ja(n,e),e instanceof t&&e._removeParent(this)}};ct.EMPTY=(()=>{let t=new ct;return t.closed=!0,t})();var Of=ct.EMPTY;function gu(t){return t instanceof ct||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function kb(t){W(t)?t():t.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={setTimeout(t,e,...n){let{delegate:i}=lo;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=lo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function mu(t){lo.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(t);else throw t})}function el(){}var Rb=_f("C",void 0,void 0);function Lb(t){return _f("E",void 0,t)}function Ob(t){return _f("N",t,void 0)}function _f(t,e,n){return{kind:t,value:e,error:n}}var hs=null;function co(t){if($n.useDeprecatedSynchronousErrorHandling){let e=!hs;if(e&&(hs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=hs;if(hs=null,n)throw i}}else t()}function _b(t){$n.useDeprecatedSynchronousErrorHandling&&hs&&(hs.errorThrown=!0,hs.error=t)}var fs=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gu(e)&&e.add(this)):this.destination=VT}static create(e,n,i){return new uo(e,n,i)}next(e){this.isStopped?Ff(Ob(e),this):this._next(e)}error(e){this.isStopped?Ff(Lb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ff(Rb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BT=Function.prototype.bind;function Pf(t,e){return BT.call(t,e)}var Bf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){yu(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){yu(i)}else yu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){yu(n)}}},uo=class extends fs{constructor(e,n,i){super();let r;if(W(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&$n.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Pf(e.next,s),error:e.error&&Pf(e.error,s),complete:e.complete&&Pf(e.complete,s)}):r=e}this.destination=new Bf(r)}};function yu(t){$n.useDeprecatedSynchronousErrorHandling?_b(t):mu(t)}function jT(t){throw t}function Ff(t,e){let{onStoppedNotification:n}=$n;n&&lo.setTimeout(()=>n(t,e))}var VT={closed:!0,next:el,error:jT,complete:el};var ho=typeof Symbol=="function"&&Symbol.observable||"@@observable";function on(t){return t}function jf(...t){return Vf(t)}function Vf(t){return t.length===0?on:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=GT(n)?n:new uo(n,i,r);return co(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=Pb(i),new i((r,s)=>{let o=new uo({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[ho](){return this}pipe(...n){return Vf(n)(this)}toPromise(n){return n=Pb(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function Pb(t){var e;return(e=t??$n.Promise)!==null&&e!==void 0?e:Promise}function zT(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}function GT(t){return t&&t instanceof fs||zT(t)&&gu(t)}function zf(t){return W(t?.lift)}function ye(t){return e=>{if(zf(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(t,e,n,i,r){return new Gf(t,e,n,i,r)}var Gf=class extends fs{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fo(){return ye((t,e)=>{let n=null;t._refCount++;let i=ve(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var po=class extends Ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;let n=this.getSubject();e.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return fo()(this)}};var Fb=ao(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Vt=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new vu(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Fb}next(n){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Of:(this.currentObservers=null,s.push(n),new ct(()=>{this.currentObservers=null,Ja(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new Ae;return n.source=this,n}}return t.create=(e,n)=>new vu(e,n),t})(),vu=class extends Vt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Of}};var gt=class extends Vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var an=new Ae(t=>t.complete());function Bb(t){return t&&W(t.schedule)}function jb(t){return t[t.length-1]}function Vb(t){return W(jb(t))?t.pop():void 0}function Dr(t){return Bb(jb(t))?t.pop():void 0}function Gb(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function zb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ps(t){return this instanceof ps?(this.v=t,this):new ps(t)}function Ub(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(m){return new Promise(function(y,v){s.push([f,m,y,v])>1||l(f,m)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(m){h(s[0][3],m)}}function c(f){f.value instanceof ps?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Hb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zb=="function"?zb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var go=t=>t&&typeof t.length=="number"&&typeof t!="function";function bu(t){return W(t?.then)}function xu(t){return W(t[ho])}function Du(t){return Symbol.asyncIterator&&W(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wu=UT();function Mu(t){return W(t?.[wu])}function Iu(t){return Ub(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield ps(n.read());if(r)return yield ps(void 0);yield yield ps(i)}}finally{n.releaseLock()}})}function Cu(t){return W(t?.getReader)}function ut(t){if(t instanceof Ae)return t;if(t!=null){if(xu(t))return HT(t);if(go(t))return $T(t);if(bu(t))return WT(t);if(Du(t))return $b(t);if(Mu(t))return YT(t);if(Cu(t))return KT(t)}throw Su(t)}function HT(t){return new Ae(e=>{let n=t[ho]();if(W(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $T(t){return new Ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function WT(t){return new Ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,mu)})}function YT(t){return new Ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $b(t){return new Ae(e=>{qT(t,e).catch(n=>e.error(n))})}function KT(t){return $b(Iu(t))}function qT(t,e){var n,i,r,s;return Gb(this,void 0,void 0,function*(){try{for(n=Hb(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function Zt(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Eu(t,e=0){return ye((n,i)=>{n.subscribe(ve(i,r=>Zt(i,t,()=>i.next(r),e),()=>Zt(i,t,()=>i.complete(),e),r=>Zt(i,t,()=>i.error(r),e)))})}function Tu(t,e=0){return ye((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function Wb(t,e){return ut(t).pipe(Tu(e),Eu(e))}function Yb(t,e){return ut(t).pipe(Tu(e),Eu(e))}function Kb(t,e){return new Ae(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function qb(t,e){return new Ae(n=>{let i;return Zt(n,e,()=>{i=t[wu](),Zt(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>W(i?.return)&&i.return()})}function Au(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(n=>{Zt(n,e,()=>{let i=t[Symbol.asyncIterator]();Zt(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Zb(t,e){return Au(Iu(t),e)}function Xb(t,e){if(t!=null){if(xu(t))return Wb(t,e);if(go(t))return Kb(t,e);if(bu(t))return Yb(t,e);if(Du(t))return Au(t,e);if(Mu(t))return qb(t,e);if(Cu(t))return Zb(t,e)}throw Su(t)}function mt(t,e){return e?Xb(t,e):ut(t)}function te(...t){let e=Dr(t);return mt(t,e)}function mo(t,e){let n=W(t)?t:()=>t,i=r=>r.error(n());return new Ae(e?r=>e.schedule(i,0,r):i)}function Uf(t){return!!t&&(t instanceof Ae||W(t.lift)&&W(t.subscribe))}var qi=ao(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(t,e){return ye((n,i)=>{let r=0;n.subscribe(ve(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:ZT}=Array;function XT(t,e){return ZT(e)?t(...e):t(e)}function Nu(t){return pe(e=>XT(t,e))}var{isArray:QT}=Array,{getPrototypeOf:JT,prototype:eA,keys:tA}=Object;function Qb(t){if(t.length===1){let e=t[0];if(QT(e))return{args:e,keys:null};if(nA(e)){let n=tA(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function nA(t){return t&&typeof t=="object"&&JT(t)===eA}function Jb(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function ku(...t){let e=Dr(t),n=Vb(t),{args:i,keys:r}=Qb(t);if(i.length===0)return mt([],e);let s=new Ae(iA(i,e,r?o=>Jb(r,o):on));return n?s.pipe(Nu(n)):s}function iA(t,e,n=on){return i=>{ex(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)ex(e,()=>{let c=mt(t[l],e),u=!1;c.subscribe(ve(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function ex(t,e,n){t?Zt(n,t,e):e()}function tx(t,e,n,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{s&&e.next(m),c++;let y=!1;ut(n(m,u++)).subscribe(ve(e,v=>{r?.(v),s?f(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){let v=l.shift();o?Zt(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(ve(e,f,()=>{d=!0,h()})),()=>{a?.()}}function nt(t,e,n=1/0){return W(e)?nt((i,r)=>pe((s,o)=>e(i,s,r,o))(ut(t(i,r))),n):(typeof e=="number"&&(n=e),ye((i,r)=>tx(i,r,t,n)))}function Hf(t=1/0){return nt(on,t)}function nx(){return Hf(1)}function yo(...t){return nx()(mt(t,Dr(t)))}function Ru(t){return new Ae(e=>{ut(t()).subscribe(e)})}var rA=["addListener","removeListener"],sA=["addEventListener","removeEventListener"],oA=["on","off"];function tl(t,e,n,i){if(W(n)&&(i=n,n=void 0),i)return tl(t,e,n).pipe(Nu(i));let[r,s]=cA(t)?sA.map(o=>a=>t[o](e,a,n)):aA(t)?rA.map(ix(t,e)):lA(t)?oA.map(ix(t,e)):[];if(!r&&go(t))return nt(o=>tl(o,e,n))(ut(t));if(!r)throw new TypeError("Invalid event target");return new Ae(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function ix(t,e){return n=>i=>t[n](e,i)}function aA(t){return W(t.addListener)&&W(t.removeListener)}function lA(t){return W(t.on)&&W(t.off)}function cA(t){return W(t.addEventListener)&&W(t.removeEventListener)}function Wn(t,e){return ye((n,i)=>{let r=0;n.subscribe(ve(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Sr(t){return ye((e,n)=>{let i=null,r=!1,s;i=e.subscribe(ve(n,void 0,void 0,o=>{s=ut(t(o,Sr(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function rx(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(ve(o,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function vo(t,e){return W(e)?nt(t,e,1):nt(t,1)}function wr(t){return ye((e,n)=>{let i=!1;e.subscribe(ve(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Zi(t){return t<=0?()=>an:ye((e,n)=>{let i=0;e.subscribe(ve(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function $f(t){return pe(()=>t)}function Lu(t=uA){return ye((e,n)=>{let i=!1;e.subscribe(ve(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function uA(){return new qi}function nl(t){return ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function hi(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Wn((r,s)=>t(r,s,i)):on,Zi(1),n?wr(e):Lu(()=>new qi))}function bo(t){return t<=0?()=>an:ye((e,n)=>{let i=[];e.subscribe(ve(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Wf(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Wn((r,s)=>t(r,s,i)):on,bo(1),n?wr(e):Lu(()=>new qi))}function Yf(t,e){return ye(rx(t,e,arguments.length>=2,!0))}function Kf(...t){let e=Dr(t);return ye((n,i)=>{(e?yo(t,n,e):yo(t,n)).subscribe(i)})}function Yn(t,e){return ye((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(ve(i,l=>{r?.unsubscribe();let c=0,u=s++;ut(t(l,u)).subscribe(r=ve(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function qf(t){return ye((e,n)=>{ut(t).subscribe(ve(n,()=>n.complete(),el)),!n.closed&&e.subscribe(n)})}function Ct(t,e,n){let i=W(t)||e||n?{next:t,error:e,complete:n}:t;return i?ye((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ve(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):on}var dA="https://g.co/ng/security#xss",K=class extends Error{constructor(e,n){super(Xp(e,n)),this.code=e}};function Xp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ud(t){return{toString:t}.toString()}var Ou="__parameters__";function hA(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function Hx(t,e,n){return ud(()=>{let i=hA(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Ou)?l[Ou]:Object.defineProperty(l,Ou,{value:[]})[Ou];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var ap=globalThis;function Fe(t){for(let e in t)if(t[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function fA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Xt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Xt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function lp(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var pA=Fe({__forward_ref__:Fe});function $x(t){return t.__forward_ref__=$x,t.toString=function(){return Xt(this())},t}function In(t){return Wx(t)?t():t}function Wx(t){return typeof t=="function"&&t.hasOwnProperty(pA)&&t.__forward_ref__===$x}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dd(t){return sx(t,Kx)||sx(t,qx)}function Yx(t){return dd(t)!==null}function sx(t,e){return t.hasOwnProperty(e)?t[e]:null}function gA(t){let e=t&&(t[Kx]||t[qx]);return e||null}function ox(t){return t&&(t.hasOwnProperty(ax)||t.hasOwnProperty(mA))?t[ax]:null}var Kx=Fe({\u0275prov:Fe}),ax=Fe({\u0275inj:Fe}),qx=Fe({ngInjectableDef:Fe}),mA=Fe({ngInjectorDef:Fe}),ie=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Zx(t){return t&&!!t.\u0275providers}var yA=Fe({\u0275cmp:Fe}),vA=Fe({\u0275dir:Fe}),bA=Fe({\u0275pipe:Fe}),xA=Fe({\u0275mod:Fe}),Uu=Fe({\u0275fac:Fe}),il=Fe({__NG_ELEMENT_ID__:Fe}),lx=Fe({__NG_ENV_ID__:Fe});function Xx(t){return typeof t=="string"?t:t==null?"":String(t)}function DA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Xx(t)}function SA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new K(-200,t)}function Qp(t,e){throw new K(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),cp;function Qx(){return cp}function Mn(t){let e=cp;return cp=t,e}function Jx(t,e,n){let i=dd(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&oe.Optional)return null;if(e!==void 0)return e;Qp(t,"Injector")}var wA={},rl=wA,up="__NG_DI_FLAG__",Hu="ngTempTokenPath",MA="ngTokenPath",IA=/\n/gm,CA="\u0275",cx="__source",wo;function EA(){return wo}function Mr(t){let e=wo;return wo=t,e}function TA(t,e=oe.Default){if(wo===void 0)throw new K(-203,!1);return wo===null?Jx(t,void 0,e):wo.get(t,e&oe.Optional?null:void 0,e)}function ce(t,e=oe.Default){return(Qx()||TA)(In(t),e)}function F(t,e=oe.Default){return ce(t,hd(e))}function hd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function dp(t){let e=[];for(let n=0;n<t.length;n++){let i=In(t[n]);if(Array.isArray(i)){if(i.length===0)throw new K(900,!1);let r,s=oe.Default;for(let o=0;o<i.length;o++){let a=i[o],l=AA(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(ce(r,s))}else e.push(ce(i))}return e}function e0(t,e){return t[up]=e,t.prototype[up]=e,t}function AA(t){return t[up]}function NA(t,e,n,i){let r=t[Hu];throw e[cx]&&r.unshift(e[cx]),t.message=kA(`
`+t.message,r,n,i),t[MA]=r,t[Hu]=null,t}function kA(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==CA?t.slice(2):t;let r=Xt(e);if(Array.isArray(e))r=e.map(Xt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Xt(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(IA,`
  `)}`}var Jp=e0(Hx("Optional"),8);var t0=e0(Hx("SkipSelf"),4);function Io(t,e){let n=t.hasOwnProperty(Uu);return n?t[Uu]:null}function eg(t,e){t.forEach(n=>Array.isArray(n)?eg(n,e):e(n))}function n0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function $u(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function RA(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function i0(t,e,n){let i=gl(t,e);return i>=0?t[i|1]=n:(i=~i,RA(t,i,e,n)),i}function Zf(t,e){let n=gl(t,e);if(n>=0)return t[n|1]}function gl(t,e){return LA(t,e,1)}function LA(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var Co={},gi=[],Eo=new ie(""),r0=new ie("",-1),s0=new ie(""),Wu=class{get(e,n=rl){if(n===rl){let i=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw i.name="NullInjectorError",i}return n}},o0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(o0||{}),mi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mi||{}),Cr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cr||{});function OA(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function hp(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];PA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function _A(t){return t===3||t===4||t===6}function PA(t){return t.charCodeAt(0)===64}function sl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?ux(t,n,r,null,e[++i]):ux(t,n,r,null,null))}}return t}function ux(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var a0="ng-template";function FA(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&OA(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(tg(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===n)return!0}return!1}function tg(t){return t.type===4&&t.value!==a0}function BA(t,e,n){let i=t.type===4&&!n?a0:t.value;return e===i}function jA(t,e,n){let i=4,r=t.attrs,s=r!==null?GA(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!Kn(i)&&!Kn(l))return!1;if(o&&Kn(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!BA(t,l,n)||l===""&&e.length===1){if(Kn(i))return!1;o=!0}}else if(i&8){if(r===null||!FA(t,r,l,n)){if(Kn(i))return!1;o=!0}}else{let c=e[++a],u=VA(l,r,tg(t),n);if(u===-1){if(Kn(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Kn(i))return!1;o=!0}}}}return Kn(i)||o}function Kn(t){return(t&1)===0}function VA(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return UA(e,t)}function zA(t,e,n=!1){for(let i=0;i<e.length;i++)if(jA(t,e[i],n))return!0;return!1}function GA(t){for(let e=0;e<t.length;e++){let n=t[e];if(_A(n))return e}return t.length}function UA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function dx(t,e){return t?":not("+e.trim()+")":e}function HA(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Kn(o)&&(e+=dx(s,r),r=""),i=o,s=s||!Kn(i);n++}return r!==""&&(e+=dx(s,r)),e}function $A(t){return t.map(HA).join(",")}function WA(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Kn(r))break;r=s}i++}return{attrs:e,classes:n}}function Nr(t){return ud(()=>{let e=h0(t),n=N(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===o0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mi.Emulated,styles:t.styles||gi,_:null,schemas:t.schemas||null,tView:null,id:""});f0(n);let i=t.dependencies;return n.directiveDefs=fx(i,!1),n.pipeDefs=fx(i,!0),n.id=qA(n),n})}function YA(t){return vs(t)||l0(t)}function KA(t){return t!==null}function hx(t,e){if(t==null)return Co;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=Cr.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==Cr.None?[i,a]:i,e[s]=o):n[s]=i}return n}function ml(t){return ud(()=>{let e=h0(t);return f0(e),e})}function vs(t){return t[yA]||null}function l0(t){return t[vA]||null}function c0(t){return t[bA]||null}function u0(t){let e=vs(t)||l0(t)||c0(t);return e!==null?e.standalone:!1}function d0(t,e){let n=t[xA]||null;if(!n&&e===!0)throw new Error(`Type ${Xt(t)} does not have '\u0275mod' property.`);return n}function h0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Co,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||gi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hx(t.inputs,e),outputs:hx(t.outputs),debugInfo:null}}function f0(t){t.features?.forEach(e=>e(t))}function fx(t,e){if(!t)return null;let n=e?c0:YA;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(KA)}function qA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fd(t){return{\u0275providers:t}}function ZA(...t){return{\u0275providers:p0(!0,t),\u0275fromNgModule:!0}}function p0(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return eg(e,o=>{let a=o;fp(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&g0(r,s),n}function g0(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];ng(r,s=>{e(s,i)})}}function fp(t,e,n,i){if(t=In(t),!t)return!1;let r=null,s=ox(t),o=!s&&vs(t);if(!s&&!o){let l=t.ngModule;if(s=ox(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)fp(c,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{eg(s.imports,u=>{fp(u,e,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&g0(c,e)}if(!a){let c=Io(r)||(()=>new r);e({provide:r,useFactory:c,deps:gi},r),e({provide:s0,useValue:r,multi:!0},r),e({provide:Eo,useValue:()=>ce(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=t;ng(l,u=>{e(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function ng(t,e){for(let n of t)Zx(n)&&(n=n.\u0275providers),Array.isArray(n)?ng(n,e):e(n)}var XA=Fe({provide:String,useValue:Fe});function m0(t){return t!==null&&typeof t=="object"&&XA in t}function QA(t){return!!(t&&t.useExisting)}function JA(t){return!!(t&&t.useFactory)}function pp(t){return typeof t=="function"}var pd=new ie(""),Fu={},eN={},Xf;function ig(){return Xf===void 0&&(Xf=new Wu),Xf}var Tn=class{},ol=class extends Tn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mp(e,o=>this.processProvider(o)),this.records.set(r0,xo(void 0,this)),r.has("environment")&&this.records.set(Tn,xo(void 0,this));let s=this.records.get(pd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(s0,gi,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Mr(this),i=Mn(void 0),r;try{return e()}finally{Mr(n),Mn(i)}}get(e,n=rl,i=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lx))return e[lx](this);i=hd(i);let r,s=Mr(this),o=Mn(void 0);try{if(!(i&oe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=oN(e)&&dd(e);c&&this.injectableDefInScope(c)?l=xo(gp(e),Fu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&oe.Self?ig():this.parent;return n=i&oe.Optional&&n===rl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Hu]=a[Hu]||[]).unshift(Xt(e)),s)throw a;return NA(a,e,"R3InjectorError",this.source)}else throw a}finally{Mn(o),Mr(s)}}resolveInjectorInitializers(){let e=Ee(null),n=Mr(this),i=Mn(void 0),r;try{let s=this.get(Eo,gi,oe.Self);for(let o of s)o()}finally{Mr(n),Mn(i),Ee(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Xt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=In(e);let n=pp(e)?e:In(e&&e.provide),i=nN(e);if(!pp(e)&&e.multi===!0){let r=this.records.get(n);r||(r=xo(void 0,Fu,!0),r.factory=()=>dp(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ee(null);try{return n.value===Fu&&(n.value=eN,n.value=n.factory()),typeof n.value=="object"&&n.value&&sN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=In(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gp(t){let e=dd(t),n=e!==null?e.factory:Io(t);if(n!==null)return n;if(t instanceof ie)throw new K(204,!1);if(t instanceof Function)return tN(t);throw new K(204,!1)}function tN(t){if(t.length>0)throw new K(204,!1);let n=gA(t);return n!==null?()=>n.factory(t):()=>new t}function nN(t){if(m0(t))return xo(void 0,t.useValue);{let e=iN(t);return xo(e,Fu)}}function iN(t,e,n){let i;if(pp(t)){let r=In(t);return Io(r)||gp(r)}else if(m0(t))i=()=>In(t.useValue);else if(JA(t))i=()=>t.useFactory(...dp(t.deps||[]));else if(QA(t))i=()=>ce(In(t.useExisting));else{let r=In(t&&(t.useClass||t.provide));if(rN(t))i=()=>new r(...dp(t.deps));else return Io(r)||gp(r)}return i}function xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rN(t){return!!t.deps}function sN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function oN(t){return typeof t=="function"||typeof t=="object"&&t instanceof ie}function mp(t,e){for(let n of t)Array.isArray(n)?mp(n,e):n&&Zx(n)?mp(n.\u0275providers,e):e(n)}function Ji(t,e){t instanceof ol&&t.assertNotDestroyed();let n,i=Mr(t),r=Mn(void 0);try{return e()}finally{Mr(i),Mn(r)}}function y0(){return Qx()!==void 0||EA()!=null}function aN(t){if(!y0())throw new K(-203,!1)}function lN(t){return typeof t=="function"}var er=0,ge=1,Q=2,Gt=3,qn=4,Xn=5,Yu=6,Ku=7,Zn=8,To=9,Xi=10,Tt=11,al=12,px=13,Oo=14,yi=15,Ao=16,Do=17,No=18,gd=19,v0=20,Ir=21,Bu=22,Cn=23,Er=25,b0=1;var bs=7,qu=8,Zu=9,En=10,Xu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Xu||{});function ms(t){return Array.isArray(t)&&typeof t[b0]=="object"}function tr(t){return Array.isArray(t)&&t[b0]===!0}function x0(t){return(t.flags&4)!==0}function md(t){return t.componentOffset>-1}function rg(t){return(t.flags&1)===1}function xs(t){return!!t.template}function yp(t){return(t[Q]&512)!==0}var vp=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function D0(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function yd(){return S0}function S0(t){return t.type.prototype.ngOnChanges&&(t.setInput=uN),cN}yd.ngInherit=!0;function cN(){let t=M0(this),e=t?.current;if(e){let n=t.previous;if(n===Co)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function uN(t,e,n,i,r){let s=this.declaredInputs[i],o=M0(t)||dN(t,{previous:Co,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new vp(c&&c.currentValue,n,l===Co),D0(t,e,r,n)}var w0="__ngSimpleChanges__";function M0(t){return t[w0]||null}function dN(t,e){return t[w0]=e}var gx=null;var fi=function(t,e,n){gx?.(t,e,n)},hN="svg",fN="math";function vi(t){for(;Array.isArray(t);)t=t[er];return t}function I0(t,e){return vi(e[t])}function Qn(t,e){return vi(e[t.index])}function C0(t,e){return t.data[e]}function Cs(t,e){let n=e[t];return ms(n)?n:n[er]}function sg(t){return(t[Q]&128)===128}function pN(t){return tr(t[Gt])}function Qu(t,e){return e==null?null:t[e]}function E0(t){t[Do]=0}function T0(t){t[Q]&1024||(t[Q]|=1024,sg(t)&&vd(t))}function gN(t,e){for(;t>0;)e=e[Oo],t--;return e}function ll(t){return!!(t[Q]&9216||t[Cn]?.dirty)}function bp(t){t[Xi].changeDetectionScheduler?.notify(7),t[Q]&64&&(t[Q]|=1024),ll(t)&&vd(t)}function vd(t){t[Xi].changeDetectionScheduler?.notify(0);let e=Ds(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!sg(e)));)e=Ds(e)}function A0(t,e){if((t[Q]&256)===256)throw new K(911,!1);t[Ir]===null&&(t[Ir]=[]),t[Ir].push(e)}function mN(t,e){if(t[Ir]===null)return;let n=t[Ir].indexOf(e);n!==-1&&t[Ir].splice(n,1)}function Ds(t){let e=t[Gt];return tr(e)?e[Gt]:e}var he={lFrame:B0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var N0=!1;function yN(){return he.lFrame.elementDepthCount}function vN(){he.lFrame.elementDepthCount++}function bN(){he.lFrame.elementDepthCount--}function k0(){return he.bindingsEnabled}function xN(){return he.skipHydrationRootTNode!==null}function DN(t){return he.skipHydrationRootTNode===t}function SN(){he.skipHydrationRootTNode=null}function it(){return he.lFrame.lView}function xi(){return he.lFrame.tView}function bd(t){return he.lFrame.contextLView=t,t[Zn]}function xd(t){return he.lFrame.contextLView=null,t}function An(){let t=R0();for(;t!==null&&t.type===64;)t=t.parent;return t}function R0(){return he.lFrame.currentTNode}function wN(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function yl(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function L0(){return he.lFrame.isParent}function MN(){he.lFrame.isParent=!1}function O0(){return N0}function mx(t){N0=t}function IN(t){return he.lFrame.bindingIndex=t}function og(){return he.lFrame.bindingIndex++}function CN(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function EN(){return he.lFrame.inI18n}function TN(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,xp(e)}function AN(){return he.lFrame.currentDirectiveIndex}function xp(t){he.lFrame.currentDirectiveIndex=t}function NN(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _0(t){he.lFrame.currentQueryIndex=t}function kN(t){let e=t[ge];return e.type===2?e.declTNode:e.type===1?t[Xn]:null}function P0(t,e,n){if(n&oe.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&oe.Host);)if(r=kN(s),r===null||(s=s[Oo],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=he.lFrame=F0();return i.currentTNode=e,i.lView=t,!0}function ag(t){let e=F0(),n=t[ge];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function F0(){let t=he.lFrame,e=t===null?null:t.child;return e===null?B0(t):e}function B0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function j0(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var V0=j0;function lg(){let t=j0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function RN(t){return(he.lFrame.contextLView=gN(t,he.lFrame.contextLView))[Zn]}function _o(){return he.lFrame.selectedIndex}function Ss(t){he.lFrame.selectedIndex=t}function z0(){let t=he.lFrame;return C0(t.tView,t.selectedIndex)}function LN(){return he.lFrame.currentNamespace}var G0=!0;function cg(){return G0}function ug(t){G0=t}function ON(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=S0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function dg(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function ju(t,e,n){U0(t,e,3,n)}function Vu(t,e,n,i){(t[Q]&3)===n&&U0(t,e,n,i)}function Qf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function U0(t,e,n,i){let r=i!==void 0?t[Do]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[Do]+=65536),(a<s||s==-1)&&(_N(t,n,e,l),t[Do]=(t[Do]&4294901760)+l+2),l++}function yx(t,e){fi(4,t,e);let n=Ee(null);try{e.call(t)}finally{Ee(n),fi(5,t,e)}}function _N(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[Q]>>14<t[Do]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,yx(a,s)):yx(a,s)}var Mo=-1,cl=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function PN(t){return t instanceof cl}function FN(t){return(t.flags&8)!==0}function BN(t){return(t.flags&16)!==0}var Jf={},Dp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=hd(i);let r=this.injector.get(e,Jf,i);return r!==Jf||n===Jf?r:this.parentInjector.get(e,n,i)}};function H0(t){return t!==Mo}function Ju(t){return t&32767}function jN(t){return t>>16}function ed(t,e){let n=jN(t),i=e;for(;n>0;)i=i[Oo],n--;return i}var Sp=!0;function vx(t){let e=Sp;return Sp=t,e}var VN=256,$0=VN-1,W0=5,zN=0,pi={};function GN(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(il)&&(i=n[il]),i==null&&(i=n[il]=zN++);let r=i&$0,s=1<<r;e.data[t+(r>>W0)]|=s}function Y0(t,e){let n=K0(t,e);if(n!==-1)return n;let i=e[ge];i.firstCreatePass&&(t.injectorIndex=e.length,ep(i.data,t),ep(e,null),ep(i.blueprint,null));let r=hg(t,e),s=t.injectorIndex;if(H0(r)){let o=Ju(r),a=ed(r,e),l=a[ge].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function ep(t,e){t.push(0,0,0,0,0,0,0,0,e)}function K0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=J0(r),i===null)return Mo;if(n++,r=r[Oo],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Mo}function UN(t,e,n){GN(t,e,n)}function q0(t,e,n){if(n&oe.Optional||t!==void 0)return t;Qp(e,"NodeInjector")}function Z0(t,e,n,i){if(n&oe.Optional&&i===void 0&&(i=null),!(n&(oe.Self|oe.Host))){let r=t[To],s=Mn(void 0);try{return r?r.get(e,i,n&oe.Optional):Jx(e,i,n&oe.Optional)}finally{Mn(s)}}return q0(i,e,n)}function X0(t,e,n,i=oe.Default,r){if(t!==null){if(e[Q]&2048&&!(i&oe.Self)){let o=KN(t,e,n,i,pi);if(o!==pi)return o}let s=Q0(t,e,n,i,pi);if(s!==pi)return s}return Z0(e,n,i,r)}function Q0(t,e,n,i,r){let s=WN(n);if(typeof s=="function"){if(!P0(e,t,i))return i&oe.Host?q0(r,n,i):Z0(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&oe.Optional))Qp(n);else return o}finally{V0()}}else if(typeof s=="number"){let o=null,a=K0(t,e),l=Mo,c=i&oe.Host?e[yi][Xn]:null;for((a===-1||i&oe.SkipSelf)&&(l=a===-1?hg(t,e):e[a+8],l===Mo||!xx(i,!1)?a=-1:(o=e[ge],a=Ju(l),e=ed(l,e)));a!==-1;){let u=e[ge];if(bx(s,a,u.data)){let d=HN(a,e,n,o,i,c);if(d!==pi)return d}l=e[a+8],l!==Mo&&xx(i,e[ge].data[a+8]===c)&&bx(s,a,e)?(o=u,a=Ju(l),e=ed(l,e)):a=-1}}return r}function HN(t,e,n,i,r,s){let o=e[ge],a=o.data[t+8],l=i==null?md(a)&&Sp:i!=o&&(a.type&3)!==0,c=r&oe.Host&&s===a,u=$N(a,o,n,l,c);return u!==null?ul(e,o,u,a):pi}function $N(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(r){let f=o[l];if(f&&xs(f)&&f.type===n)return l}return null}function ul(t,e,n,i){let r=t[n],s=e.data;if(PN(r)){let o=r;o.resolving&&SA(DA(s[n]));let a=vx(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Mn(o.injectImpl):null,u=P0(t,i,oe.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&ON(n,s[n],e)}finally{c!==null&&Mn(c),vx(a),o.resolving=!1,V0()}}return r}function WN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(il)?t[il]:void 0;return typeof e=="number"?e>=0?e&$0:YN:e}function bx(t,e,n){let i=1<<t;return!!(n[e+(t>>W0)]&i)}function xx(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var ys=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return X0(this._tNode,this._lView,e,hd(i),n)}};function YN(){return new ys(An(),it())}function fg(t){return ud(()=>{let e=t.prototype.constructor,n=e[Uu]||wp(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Uu]||wp(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function wp(t){return Wx(t)?()=>{let e=wp(In(t));return e&&e()}:Io(t)}function KN(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=Q0(s,o,n,i|oe.Self,pi);if(a!==pi)return a;let l=s.parent;if(!l){let c=o[v0];if(c){let u=c.get(n,pi,i);if(u!==pi)return u}l=J0(o),o=o[Oo]}s=l}return r}function J0(t){let e=t[ge],n=e.type;return n===2?e.declTNode:n===1?t[Xn]:null}function Dx(t,e=null,n=null,i){let r=eD(t,e,n,i);return r.resolveInjectorInitializers(),r}function eD(t,e=null,n=null,i,r=new Set){let s=[n||gi,ZA(t)];return i=i||(typeof t=="object"?void 0:Xt(t)),new ol(s,e||ig(),i||null,r)}var gs=class gs{static create(e,n){if(Array.isArray(e))return Dx({name:""},n,e,"");{let i=e.name??"";return Dx({name:i},e.parent,e.providers,i)}}};gs.THROW_IF_NOT_FOUND=rl,gs.NULL=new Wu,gs.\u0275prov=Z({token:gs,providedIn:"any",factory:()=>ce(r0)}),gs.__NG_ELEMENT_ID__=-1;var Tr=gs;var qN=new ie("");qN.__NG_ELEMENT_ID__=t=>{let e=An();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(t&oe.Optional)return null;throw new K(204,!1)};var ZN="ngOriginalError";function tp(t){return t[ZN]}var bi=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&tp(e);for(;n&&tp(n);)n=tp(n);return n||null}},tD=new ie("",{providedIn:"root",factory:()=>F(bi).handleError.bind(void 0)}),pg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XN,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Mp=class extends pg{constructor(e){super(),this._lView=e}onDestroy(e){return A0(this._lView,e),()=>mN(this._lView,e)}};function XN(){return new Mp(it())}function QN(){return Dd(An(),it())}function Dd(t,e){return new Po(Qn(t,e))}var Po=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=QN;let t=e;return t})();var Es=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Ip=class extends Vt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,y0()&&(this.destroyRef=F(pg,{optional:!0})??void 0,this.pendingTasks=F(Es,{optional:!0})??void 0)}emit(e){let n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},Et=Ip;function nD(t){return(t.flags&128)===128}var iD=new Map,JN=0;function ek(){return JN++}function tk(t){iD.set(t[gd],t)}function nk(t){iD.delete(t[gd])}var Sx="__ngContext__";function ws(t,e){ms(e)?(t[Sx]=e[gd],tk(e)):t[Sx]=e}function rD(t){return oD(t[al])}function sD(t){return oD(t[qn])}function oD(t){for(;t!==null&&!tr(t);)t=t[qn];return t}var Cp;function aD(t){Cp=t}function ik(){if(Cp!==void 0)return Cp;if(typeof document<"u")return document;throw new K(210,!1)}var gg=new ie("",{providedIn:"root",factory:()=>rk}),rk="ng",mg=new ie(""),Fo=new ie("",{providedIn:"platform",factory:()=>"unknown"});var yg=new ie("",{providedIn:"root",factory:()=>ik().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sk="h",ok="b";var ak=()=>null;function vg(t,e,n=!1){return ak(t,e,n)}var lD=!1,lk=new ie("",{providedIn:"root",factory:()=>lD});var Ep=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dA})`}};function Sd(t){return t instanceof Ep?t.changingThisBreaksApplicationSecurity:t}function cD(t){return t instanceof Function?t():t}var Qi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qi||{}),ck;function bg(t,e){return ck(t,e)}function So(t,e,n,i,r){if(i!=null){let s,o=!1;tr(i)?s=i:ms(i)&&(o=!0,i=i[er]);let a=vi(i);t===0&&n!==null?r==null?pD(e,n,a):td(e,n,a,r||null,!0):t===1&&n!==null?td(e,n,a,r||null,!0):t===2?Ik(e,a,o):t===3&&e.destroyNode(a),s!=null&&Ek(e,t,s,n,r)}}function uk(t,e){return t.createText(e)}function dk(t,e,n){t.setValue(e,n)}function uD(t,e,n){return t.createElement(e,n)}function hk(t,e){dD(t,e),e[er]=null,e[Xn]=null}function fk(t,e,n,i,r,s){i[er]=r,i[Xn]=e,wd(t,i,n,1,r,s)}function dD(t,e){e[Xi].changeDetectionScheduler?.notify(8),wd(t,e,e[Tt],2,null,null)}function pk(t){let e=t[al];if(!e)return np(t[ge],t);for(;e;){let n=null;if(ms(e))n=e[al];else{let i=e[En];i&&(n=i)}if(!n){for(;e&&!e[qn]&&e!==t;)ms(e)&&np(e[ge],e),e=e[Gt];e===null&&(e=t),ms(e)&&np(e[ge],e),n=e&&e[qn]}e=n}}function gk(t,e,n,i){let r=En+i,s=n.length;i>0&&(n[r-1][qn]=e),i<s-En?(e[qn]=n[r],n0(n,En+i,e)):(n.push(e),e[qn]=null),e[Gt]=n;let o=e[Ao];o!==null&&n!==o&&hD(o,e);let a=e[No];a!==null&&a.insertView(t),bp(e),e[Q]|=128}function hD(t,e){let n=t[Zu],i=e[Gt];if(ms(i))t[Q]|=Xu.HasTransplantedViews;else{let r=i[Gt][yi];e[yi]!==r&&(t[Q]|=Xu.HasTransplantedViews)}n===null?t[Zu]=[e]:n.push(e)}function xg(t,e){let n=t[Zu],i=n.indexOf(e);n.splice(i,1)}function Tp(t,e){if(t.length<=En)return;let n=En+e,i=t[n];if(i){let r=i[Ao];r!==null&&r!==t&&xg(r,i),e>0&&(t[n-1][qn]=i[qn]);let s=$u(t,En+e);hk(i[ge],i);let o=s[No];o!==null&&o.detachView(s[ge]),i[Gt]=null,i[qn]=null,i[Q]&=-129}return i}function fD(t,e){if(!(e[Q]&256)){let n=e[Tt];n.destroyNode&&wd(t,e,n,3,null,null),pk(e)}}function np(t,e){if(e[Q]&256)return;let n=Ee(null);try{e[Q]&=-129,e[Q]|=256,e[Cn]&&du(e[Cn]),yk(t,e),mk(t,e),e[ge].type===1&&e[Tt].destroy();let i=e[Ao];if(i!==null&&tr(e[Gt])){i!==e[Gt]&&xg(i,e);let r=e[No];r!==null&&r.detachView(t)}nk(e)}finally{Ee(n)}}function mk(t,e){let n=t.cleanup,i=e[Ku];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[Ku]=null);let r=e[Ir];if(r!==null){e[Ir]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function yk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof cl)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];fi(4,a,l);try{l.call(a)}finally{fi(5,a,l)}}else{fi(4,r,s);try{s.call(r)}finally{fi(5,r,s)}}}}}function vk(t,e,n){return bk(t,e.parent,n)}function bk(t,e,n){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return n[er];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===mi.None||s===mi.Emulated)return null}return Qn(i,n)}}function td(t,e,n,i,r){t.insertBefore(e,n,i,r)}function pD(t,e,n){t.appendChild(e,n)}function wx(t,e,n,i,r){i!==null?td(t,e,n,i,r):pD(t,e,n)}function xk(t,e,n,i){t.removeChild(e,n,i)}function Dg(t,e){return t.parentNode(e)}function Dk(t,e){return t.nextSibling(e)}function Sk(t,e,n){return Mk(t,e,n)}function wk(t,e,n){return t.type&40?Qn(t,n):null}var Mk=wk,Mx;function Sg(t,e,n,i){let r=vk(t,i,e),s=e[Tt],o=i.parent||e[Xn],a=Sk(o,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)wx(s,r,n[l],a,!1);else wx(s,r,n,a,!1);Mx!==void 0&&Mx(s,i,e,n,r)}function zu(t,e){if(e!==null){let n=e.type;if(n&3)return Qn(e,t);if(n&4)return Ap(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return zu(t,i);{let r=t[e.index];return tr(r)?Ap(-1,r):vi(r)}}else{if(n&32)return bg(e,t)()||vi(t[e.index]);{let i=gD(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ds(t[yi]);return zu(r,i)}else return zu(t,e.next)}}}return null}function gD(t,e){if(e!==null){let i=t[yi][Xn],r=e.projection;return i.projection[r]}return null}function Ap(t,e){let n=En+t+1;if(n<e.length){let i=e[n],r=i[ge].firstChild;if(r!==null)return zu(i,r)}return e[bs]}function Ik(t,e,n){let i=Dg(t,e);i&&xk(t,i,e,n)}function wg(t,e,n,i,r,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=i[n.index],l=n.type;if(o&&e===0&&(a&&ws(vi(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)wg(t,e,n.child,i,r,s,!1),So(e,t,r,a,s);else if(l&32){let c=bg(n,i),u;for(;u=c();)So(e,t,r,u,s);So(e,t,r,a,s)}else l&16?Ck(t,e,i,n,r,s):So(e,t,r,a,s);n=o?n.projectionNext:n.next}}function wd(t,e,n,i,r,s){wg(n,i,t.firstChild,e,r,s,!1)}function Ck(t,e,n,i,r,s){let o=n[yi],l=o[Xn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];So(e,t,r,u,s)}else{let c=l,u=o[Gt];nD(i)&&(c.flags|=128),wg(t,e,c,u,r,s,!0)}}function Ek(t,e,n,i,r){let s=n[bs],o=vi(n);s!==o&&So(e,t,i,s,r);for(let a=En;a<n.length;a++){let l=n[a];wd(l[ge],l,t,e,i,s)}}function Tk(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:Qi.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Qi.Important),t.setStyle(n,i,r,s))}}function Ak(t,e,n){t.setAttribute(e,"style",n)}function mD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function yD(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&hp(t,e,i),r!==null&&mD(t,e,r),s!==null&&Ak(t,e,s)}var Ts={};function ln(t=1){vD(xi(),it(),_o()+t,!1)}function vD(t,e,n,i){if(!i)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ju(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Vu(e,s,0,n)}Ss(n)}function cn(t,e=oe.Default){let n=it();if(n===null)return ce(t,e);let i=An();return X0(i,n,In(t),e)}function bD(t,e,n,i,r,s){let o=Ee(null);try{let a=null;r&Cr.SignalBased&&(a=e[i][xr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&Cr.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):D0(e,a,i,s)}finally{Ee(o)}}function Nk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Ss(~r);else{let s=r,o=n[++i],a=n[++i];TN(o,s);let l=e[s];a(2,l)}}}finally{Ss(-1)}}function Md(t,e,n,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[er]=r,d[Q]=i|4|128|8|64,(c!==null||t&&t[Q]&2048)&&(d[Q]|=2048),E0(d),d[Gt]=d[Oo]=t,d[Zn]=n,d[Xi]=o||t&&t[Xi],d[Tt]=a||t&&t[Tt],d[To]=l||t&&t[To]||null,d[Xn]=s,d[gd]=ek(),d[Yu]=u,d[v0]=c,d[yi]=e.type==2?t[yi]:d,d}function Id(t,e,n,i,r){let s=t.data[e];if(s===null)s=kk(t,e,n,i,r),EN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=wN();s.injectorIndex=o===null?-1:o.injectorIndex}return yl(s,!0),s}function kk(t,e,n,i,r){let s=R0(),o=L0(),a=o?s:s&&s.parent,l=t.data[e]=Pk(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function xD(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function DD(t,e,n,i,r){let s=_o(),o=i&2;try{Ss(-1),o&&e.length>Er&&vD(t,e,Er,!1),fi(o?2:0,r),n(i,r)}finally{Ss(s),fi(o?3:1,r)}}function SD(t,e,n){if(x0(e)){let i=Ee(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{Ee(i)}}}function wD(t,e,n){k0()&&(Gk(t,e,n,Qn(n,e)),(n.flags&64)===64&&AD(t,e,n))}function MD(t,e,n=Qn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function ID(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Mg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Mg(t,e,n,i,r,s,o,a,l,c,u){let d=Er+i,h=d+r,f=Rk(d,h),p=typeof c=="function"?c():c;return f[ge]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function Rk(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Ts);return n}function Lk(t,e,n,i){let s=i.get(lk,lD)||n===mi.ShadowDom,o=t.selectRootElement(e,s);return Ok(o),o}function Ok(t){_k(t)}var _k=()=>null;function Pk(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return xN()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ix(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,l=Cr.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(r!==null){if(!r.hasOwnProperty(s))continue;c=r[s]}t===0?Cx(i,n,c,a,l):Cx(i,n,c,a)}return i}function Cx(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function Fk(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=Ix(0,d.inputs,u,l,f),c=Ix(1,d.outputs,u,c,p);let m=l!==null&&o!==null&&!tg(e)?Xk(l,u,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Bk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function CD(t,e,n,i,r,s,o,a){let l=Qn(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(Ig(t,n,u,i,r),md(e)&&jk(n,e.index)):e.type&3?(i=Bk(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function jk(t,e){let n=Cs(e,t);n[Q]&16||(n[Q]|=64)}function ED(t,e,n,i){if(k0()){let r=i===null?null:{"":-1},s=Hk(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&TD(t,e,n,o,r,a),r&&$k(n,i,r)}n.mergedAttrs=sl(n.mergedAttrs,n.attrs)}function TD(t,e,n,i,r,s){for(let c=0;c<i.length;c++)UN(Y0(n,e),t,i[c].type);Yk(n,t.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=xD(t,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=sl(n.mergedAttrs,u.hostAttrs),Kk(t,n,e,l,u),Wk(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Fk(t,n,s)}function Vk(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;zk(o)!=a&&o.push(a),o.push(n,i,s)}}function zk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Gk(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;md(n)&&qk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Y0(n,e),ws(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let l=t.data[a],c=ul(e,t,a,n);if(ws(c,e),o!==null&&Zk(e,a-r,c,l,n,o),xs(l)){let u=Cs(n.index,e);u[Zn]=ul(e,t,a,n)}}}function AD(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=AN();try{Ss(s);for(let a=i;a<r;a++){let l=t.data[a],c=e[a];xp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Uk(l,c)}}finally{Ss(-1),xp(o)}}function Uk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Hk(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(zA(e,o.selectors,!1))if(i||(i=[]),xs(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;Np(t,e,l)}else i.unshift(o),Np(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Np(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $k(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new K(-301,!1);i.push(e[r],s)}}}function Wk(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;xs(e)&&(n[""]=t)}}function Yk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Kk(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=Io(r.type,!0)),o=new cl(s,xs(r),cn);t.blueprint[i]=o,n[i]=o,Vk(t,e,i,xD(t,n,r.hostVars,Ts),r)}function qk(t,e,n){let i=Qn(e,t),r=ID(n),s=t[Xi].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Cd(t,Md(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function Zk(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];bD(i,n,l,c,u,d)}}function Xk(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function ND(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function kD(t,e){let n=t.contentQueries;if(n!==null){let i=Ee(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];_0(s),a.contentQueries(2,e[o],o)}}}finally{Ee(i)}}}function Cd(t,e){return t[al]?t[px][qn]=e:t[al]=e,t[px]=e,e}function kp(t,e,n){_0(0);let i=Ee(null);try{e(t,n)}finally{Ee(i)}}function Qk(t){return t[Ku]??=[]}function Jk(t){return t.cleanup??=[]}function RD(t,e){let n=t[To],i=n?n.get(bi,null):null;i&&i.handleError(e)}function Ig(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],c=e[o],u=t.data[o];bD(u,c,i,a,l,r)}}function eR(t,e,n){let i=I0(e,t);dk(t[Tt],i,n)}function tR(t,e){let n=Cs(e,t),i=n[ge];nR(i,n);let r=n[er];r!==null&&n[Yu]===null&&(n[Yu]=vg(r,n[To])),Cg(i,n,n[Zn])}function nR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cg(t,e,n){ag(e);try{let i=t.viewQuery;i!==null&&kp(1,i,n);let r=t.template;r!==null&&DD(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[No]?.finishViewCreation(t),t.staticContentQueries&&kD(t,e),t.staticViewQueries&&kp(2,t.viewQuery,n);let s=t.components;s!==null&&iR(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Q]&=-5,lg()}}function iR(t,e){for(let n=0;n<e.length;n++)tR(t,e[n])}function rR(t,e,n,i){let r=Ee(null);try{let s=e.tView,a=t[Q]&4096?4096:16,l=Md(t,s,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[e.index];l[Ao]=c;let u=t[No];return u!==null&&(l[No]=u.createEmbeddedView(s)),Cg(s,l,n),l}finally{Ee(r)}}function Ex(t,e){return!e||e.firstChild===null||nD(t)}function sR(t,e,n,i=!0){let r=e[ge];if(gk(r,e,t,n),i){let o=Ap(n,t),a=e[Tt],l=Dg(a,t[bs]);l!==null&&fk(r,t[Xn],a,e,l,o)}let s=e[Yu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function nd(t,e,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&i.push(vi(s)),tr(s)&&oR(s,i);let o=n.type;if(o&8)nd(t,e,n.child,i);else if(o&32){let a=bg(n,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=gD(e,n);if(Array.isArray(a))i.push(...a);else{let l=Ds(e[yi]);nd(l[ge],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function oR(t,e){for(let n=En;n<t.length;n++){let i=t[n],r=i[ge].firstChild;r!==null&&nd(i[ge],i,r,e)}t[bs]!==t[er]&&e.push(t[bs])}var LD=[];function aR(t){return t[Cn]??lR(t)}function lR(t){let e=LD.pop()??Object.create(uR);return e.lView=t,e}function cR(t){t.lView[Cn]!==t&&(t.lView=null,LD.push(t))}var uR=N(M({},Qa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{vd(t.lView)},consumerOnSignalRead(){this.lView[Cn]=this}});function dR(t){let e=t[Cn]??Object.create(hR);return e.lView=t,e}var hR=N(M({},Qa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ds(t.lView);for(;e&&!OD(e[ge]);)e=Ds(e);e&&T0(e)},consumerOnSignalRead(){this.lView[Cn]=this}});function OD(t){return t.type!==2}var fR=100;function _D(t,e=!0,n=0){let i=t[Xi],r=i.rendererFactory,s=!1;s||r.begin?.();try{pR(t,n)}catch(o){throw e&&RD(t,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function pR(t,e){let n=O0();try{mx(!0),Rp(t,e);let i=0;for(;ll(t);){if(i===fR)throw new K(103,!1);i++,Rp(t,1)}}finally{mx(n)}}function gR(t,e,n,i){let r=e[Q];if((r&256)===256)return;let s=!1,o=!1;!s&&e[Xi].inlineEffectRunner?.flush(),ag(e);let a=!0,l=null,c=null;s||(OD(t)?(c=aR(e),l=cu(c)):mb()===null?(a=!1,c=dR(e),l=cu(c)):e[Cn]&&(du(e[Cn]),e[Cn]=null));try{E0(e),IN(t.bindingStartIndex),n!==null&&DD(t,e,n,2,i);let u=(r&3)===3;if(!s)if(u){let f=t.preOrderCheckHooks;f!==null&&ju(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Vu(e,f,0,null),Qf(e,0)}if(o||mR(e),PD(e,0),t.contentQueries!==null&&kD(t,e),!s)if(u){let f=t.contentCheckHooks;f!==null&&ju(e,f)}else{let f=t.contentHooks;f!==null&&Vu(e,f,1),Qf(e,1)}Nk(t,e);let d=t.components;d!==null&&BD(e,d,0);let h=t.viewQuery;if(h!==null&&kp(2,h,i),!s)if(u){let f=t.viewCheckHooks;f!==null&&ju(e,f)}else{let f=t.viewHooks;f!==null&&Vu(e,f,2),Qf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bu]){for(let f of e[Bu])f();e[Bu]=null}s||(e[Q]&=-73)}catch(u){throw s||vd(e),u}finally{c!==null&&(Rf(c,l),a&&cR(c)),lg()}}function PD(t,e){for(let n=rD(t);n!==null;n=sD(n))for(let i=En;i<n.length;i++){let r=n[i];FD(r,e)}}function mR(t){for(let e=rD(t);e!==null;e=sD(e)){if(!(e[Q]&Xu.HasTransplantedViews))continue;let n=e[Zu];for(let i=0;i<n.length;i++){let r=n[i];T0(r)}}}function yR(t,e,n){let i=Cs(e,t);FD(i,n)}function FD(t,e){sg(t)&&Rp(t,e)}function Rp(t,e){let i=t[ge],r=t[Q],s=t[Cn],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&uu(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)gR(i,t,i.template,t[Zn]);else if(r&8192){PD(t,1);let a=i.components;a!==null&&BD(t,a,1)}}function BD(t,e,n){for(let i=0;i<e.length;i++)yR(t,e[i],n)}function Eg(t,e){let n=O0()?64:1088;for(t[Xi].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let i=Ds(t);if(yp(t)&&!i)return t;t=i}return null}var Ms=class{get rootNodes(){let e=this._lView,n=e[ge];return nd(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if(tr(e)){let n=e[qu],i=n?n.indexOf(this):-1;i>-1&&(Tp(e,i),$u(n,i))}this._attachedToViewContainer=!1}fD(this._lView[ge],this._lView)}onDestroy(e){A0(this._lView,e)}markForCheck(){Eg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){bp(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,_D(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=yp(this._lView),n=this._lView[Ao];n!==null&&!e&&xg(n,this._lView),dD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let n=yp(this._lView),i=this._lView[Ao];i!==null&&!n&&hD(i,this._lView),bp(this._lView)}},Ed=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xR;let t=e;return t})(),vR=Ed,bR=class extends vR{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=rR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Ms(r)}};function xR(){return DR(An(),it())}function DR(t,e){return t.type&4?new bR(e,t,Dd(t,e)):null}var Y3=new RegExp(`^(\\d+)*(${ok}|${sk})*(.*)`);var SR=()=>null;function Tx(t,e){return SR(t,e)}var dl=class{},Tg=new ie("",{providedIn:"root",factory:()=>!1});var jD=new ie(""),Lp=class{},id=class{};function wR(t){let e=Error(`No component factory found for ${Xt(t)}.`);return e[MR]=t,e}var MR="ngComponent";var Op=class{resolveComponentFactory(e){throw wR(e)}},Bg=class Bg{};Bg.NULL=new Op;var ko=Bg,Ro=class{};var IR=(()=>{let e=class e{};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var Ax=new Set;function vl(t){Ax.has(t)||(Ax.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function VD(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof ap.requestAnimationFrame=="function"&&ap.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function Nx(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function kx(...t){}var Ke=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,TR(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,CR,kx,kx);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},CR={};function Ag(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ER(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{VD(()=>{t.callbackScheduled=!1,_p(t),t.isCheckStableRunning=!0,Ag(t),t.isCheckStableRunning=!1})}),_p(t))}function TR(t){let e=()=>{ER(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(AR(a))return n.invokeTask(r,s,o,a);try{return Rx(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Lx(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return Rx(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!NR(a)&&e(),Lx(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,_p(t),Ag(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function _p(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Rx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Lx(t){t._nesting--,Ag(t)}var Pp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function AR(t){return zD(t,"__ignore_ng_zone__")}function NR(t){return zD(t,"__scheduler_tick__")}function zD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var GD=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Fp(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=lp(r,a);else if(s==2){let l=a,c=e[++o];i=lp(i,l+": "+c+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var rd=class extends ko{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vs(e);return new hl(n,this.ngModule)}};function Ox(t,e){let n=[];for(let i in t){if(!t.hasOwnProperty(i))continue;let r=t[i];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:Cr.None;e?n.push({propName:o,templateName:i,isSignal:(a&Cr.SignalBased)!==0}):n.push({propName:o,templateName:i})}return n}function kR(t){let e=t.toLowerCase();return e==="svg"?hN:e==="math"?fN:null}var hl=class extends id{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=Ox(e.inputs,!0);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return Ox(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$A(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=Ee(null);try{r=r||this.ngModule;let o=r instanceof Tn?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Dp(e,o):e,l=a.get(Ro,null);if(l===null)throw new K(407,!1);let c=a.get(IR,null),u=a.get(GD,null),d=a.get(dl,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=i?Lk(f,i,this.componentDef.encapsulation,a):uD(f,p,kR(p)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let v=null;m!==null&&(v=vg(m,a,!0));let x=Mg(0,null,null,1,0,null,null,null,null,null,null),D=Md(null,x,null,y,null,null,h,f,a,null,v);ag(D);let S,w;try{let I=this.componentDef,C,T=null;I.findHostDirectiveDefs?(C=[],T=new Map,I.findHostDirectiveDefs(I,C,T),C.push(I)):C=[I];let E=RR(D,m),A=LR(E,m,I,C,D,h,f);w=C0(x,Er),m&&PR(f,I,m,i),n!==void 0&&FR(w,this.ngContentSelectors,n),S=_R(A,I,C,T,D,[BR]),Cg(x,D,null)}finally{lg()}return new Bp(this.componentType,S,Dd(w,D),D,w)}finally{Ee(s)}}},Bp=class extends Lp{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ms(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ig(s[ge],s,r,e,n),this.previousInputValues.set(e,n);let o=Cs(this._tNode.index,s);Eg(o,1)}}get injector(){return new ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RR(t,e){let n=t[ge],i=Er;return t[i]=e,Id(n,i,2,"#host",null)}function LR(t,e,n,i,r,s,o){let a=r[ge];OR(i,t,e,o);let l=null;e!==null&&(l=vg(e,r[To]));let c=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Md(r,ID(n),null,u,r[t.index],t,s,c,null,null,l);return a.firstCreatePass&&Np(a,t,i.length-1),Cd(r,d),r[t.index]=d}function OR(t,e,n,i){for(let r of t)e.mergedAttrs=sl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Fp(e,e.mergedAttrs,!0),n!==null&&yD(i,n,e))}function _R(t,e,n,i,r,s){let o=An(),a=r[ge],l=Qn(o,r);TD(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=ul(r,a,d,o);ws(h,r)}AD(a,r,o),l&&ws(l,r);let c=ul(r,a,o.directiveStart+o.componentOffset,o);if(t[Zn]=r[Zn]=c,s!==null)for(let u of s)u(c,e);return SD(a,o,r),c}function PR(t,e,n,i){if(i)hp(t,n,["ng-version","18.1.0"]);else{let{attrs:r,classes:s}=WA(e.selectors[0]);r&&hp(t,n,r),s&&s.length>0&&mD(t,n,s.join(" "))}}function FR(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function BR(){let t=An();dg(it()[ge],t)}var Bo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jR;let t=e;return t})();function jR(){let t=An();return zR(t,it())}var VR=Bo,UD=class extends VR{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Dd(this._hostTNode,this._hostLView)}get injector(){return new ys(this._hostTNode,this._hostLView)}get parentInjector(){let e=hg(this._hostTNode,this._hostLView);if(H0(e)){let n=ed(e,this._hostLView),i=Ju(e),r=n[ge].data[i+8];return new ys(r,n)}else return new ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_x(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Tx(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Ex(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!lN(e),a;if(o)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new hl(vs(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?c:this.parentInjector).get(Tn,null);m&&(s=m)}let u=vs(l.componentType??{}),d=Tx(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,r,h,s);return this.insertImpl(f.hostView,a,Ex(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(pN(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Gt],c=new UD(l,l[Xn],l[Gt]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return sR(o,r,s,i),e.attachToViewContainerRef(),n0(ip(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_x(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Tp(this._lContainer,n);i&&($u(ip(this._lContainer),n),fD(i[ge],i))}detach(e){let n=this._adjustIndex(e,-1),i=Tp(this._lContainer,n);return i&&$u(ip(this._lContainer),n)!=null?new Ms(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function _x(t){return t[qu]}function ip(t){return t[qu]||(t[qu]=[])}function zR(t,e){let n,i=e[t.index];return tr(i)?n=i:(n=ND(i,e,null,t),e[t.index]=n,Cd(e,n)),UR(n,e,t,i),new UD(n,t,e)}function GR(t,e){let n=t[Tt],i=n.createComment(""),r=Qn(e,t),s=Dg(n,r);return td(n,s,i,Dk(n,r),!1),i}var UR=WR,HR=()=>!1;function $R(t,e,n){return HR(t,e,n)}function WR(t,e,n,i){if(t[bs])return;let r;n.type&8?r=vi(i):r=GR(e,n),t[bs]=r}function YR(t){return typeof t=="function"&&t[xr]!==void 0}function kr(t,e){vl("NgSignals");let n=Eb(t),i=n[xr];return e?.equal&&(i.equal=e.equal),n.set=r=>Lf(i,r),n.update=r=>Tb(i,r),n.asReadonly=KR.bind(n),n}function KR(){let t=this[xr];if(t.readonlyFn===void 0){let e=()=>this();e[xr]=t,t.readonlyFn=e}return t.readonlyFn}function HD(t){return YR(t)&&typeof t.set=="function"}function qR(t){return Object.getPrototypeOf(t.prototype).constructor}function Ng(t){let e=qR(t.type),n=!0,i=[t];for(;e;){let r;if(xs(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=_u(t.inputs),o.inputTransforms=_u(t.inputTransforms),o.declaredInputs=_u(t.declaredInputs),o.outputs=_u(t.outputs);let a=r.hostBindings;a&&eL(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&QR(t,l),c&&JR(t,c),ZR(t,r),fA(t.outputs,r.outputs),xs(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ng&&(n=!1)}}e=Object.getPrototypeOf(e)}XR(i)}function ZR(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function XR(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=sl(r.hostAttrs,n=sl(n,r.hostAttrs))}}function _u(t){return t===Co?{}:t===gi?[]:t}function QR(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function JR(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function eL(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var Ar=class{},fl=class{};var jp=class extends Ar{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rd(this);let r=d0(e);this._bootstrapComponents=cD(r.bootstrap),this._r3Injector=eD(e,n,[{provide:Ar,useValue:this},{provide:ko,useValue:this.componentFactoryResolver},...i],Xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Vp=class extends fl{constructor(e){super(),this.moduleType=e}create(e){return new jp(this.moduleType,e,[])}};var sd=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new rd(this),this.instance=null;let n=new ol([...e.providers,{provide:Ar,useValue:this},{provide:ko,useValue:this.componentFactoryResolver}],e.parent||ig(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kg(t,e,n=null){return new sd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function $D(t){return nL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function tL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function nL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Td(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function iL(t){return(t.flags&32)===32}function rL(t,e,n,i,r,s,o,a,l){let c=e.consts,u=Id(e,t,4,o||null,a||null);ED(e,n,u,Qu(c,l)),dg(e,u);let d=u.tView=Mg(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function sL(t,e,n,i,r,s,o,a,l,c){let u=n+Er,d=e.firstCreatePass?rL(u,e,t,i,r,s,o,a,l):e.data[u];yl(d,!1);let h=oL(e,t,d,n);cg()&&Sg(e,t,h,d),ws(h,t);let f=ND(h,t,h,d);return t[u]=f,Cd(t,f),$R(f,d,t),rg(d)&&wD(e,t,d),l!=null&&MD(t,d,c),d}function bl(t,e,n,i,r,s,o,a){let l=it(),c=xi(),u=Qu(c.consts,s);return sL(l,c,t,e,n,i,r,u,o,a),bl}var oL=aL;function aL(t,e,n,i){return ug(!0),e[Tt].createComment("")}function lL(t,e,n,i){return Td(t,og(),n)?e+Xx(n)+i:Ts}function Pu(t,e){return t<<17|e<<2}function Is(t){return t>>17&32767}function cL(t){return(t&2)==2}function uL(t,e){return t&131071|e<<17}function zp(t){return t|2}function Lo(t){return(t&131068)>>2}function rp(t,e){return t&-131069|e<<2}function dL(t){return(t&1)===1}function Gp(t){return t|1}function hL(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Is(o),l=Lo(o);t[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||gl(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=Is(t[a+1]);t[i+1]=Pu(h,a),h!==0&&(t[h+1]=rp(t[h+1],i)),t[a+1]=uL(t[a+1],i)}else t[i+1]=Pu(a,0),a!==0&&(t[a+1]=rp(t[a+1],i)),a=i;else t[i+1]=Pu(l,0),a===0?a=i:t[l+1]=rp(t[l+1],i),l=i;c&&(t[i+1]=zp(t[i+1])),Px(t,u,i,!0),Px(t,u,i,!1),fL(e,u,t,i,s),o=Pu(a,l),s?e.classBindings=o:e.styleBindings=o}function fL(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&gl(s,e)>=0&&(n[i+1]=Gp(n[i+1]))}function Px(t,e,n,i){let r=t[n+1],s=e===null,o=i?Is(r):Lo(r),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],c=t[o+1];pL(l,e)&&(a=!0,t[o+1]=i?Gp(c):zp(c)),o=i?Is(c):Lo(c)}a&&(t[n+1]=i?zp(r):Gp(r))}function pL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?gl(t,e)>=0:!1}var zt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gL(t){return t.substring(zt.key,zt.keyEnd)}function mL(t){return t.substring(zt.value,zt.valueEnd)}function yL(t){return vL(t),WD(t,od(t,0,zt.textEnd))}function WD(t,e){let n=zt.textEnd,i=zt.key=od(t,e,n);return n===i?-1:(i=zt.keyEnd=bL(t,i,n),i=Fx(t,i,n,58),i=zt.value=od(t,i,n),i=zt.valueEnd=xL(t,i,n),Fx(t,i,n,59))}function vL(t){zt.key=0,zt.keyEnd=0,zt.value=0,zt.valueEnd=0,zt.textEnd=t.length}function od(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function bL(t,e,n){let i;for(;e<n&&((i=t.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function Fx(t,e,n,i){return e=od(t,e,n),e<n&&e++,e}function xL(t,e,n){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<n;){let l=t.charCodeAt(o++);if(l===59)return a;l===34||l===39?a=o=Bx(t,l,o,n):e===o-4&&s===85&&r===82&&i===76&&l===40?a=o=Bx(t,41,o,n):l>32&&(a=o),s=r,r=i,i=l&-33}return a}function Bx(t,e,n,i){let r=-1,s=n;for(;s<i;){let o=t.charCodeAt(s++);if(o==e&&r!==92)return s;o==92&&r===92?r=0:r=o}throw new Error}function jo(t,e,n){let i=it(),r=og();if(Td(i,r,e)){let s=xi(),o=z0();CD(s,o,i,t,e,i[Tt],n,!1)}return jo}function Up(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";Ig(t,n,s[o],o,i)}function YD(t){SL(qD,DL,t,!1)}function DL(t,e){for(let n=yL(e);n>=0;n=WD(e,n))qD(t,gL(e),mL(e))}function SL(t,e,n,i){let r=xi(),s=CN(2);r.firstUpdatePass&&wL(r,null,s,i);let o=it();if(n!==Ts&&Td(o,s,n)){let a=r.data[_o()];if(ZD(a,i)&&!KD(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=lp(l,n||"")),Up(r,a,o,n,i)}else AL(r,a,o,o[Tt],o[s+1],o[s+1]=TL(t,e,n),i,s)}}function KD(t,e){return e>=t.expandoStartIndex}function wL(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[_o()],o=KD(t,n);ZD(s,i)&&e===null&&!o&&(e=!1),e=ML(r,s,e,i),hL(r,s,e,n,o,i)}}function ML(t,e,n,i){let r=NN(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=sp(null,t,e,n,i),n=pl(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=sp(r,t,e,n,i),s===null){let l=IL(t,e,i);l!==void 0&&Array.isArray(l)&&(l=sp(null,t,e,l[1],i),l=pl(l,e.attrs,i),CL(t,e,i,l))}else s=EL(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function IL(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Lo(i)!==0)return t[Is(i)]}function CL(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Is(r)]=i}function EL(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=pl(i,o,n)}return pl(i,e.attrs,n)}function sp(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=pl(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function pl(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),i0(t,o,n?!0:e[++s]))}return t===void 0?null:t}function TL(t,e,n){if(n==null||n==="")return gi;let i=[],r=Sd(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function qD(t,e,n){i0(t,e,Sd(n))}function AL(t,e,n,i,r,s,o,a){r===Ts&&(r=gi);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,f=c<s.length?s[c+1]:void 0,p=null,m;u===d?(l+=2,c+=2,h!==f&&(p=d,m=f)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,m=f),p!==null&&NL(t,e,n,i,p,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function NL(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=dL(c)?jx(l,e,n,r,Lo(c),o):void 0;if(!ad(u)){ad(s)||cL(c)&&(s=jx(l,null,n,r,a,o));let d=I0(_o(),n);Tk(i,o,d,r,s)}}function jx(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===Ts&&(h=d?gi:void 0);let f=d?Zf(h,i):u===i?h:void 0;if(c&&!ad(f)&&(f=Zf(l,i)),ad(f)&&(a=f,o))return a;let p=t[r+1];r=o?Is(p):Lo(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Zf(l,i))}return a}function ad(t){return t!==void 0}function ZD(t,e){return(t.flags&(e?8:16))!==0}function kL(t,e,n,i,r,s){let o=e.consts,a=Qu(o,r),l=Id(e,t,2,i,a);return ED(e,n,l,Qu(o,s)),l.attrs!==null&&Fp(l,l.attrs,!1),l.mergedAttrs!==null&&Fp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Ue(t,e,n,i){let r=it(),s=xi(),o=Er+t,a=r[Tt],l=s.firstCreatePass?kL(o,s,r,e,n,i):s.data[o],c=RL(s,r,l,a,e,t);r[o]=c;let u=rg(l);return yl(l,!0),yD(a,c,l),!iL(l)&&cg()&&Sg(s,r,c,l),yN()===0&&ws(c,r),vN(),u&&(wD(s,r,l),SD(s,l,r)),i!==null&&MD(r,l),Ue}function qe(){let t=An();L0()?MN():(t=t.parent,yl(t,!1));let e=t;DN(e)&&SN(),bN();let n=xi();return n.firstCreatePass&&(dg(n,t),x0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&FN(e)&&Up(n,e,it(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&BN(e)&&Up(n,e,it(),e.stylesWithoutHost,!1),qe}function Di(t,e,n,i){return Ue(t,e,n,i),qe(),Di}var RL=(t,e,n,i,r,s)=>(ug(!0),uD(i,r,LN()));function Rg(){return it()}var ld="en-US";var LL=ld;function OL(t){typeof t=="string"&&(LL=t.toLowerCase().replace(/_/g,"-"))}var _L=(t,e,n)=>{};function Si(t,e,n,i){let r=it(),s=xi(),o=An();return XD(s,r,r[Tt],o,t,e,i),Si}function PL(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[Ku],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function XD(t,e,n,i,r,s,o){let a=rg(i),c=t.firstCreatePass&&Jk(t),u=e[Zn],d=Qk(e),h=!0;if(i.type&3||o){let m=Qn(i,e),y=o?o(m):m,v=d.length,x=o?S=>o(vi(S[i.index])):i.index,D=null;if(!o&&a&&(D=PL(t,e,r,i.index)),D!==null){let S=D.__ngLastListenerFn__||D;S.__ngNextListenerFn__=s,D.__ngLastListenerFn__=s,h=!1}else{s=zx(i,e,u,s),_L(m,r,s);let S=n.listen(y,r,s);d.push(s,S),c&&c.push(r,x,v,v+1)}}else s=zx(i,e,u,s);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let m=p.length;if(m)for(let y=0;y<m;y+=2){let v=p[y],x=p[y+1],w=e[v][x].subscribe(s),I=d.length;d.push(s,w),c&&c.push(r,i.index,I,-(I+1))}}}function Vx(t,e,n,i){let r=Ee(null);try{return fi(6,e,n),n(i)!==!1}catch(s){return RD(t,s),!1}finally{fi(7,e,n),Ee(r)}}function zx(t,e,n,i){return function r(s){if(s===Function)return i;let o=t.componentOffset>-1?Cs(t.index,e):e;Eg(o,5);let a=Vx(e,n,i,s),l=r.__ngNextListenerFn__;for(;l;)a=Vx(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function Vo(t=1){return RN(t)}function un(t,e=""){let n=it(),i=xi(),r=t+Er,s=i.firstCreatePass?Id(i,r,1,e,null):i.data[r],o=FL(i,n,s,e,t);n[r]=o,cg()&&Sg(i,n,o,s),yl(s,!1)}var FL=(t,e,n,i,r)=>(ug(!0),uk(e[Tt],i));function Ad(t){return Nd("",t,""),Ad}function Nd(t,e,n){let i=it(),r=lL(i,t,e,n);return r!==Ts&&eR(i,_o(),r),Nd}function zo(t,e,n){HD(e)&&(e=e());let i=it(),r=og();if(Td(i,r,e)){let s=xi(),o=z0();CD(s,o,i,t,e,i[Tt],n,!1)}return zo}function xl(t,e){let n=HD(t);return n&&t.set(e),n}function Go(t,e){let n=it(),i=xi(),r=An();return XD(i,n,n[Tt],r,t,e),Go}var BL=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=p0(!1,i.type),s=r.length>0?kg([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Z({token:e,providedIn:"environment",factory:()=>new e(ce(Tn))});let t=e;return t})();function Rr(t){vl("NgStandalone"),t.getStandaloneInjector=e=>e.get(BL).getOrCreateStandaloneInjector(t)}var kd=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var QD=new ie("");function Dl(t){return!!t&&typeof t.then=="function"}function JD(t){return!!t&&typeof t.subscribe=="function"}var eS=new ie(""),tS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=F(eS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(Dl(o))i.push(o);else if(JD(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lg=new ie("");function jL(){Cb(()=>{throw new K(600,!1)})}function VL(t){return t.isBoundToModule}var zL=10;function GL(t,e,n){try{let i=n();return Dl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Uo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(tD),this.afterRenderEffectManager=F(GD),this.zonelessEnabled=F(Tg),this.externalTestViews=new Set,this.beforeRender=new Vt,this.afterTick=new Vt,this.componentTypes=[],this.components=[],this.isStable=F(Es).hasPendingTasks.pipe(pe(i=>!i)),this._injector=F(Tn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof id;if(!this._injector.get(tS).done){let f=!s&&u0(i),p=!1;throw new K(405,p)}let a;s?a=i:a=this._injector.get(ko).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=VL(a)?void 0:this._injector.get(Ar),c=r||a.selector,u=a.create(Tr.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(QD,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),op(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new K(101,!1);let r=Ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Ee(r),this.afterTick.next()}}detectChangesInAttachedViews(i){let r=null;this._injector.destroyed||(r=this._injector.get(Ro,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<zL;){let a=s===0;if(i||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)UL(l,c,a,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>ll(l))&&(o.execute(),!this.allViews.some(({_lView:l})=>ll(l))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;op(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Lg,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>op(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new K(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function op(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UL(t,e,n,i){if(!n&&!ll(t))return;_D(t,e,n&&!i?0:1)}var Hp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Og=(()=>{let e=class e{compileModuleSync(i){return new Vp(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=d0(i),o=cD(s.declarations).reduce((a,l)=>{let c=vs(l);return c&&a.push(new hl(c)),a},[]);return new Hp(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var HL=(()=>{let e=class e{constructor(){this.zone=F(Ke),this.changeDetectionScheduler=F(dl),this.applicationRef=F(Uo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$L=new ie("",{factory:()=>!1});function nS({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ke(rS()),[{provide:Ke,useFactory:t},{provide:Eo,multi:!0,useFactory:()=>{let n=F(HL,{optional:!0});return()=>n.initialize()}},{provide:Eo,multi:!0,useFactory:()=>{let n=F(YL);return()=>{n.initialize()}}},{provide:tD,useFactory:WL},e===!0?{provide:jD,useValue:!0}:[]]}function WL(){let t=F(Ke),e=F(bi);return n=>t.runOutsideAngular(()=>e.handleError(n))}function iS(t){let e=t?.ignoreChangesOutsideZone,n=nS({ngZoneFactory:()=>{let i=rS(t);return i.shouldCoalesceEventChangeDetection&&vl("NgZone_CoalesceEvent"),new Ke(i)},ignoreChangesOutsideZone:e});return fd([{provide:$L,useValue:!0},{provide:Tg,useValue:!1},n])}function rS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var YL=(()=>{let e=class e{constructor(){this.subscription=new ct,this.initialized=!1,this.zone=F(Ke),this.pendingTasks=F(Es)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ke.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var KL=(()=>{let e=class e{constructor(){this.appRef=F(Uo),this.taskService=F(Es),this.ngZone=F(Ke),this.zonelessEnabled=F(Tg),this.disableScheduling=F(jD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ct,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pp||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;switch(i){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Nx:VD;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ke.isInAngularZone())}tick(i){if(this.runningTick||this.appRef.destroyed)return;let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(i)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(r),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Nx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qL(){return typeof $localize<"u"&&$localize.locale||ld}var _g=new ie("",{providedIn:"root",factory:()=>F(_g,oe.Optional|oe.SkipSelf)||qL()});var sS=new ie("");var Gu=null;function ZL(t=[],e){return Tr.create({name:e,providers:[{provide:pd,useValue:"platform"},{provide:sS,useValue:new Set([()=>Gu=null])},...t]})}function XL(t=[]){if(Gu)return Gu;let e=ZL(t);return Gu=e,jL(),QL(e),e}function QL(t){t.get(mg,null)?.forEach(n=>n())}var Ho=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JL;let t=e;return t})();function JL(t){return eO(An(),it(),(t&16)===16)}function eO(t,e,n){if(md(t)&&!n){let i=Cs(t.index,e);return new Ms(i,i)}else if(t.type&175){let i=e[yi];return new Ms(i,e)}return null}var $p=class{constructor(){}supports(e){return $D(e)}create(e){return new Wp(e)}},tO=(t,e)=>e,Wp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||tO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){let o=!i||n&&n.currentIndex<Gx(i,r,s)?n:i,a=Gx(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!$D(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else r=0,tL(e,a=>{o=this._trackByFn(r,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new Yp(n,i),s,r)),e}_verifyReinsertion(e,n,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new cd),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Yp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Kp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},cd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Kp,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Gx(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function Ux(){return new Pg([new $p])}var Pg=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||Ux()),deps:[[e,new t0,new Jp]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new K(901,!1)}};e.\u0275prov=Z({token:e,providedIn:"root",factory:Ux});let t=e;return t})();function oS(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=XL(i),s=[nS({}),{provide:dl,useExisting:KL},...n||[]],a=new sd({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ke);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(bi,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:f=>{c.handleError(f)}})});let d=()=>a.destroy(),h=r.get(sS);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),GL(c,l,()=>{let f=a.get(tS);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(_g,ld);OL(p||ld);let m=a.get(Uo);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var aS=new ie("");var nO=new ie("",{providedIn:"root",factory:()=>F(iO)}),iO=(()=>{let e=class e{};e.\u0275prov=Z({token:e,providedIn:"root",factory:()=>new qp});let t=e;return t})(),qp=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=F(Es),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Zp=class{constructor(e,n,i,r,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=i,this.injector=s,this.watcher=Nb(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(bi,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Fg(t,e){vl("NgSignals"),!e?.injector&&aN(Fg);let n=e?.injector??F(Tr),i=e?.manualCleanup!==!0?n.get(pg):null,r=new Zp(n.get(nO),t,typeof Zone>"u"?null:Zone.current,i,n,e?.allowSignalWrites??!1),s=n.get(Ho,null,{optional:!0});return!s||!(s._lView[Q]&8)?r.watcher.notify():(s._lView[Bu]??=[]).push(r.watcher.notify),r}var pS=null;function $o(){return pS}function gS(t){pS??=t}var Rd=class{};var dn=new ie(""),mS=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(aO),providedIn:"platform"});let t=e;return t})();var aO=(()=>{let e=class e extends mS{constructor(){super(),this._doc=F(dn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $o().getBaseHref(this._doc)}onPopState(i){let r=$o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=$o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function yS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function lS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Ns(t){return t&&t[0]!=="?"?"?"+t:t}var Od=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(vS),providedIn:"root"});let t=e;return t})(),lO=new ie(""),vS=(()=>{let e=class e extends Od{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(dn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return yS(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Ns(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Ns(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Ns(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(ce(mS),ce(lO,8))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sl=(()=>{let e=class e{constructor(i){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=dO(lS(cS(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Ns(r))}normalize(i){return e.stripTrailingSlash(uO(this._basePath,cS(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ns(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ns(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Ns,e.joinWithSlash=yS,e.stripTrailingSlash=lS,e.\u0275fac=function(r){return new(r||e)(ce(Od))},e.\u0275prov=Z({token:e,factory:()=>cO(),providedIn:"root"});let t=e;return t})();function cO(){return new Sl(ce(Od))}function uO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cS(t){return t.replace(/\/index.html$/,"")}function dO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function bS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var jg=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xS=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new jg(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let l=r.get(o);r.move(l,a),uS(l,s)}});for(let s=0,o=r.length;s<o;s++){let l=r.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);uS(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(cn(Bo),cn(Ed),cn(Pg))},e.\u0275dir=ml({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function uS(t,e){t.context.$implicit=e.item}var DS=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Vg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){dS("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){dS("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(cn(Bo),cn(Ed))},e.\u0275dir=ml({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Vg=class{constructor(){this.$implicit=null,this.ngIf=null}};function dS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Xt(e)}'.`)}var SS="browser",hO="server";function Ug(t){return t===hO}var Ld=class{};var Wg=class extends Rd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Yg=class t extends Wg{static makeCurrent(){gS(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=fO();return n==null?null:pO(n)}resetBaseElement(){wl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bS(document.cookie,e)}},wl=null;function fO(){return wl=wl||document.querySelector("base"),wl?wl.getAttribute("href"):null}function pO(t){return new URL(t,document.baseURI).pathname}var gO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),_d=new ie(""),CS=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(ce(_d),ce(Ke))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Ml=class{constructor(e){this._doc=e}},Hg="ng-app-id",ES=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ug(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Hg}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Hg),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Hg,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(ce(dn),ce(gg),ce(yg,8),ce(Fo))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),$g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qg=/%COMP%/g,TS="%COMP%",mO=`_nghost-${TS}`,yO=`_ngcontent-${TS}`,vO=!0,bO=new ie("",{providedIn:"root",factory:()=>vO});function xO(t){return yO.replace(qg,t)}function DO(t){return mO.replace(qg,t)}function AS(t,e){return e.map(n=>n.replace(qg,t))}var wS=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ug(l),this.defaultRenderer=new Il(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mi.ShadowDom&&(r=N(M({},r),{encapsulation:mi.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Pd?s.applyToHost(i):s instanceof Cl&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case mi.Emulated:o=new Pd(c,u,r,this.appId,d,a,l,h);break;case mi.ShadowDom:return new Kg(c,u,i,r,a,l,this.nonce,h);default:o=new Cl(c,u,r,d,a,l,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(ce(CS),ce(ES),ce(gg),ce(bO),ce(dn),ce(Fo),ce(Ke),ce(yg))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Il=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS($g[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(MS(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(MS(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new K(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=$g[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=$g[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Qi.DashCase|Qi.Important)?e.style.setProperty(n,i,r&Qi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Qi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=$o().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function MS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kg=class extends Il{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=AS(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cl=class extends Il{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?AS(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pd=class extends Cl{constructor(e,n,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=xO(c),this.hostAttr=DO(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},SO=(()=>{let e=class e extends Ml{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(ce(dn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),wO=(()=>{let e=class e extends Ml{constructor(i){super(i),this.delegate=F(aS,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(ce(dn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),IS=["alt","control","meta","shift"],MO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},CO=(()=>{let e=class e extends Ml{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$o().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),IS.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=MO[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),IS.forEach(a=>{if(a!==s){let l=IO[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(ce(dn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function NS(t,e){return oS(M({rootComponent:t},EO(e)))}function EO(t){return{appProviders:[...RO,...t?.providers??[]],platformProviders:kO}}function TO(){Yg.makeCurrent()}function AO(){return new bi}function NO(){return aD(document),document}var kO=[{provide:Fo,useValue:SS},{provide:mg,useValue:TO,multi:!0},{provide:dn,useFactory:NO,deps:[]}];var RO=[{provide:pd,useValue:"root"},{provide:bi,useFactory:AO,deps:[]},{provide:_d,useClass:SO,multi:!0,deps:[dn,Ke,Fo]},{provide:_d,useClass:CO,multi:!0,deps:[dn]},{provide:_d,useClass:wO,multi:!0},wS,ES,CS,{provide:Ro,useExisting:wS},{provide:Ld,useClass:gO,deps:[]},[]];var kS=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(ce(dn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re="primary",Ul=Symbol("RouteTitle"),em=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xo(t){return new em(t)}function OO(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function _O(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!wi(t[n],e[n]))return!1;return!0}function wi(t,e){let n=t?tm(t):void 0,i=e?tm(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!jS(t[r],e[r]))return!1;return!0}function tm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function jS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function VS(t){return t.length>0?t[t.length-1]:null}function Lr(t){return Uf(t)?t:Dl(t)?mt(Promise.resolve(t)):te(t)}var PO={exact:GS,subset:US},zS={exact:FO,subset:BO,ignored:()=>!0};function RS(t,e,n){return PO[n.paths](t.root,e.root,n.matrixParams)&&zS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function FO(t,e){return wi(t,e)}function GS(t,e,n){if(!Rs(t.segments,e.segments)||!jd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!GS(t.children[i],e.children[i],n))return!1;return!0}function BO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jS(t[n],e[n]))}function US(t,e,n){return HS(t,e,e.segments,n)}function HS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Rs(r,n)||e.hasChildren()||!jd(r,n,i))}else if(t.segments.length===n.length){if(!Rs(t.segments,n)||!jd(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!US(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Rs(t.segments,r)||!jd(t.segments,r,i)||!t.children[re]?!1:HS(t.children[re],e,s,i)}}function jd(t,e,n){return e.every((i,r)=>zS[n](t[r].parameters,i.parameters))}var ir=class{constructor(e=new Ne([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return zO.serialize(this)}},Ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vd(this)}},ks=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return WS(this)}};function jO(t,e){return Rs(t,e)&&t.every((n,i)=>wi(n.parameters,e[i].parameters))}function Rs(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function VO(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===re&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==re&&(n=n.concat(e(r,i)))}),n}var Em=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new Ll,providedIn:"root"});let t=e;return t})(),Ll=class{parse(e){let n=new im(e);return new ir(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${El(e.root,!0)}`,i=HO(e.queryParams),r=typeof e.fragment=="string"?`#${GO(e.fragment)}`:"";return`${n}${i}${r}`}},zO=new Ll;function Vd(t){return t.segments.map(e=>WS(e)).join("/")}function El(t,e){if(!t.hasChildren())return Vd(t);if(e){let n=t.children[re]?El(t.children[re],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==re&&i.push(`${r}:${El(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=VO(t,(i,r)=>r===re?[El(t.children[re],!1)]:[`${r}:${El(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Vd(t)}/${n[0]}`:`${Vd(t)}/(${n.join("//")})`}}function $S(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fd(t){return $S(t).replace(/%3B/gi,";")}function GO(t){return encodeURI(t)}function nm(t){return $S(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zd(t){return decodeURIComponent(t)}function LS(t){return zd(t.replace(/\+/g,"%20"))}function WS(t){return`${nm(t.path)}${UO(t.parameters)}`}function UO(t){return Object.entries(t).map(([e,n])=>`;${nm(e)}=${nm(n)}`).join("")}function HO(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Fd(n)}=${Fd(r)}`).join("&"):`${Fd(n)}=${Fd(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var $O=/^[^\/()?;#]+/;function Zg(t){let e=t.match($O);return e?e[0]:""}var WO=/^[^\/()?;=#]+/;function YO(t){let e=t.match(WO);return e?e[0]:""}var KO=/^[^=?&#]+/;function qO(t){let e=t.match(KO);return e?e[0]:""}var ZO=/^[^&#]+/;function XO(t){let e=t.match(ZO);return e?e[0]:""}var im=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[re]=new Ne(e,n)),i}parseSegment(){let e=Zg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new ks(zd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=YO(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Zg(this.remaining);r&&(i=r,this.capture(i))}e[zd(n)]=zd(i)}parseQueryParam(e){let n=qO(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=XO(this.remaining);o&&(i=o,this.capture(i))}let r=LS(n),s=LS(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Zg(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new K(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new Ne([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function YS(t){return t.segments.length>0?new Ne([],{[re]:t}):t}function KS(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=KS(r);if(i===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new Ne(t.segments,e);return QO(n)}function QO(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new Ne(t.segments.concat(e.segments),e.children)}return t}function Ol(t){return t instanceof ir}function JO(t,e,n=null,i=null){let r=qS(t);return ZS(r,e,n,i)}function qS(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new Ne(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=YS(i);return e??r}function ZS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Xg(r,r,r,n,i);let s=e_(e);if(s.toRoot())return Xg(r,r,new Ne([],{}),n,i);let o=t_(s,r,t),a=o.processChildren?Nl(o.segmentGroup,o.index,s.commands):QS(o.segmentGroup,o.index,s.commands);return Xg(r,o.segmentGroup,a,n,i)}function Gd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _l(t){return typeof t=="object"&&t!=null&&t.outlets}function Xg(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;t===e?o=n:o=XS(t,e,n);let a=YS(KS(o));return new ir(a,s,r)}function XS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=XS(s,e,n)}),new Ne(t.segments,i)}var Ud=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Gd(i[0]))throw new K(4003,!1);let r=i.find(_l);if(r&&r!==VS(i))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function e_(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ud(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Ud(n,e,i)}var Ko=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function t_(t,e,n){if(t.isAbsolute)return new Ko(e,!0,0);if(!n)return new Ko(e,!1,NaN);if(n.parent===null)return new Ko(n,!0,0);let i=Gd(t.commands[0])?0:1,r=n.segments.length-1+i;return n_(n,r,t.numberOfDoubleDots)}function n_(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new K(4005,!1);r=i.segments.length}return new Ko(i,!1,r-s)}function i_(t){return _l(t[0])?t[0].outlets:{[re]:t}}function QS(t,e,n){if(t??=new Ne([],{}),t.segments.length===0&&t.hasChildren())return Nl(t,e,n);let i=r_(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Ne(t.segments.slice(0,i.pathIndex),{});return s.children[re]=new Ne(t.segments.slice(i.pathIndex),t.children),Nl(s,0,r)}else return i.match&&r.length===0?new Ne(t.segments,{}):i.match&&!t.hasChildren()?rm(t,e,n):i.match?Nl(t,0,r):rm(t,e,n)}function Nl(t,e,n){if(n.length===0)return new Ne(t.segments,{});{let i=i_(n),r={};if(Object.keys(i).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=Nl(t.children[re],e,n);return new Ne(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=QS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ne(t.segments,r)}}function r_(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(_l(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!_S(l,c,o))return s;i+=2}else{if(!_S(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function rm(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(_l(s)){let l=s_(s.outlets);return new Ne(i,l)}if(r===0&&Gd(n[0])){let l=t.segments[e];i.push(new ks(l.path,OS(n[0]))),r++;continue}let o=_l(s)?s.outlets[re]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Gd(a)?(i.push(new ks(o,OS(a))),r+=2):(i.push(new ks(o,{})),r++)}return new Ne(i,{})}function s_(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=rm(new Ne([],{}),0,i))}),e}function OS(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function _S(t,e,n){return t==n.path&&wi(e,n.parameters)}var kl="imperative",At=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(At||{}),Nn=class{constructor(e,n){this.id=e,this.url=n}},Pl=class extends Nn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=At.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ls=class extends Nn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=At.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(fn||{}),sm=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(sm||{}),nr=class extends Nn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=At.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Os=class extends Nn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=At.NavigationSkipped}},Fl=class extends Nn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=At.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hd=class extends Nn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class extends Nn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},am=class extends Nn{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=At.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lm=class extends Nn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class extends Nn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},um=class{constructor(e){this.route=e,this.type=At.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dm=class{constructor(e){this.route=e,this.type=At.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hm=class{constructor(e){this.snapshot=e,this.type=At.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{constructor(e){this.snapshot=e,this.type=At.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pm=class{constructor(e){this.snapshot=e,this.type=At.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gm=class{constructor(e){this.snapshot=e,this.type=At.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Bl=class{},Qo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function o_(t,e){return t.providers&&!t._injector&&(t._injector=kg(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jn(t){return t.outlet||re}function a_(t,e){let n=t.filter(i=>Jn(i)===e);return n.push(...t.filter(i=>Jn(i)!==e)),n}function Hl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mm=class{get injector(){return Hl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Xd(this.rootInjector),this.attachRef=null}},Xd=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new mm(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(ce(Tn))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$d=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ym(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=ym(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=vm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return vm(e,this._root).map(n=>n.value)}};function ym(t,e){if(t===e.value)return e;for(let n of e.children){let i=ym(t,n);if(i)return i}return null}function vm(t,e){if(t===e.value)return[e];for(let n of e.children){let i=vm(t,n);if(i.length)return i.unshift(e),i}return[]}var hn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Wd=class extends $d{constructor(e,n){super(e),this.snapshot=n,Tm(this,e)}toString(){return this.snapshot.toString()}};function JS(t){let e=l_(t),n=new gt([new ks("",{})]),i=new gt({}),r=new gt({}),s=new gt({}),o=new gt(""),a=new Jo(n,i,s,o,r,re,t,e.root);return a.snapshot=e.root,new Wd(new hn(a,[]),e)}function l_(t){let e={},n={},i={},r="",s=new qo([],e,i,r,n,re,t,null,{});return new Kd("",new hn(s,[]))}var Jo=class{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(pe(c=>c[Ul]))??te(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yd(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),r?.data),t._resolvedData)}:i={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},r&&tw(r)&&(i.resolve[Ul]=r.title),i}var qo=class{get title(){return this.data?.[Ul]}constructor(e,n,i,r,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Kd=class extends $d{constructor(e,n){super(n),this.url=e,Tm(this,n)}toString(){return ew(this._root)}};function Tm(t,e){e.value._routerState=t,e.children.forEach(n=>Tm(t,n))}function ew(t){let e=t.children.length>0?` { ${t.children.map(ew).join(", ")} } `:"";return`${t.value}${e}`}function Qg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,wi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),wi(e.params,n.params)||t.paramsSubject.next(n.params),_O(e.url,n.url)||t.urlSubject.next(n.url),wi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bm(t,e){let n=wi(t.params,e.params)&&jO(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||bm(t.parent,e.parent))}function tw(t){return typeof t.title=="string"||t.title===null}var Am=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=F(Xd),this.location=F(Bo),this.changeDetector=F(Ho),this.inputBinder=F(Nm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new xm(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ml({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yd]});let t=e;return t})(),xm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Jo?this.route:e===Xd?this.childContexts:this.parent.get(e,n)}},Nm=new ie("");function c_(t,e,n){let i=jl(t,e._root,n?n._root:void 0);return new Wd(i,e)}function jl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=u_(t,e,n);return new hn(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jl(t,a)),o}}let i=d_(e.value),r=e.children.map(s=>jl(t,s));return new hn(i,r)}}function u_(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return jl(t,i,r);return jl(t,i)})}function d_(t){return new Jo(new gt(t.url),new gt(t.params),new gt(t.queryParams),new gt(t.fragment),new gt(t.data),t.outlet,t.component,t)}var Vl=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},nw="ngNavigationCancelingError";function qd(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Ol(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=iw(!1,fn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function iw(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[nw]=!0,n.cancellationCode=e,n}function h_(t){return rw(t)&&Ol(t.url)}function rw(t){return!!t&&t[nw]}var f_=(t,e,n,i)=>pe(r=>(new Dm(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Dm=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Qg(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Yo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Yo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Yo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Yo(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new gm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fm(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(Qg(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},Zd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zo=class{constructor(e,n){this.component=e,this.route=n}};function p_(t,e,n){let i=t._root,r=e?e._root:null;return Tl(i,r,n,[i.value])}function g_(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ta(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Yx(t)?t:e.get(t):i}function Tl(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Yo(e);return t.children.forEach(o=>{m_(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Rl(a,n.getContext(o),r)),r}function m_(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=y_(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Zd(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Tl(t,e,a?a.children:null,i,r):Tl(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Zo(a.outlet.component,o))}else o&&Rl(e,a,r),r.canActivateChecks.push(new Zd(i)),s.component?Tl(t,null,a?a.children:null,i,r):Tl(t,null,n,i,r);return r}function y_(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Rs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Rs(t.url,e.url)||!wi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bm(t,e)||!wi(t.queryParams,e.queryParams);case"paramsChange":default:return!bm(t,e)}}function Rl(t,e,n){let i=Yo(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Rl(o,e.children.getContext(s),n):Rl(o,null,n):Rl(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Zo(e.outlet.component,r)):n.canDeactivateChecks.push(new Zo(null,r)):n.canDeactivateChecks.push(new Zo(null,r))}function $l(t){return typeof t=="function"}function v_(t){return typeof t=="boolean"}function b_(t){return t&&$l(t.canLoad)}function x_(t){return t&&$l(t.canActivate)}function D_(t){return t&&$l(t.canActivateChild)}function S_(t){return t&&$l(t.canDeactivate)}function w_(t){return t&&$l(t.canMatch)}function sw(t){return t instanceof qi||t?.name==="EmptyError"}var Bd=Symbol("INITIAL_VALUE");function ea(){return Yn(t=>ku(t.map(e=>e.pipe(Zi(1),Kf(Bd)))).pipe(pe(e=>{for(let n of e)if(n!==!0){if(n===Bd)return Bd;if(n===!1||M_(n))return n}return!0}),Wn(e=>e!==Bd),Zi(1)))}function M_(t){return Ol(t)||t instanceof Vl}function I_(t,e){return nt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?te(N(M({},n),{guardsResult:!0})):C_(o,i,r,t).pipe(nt(a=>a&&v_(a)?E_(i,s,t,e):te(a)),pe(a=>N(M({},n),{guardsResult:a})))})}function C_(t,e,n,i){return mt(t).pipe(nt(r=>R_(r.component,r.route,n,e,i)),hi(r=>r!==!0,!0))}function E_(t,e,n,i){return mt(e).pipe(vo(r=>yo(A_(r.route.parent,i),T_(r.route,i),k_(t,r.path,n),N_(t,r.route,n))),hi(r=>r!==!0,!0))}function T_(t,e){return t!==null&&e&&e(new pm(t)),te(!0)}function A_(t,e){return t!==null&&e&&e(new hm(t)),te(!0)}function N_(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return te(!0);let r=i.map(s=>Ru(()=>{let o=Hl(e)??n,a=ta(s,o),l=x_(a)?a.canActivate(e,t):Ji(o,()=>a(e,t));return Lr(l).pipe(hi())}));return te(r).pipe(ea())}function k_(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>g_(o)).filter(o=>o!==null).map(o=>Ru(()=>{let a=o.guards.map(l=>{let c=Hl(o.node)??n,u=ta(l,c),d=D_(u)?u.canActivateChild(i,t):Ji(c,()=>u(i,t));return Lr(d).pipe(hi())});return te(a).pipe(ea())}));return te(s).pipe(ea())}function R_(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return te(!0);let o=s.map(a=>{let l=Hl(e)??r,c=ta(a,l),u=S_(c)?c.canDeactivate(t,e,n,i):Ji(l,()=>c(t,e,n,i));return Lr(u).pipe(hi())});return te(o).pipe(ea())}function L_(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return te(!0);let s=r.map(o=>{let a=ta(o,t),l=b_(a)?a.canLoad(e,n):Ji(t,()=>a(e,n));return Lr(l)});return te(s).pipe(ea(),ow(i))}function ow(t){return jf(Ct(e=>{if(typeof e!="boolean")throw qd(t,e)}),pe(e=>e===!0))}function O_(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return te(!0);let s=r.map(o=>{let a=ta(o,t),l=w_(a)?a.canMatch(e,n):Ji(t,()=>a(e,n));return Lr(l)});return te(s).pipe(ea(),ow(i))}var zl=class{constructor(e){this.segmentGroup=e||null}},Gl=class extends Error{constructor(e){super(),this.urlTree=e}};function Wo(t){return mo(new zl(t))}function __(t){return mo(new K(4e3,!1))}function P_(t){return mo(iw(!1,fn.GuardRejected))}var Sm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return te(i);if(r.numberOfChildren>1||!r.children[re])return __(`${e.redirectTo}`);r=r.children[re]}}applyRedirectCommands(e,n,i,r,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:m}=r,y=Ji(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:m}));if(y instanceof ir)throw new Gl(y);n=y}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n[0]==="/")throw new Gl(o);return o}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new ir(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Ne(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new K(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F_(t,e,n,i,r){let s=km(t,e,n);return s.matched?(i=o_(e,i),O_(i,e,n,r).pipe(pe(o=>o===!0?s:M({},wm)))):te(s)}function km(t,e,n){if(e.path==="**")return B_(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},wm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||OO)(n,t,e);if(!r)return M({},wm);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?M(M({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function B_(t){return{matched:!0,parameters:t.length>0?VS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function PS(t,e,n,i){return n.length>0&&z_(t,n,i)?{segmentGroup:new Ne(e,V_(i,new Ne(n,t.children))),slicedSegments:[]}:n.length===0&&G_(t,n,i)?{segmentGroup:new Ne(t.segments,j_(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Ne(t.segments,t.children),slicedSegments:n}}function j_(t,e,n,i){let r={};for(let s of n)if(Qd(t,e,s)&&!i[Jn(s)]){let o=new Ne([],{});r[Jn(s)]=o}return M(M({},i),r)}function V_(t,e){let n={};n[re]=e;for(let i of t)if(i.path===""&&Jn(i)!==re){let r=new Ne([],{});n[Jn(i)]=r}return n}function z_(t,e,n){return n.some(i=>Qd(t,e,i)&&Jn(i)!==re)}function G_(t,e,n){return n.some(i=>Qd(t,e,i))}function Qd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function U_(t,e,n,i){return Jn(t)!==i&&(i===re||!Qd(e,n,t))?!1:km(e,t,n).matched}function H_(t,e,n){return e.length===0&&!t.children[n]}var Mm=class{};function $_(t,e,n,i,r,s,o="emptyOnly"){return new Im(t,e,n,i,r,o,s).recognize()}var W_=31,Im=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Sm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=PS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:n,rootSnapshot:i})=>{let r=new hn(i,n),s=new Kd("",r),o=JO(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new qo([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(pe(i=>({children:i,rootSnapshot:n})),Sr(i=>{if(i instanceof Gl)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zl?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,s):this.processSegment(e,n,i,i.segments,r,!0,s).pipe(pe(o=>o instanceof hn?[o]:[]))}processChildren(e,n,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return mt(s).pipe(vo(o=>{let a=i.children[o],l=a_(n,o);return this.processSegmentGroup(e,l,a,o,r)}),Yf((o,a)=>(o.push(...a),o)),wr(null),Wf(),nt(o=>{if(o===null)return Wo(i);let a=aw(o);return Y_(a),te(a)}))}processSegment(e,n,i,r,s,o,a){return mt(n).pipe(vo(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,i,r,s,o,a).pipe(Sr(c=>{if(c instanceof zl)return te(null);throw c}))),hi(l=>!!l),Sr(l=>{if(sw(l))return H_(i,r,s)?te(new Mm):Wo(i);throw l}))}processSegmentAgainstRoute(e,n,i,r,s,o,a,l){return U_(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o,l):Wo(r):Wo(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=km(n,r,s);if(!l)return Wo(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>W_&&(this.allowRedirects=!1));let f=new qo(s,c,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,FS(r),Jn(r),r.component??r._loadedComponent??null,r,BS(r)),p=Yd(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,m).pipe(nt(y=>this.processSegment(e,i,n,y.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,n,i,r,s,o){let a=F_(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(Yn(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Yn(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new qo(h,d,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,FS(i),Jn(i),i.component??i._loadedComponent??null,i,BS(i)),m=Yd(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:v}=PS(n,h,f,c);if(v.length===0&&y.hasChildren())return this.processChildren(u,c,y,p).pipe(pe(D=>new hn(p,D)));if(c.length===0&&v.length===0)return te(new hn(p,[]));let x=Jn(i)===s;return this.processSegment(u,c,y,v,x?re:s,!0,p).pipe(pe(D=>new hn(p,D instanceof hn?[D]:[])))}))):Wo(n)))}getChildConfig(e,n,i){return n.children?te({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?te({routes:n._loadedRoutes,injector:n._loadedInjector}):L_(e,n,i,this.urlSerializer).pipe(nt(r=>r?this.configLoader.loadChildren(e,n).pipe(Ct(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):P_(n))):te({routes:[],injector:e})}};function Y_(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function K_(t){let e=t.value.routeConfig;return e&&e.path===""}function aw(t){let e=[],n=new Set;for(let i of t){if(!K_(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=aw(i.children);e.push(new hn(i.value,r))}return e.filter(i=>!n.has(i))}function FS(t){return t.data||{}}function BS(t){return t.resolve||{}}function q_(t,e,n,i,r,s){return nt(o=>$_(t,e,n,i,o.extractedUrl,r,s).pipe(pe(({state:a,tree:l})=>N(M({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Z_(t,e){return nt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return te(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of lw(l))o.add(c);let a=0;return mt(o).pipe(vo(l=>s.has(l)?X_(l,i,t,e):(l.data=Yd(l,l.parent,t).resolve,te(void 0))),Ct(()=>a++),bo(1),nt(l=>a===o.size?te(n):an))})}function lw(t){let e=t.children.map(n=>lw(n)).flat();return[t,...e]}function X_(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!tw(r)&&(s[Ul]=r.title),Q_(s,t,e,i).pipe(pe(o=>(t._resolvedData=o,t.data=Yd(t,t.parent,n).resolve,null)))}function Q_(t,e,n,i){let r=tm(t);if(r.length===0)return te({});let s={};return mt(r).pipe(nt(o=>J_(t[o],e,n,i).pipe(hi(),Ct(a=>{if(a instanceof Vl)throw qd(new Ll,a);s[o]=a}))),bo(1),$f(s),Sr(o=>sw(o)?an:mo(o)))}function J_(t,e,n,i){let r=Hl(e)??i,s=ta(t,r),o=s.resolve?s.resolve(e,n):Ji(r,()=>s(e,n));return Lr(o)}function Jg(t){return Yn(e=>{let n=t(e);return n?mt(n).pipe(pe(()=>e)):te(e)})}var cw=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(i){return i.data[Ul]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(e1),providedIn:"root"});let t=e;return t})(),e1=(()=>{let e=class e extends cw{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(ce(kS))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rm=new ie("",{providedIn:"root",factory:()=>({})}),t1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Nr({type:e,selectors:[["ng-component"]],standalone:!0,features:[Rr],decls:1,vars:0,template:function(r,s){r&1&&Di(0,"router-outlet")},dependencies:[Am],encapsulation:2});let t=e;return t})();function Lm(t){let e=t.children&&t.children.map(Lm),n=e?N(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=t1),n}var Om=new ie(""),n1=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Og)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return te(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Lr(i.loadComponent()).pipe(pe(uw),Ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),nl(()=>{this.componentLoaders.delete(i)})),s=new po(r,()=>new Vt).pipe(fo());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=i1(r,this.compiler,i,this.onLoadEndListener).pipe(nl(()=>{this.childrenLoaders.delete(r)})),a=new po(o,()=>new Vt).pipe(fo());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i1(t,e,n,i){return Lr(t.loadChildren()).pipe(pe(uw),nt(r=>r instanceof fl||Array.isArray(r)?te(r):mt(e.compileModuleAsync(r))),pe(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Om,[],{optional:!0,self:!0}).flat()),{routes:o.map(Lm),injector:s}}))}function r1(t){return t&&typeof t=="object"&&"default"in t}function uw(t){return r1(t)?t.default:t}var _m=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(s1),providedIn:"root"});let t=e;return t})(),s1=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),o1=new ie("");var a1=new ie(""),l1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Vt,this.transitionAbortSubject=new Vt,this.configLoader=F(n1),this.environmentInjector=F(Tn),this.urlSerializer=F(Em),this.rootContexts=F(Xd),this.location=F(Sl),this.inputBindingEnabled=F(Nm,{optional:!0})!==null,this.titleStrategy=F(cw),this.options=F(Rm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(_m),this.createViewTransition=F(o1,{optional:!0}),this.navigationErrorHandler=F(a1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let i=s=>this.events.next(new um(s)),r=s=>this.events.next(new dm(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(N(M(M({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new gt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:kl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wn(o=>o.id!==0),pe(o=>N(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yn(o=>{let a=!1,l=!1;return te(o).pipe(Yn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),an;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?N(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.rawUrl),h,sm.IgnoredSameUrlNavigation)),c.resolve(!1),an}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return te(c).pipe(Yn(h=>{let f=this.transitions?.getValue();return this.events.next(new Pl(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?an:Promise.resolve(h)}),q_(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ct(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=N(M({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Hd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:y}=c,v=new Pl(h,this.urlSerializer.serialize(f),p,m);this.events.next(v);let x=JS(this.rootComponentType).snapshot;return this.currentTransition=o=N(M({},c),{targetSnapshot:x,urlAfterRedirects:f,extras:N(M({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,te(o)}else{let h="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.extractedUrl),h,sm.IgnoredByUrlHandlingStrategy)),c.resolve(!1),an}}),Ct(c=>{let u=new om(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),pe(c=>(this.currentTransition=o=N(M({},c),{guards:p_(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),I_(this.environmentInjector,c=>this.events.next(c)),Ct(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw qd(this.urlSerializer,c.guardsResult);let u=new am(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Wn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",fn.GuardRejected),!1)),Jg(c=>{if(c.guards.canActivateChecks.length)return te(c).pipe(Ct(u=>{let d=new lm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Yn(u=>{let d=!1;return te(u).pipe(Z_(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",fn.NoDataFromResolver)}}))}),Ct(u=>{let d=new cm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Jg(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ct(f=>{d.component=f}),pe(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ku(u(c.targetSnapshot.root)).pipe(wr(null),Zi(1))}),Jg(()=>this.afterPreactivation()),Yn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?mt(d).pipe(pe(()=>o)):te(o)}),pe(c=>{let u=c_(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=N(M({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Ct(()=>{this.events.next(new Bl)}),f_(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Zi(1),Ct({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ls(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),qf(this.transitionAbortSubject.pipe(Ct(c=>{throw c}))),nl(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",fn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sr(c=>{if(l=!0,rw(c))this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),h_(c)?this.events.next(new Qo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Fl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Ji(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Vl){let{message:h,cancellationCode:f}=qd(this.urlSerializer,d);this.events.next(new nr(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new Qo(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=i.errorHandler(c);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return an}))}))}cancelNavigationTransition(i,r,s){let o=new nr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function c1(t){return t!==kl}var u1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(d1),providedIn:"root"});let t=e;return t})(),Cm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},d1=(()=>{let e=class e extends Cm{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=fg(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>F(h1),providedIn:"root"});let t=e;return t})(),h1=(()=>{let e=class e extends dw{constructor(){super(...arguments),this.location=F(Sl),this.urlSerializer=F(Em),this.options=F(Rm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(_m),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Pl)this.stateMemento=this.createStateMemento();else if(i instanceof Os)this.rawUrlTree=r.initialUrl;else if(i instanceof Hd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof Bl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof nr&&(i.code===fn.GuardRejected||i.code===fn.NoDataFromResolver)?this.restoreHistory(r):i instanceof Fl?this.restoreHistory(r,!0):i instanceof Ls&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof ir?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=M(M({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=fg(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Al=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Al||{});function f1(t,e){t.events.pipe(Wn(n=>n instanceof Ls||n instanceof nr||n instanceof Fl||n instanceof Os),pe(n=>n instanceof Ls||n instanceof Os?Al.COMPLETE:(n instanceof nr?n.code===fn.Redirect||n.code===fn.SupersededByNewNavigation:!1)?Al.REDIRECTING:Al.FAILED),Wn(n=>n!==Al.REDIRECTING),Zi(1)).subscribe(()=>{e()})}function p1(t){throw t}var g1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},hw=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(kd),this.stateManager=F(dw),this.options=F(Rm,{optional:!0})||{},this.pendingTasks=F(Es),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(l1),this.urlSerializer=F(Em),this.location=F(Sl),this.urlHandlingStrategy=F(_m),this._events=new Vt,this.errorHandler=this.options.errorHandler||p1,this.navigated=!1,this.routeReuseStrategy=F(u1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Om,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Nm,{optional:!0}),this.eventsSubscription=new ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof nr&&r.code!==fn.Redirect&&r.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ls)this.navigated=!0;else if(r instanceof Qo){let a=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||c1(s.source)},a);this.scheduleNavigation(l,kl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}v1(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),kl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=M({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Lm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=qS(f)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),h=this.currentUrlTree.root}return ZS(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ol(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,kl,null,r)}navigate(i,r={skipLocationChange:!1}){return y1(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=M({},g1):r===!1?s=M({},m1):s=r,Ol(i))return RS(this.currentUrlTree,i,s);let o=this.parseUrl(i);return RS(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});let d=this.pendingTasks.add();return f1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function y1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new K(4008,!1)}function v1(t){return!(t instanceof Bl)&&!(t instanceof Qo)}var b1=new ie("");function fw(t,...e){return fd([{provide:Om,multi:!0,useValue:t},[],{provide:Jo,useFactory:x1,deps:[hw]},{provide:Lg,multi:!0,useFactory:D1},e.map(n=>n.\u0275providers)])}function x1(t){return t.routerState.root}function D1(){let t=F(Tr);return e=>{let n=t.get(Uo);if(e!==n.components[0])return;let i=t.get(hw),r=t.get(S1);t.get(w1)===1&&i.initialNavigation(),t.get(M1,null,oe.Optional)?.setUpPreloading(),t.get(b1,null,oe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var S1=new ie("",{factory:()=>new Vt}),w1=new ie("",{providedIn:"root",factory:()=>1});var M1=new ie("");var pw=[];var gw={providers:[iS({eventCoalescing:!0}),fw(pw)]};var mM=Object.defineProperty,I1=Object.getOwnPropertyDescriptor,zi=(t,e)=>{for(var n in e)mM(t,n,{get:e[n],enumerable:!0})},g=(t,e,n,i)=>{for(var r=i>1?void 0:i?I1(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&mM(e,n,r),r},C1={ariaAnnounceVisible:"visible",ariaAnnounceHidden:"hidden",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number], ",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",toolbarAnnotationsTrendLine:"Trend line",toolbarAnnotationsHorizontalLine:"Horizontal line",toolbarAnnotationsVerticalLine:"Vertical line",toolbarAnnotationsParallelChannel:"Parallel channel",toolbarAnnotationsDisjointChannel:"Disjoint channel",toolbarAnnotationsClearAll:"Clear all annotations",toolbarAnnotationsColor:"Pick annotation color",toolbarAnnotationsLock:"Lock annotation",toolbarAnnotationsUnlock:"Unlock annotation",toolbarAnnotationsDelete:"Delete annotation",toolbarRange1Month:"1m",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3m",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6m",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here"};var E1={},T1=void 0;T1=E1;var yM=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(yM||{}),A1={},N1=void 0;N1=A1;var k1={};zi(k1,{TimeInterval:()=>qs,day:()=>Gy,friday:()=>IM,hour:()=>zy,millisecond:()=>By,minute:()=>Vy,monday:()=>DM,month:()=>Hy,saturday:()=>CM,second:()=>jy,sunday:()=>Uy,thursday:()=>MM,tuesday:()=>SM,utcDay:()=>AM,utcHour:()=>TM,utcMinute:()=>EM,utcMonth:()=>NM,utcYear:()=>kM,wednesday:()=>wM,year:()=>$y});var oy=new Map;function ay(t,e){oy.has(e)||(oy.set(e,!0),t())}ay.clear=()=>oy.clear();function mw(t){return t}function*Jd(...t){for(let e of t)yield*au(e)}function yw(t,e=0,n){let{leading:i=!0,trailing:r=!0}=n??{},s,o,a=!1;function l(){r&&o?(s=setTimeout(l,e),t(...o)):a=!1,o=null}function c(...u){a?o=u:(a=!0,s=setTimeout(l,e),i?t(...u):o=u)}return Object.assign(c,{cancel(){clearTimeout(s),a=!1,o=null}})}function R1(...t){return()=>{for(let e of t)e()}}var L={log(...t){console.log(...t)},warn(t,...e){console.warn(`AG Charts - ${t}`,...e)},error(t,...e){typeof t=="object"?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)},table(...t){console.table(...t)},warnOnce(t,...e){ay(()=>L.warn(t,...e),`Logger.warn: ${t}`)},errorOnce(t,...e){ay(()=>L.error(t,...e),`Logger.error: ${t}`)}},qs=class{constructor(t,e,n){this._encode=t,this._decode=e,this._rangeCallback=n}floor(t){let e=new Date(t),n=this._encode(e);return this._decode(n)}ceil(t){let e=new Date(Number(t)-1),n=this._encode(e);return this._decode(n+1)}range(t,e,n){let i=this._rangeCallback?.(t,e),r=this._encode(n?this.floor(t):this.ceil(t)),s=this._encode(n?this.ceil(e):this.floor(e));if(s<r)return[];let o=[];for(let a=r;a<=s;a++){let l=this._decode(a);o.push(l)}return i?.(),o}},yn=class extends qs{getOffset(t,e){let n=typeof t=="number"||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(n)%e}every(t,e){let n=0,i,r=t;t=Math.max(1,Math.round(t)),r!==t&&L.warnOnce(`interval step of [${r}] rounded to [${t}].`);let{snapTo:s="start"}=e??{};if(typeof s=="string"){let l=n;i=(c,u)=>{let d=s==="start"?c:u;return n=this.getOffset(d,t),()=>n=l}}else typeof s=="number"?n=this.getOffset(new Date(s),t):s instanceof Date&&(n=this.getOffset(s,t));let o=l=>{let c=this._encode(l);return Math.floor((c-n)/t)},a=l=>this._decode(l*t+n);return new qs(o,a,i)}};function L1(t){return t.getTime()}function O1(t){return new Date(t)}var By=new yn(L1,O1),_1=By,RW=new Date(0).getFullYear(),Br=1e3,Ot=Br*60,Ut=Ot*60,_n=Ut*24,lr=_n*7,Wl=_n*30,ya=_n*365,vM=new Date().getTimezoneOffset()*Ot;function P1(t){return Math.floor((t.getTime()-vM)/Br)}function F1(t){return new Date(vM+t*Br)}var jy=new yn(P1,F1),Xl=jy,bM=new Date().getTimezoneOffset()*Ot;function B1(t){return Math.floor((t.getTime()-bM)/Ot)}function j1(t){return new Date(bM+t*Ot)}var Vy=new yn(B1,j1),Ql=Vy,xM=new Date().getTimezoneOffset()*Ot;function V1(t){return Math.floor((t.getTime()-xM)/Ut)}function z1(t){return new Date(xM+t*Ut)}var zy=new yn(V1,z1),Jl=zy;function G1(t){let e=t.getTimezoneOffset()*Ot;return Math.floor((t.getTime()-e)/_n)}function U1(t){let e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var Gy=new yn(G1,U1),ly=Gy;function Xs(t){let n=(7+t-4)%7;function i(s){let o=s.getTimezoneOffset()*Ot;return Math.floor((s.getTime()-o)/lr-n/7)}function r(s){let o=new Date(1970,0,1);return o.setDate(o.getDate()+s*7+n),o}return new yn(i,r)}var Uy=Xs(0),DM=Xs(1),SM=Xs(2),wM=Xs(3),MM=Xs(4),IM=Xs(5),CM=Xs(6),ph=Uy;function H1(t){return t.getFullYear()*12+t.getMonth()}function $1(t){let e=Math.floor(t/12),n=t-e*12;return new Date(e,n,1)}var Hy=new yn(H1,$1),na=Hy;function W1(t){return t.getFullYear()}function Y1(t){let e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var $y=new yn(W1,Y1),Wy=$y;function K1(t){return Math.floor(t.getTime()/Ot)}function q1(t){return new Date(t*Ot)}var EM=new yn(K1,q1);function Z1(t){return Math.floor(t.getTime()/Ut)}function X1(t){return new Date(t*Ut)}var TM=new yn(Z1,X1);function Q1(t){return Math.floor(t.getTime()/_n)}function J1(t){let e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}var AM=new yn(Q1,J1);function eP(t){return t.getUTCFullYear()*12+t.getUTCMonth()}function tP(t){let e=Math.floor(t/12),n=t-e*12;return new Date(Date.UTC(e,n,1))}var NM=new yn(eP,tP);function nP(t){return t.getUTCFullYear()}function iP(t){let e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var kM=new yn(nP,iP),RM={};zi(RM,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Ht,fromToMotion:()=>Je,staticFromToMotion:()=>Ui});var cy=new Map;function LM(){cy.clear()}function Gi(t){let e=t.constructor,n=Object.hasOwn(e,"className")?e.className:e.name;if(!n)throw new Error(`The ${e} is missing the 'className' property.`);let i=(cy.get(n)??0)+1;return cy.set(n,i),`${n}-${i}`}function rP(){return URL.createObjectURL(new Blob).split("/").at(-1)}var qh="$interpolate",vw=t=>t[qh]!=null;function Zh(t,e,n,i=1/0){let r={nearest:void 0,distanceSquared:i};for(let s of n){let o=s.distanceSquared(t,e);if(o===0)return{nearest:s,distanceSquared:0};o<r.distanceSquared&&(r.nearest=s,r.distanceSquared=o)}return r}function sP(t,e,n,i=1/0){let{x:r,y:s}=n.transformPoint(t,e),o={nearest:void 0,distanceSquared:i};for(let a of n.children){let{nearest:l,distanceSquared:c}=a.nearestSquared(r,s,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}function ae(t,e,n){return Math.min(n,Math.max(t,e))}function Ah(t,e){let[n,i]=Pn(e);return ae(n,t,i)}function Pn(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Dc(t){let[e,n]=Pn(t);return n-e}function Us(t,e,n=1e-10){return Math.abs(t-e)<n}function Ia(t){return Math.sign(t)===-1||Object.is(t,-0)}function Yy(t,e=2){let n=10**e;return Math.round(t*n)/n}function Xh(t,e=2){let n=Math.floor(Math.log(Math.abs(t))/Math.LN10);return n>=0||!isFinite(n)?t.toFixed(e):t.toFixed(Math.abs(n)-1+e)}function Qh(t,e){return Math.floor(t%e+(t<0?e:0))}function Jh(t,e=10){let[,n=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return n.length}function Ky(t,e){return e=e??navigator.language,new Intl.NumberFormat(e,{style:"percent"}).format(t)}function qy(t,e){return Ky(t/100,e)}var Sc=class ec{constructor(e,n,i,r){this.x=e,this.y=n,this.width=i,this.height=r}static fromDOMRect({x:e,y:n,width:i,height:r}){return new ec(e,n,i,r)}clone(){let{x:e,y:n,width:i,height:r}=this;return new ec(e,n,i,r)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,n){return e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,n){if(this.containsPoint(e,n))return 0;let i=e-ae(this.x,e,this.x+this.width),r=n-ae(this.y,n,this.y+this.height);return i*i+r*r}static nearestBox(e,n,i){return Zh(e,n,i)}clip(e){if(e===void 0)return this;let n=Math.max(this.x,e.x),i=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.y=i,this.width=Math.max(0,r-n),this.height=Math.max(0,s-i),this}shrink(e,n){let i=(r,s)=>{switch(r){case"top":this.y+=s;case"bottom":this.height-=s;break;case"left":this.x+=s;case"right":this.width-=s;break;case"vertical":this.y+=s,this.height-=s*2;break;case"horizontal":this.x+=s,this.width-=s*2;break;case void 0:this.x+=s,this.width-=s*2,this.y+=s,this.height-=s*2;break;default:}};return typeof e=="number"?i(n,e):typeof e=="object"&&Object.entries(e).forEach(([r,s])=>i(r,s)),this}grow(e,n){if(typeof e=="number")this.shrink(-e,n);else{let i=M({},e);for(let r in i)i[r]*=-1;this.shrink(i)}return this}translate(e,n){return this.x+=e,this.y+=n,this}combine(e){let{x:n,y:i,width:r,height:s}=this;this.x=Math.min(n,e.x),this.y=Math.min(i,e.y),this.width=Math.max(n+r,e.x+e.width)-this.x,this.height=Math.max(i+s,e.y+e.height)-this.y}static merge(e){let n=1/0,i=1/0,r=-1/0,s=-1/0;for(let o of e)o.x<n&&(n=o.x),o.y<i&&(i=o.y),o.x+o.width>r&&(r=o.x+o.width),o.y+o.height>s&&(s=o.y+o.height);return new ec(n,i,r-n,s-i)}[qh](e,n){return new ec(this.x*(1-n)+e.x*n,this.y*(1-n)+e.y*n,this.width*(1-n)+e.width*n,this.height*(1-n)+e.height*n)}};Sc.zero=new Sc(0,0,0,0);Sc.NaN=new Sc(NaN,NaN,NaN,NaN);var V=Sc,Ur=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(Ur||{});function j(t){return function(e,n){let i=`__${n}`;e[n]||oP(e,n,i,t)}}function oP(t,e,n,i){let{redraw:r=1,type:s="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=i??{},c={redraw:r,type:s,changeCb:o,checkDirtyOnAssignment:l,convertor:a},u;switch(s){case"normal":u=uP(n,c);break;case"transform":u=dP(n,c);break;case"path":u=hP(n,c);break;case"font":u=fP(n,c);break}u=cP(lP(aP(u,c),c),c),Object.defineProperty(t,e,{set:u,get:function(){return this[n]},enumerable:!0,configurable:!0})}function aP(t,e){let{convertor:n}=e;return n?function(i){t.call(this,n(i))}:t}var Ca=Symbol("no-change");function lP(t,e){let{changeCb:n}=e;return n?function(i){let r=t.call(this,i);return r!==Ca&&n.call(this,this),r}:t}function cP(t,e){let{checkDirtyOnAssignment:n}=e;return n?function(i){let r=t.call(this,i);return r!==Ca&&i!=null&&i._dirty>0&&this.markDirty(i,i._dirty),r}:t}function uP(t,e){let{redraw:n=1,changeCb:i}=e;return function(r){let s=this[t];return r!==s?(this[t]=r,this.markDirty(this,n),i?.(this),r):Ca}}function dP(t,e){let{redraw:n=1}=e;return function(i){let r=this[t];return i!==r?(this[t]=i,this.markDirtyTransform(n),i):Ca}}function hP(t,e){let{redraw:n=1}=e;return function(i){let r=this[t];return i!==r?(this[t]=i,this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),i):Ca}}function fP(t,e){let{redraw:n=1}=e;return function(i){let r=this[t];return i!==r?(this[t]=i,this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),i):Ca}}var pP=class{constructor(){this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},uy=class tc{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){let n=this.elements;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],this}get identity(){let e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,n,i){let r=e[0]*n[0]+e[2]*n[1],s=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],l=e[0]*n[4]+e[2]*n[5]+e[4],c=e[1]*n[4]+e[3]*n[5]+e[5];i=i??e,i[0]=r,i[1]=s,i[2]=o,i[3]=a,i[4]=l,i[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){let n=new Array(6);return this.AxB(this.elements,e.elements,n),new tc(n)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){let e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=1/(n*s-i*r);return n*=l,i*=l,r*=l,s*=l,new tc([s,-i,-r,n,r*a-s*o,i*o-n*a])}inverseTo(e){let n=this.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=1/(i*o-r*s);return i*=c,r*=c,s*=c,o*=c,e.setElements([o,-r,-s,i,s*l-o*a,r*a-i*l]),this}invertSelf(){let e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=1/(n*s-i*r);return n*=l,i*=l,r*=l,s*=l,e[0]=s,e[1]=-i,e[2]=-r,e[3]=n,e[4]=r*a-s*o,e[5]=i*o-n*a,this}transformPoint(e,n){let i=this.elements;return{x:e*i[0]+n*i[2]+i[4],y:e*i[1]+n*i[3]+i[5]}}transformBBox(e,n){let i=this.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=e.width*.5,c=e.height*.5,u=e.x+l,d=e.y+c,h=Math.abs(l*r)+Math.abs(c*o),f=Math.abs(l*s)+Math.abs(c*a);return n||(n=new V(0,0,0,0)),n.x=u*r+d*o+i[4]-h,n.y=u*s+d*a+i[5]-f,n.width=h+h,n.height=f+f,n}toContext(e){if(this.identity)return;let n=this.elements;e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}static flyweight(e){return tc.instance.setElements(e.elements)}static updateTransformMatrix(e,n,i,r,s,o,a){let[l,c]=[0,0],u=n,d=i,h,f;u===1&&d===1?(h=0,f=0):(h=a?.scalingCenterX==null?l:a?.scalingCenterX,f=a?.scalingCenterY==null?c:a?.scalingCenterY);let p=r,m=Math.cos(p),y=Math.sin(p),v,x;p===0?(v=0,x=0):(v=a?.rotationCenterX==null?l:a?.rotationCenterX,x=a?.rotationCenterY==null?c:a?.rotationCenterY);let D=s,S=o,w=h*(1-u)-v,I=f*(1-d)-x;return e.setElements([m*u,y*u,-y*d,m*d,m*w-y*I+v+D,y*w+m*I+x+S]),e}static fromContext(e){let n=e.getTransform();return new tc([n.a,n.b,n.c,n.d,n.e,n.f])}};uy.instance=new uy;var Oi=uy,OM=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(OM||{}),vn=(()=>{let t=class _M extends pP{constructor({isVirtual:n,tag:i,zIndex:r}={}){super(),this.serialNumber=_M._nextSerialNumber++,this.id=Gi(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new Oi,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this._childNodeCounts={groups:0,nonGroups:0},this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=n??!1,this.tag=i??NaN,this.zIndex=r??0}get datum(){return this._datum??this._parent?.datum}get previousDatum(){return this._previousDatum}set datum(n){this._datum!==n&&(this._previousDatum=this._datum),this._datum=n}_setLayerManager(n){this._layerManager=n,this._debug=n?.debug;for(let i of this._children)i._setLayerManager(n);for(let i of this._virtualChildren)i._setLayerManager(n)}get layerManager(){return this._layerManager}*ancestors(){let n=this;for(;n=n.parent;)yield n}*traverseUp(){yield this,yield*au(this.ancestors())}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap(n=>n.children)):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(n,i){let r=i??Object.keys(n);for(let s of r)this[s]=n[s];return this}append(n){Array.isArray(n)||(n=[n]);for(let i of n){if(i.parent)throw new Error(`${i} already belongs to another parent: ${i.parent}.`);if(i.layerManager)throw new Error(`${i} already belongs to a scene: ${i.layerManager}.`);if(this.childSet[i.id])throw new Error(`Duplicate ${i.constructor.name} node: ${i}`);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(n){return this.append(n),n}removeChild(n){let i=()=>{throw new Error("The node to be removed is not a child of this node.")};if(n.parent!==this&&i(),n.isVirtual){let r=this._virtualChildren.indexOf(n);r<0&&i(),this._virtualChildren.splice(r,1)}else{let r=this._children.indexOf(n);r<0&&i(),this._children.splice(r,1)}return delete this.childSet[n.id],n._parent=void 0,n._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(n,3),n}calculateCumulativeMatrix(){this.computeTransformMatrix();let n=Oi.flyweight(this.matrix);for(let i of this.ancestors())i.computeTransformMatrix(),n.preMultiplySelf(i.matrix);return n}transformPoint(n,i){return this.calculateCumulativeMatrix().invertSelf().transformPoint(n,i)}inverseTransformPoint(n,i){return this.calculateCumulativeMatrix().transformPoint(n,i)}transformBBox(n){return this.calculateCumulativeMatrix().invertSelf().transformBBox(n)}inverseTransformBBox(n){return this.calculateCumulativeMatrix().transformBBox(n)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}destroy(){this.parent?.removeChild(this)}containsPoint(n,i){return!1}pickNode(n,i){if(!this.visible||this.pointerEvents===1||!this.containsPoint(n,i))return;let{children:r}=this;if(r.length>1e3)for(let s=r.length-1;s>=0;s--){let o=r[s],l=o.computeTransformedBBox()?.containsPoint(n,i)?o.pickNode(n,i):void 0;if(l)return l}else if(r.length)for(let s=r.length-1;s>=0;s--){let o=r[s].pickNode(n,i);if(o)return o}else if(!this.isContainerNode)return this}getCachedBBox(){return this.cachedBBox??V.zero}computeBBox(){}computeTransformedBBox(){let n=this.computeBBox();if(!n)return;this.computeTransformMatrix();let i=Oi.flyweight(this.matrix);for(let r of this.ancestors())r.computeTransformMatrix(),i.preMultiplySelf(r.matrix);return i.transformBBox(n,n),n}computeTransformMatrix(){if(!this.dirtyTransform)return;let{matrix:n,scalingX:i,scalingY:r,rotation:s,translationX:o,translationY:a,scalingCenterX:l,scalingCenterY:c,rotationCenterX:u,rotationCenterY:d}=this;Oi.updateTransformMatrix(n,i,r,s,o,a,{scalingCenterX:l,scalingCenterY:c,rotationCenterX:u,rotationCenterY:d}),this.dirtyTransform=!1}preRender(){this._childNodeCounts.groups=0,this._childNodeCounts.nonGroups=1;for(let n of this.children){let i=n.preRender();this._childNodeCounts.groups+=i.groups,this._childNodeCounts.nonGroups+=i.nonGroups}return this._childNodeCounts}render(n){let{stats:i}=n;this._dirty=0,this.cachedBBox=this.computeBBox(),i&&i.nodesRendered++}markDirty(n,i=1,r=i){this._dirty>i||this._dirty===i&&i===r||(this._dirty=i,this.parent?this.parent.markDirty(this,r):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(n){let{force:i=!1,recursive:r=!0}=n??{};if(!(this._dirty===0&&!i)){if(this._dirty=0,r!==!1)for(let s of this._virtualChildren)s.markClean({force:i});if(r===!0)for(let s of this._children)s.markClean({force:i})}}onVisibleChange(){}get nodeCount(){let n=1,i=this._dirty>=0||this.dirtyTransform?1:0,r=this.visible?1:0,s=o=>{let{count:a,visibleCount:l,dirtyCount:c}=o.nodeCount;n+=a,r+=l,i+=c};for(let o of this._children)s(o);for(let o of this._virtualChildren)s(o);return{count:n,visibleCount:r,dirtyCount:i}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}};return t._nextSerialNumber=0,t})();g([j({type:"transform"})],vn.prototype,"scalingX",2);g([j({type:"transform"})],vn.prototype,"scalingY",2);g([j({type:"transform"})],vn.prototype,"scalingCenterX",2);g([j({type:"transform"})],vn.prototype,"scalingCenterY",2);g([j({type:"transform"})],vn.prototype,"rotationCenterX",2);g([j({type:"transform"})],vn.prototype,"rotationCenterY",2);g([j({type:"transform"})],vn.prototype,"rotation",2);g([j({type:"transform"})],vn.prototype,"translationX",2);g([j({type:"transform"})],vn.prototype,"translationY",2);g([j({redraw:3,changeCb:t=>t.onVisibleChange()})],vn.prototype,"visible",2);g([j({redraw:1,changeCb:t=>t.onZIndexChange()})],vn.prototype,"zIndex",2);g([j({redraw:1,changeCb:t=>t.onZIndexChange()})],vn.prototype,"zIndexSubOrder",2);var Ea=vn,eh=(t,e,n)=>t*(1-n)+e*n,Pm=t=>{let e=t<0?-1:1,n=Math.abs(t);return n<=.04045?t/12.92:e*((n+.055)/1.055)**2.4},Fm=t=>{let e=t<0?-1:1,n=Math.abs(t);return n>.0031308?e*(1.055*n**(1/2.4)-.055):12.92*t},gP=(()=>{let t=class Be{constructor(n,i,r,s=1){this.r=ae(0,n||0,1),this.g=ae(0,i||0,1),this.b=ae(0,r||0,1),this.a=ae(0,s||0,1)}static validColorString(n){return n.indexOf("#")>=0?!!Be.parseHex(n):n.indexOf("rgb")>=0?!!Be.stringToRgba(n):!!Be.nameToHex[n.toLowerCase()]}static fromString(n){if(n.indexOf("#")>=0)return Be.fromHexString(n);let i=Be.nameToHex[n.toLowerCase()];if(i)return Be.fromHexString(i);if(n.indexOf("rgb")>=0)return Be.fromRgbaString(n);throw new Error(`Invalid color string: '${n}'`)}static parseHex(n){n=n.replace(/ /g,"").slice(1);let i;switch(n.length){case 6:case 8:i=[];for(let r=0;r<n.length;r+=2)i.push(parseInt(`${n[r]}${n[r+1]}`,16));break;case 3:case 4:i=n.split("").map(r=>parseInt(r,16)).map(r=>r+r*16);break}if(i?.length>=3&&i.every(r=>r>=0))return i.length===3&&i.push(255),i}static fromHexString(n){let i=Be.parseHex(n);if(i){let[r,s,o,a]=i;return new Be(r/255,s/255,o/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${n}'`)}static stringToRgba(n){let i=-1,r=-1;for(let l=0;l<n.length;l++){let c=n[l];if(i===-1&&c==="(")i=l;else if(c===")"){r=l;break}}if(i===-1||r===-1)return;let o=n.substring(i+1,r).split(","),a=[];for(let l=0;l<o.length;l++){let c=o[l],u=parseFloat(c);if(!Number.isFinite(u))return;c.indexOf("%")>=0?(u=ae(0,u,100),u/=100):l===3?u=ae(0,u,1):(u=ae(0,u,255),u/=255),a.push(u)}return a}static fromRgbaString(n){let i=Be.stringToRgba(n);if(i){if(i.length===3)return new Be(i[0],i[1],i[2]);if(i.length===4)return new Be(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${n}'`)}static fromArray(n){if(n.length===4)return new Be(n[0],n[1],n[2],n[3]);if(n.length===3)return new Be(n[0],n[1],n[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(n,i,r,s=1){let o=Be.HSBtoRGB(n,i,r);return new Be(o[0],o[1],o[2],s)}static fromHSL(n,i,r,s=1){let o=Be.HSLtoRGB(n,i,r);return new Be(o[0],o[1],o[2],s)}static fromOKLCH(n,i,r,s=1){let o=Be.OKLCHtoRGB(n,i,r);return new Be(o[0],o[1],o[2],s)}static padHex(n){return n.length===1?"0"+n:n}toHexString(){let n="#"+Be.padHex(Math.round(this.r*255).toString(16))+Be.padHex(Math.round(this.g*255).toString(16))+Be.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(n+=Be.padHex(Math.round(this.a*255).toString(16))),n}toRgbaString(n=3){let i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],r=Math.pow(10,n);return this.a!==1?(i.push(Math.round(this.a*r)/r),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return Be.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(n,i,r){let s=Pm(n),o=Pm(i),a=Pm(r),l=Math.cbrt(.4122214708*s+.5363325363*o+.0514459929*a),c=Math.cbrt(.2119034982*s+.6806995451*o+.1073969566*a),u=Math.cbrt(.0883024619*s+.2817188376*o+.6299787005*a),d=.2104542553*l+.793617785*c-.0040720468*u,h=1.9779984951*l-2.428592205*c+.4505937099*u,f=.0259040371*l+.7827717662*c-.808675766*u,p=Math.atan2(f,h)*180/Math.PI,m=d,y=Math.hypot(h,f),v=p>=0?p:p+360;return[m,y,v]}static OKLCHtoRGB(n,i,r){let s=n,o=i*Math.cos(r*Math.PI/180),a=i*Math.sin(r*Math.PI/180),l=(s+.3963377774*o+.2158037573*a)**3,c=(s-.1055613458*o-.0638541728*a)**3,u=(s-.0894841775*o-1.291485548*a)**3,d=4.0767416621*l-3.3077115913*c+.2309699292*u,h=-1.2684380046*l+2.6097574011*c-.3413193965*u,f=-.0041960863*l-.7034186147*c+1.707614701*u,p=Fm(d),m=Fm(h),y=Fm(f);return[p,m,y]}static RGBtoHSL(n,i,r){let s=Math.min(n,i,r),o=Math.max(n,i,r),a=(o+s)/2,l,c;if(o===s)l=0,c=0;else{let u=o-s;c=a>.5?u/(2-o-s):u/(o+s),o===n?l=(i-r)/u+(i<r?6:0):o===i?l=(r-n)/u+2:l=(n-i)/u+4,l*=60}return[l,c,a]}static HSLtoRGB(n,i,r){if(n=(n%360+360)%360,i===0)return[r,r,r];let s=r<.5?r*(1+i):r+i-r*i,o=2*r-s;function a(d){return d<0&&(d+=1),d>1&&(d-=1),d<.16666666666666666?o+(s-o)*6*d:d<.5?s:d<.6666666666666666?o+(s-o)*(.6666666666666666-d)*6:o}let l=a(n/360+1/3),c=a(n/360),u=a(n/360-1/3);return[l,c,u]}static RGBtoHSB(n,i,r){let s=Math.min(n,i,r),o=Math.max(n,i,r),a=o===0?0:(o-s)/o,l=0;if(s!==o){let c=o-s,u=(o-n)/c,d=(o-i)/c,h=(o-r)/c;n===o?l=h-d:i===o?l=2+u-h:l=4+d-u,l/=6,l<0&&(l=l+1)}return[l*360,a,o]}static HSBtoRGB(n,i,r){n=(n%360+360)%360/360;let s=0,o=0,a=0;if(i===0)s=o=a=r;else{let l=(n-Math.floor(n))*6,c=l-Math.floor(l),u=r*(1-i),d=r*(1-i*c),h=r*(1-i*(1-c));switch(l>>0){case 0:s=r,o=h,a=u;break;case 1:s=d,o=r,a=u;break;case 2:s=u,o=r,a=h;break;case 3:s=u,o=d,a=r;break;case 4:s=h,o=u,a=r;break;case 5:s=r,o=u,a=d;break}}return[s,o,a]}static mix(n,i,r){return new Be(eh(n.r,i.r,r),eh(n.g,i.g,r),eh(n.b,i.b,r),eh(n.a,i.a,r))}};return t.nameToHex={__proto__:null,aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t})(),Li=gP;function PM(t,e){return n=>Number(t)*(1-n)+Number(e)*n}function FM(t,e){if(typeof t=="string")try{t=Li.fromString(t)}catch{t=Li.fromArray([0,0,0])}if(typeof e=="string")try{e=Li.fromString(e)}catch{e=Li.fromArray([0,0,0])}return n=>Li.mix(t,e,n).toRgbaString()}var Nh=Symbol("BREAK"),ua="__decorator_config";function BM(t,e){Object.getOwnPropertyDescriptor(t,ua)==null&&Object.defineProperty(t,ua,{value:{}});let n=t[ua],i=e.toString();if(typeof n[i]<"u")return n[i];let r=new WeakMap;n[i]={setters:[],getters:[],observers:[],valuesMap:r};let s=Object.getOwnPropertyDescriptor(t,e),o=s?.set,a=s?.get;return Object.defineProperty(t,e,{set:function(u){let{setters:d,observers:h}=n[i],f;d.some(p=>p.length>2)&&(f=a?a.call(this):r.get(this));for(let p of d)if(u=p(this,e,u,f),u===Nh)return;o?o.call(this,u):r.set(this,u);for(let p of h)p(this,u,f)},get:function(){let u=a?a.call(this):r.get(this);for(let d of n[i].getters)if(u=d(this,e,u),u===Nh)return;return u},enumerable:!0,configurable:!1}),n[i]}function fr(t,e,n){return(i,r)=>{let s=BM(i,r);s.setters.push(t),e&&s.getters.unshift(e),n&&Object.assign(s,n)}}function mP(t){return(e,n)=>{BM(e,n).observers.push(t)}}function ef(t){return typeof t<"u"&&ua in t}function da(t){let e=new Set;for(;ef(t);)e.add(t?.[ua]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(n=>Object.keys(n))}function yP(t){return da(t).reduce((e,n)=>(e[n]=t[n]??null,e),{})}function vP(t,e){let n=e.toString();for(;ef(t);){let i=t[ua];if(Object.hasOwn(i,n))return i[n];t=Object.getPrototypeOf(t)}}function wc(t){return t!=null}function rt(t){return Array.isArray(t)}function jM(t){return typeof t=="boolean"}function zc(t){return t instanceof Date}function Gc(t){return zc(t)&&!isNaN(Number(t))}function VM(t){return t instanceof RegExp}function Qs(t){return typeof t=="function"}function Fn(t){return typeof t=="object"&&t!==null&&!rt(t)}function bP(t){return rt(t)||jn(t)}function jn(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function Bn(t){return typeof t=="string"}function gn(t){return typeof t=="number"}function be(t){return gn(t)&&Number.isFinite(t)}function zM(t){return typeof window<"u"&&t instanceof HTMLElement}function xP(t,e){return Bn(e)&&Object.keys(t).includes(e)}function GM(t,e){return Object.values(t).includes(e)}function UM(t){return typeof t=="symbol"}function DP(...t){return ue(...t.reverse())}function ue(...t){let e={};for(let n of t){if(!Fn(n))continue;let i=ef(n)?da(n):Object.keys(n);for(let r of i)jn(e[r])&&jn(n[r])?e[r]=ue(e[r],n[r]):e[r]??(e[r]=n[r])}return e}function dy(t,...e){return e&&rt(t)?t.map(n=>ue(n,...e)):t}function Zy(t,e){return Object.entries(t).reduce((n,[i,r])=>(n[i]=e(r,i,t),n),{})}function hy(t,e){let n=M({},t);for(let i of e)delete n[i];return n}function Xy(t,e){return(rt(e)?e:e.split(".")).reduce((i,r)=>i[r],t)}var Qy=new Set(["__proto__","constructor","prototype"]);function Jy(t,e,n){let i=rt(e)?e.slice():e.split("."),r=i.pop();if(i.some(o=>Qy.has(o)))return;let s=i.reduce((o,a)=>o[a],t);return s[r]=n,s[r]}function js(t,e,n){if(n===void 0)return e;for(let i of t){let r=n[i];r!==void 0&&(e[i]=r)}return e}var le=class{set(t){let{className:e=this.constructor.name}=this.constructor;if(typeof t!="object")return L.warn(`unable to set ${e} - expecting a properties object`),this;let n=new Set(Object.keys(t));for(let i of da(this))if(n.has(i)){let r=t[i],s=this;Fi(s[i])?s[i]=s[i]instanceof tf?s[i].reset(r):s[i].set(r):s[i]=r,n.delete(i)}for(let i of n)L.warn(`unable to set [${i}] in ${e} - property is unknown`);return this}isValid(t){return da(this).every(e=>{let{optional:n}=vP(this,e),i=n===!0||typeof this[e]<"u";return i||L.warnOnce(`${t??""}[${e}] is required.`),i})}toJson(){return da(this).reduce((t,e)=>{let n=this[e];return t[e]=Fi(n)?n.toJson():n,t},{})}},tf=class HM extends Array{constructor(e,...n){super(n.length);let r=(s=>!!s?.prototype?.constructor?.name)(e)?s=>new e().set(s):e;Object.defineProperty(this,"itemFactory",{value:r,enumerable:!1,configurable:!1}),this.set(n)}set(e){if(rt(e)){this.length=e.length;for(let n=0;n<e.length;n++)this[n]=this.itemFactory(e[n])}return this}reset(e){return new HM(this.itemFactory,...e)}toJson(){return this.map(e=>e?.toJson?.()??e)}};function Fi(t){return t instanceof le||t instanceof tf}var gh="class-instance";function mn(t,e,n){if(rt(e)){if(!rt(t)||t.length!==e.length||e.some((i,r)=>mn(t[r],i)!=null))return e}else if(jn(e)){if(!jn(t))return e;let i={},r=new Set([...Object.keys(t),...Object.keys(e)]);for(let s of r)if(!(t[s]===e[s]||n?.includes(s)))if(typeof t[s]==typeof e[s]){let o=mn(t[s],e[s]);o!==null&&(i[s]=o)}else i[s]=e[s];return Object.keys(i).length?i:null}else if(t!==e)return e;return null}function Rt(t,e){return rt(t)?t.map(n=>Rt(n,e)):jn(t)?Zy(t,(n,i)=>e?.shallow?.includes(i)?kh(n):Rt(n,e)):kh(t)}function kh(t){return rt(t)?[...t]:jn(t)?M({},t):zc(t)?new Date(t):VM(t)?new RegExp(t.source,t.flags):t}function _i(t,e,n,...i){if(rt(t))e(t,...i),t.forEach((r,s)=>{_i(r,e,n,...bw(i,s))});else if(jn(t)){e(t,...i);for(let r of Object.keys(t)){if(n?.skip?.includes(r))continue;let s=t[r];(rt(s)||jn(s))&&_i(s,e,n,...bw(i,r))}}}function cr(t,e,n={}){let{path:i,constructedArrays:r,matcherPath:s=i?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=n;if(t==null)throw new Error(`AG Charts - target is uninitialised: ${i??"<root>"}`);if(e==null)return t;if(Fi(t))return t.set(e);let a=t,l=Bm(t);for(let c in e){if(Qy.has(c))continue;let u=`${s?s+".":""}${c}`;if(o.includes(u))continue;let d=e[c],h=`${i?i+".":""}${c}`,f=a.constructor,p=a[c],m;try{let y=Bm(p),v=Bm(d);if(l===gh&&!(c in t)){L.warn(`unable to set [${h}] in ${f?.name} - property is unknown`);continue}if(y!=null&&v!=null&&v!==y&&(y!==gh||v!=="object")){L.warn(`unable to set [${h}] in ${f?.name} - can't apply type of [${v}], allowed types are: [${y}]`);continue}if(Fi(p))a[c].set(d);else if(v==="array")if(m??(m=r?.get(p)),m==null)a[c]=d;else{let x=d;a[c]=x.map(D=>cr(new m,D,N(M({},n),{path:h,matcherPath:u+"[]"})))}else v===gh?a[c]=d:v==="object"?p!=null?cr(p,d,N(M({},n),{path:h,matcherPath:u})):m==null?(a[c]={},cr(a[c],d,N(M({},n),{path:h,matcherPath:u}))):a[c]=cr(new m,d,N(M({},n),{path:h,matcherPath:u})):a[c]=d}catch(y){L.warn(`unable to set [${h}] in [${f?.name}]; nested error is: ${y.message}`)}}return t}function bw(t,e){return t.map(n=>n?.[e])}function Bm(t){return t==null?null:zM(t)||zc(t)?"primitive":rt(t)?"array":Fn(t)?jn(t)?"object":gh:Qs(t)?"function":"primitive"}var ev={};zi(ev,{easeIn:()=>SP,easeInOut:()=>wP,easeInOutQuad:()=>CP,easeInQuad:()=>MP,easeOut:()=>Mc,easeOutQuad:()=>IP,inverseEaseOut:()=>WM,linear:()=>$M});var $M=t=>t,SP=t=>1-Math.cos(t*Math.PI/2),Mc=t=>Math.sin(t*Math.PI/2),wP=t=>-(Math.cos(t*Math.PI)-1)/2,MP=t=>t*t,IP=t=>1-(1-t)**2,CP=t=>t<.5?2*t*t:1-(-2*t+2)**2/2,WM=t=>2*Math.asin(t)/Math.PI,Rh=.2,ia=["initial","remove","update","add","trailing","end","none"],Ic={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Rh,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+Rh,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},YM=(t=>(t.Loop="loop",t.Reverse="reverse",t))(YM||{});function EP(t){return t.every(e=>e instanceof Ea)}function nf(t){return EP(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var KM=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??$M,this.phase=t.phase;let e=t.duration??Ic[this.phase].animationDuration;this.duration=e*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&(this.onUpdate?.(t.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return t.from===t.to?0:(typeof t.from=="object"?mn(t.from,t.to):null)?e:0}play(t=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,t&&this.onUpdate?.(this.from,!0,this)))}pause(){this.isPlaying=!1}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(t){if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);let e=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;let n=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(n,!1,this);let i=this.delay+this.duration;return this.elapsed>=i?(this.stop(),this.isComplete=!0,this.onComplete?.(this),t-(i-e)):0}get delta(){return this.ease(ae(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if(typeof e!="object"||vw(e))return this.interpolateValue(t,e);let n=[];for(let i in e){let r=this.interpolateValue(t[i],e[i]);r!=null&&n.push([i,r])}return i=>{let r={};for(let[s,o]of n)r[s]=o(i);return r}}interpolateValue(t,e){if(!(t===void 0||e===void 0)){if(vw(t))return n=>t[qh](e,n);try{switch(typeof t){case"number":return PM(t,e);case"string":return FM(t,e);case"boolean":if(t===e)return()=>t;break}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}},Ht={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Je(t,e,n,i,r,s,o){let{fromFn:a,toFn:l,intermediateFn:c}=r,{nodes:u,selections:d}=nf(i),h=(p,m)=>{let y,v=0,x=0;for(let w of m){let I=p[v]===w,C={last:x>=m.length-1,lastLive:v>=p.length-1,prev:m[x-1],prevFromProps:y,prevLive:p[v-1],next:m[x+1],nextLive:p[v+(I?1:0)]},T=`${t}_${e}_${w.id}`;n.stopByAnimationId(T);let E="unknown";I?s&&o&&(E=TP(w,w.datum,s,o)):E="removed";let D=a(w,w.datum,E,C),{phase:A,start:R,finish:_,delay:G,duration:J}=D,ee=Ve(D,["phase","start","finish","delay","duration"]),S=l(w,w.datum,E,C),{phase:se,start:ne,finish:q,delay:xe,duration:Xe}=S,Ce=Ve(S,["phase","start","finish","delay","duration"]),ot=_==null&&q==null;n.animate({id:T,groupId:t,phase:A??se??"update",duration:J??Xe,delay:G??xe,from:ee,to:Ce,ease:Mc,collapsable:ot,onPlay:()=>{w.setProperties(M(M({},R),ne))},onUpdate(Ge){w.setProperties(Ge),c&&w.setProperties(c(w,w.datum,E,C))},onStop:()=>{w.setProperties(M(M(M(M(M(M({},R),ne),ee),Ce),_),q))}}),I&&v++,x++,y=ee}},f=0;for(let p of d){let m=p.nodes(),y=m.filter(v=>!p.isGarbage(v));h(y,m),n.animate({id:`${t}_${e}_selection_${f}`,groupId:t,phase:"end",from:0,to:1,ease:Mc,onStop(){p.cleanup()}}),f++}h(u,u)}function Ui(t,e,n,i,r,s,o){let{nodes:a,selections:l}=nf(i),{start:c,finish:u,phase:d}=o,h=u==null;n.animate({id:`${t}_${e}`,groupId:t,phase:d??"update",from:r,to:s,ease:Mc,collapsable:h,onPlay:()=>{if(c){for(let f of a)f.setProperties(c);for(let f of l)for(let p of f.nodes())p.setProperties(c)}},onUpdate(f){for(let p of a)p.setProperties(f);for(let p of l)for(let m of p.nodes())m.setProperties(f)},onStop:()=>{for(let f of a)f.setProperties(M(M({},s),u));for(let f of l)for(let p of f.nodes())p.setProperties(M(M({},s),u))}})}function TP(t,e,n,i){let r=n(t,e);return i.added.has(r)?"added":i.removed.has(r)?"removed":"updated"}var th={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function tv(t,e=new Date(t.getFullYear(),0,1)){let n=t.getTimezoneOffset()-e.getTimezoneOffset(),i=t.getTime()-e.getTime()+n*6e4,r=36e5*24;return Math.floor(i/r)}function xw(t,e){let i=new Date(t.getFullYear(),0,1).getDay(),r=(e-i+7)%7,s=new Date(t.getFullYear(),0,r+1);return s<=t?Math.floor(tv(t,s)/7)+1:0}var AP=0,qM=1,Dw=4;function ZM(t,e=t.getFullYear()){let i=new Date(e,0,1).getDay(),r=(Dw-i+7)%7,s=new Date(e,0,r-(Dw-qM)+1);return s<=t?Math.floor(tv(t,s)/7)+1:ZM(t,e-1)}function NP(t){let e=t.getTimezoneOffset(),n=Math.abs(e);return`${e>0?"-":"+"}${kt(Math.floor(n/60),2,"0")}${kt(Math.floor(n%60),2,"0")}`}var kP={a:t=>th.shortDays[t.getDay()],A:t=>th.days[t.getDay()],b:t=>th.shortMonths[t.getMonth()],B:t=>th.months[t.getMonth()],c:"%x, %X",d:(t,e)=>kt(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>kt(t.getMilliseconds()*1e3,6,e??"0"),H:(t,e)=>kt(t.getHours(),2,e??"0"),I:(t,e)=>{let n=t.getHours()%12;return n===0?"12":kt(n,2,e??"0")},j:(t,e)=>kt(tv(t)+1,3,e??"0"),m:(t,e)=>kt(t.getMonth()+1,2,e??"0"),M:(t,e)=>kt(t.getMinutes(),2,e??"0"),L:(t,e)=>kt(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>kt(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>kt(xw(t,AP),2,e??"0"),V:(t,e)=>kt(ZM(t),2,e??"0"),w:(t,e)=>kt(t.getDay(),2,e??"0"),W:(t,e)=>kt(xw(t,qM),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>kt(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>kt(t.getFullYear(),4,e??"0"),Z:t=>NP(t),"%":()=>"%"},RP={_:" ",0:"0","-":""};function kt(t,e,n){let i=String(Math.floor(t));return i.length>=e?i:`${n.repeat(e-i.length)}${i}`}function Uc(t){let e=[];for(;t.length>0;){let n=t.indexOf("%");if(n!==0){let a=n>0?t.substring(0,n):t;e.push(a)}if(n<0)break;let i=t[n+1],r=RP[i];r!=null&&n++;let s=t[n+1],o=kP[s];if(typeof o=="function")e.push([o,r]);else if(typeof o=="string"){let a=Uc(o);e.push([a,r])}else e.push(`${r??""}${s}`);t=t.substring(n+2)}return n=>{let i=typeof n=="number"?new Date(n):n;return e.map(r=>typeof r=="string"?r:r[0](i,r[1])).join("")}}function Jt(t){return t instanceof Date?t.getTime():t}function nv(t,e,n){let i=XM(t,e,n),r=Uc(i);return s=>r(s)}function XM(t=[],e=t,n=0){let i=1/0;for(let l=1;l<t.length;l++)i=Math.min(i,Math.abs(t[l]-t[l-1]));let r=new Date(e[0]).getFullYear(),o=new Date(e.at(-1)).getFullYear()-r>0,a=isFinite(i)?LP(i,t):OP(t[0]);return PP(Math.max(a-n,0),o,t)}function LP(t,e){return t<Br?0:t<Ot?1:t<Ut?2:t<_n?3:t<lr?4:t<_n*28||t<_n*31&&_P(e)?5:t<ya?6:7}function OP(t){return Xl.floor(t)<t?0:Ql.floor(t)<t?1:Jl.floor(t)<t?2:ly.floor(t)<t?3:na.floor(t)<t?ph.floor(t)<t?4:5:Wy.floor(t)<t?6:7}function _P(t){let e=new Date(t[0]).getMonth();for(let n=1;n<t.length;n++){let i=new Date(t[n]).getMonth();if(e===i)return!0;e=i}return!1}function PP(t,e,n){let i=Jt(n[0]),r=Jt(n.at(-1)),s=Math.abs(r-i),o=e||t===7,a=s===0,c=[["hour",6*Ut,14*_n,3,"%I %p"],["hour",Ot,6*Ut,3,"%I:%M"],["second",1e3,6*Ut,1,":%S"],["ms",0,6*Ut,0,".%L"],["am/pm",Ot,6*Ut,3,"%p"]," ",["day",_n,lr,4,"%a"],["month",a?0:lr,52*lr,5,"%b %d"],["month",5*lr,10*ya,6,"%B"]," ",["year",o?0:ya,1/0,7,"%Y"]].filter(h=>{if(typeof h=="string")return!0;let[f,p,m,y]=h;return y>=t&&p<=s&&s<m}).reduce((h,f)=>(typeof f=="string"?h.result.push(f):h.used.has(f[0])||(h.result.push(f),h.used.add(f[0])),h),{result:[],used:new Set}).result,u=c.findIndex(h=>typeof h!="string"),d=c.length-[...c].reverse().findIndex(h=>typeof h!="string");return c.slice(u,d).map(h=>typeof h=="string"?h:h[4]).join("").replaceAll(/\s+/g," ").trim()}var Mt=(t,e)=>{let n=Symbol(String(e));t[n]=void 0,Object.defineProperty(t,e,{get(){return this[n]},set(i){this[n]!==i&&(this[n]=i,this.invalid=!0)},enumerable:!0,configurable:!1})},rf=class QM{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof QM}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&L.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.index=new Map,this.invalid=!0,this._domain=[];for(let n of e){let i=Jt(n);this.getIndex(i)===void 0&&this.index.set(i,this._domain.push(n)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(e){this.refresh();let n=this.getIndex(e);return n==null?NaN:this.ordinalRange[n]??NaN}invert(e){this.refresh();let n=this.ordinalRange.findIndex(i=>i===e);return this.domain[n]}invertNearest(e){this.refresh();let n=-1,i=1/0,r=this.ordinalRange.findIndex((s,o)=>{if(s===e)return!0;let a=Math.abs(e-s);return a<i&&(i=a,n=o),!1});return this.domain[r]??this.domain[n]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=ae(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=ae(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=ae(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){let e=this._domain.length;if(e===0)return;let[n,i]=this.range,{_paddingInner:r}=this,{_paddingOuter:s,round:o}=this,a=i-n,l,c,u;e===1?(r=0,l=a*(1-s*2),c=o?Math.round(l):l,u=a*s):(l=a/Math.max(1,e-r+s*2),c=o?Math.floor(l):l,u=n+(a-c*(e-r))/2);let d=c*(1-r);o&&(u=Math.round(u),d=Math.round(d)),this._step=c,this._inset=u,this._bandwidth=d,this._rawBandwidth=l*(1-r),this.ordinalRange=this._domain.map((h,f)=>u+c*f)}getIndex(e){return this.index.get(e instanceof Date?e.getTime():e)}};g([Mt],rf.prototype,"range",2);g([Mt],rf.prototype,"round",2);g([Mt],rf.prototype,"interval",2);var Kr=rf;function b(t,e={}){let{optional:n=!1,property:i}=e;return fr((r,s,o)=>{let a=N(M({},e),{target:r,property:s});if(n&&typeof o>"u"||t(o,a))return Fi(r[s])&&!Fi(o)?(r[s].set(o),r[s]):o;let l=i??String(s).replace(/^_*/,""),c=r.constructor.className??r.constructor.name.replace(/Properties$/,""),u=hc(o),d=50;if(u!=null&&u.length>d){let h=u.length-d;u=u.slice(0,d)+`... (+${h} characters)`}return L.warn(`Property [${l}] of [${c}] cannot be set to [${u}]${t.message?`; expecting ${Hc(t,a)}`:""}, ignoring.`),Nh},void 0,{optional:n})}var zn=(...t)=>{let e=[];return Oe((n,i)=>(e.length=0,t.every(r=>{let s=r(n,i);return s||e.push(Hc(r,i)),s})),()=>e.filter(Boolean).join(" AND "))},Js=(...t)=>Oe((e,n)=>t.some(i=>i(e,n)),e=>t.map(UP(e)).filter(Boolean).join(" OR ")),z=cI(Oe((t,e)=>Fi(t)||Fn(t)&&Fi(e.target[e.property]),"a properties object")),JM=cI(Oe(t=>Fn(t),"an object")),H=Oe(jM,"a boolean"),tn=Oe(Qs,"a function"),P=Oe(Bn,"a string"),Pe=$P(Oe(be,"a number")),sf=Oe(t=>gn(t)&&isNaN(t),"NaN"),O=Pe.restrict({min:0}),Ie=Pe.restrict({min:0,max:1}),Qr=Pe.restrict({min:-360,max:360}),Ta=Js(Pe,sf),Aa=HP(Oe(rt,"an array")),pr=(t,e)=>Oe((n,i)=>rt(n)&&n.every(r=>t(r,i)),n=>{let i=Hc(Aa,n)??"";return e?`${i} of ${e}`:i}),Lh=t=>be(t)||Gc(t),Na=t=>Oe((e,n)=>!Lh(e)||!Lh(n.target[t])||e<n.target[t],`to be less than ${t}`),ka=t=>Oe((e,n)=>!Lh(e)||!Lh(n.target[t])||e>n.target[t],`to be greater than ${t}`),iv=Oe(Gc,"Date object"),rv=Js(iv,O),eI="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",we=Oe(t=>Bn(t)&&Li.validColorString(t),`color String. ${eI}`),Gn=Oe(pr(we),`color strings. ${eI}`),FP=pr(H,"boolean values"),of=pr(Pe,"numbers"),tI=pr(P,"strings"),BP=Oe(pr(iv),"Date objects"),nI=Oe(pr(z),"objects"),iI=je(["butt","round","square"],"a line cap"),jP=je(["round","bevel","miter"],"a line join"),gr=Oe(pr(O),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),sv=je(["top","right","bottom","left"],"a position"),Jr=je(["normal","italic","oblique"],"a font style"),es=Js(je(["normal","bold","bolder","lighter"],"a font weight"),Pe.restrict({min:1,max:1e3})),af=je(["never","always","hyphenate","on-space"],"a text wrap strategy"),rI=je(["left","center","right"],"a text align"),VP=je(["top","middle","bottom"],"a vertical align"),zP=je(["ellipsis","hide"],"an overflow strategy"),sI=je(["horizontal","vertical"],"a direction"),oI=je(["inside","outside"],"a placement"),lf=Js(je(["exact","nearest"],"interaction range"),Pe),ov=je(["top","bottom","left","right"]);function je(t,e="a"){return Oe(n=>t.includes(n),`${e} keyword such as ${GP(t)}`)}var aI=Js(zn(Pe.restrict({min:1}),Na("maxSpacing")),sf),lI=Js(zn(Pe.restrict({min:1}),ka("minSpacing")),sf);function Oe(t,e){return t.message=e,t}function GP(t){let e=t.map(i=>`'${i}'`);if(e.length===1)return e[0];let n=e.pop();return`${e.join(", ")} or ${n}`}function Hc(t,e){return Qs(t.message)?t.message(e):t.message}function UP(t){return e=>Hc(e,t)}function HP(t){return Object.assign(t,{restrict({length:e,minLength:n}={}){let i="an array";return gn(n)&&n>0?i="a non-empty array":gn(e)&&(i=`an array of length ${e}`),Oe(r=>rt(r)&&(gn(e)?r.length===e:!0)&&(gn(n)?r.length>=n:!0),i)}})}function $P(t){return Object.assign(t,{restrict({min:e,max:n}={}){let i=["a number"],r=gn(e),s=gn(n);return r&&s?i.push(`between ${e} and ${n} inclusive`):r?i.push(`greater than or equal to ${e}`):s&&i.push(`less than or equal to ${n}`),Oe(o=>be(o)&&(r?o>=e:!0)&&(s?o<=n:!0),i.join(" "))}})}function cI(t){return Object.assign(t,{restrict(e){return Oe(n=>n instanceof e,n=>Hc(t,n)??`an instance of ${e.name}`)}})}function hc(t){if(typeof t=="number"){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var av=(t=>(t.X="x",t.Y="y",t))(av||{}),fy={constructedArrays:new WeakMap};function uI(t,e){fy.constructedArrays?.set(t,e)}var ts=(()=>{let t=class py{constructor(n,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=py.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=n,this.range=i}static is(n){return n instanceof py}transform(n){return n}transformInvert(n){return n}calcBandwidth(n=1){let i=this.getDomain(),r=this.getPixelRange(),s=Math.abs(i[1]-i[0])/n+1,o=Math.floor(r),a=Math.min(s,o);return r/Math.max(1,a)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(n,i){let r=i?.clampMode??this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();let s=this.getDomain().map(d=>this.transform(d)),[o,a]=s,{range:l}=this,[c,u]=l;if(n=this.transform(n),r==="clamped"){let[d,h]=Pn(s.map(Number));if(Number(n)<d)return c;if(Number(n)>h)return u}return o===a?(c+u)/2:n===o?c:n===a?u:c+(Number(n)-Number(o))/(Number(a)-Number(o))*(u-c)}invert(n){this.refresh();let i=this.getDomain().map(f=>this.transform(f)),[r,s]=i,{range:o}=this,[a,l]=o,c=a>l,u=c?l:a,d=c?a:l,h;return n<u?c?s:r:n>d?c?r:s:(a===l?h=this.toDomain((Number(r)+Number(s))/2):h=this.toDomain(Number(r)+(n-a)/(l-a)*(Number(s)-Number(r))),this.transformInvert(h))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&L.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){let[n,i]=this.range;return Math.abs(i-n)}};return t.defaultTickCount=5,t.defaultMaxTickCount=6,t})();g([Mt],ts.prototype,"domain",2);g([Mt],ts.prototype,"range",2);g([Mt],ts.prototype,"nice",2);g([Mt],ts.prototype,"interval",2);g([Mt],ts.prototype,"tickCount",2);g([Mt],ts.prototype,"minTickCount",2);g([Mt],ts.prototype,"maxTickCount",2);var ke=ts;function dI(t,e){let n=[];for(let i=0;i<t;i++)n.push(e(i));return n}function Hi(t){if(t.length===0)return;let e=1/0,n=-1/0;for(let r of t)r instanceof Date&&(r=r.getTime()),typeof r=="number"&&(r<e&&(e=r),r>n&&(n=r));let i=[e,n];if(i.every(isFinite))return i}function hI(t,e,n){return $c(t,e,n).extent}function $c(t,e,n){let i=!1;return t.length>2&&(t=Hi(t)??[NaN,NaN]),isNaN(e)||(i||(i=e>t[0]),t=[e,t[1]]),isNaN(n)||(i||(i=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{extent:t,clipped:i}}function Hs(t,e){if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(Array.isArray(t[n])&&Array.isArray(e[n])){if(!Hs(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function gy(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function cf(t){return Array.from(new Set(t))}function lv(t,e){return t.reduce((n,i)=>{let r=e(i);return n[r]??(n[r]=[]),n[r].push(i),n},{})}function my(t,e,n=0){if(t.length===0)return[];let i=[];for(let r=0;r<e;r++)i.push(t.at((r+n)%t.length));return i}function fI(t,e){return e.reduce(([n,i],r)=>t(r)?[[...n,r],i]:[n,[...i,r]],[[],[]])}function*WP(t,e){for(let n of t)yield e(n)}function YP(t,e){return t.includes(e)}function KP(t,e){return YP(t,e)}function mh(t,e){return!e.some(n=>!KP(t,n))}function pI(t){let e,n,i=ZP.exec(t);i&&([,e,t,n]=i);let r=qP.exec(t);if(!r)throw new Error(`The number formatter is invalid: ${t}`);let[,s,o,a,l,c,u,d,h,f,p]=r;return{fill:s,align:o,sign:a,symbol:l,zero:c,width:parseInt(u),comma:d,precision:parseInt(h),trim:!!f,type:p,prefix:e,suffix:n}}function gI(t){let e=typeof t=="string"?pI(t):t,{fill:n,align:i,sign:r="-",symbol:s,zero:o,width:a,comma:l,type:c,prefix:u="",suffix:d="",precision:h}=e,{trim:f}=e,p=h==null||isNaN(h),m;if(!c)m=Ln.g,f=!0;else if(c in Ln&&c in aa)m=p?aa[c]:Ln[c];else if(c in Ln)m=Ln[c];else if(c in aa)m=aa[c];else throw new Error(`The number formatter type is invalid: ${c}`);let y;return h==null||p?y=c?6:12:y=h,v=>{let x=m(v,y);return f&&(x=JP(x)),l&&(x=eF(x,l)),x=nF(v,x,r),s&&s!=="#"&&(x=`${s}${x}`),s==="#"&&c==="x"&&(x=`0x${x}`),c==="s"&&(x=`${x}${tF(v)}`),(c==="%"||c==="p")&&(x=`${x}%`),a!=null&&!isNaN(a)&&(x=iF(x,a,n??o,i)),x=`${u}${x}${d}`,x}}var qP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,ZP=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,aa={b:t=>nh(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>nh(t).toString(8),x:t=>nh(t).toString(16),X:t=>aa.x(t).toUpperCase(),n:t=>aa.d(t),"%":t=>`${nh(t*100).toFixed(0)}`},Ln={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>Ln.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>Ln.f(t,e).toUpperCase(),g:(t,e)=>{if(t===0)return"0";let n=Math.abs(t),i=Math.floor(Math.log10(n));return i>=-4&&i<e?n.toFixed(e-1-i):n.toExponential(e-1)},G:(t,e)=>Ln.g(t,e).toUpperCase(),n:(t,e)=>Ln.g(t,e),p:(t,e)=>Ln.r(t*100,e),r:(t,e)=>{if(t===0)return"0";let n=Math.abs(t),r=Math.floor(Math.log10(n))-(e-1);if(r<=0)return n.toFixed(-r);let s=10**r;return(Math.round(n/s)*s).toFixed()},s:(t,e)=>{let n=vI(t);return Ln.r(t/10**n,e)},"%":(t,e)=>Ln.f(t*100,e)},mI=-24,yI=24,XP={[mI]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[yI]:"Y"},QP="\u2212";function nh(t){return Math.floor(Math.abs(t))}function JP(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function eF(t,e){let n=t.indexOf(".");n<0&&(n=t.length);let i=t.substring(0,n).split(""),r=t.substring(n);for(let s=i.length-3;s>0;s-=3)i.splice(s,0,e);return`${i.join("")}${r}`}function tF(t){return XP[vI(t)]}function vI(t){return ae(mI,t?Math.floor(Math.log10(Math.abs(t))/3)*3:0,yI)}function nF(t,e,n=""){if(n==="(")return t>=0?e:`(${e})`;let i=n==="+"?"+":"";return`${t>=0?i:QP}${e}`}function iF(t,e,n=" ",i=">"){let r=t;if(i===">"||!i)r=r.padStart(e,n);else if(i==="<")r=r.padEnd(e,n);else if(i==="^"){let s=Math.max(0,e-r.length),o=Math.ceil(s/2),a=Math.floor(s/2);r=r.padStart(o+r.length,n),r=r.padEnd(a+r.length,n)}return r}var Ze=(t,e,n)=>({duration:e*n,timeInterval:t,step:n}),nc=[Ze(Xl,Br,1),Ze(Xl,Br,5),Ze(Xl,Br,15),Ze(Xl,Br,30),Ze(Ql,Ot,1),Ze(Ql,Ot,5),Ze(Ql,Ot,15),Ze(Ql,Ot,30),Ze(Jl,Ut,1),Ze(Jl,Ut,3),Ze(Jl,Ut,6),Ze(Jl,Ut,12),Ze(ly,_n,1),Ze(ly,_n,2),Ze(ph,lr,1),Ze(ph,lr,2),Ze(ph,lr,3),Ze(na,Wl,1),Ze(na,Wl,2),Ze(na,Wl,3),Ze(na,Wl,4),Ze(na,Wl,6),Ze(Wy,ya,1)],bI=[1,2,5,10];function uf(t,e,n,i,r){if(n<2)return Cc(t,e,e-t);let s=va(t,e,n,i,r);return isNaN(s)?[]:(t=Math.ceil(t/s)*s,e=Math.floor(e/s)*s,Cc(t,e,s))}function Sw(t,e,n,i,r,s){let o=s??Math.abs(e-t)/Math.max(n,1),a=0;for(let h of nc){if(o<=h.duration)break;a++}if(a===0){let h=Math.max(va(t,e,n,i,r),1);return _1.every(h)}else if(a===nc.length){let h=s==null?va(t/ya,e/ya,n,i,r):1;return Wy.every(h)}let l=nc[a-1],c=nc[a],{timeInterval:u,step:d}=o-l.duration<c.duration-o?l:c;return u.every(d)}function va(t,e,n,i=0,r=1/0){if(t===e)return 1;if(n<1)return NaN;let s=Math.abs(e-t),o=10**Math.floor(Math.log10(s/n)),a=NaN,l=1/0,c=!1;for(let u of bI){let d=Math.ceil(s/(u*o)),h=d>=i&&d<=r;if(c&&!h)continue;let f=Math.abs(d-n);(l>f||c!==h)&&(c||(c=h),l=f,a=u)}return a*o}function ww(t){for(let e=t.length-1;e>=0;e-=1)if(t[e]!=="0")return e+1;return 0}function xI(t,e){let n=pI(e??",f");(n.precision==null||isNaN(n.precision))&&(!n.type||"eEFgGnprs".includes(n.type)?n.precision=Math.max(...t.map(r=>{if(!Number.isFinite(r))return 0;let[s,o]=r.toExponential((n.type?6:12)-1).split(/\.|e/g);return(s!=="1"&&s!=="-1"?1:0)+ww(o)+1})):"f%".includes(n.type)&&(n.precision=Math.max(...t.map(r=>{if(!Number.isFinite(r)||r===0)return 0;let s=Math.floor(Math.log10(Math.abs(r))),o=n.type?6:12,[a,l]=r.toExponential(o-1).split(/\.|e/g),c=ww(l);return Math.max(0,c-s)}))));let i=gI(n);return r=>i(Number(r))}function Cc(t,e,n){let i=Math.ceil(Math.abs(e-t)/n),r=10**Jh(n),s=Math.min(t,e);return dI(i+1,o=>Math.round((s+n*o)*r)/r)}function Ec(t,e){return t>=e?(L.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function rF(t,e){let n=Math.abs(e-t),i=10**Math.floor(Math.log10(n)),r=1/0,s=[t,e];for(let o of bI){let a=o*i,l=Math.floor(t/a)*a,c=Math.ceil(e/a)*a,u=1-n/Math.abs(c-l);r>u&&(r=u,s=[l,c])}return s}var df=class yh extends ke{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,n){return super.convert(new Date(e),n)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();let{interval:e,nice:n,tickCount:i,minTickCount:r,maxTickCount:s}=this,[o,a]=Pn(this.getDomain().map(Jt));return e!=null?yh.getTicksForInterval({start:o,stop:a,interval:e,availableRange:this.getPixelRange()})??yh.getDefaultTicks({start:o,stop:a,tickCount:i,minTickCount:r,maxTickCount:s}):n&&i===2?this.niceDomain:n&&i===1?this.niceDomain.slice(0,1):yh.getDefaultTicks({start:o,stop:a,tickCount:i,minTickCount:r,maxTickCount:s})}static getDefaultTicks({start:e,stop:n,tickCount:i,minTickCount:r,maxTickCount:s}){let o=Sw(e,n,i,r,s);return o?o.range(new Date(e),new Date(n)):[]}static getTicksForInterval({start:e,stop:n,interval:i,availableRange:r}){if(!i)return[];if(i instanceof qs){let d=i.range(new Date(e),new Date(n));return Ec(d.length,r)?void 0:d}let s=Math.abs(i);if(Ec((n-e)/s,r))return;let a=[...nc].reverse().find(d=>s%d.duration===0);if(a)return a.timeInterval.every(s/(a.duration/a.step)).range(new Date(e),new Date(n));let l=new Date(e),c=new Date(n),u=[];for(;l<=c;)u.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+s);return u}tickFormat({ticks:e,domain:n,specifier:i,formatOffset:r}){return i==null?nv(e,n,r):Uc(i)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[n,i]=this.domain;for(let r=0;r<4;r++){this.updateNiceDomainIteration(n,i);let[s,o]=this.niceDomain;if(Jt(n)===Jt(s)&&Jt(i)===Jt(o))break;n=s,i=o}}updateNiceDomainIteration(e,n){let i=Math.min(Jt(e),Jt(n)),r=Math.max(Jt(e),Jt(n)),s=e>n,{interval:o}=this,a;if(o instanceof qs)a=o;else{let l=typeof o=="number"?(r-i)/Math.max(o,1):this.tickCount;a=Sw(i,r,l,this.minTickCount,this.maxTickCount)}if(a){let l=a.range(new Date(i),new Date(r),!0),c=s?[...l].reverse():l,u=c[0],d=c.at(-1);this.niceDomain=[u,d]}}};function sF(t,e){return t-e}var Wc=class DI extends Kr{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=ke.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.timestamps=[],this.sortedTimestamps=[],this.visibleRange=[0,1]}static is(e){return e instanceof DI}setVisibleRange(e){this.visibleRange=e}set domain(e){if(this.invalid=!0,e.length===0){this._domain=[];return}this._domain=e,this.timestamps=cf(e.map(Jt)),this.sortedTimestamps=this.timestamps.slice().sort(sF)}get domain(){return this._domain}ticks(){this.refresh();let[e,n]=[this.timestamps[0],this.timestamps.at(-1)],i=Math.min(e,n),r=Math.max(e,n),s=e>n,o;if(this.interval==null)o=this.getDefaultTicks(this.maxTickCount,s);else{let[l,c]=this.range,u=Math.abs(c-l);o=df.getTicksForInterval({start:i,stop:r,interval:this.interval,availableRange:u})??[]}let a=new Set;return o.filter(l=>{let c=this.convert(l);return isNaN(c)||a.has(c)?!1:(a.add(c),!0)})}getDefaultTicks(e,n){let i=[],r=this.timestamps.length,s=Math.ceil(r*(this.visibleRange[1]-this.visibleRange[0])/e),o=Math.floor(s/2);for(let[a,l]of this.timestamps.entries())s>0&&(a+o)%s||(n?i.push(new Date(this.timestamps[r-a-1])):i.push(new Date(l)));return i}convert(e){this.refresh();let n=Number(e);if(n<this.sortedTimestamps[0])return NaN;let i=this.findInterval(n);return this.timestamps[0]!==this.sortedTimestamps[0]&&(i=this.timestamps.length-i-1),this.ordinalRange[i]??NaN}findInterval(e){let{sortedTimestamps:n}=this,i=0,r=n.length-1;for(;i<=r;){let s=Math.floor((i+r)/2);if(n[s]===e)return s;n[s]<e?i=s+1:r=s-1}return i}tickFormat({ticks:e,domain:n,specifier:i}){return i==null?nv(e,n):Uc(i)}invert(e){this.refresh();let n=this.ordinalRange.findIndex(i=>e<=i);return this.domain[n]}invertNearest(e){return new Date(super.invertNearest(e))}};g([Mt],Wc.prototype,"tickCount",2);g([Mt],Wc.prototype,"minTickCount",2);g([Mt],Wc.prototype,"maxTickCount",2);g([Mt],Wc.prototype,"interval",2);var ii=Wc;function SI(t,e){return typeof t=="number"&&typeof e=="number"?t-e:typeof t=="string"&&typeof e=="string"?t.localeCompare(e):t==null&&e==null?0:t==null?-1:e==null?1:String(t).localeCompare(String(e))}function Mw(t){return typeof t=="function"?t():t}function wI(t,e,n){for(let i in t){let r=n(Mw(t[i]),Mw(e[i]));if(r!==0)return r}return 0}var MI=(()=>{let t=class vh extends Ea{constructor(n){super({isVirtual:n?.isVirtual}),this.opts=n,this.opacity=1,this.lastBBox=void 0;let{zIndex:i,zIndexSubOrder:r}=n??{};this.isContainerNode=!0,i!==void 0&&(this.zIndex=i),r!==void 0&&(this.zIndexSubOrder=r),this.name=this.opts?.name}static is(n){return n instanceof vh}onZIndexChange(){super.onZIndexChange(),this.layer&&this._layerManager?.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder)}isLayer(){return this.layer!=null}_setLayerManager(n){if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");super._setLayerManager(n)}initialiseLayer(){this.layer||!this._layerManager||this.opts?.layer!==!0||(this.layer=this._layerManager.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()}))}getComputedOpacity(){let n=1;for(let i of this.traverseUp())i instanceof vh&&(n*=i.opacity);return n}getVisibility(){for(let n of this.traverseUp())if(!n.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(n,i=1){if(this.isVirtual){super.markDirty(n,i);return}let r=i;(i<2||this.layer!=null)&&(r=1),super.markDirty(n,i,r)}containsPoint(n,i){return!0}computeBBox(){return this.computeTransformMatrix(),vh.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}computeTransformedRegionBBox(){return this.clipRect?(this.computeTransformMatrix(),this.matrix.transformBBox(this.clipRect)):this.computeTransformedBBox()}preRender(){let n=super.preRender();return n.groups+=1,n.nonGroups-=1,this.opts?.layer!==!0||this.layer!=null||(n.nonGroups>0&&this.initialiseLayer(),this.opts?.nonEmptyChildDerivedZIndex&&n.nonGroups>0&&this.deriveZIndexFromChildren()),n}deriveZIndexFromChildren(){let n=this.children.filter(r=>r._childNodeCounts.nonGroups>0);this.sortChildren(n);let i=n.at(-1);this.zIndex=i?.zIndex??-1/0,this.zIndexSubOrder=i?.zIndexSubOrder}render(n){let{opts:{name:i=void 0}={},_debug:r}=this,{dirty:s,dirtyZIndex:o,layer:a,children:l,clipRect:c,dirtyTransform:u}=this,{ctx:d,forceRender:h,clipBBox:f}=n,{resized:p,stats:m}=n,y=d.getTransform(),v=s>=2||o||p,x=v,D=!1;for(let E of l)if(x||(x=E.layerManager==null&&E.dirty>=1),D||(D=E.layerManager!=null&&E.dirty>=1),x)break;if(i&&r?.({name:i,group:this,isDirty:v,isChildDirty:x,dirtyTransform:u,renderCtx:n,forceRender:h}),u)h="dirtyTransform";else if(a){let E=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(E))&&(h="dirtyTransform",this.lastBBox=E)}if(!v&&!x&&!D&&!h){i&&m&&r?.({name:i,result:"skipping",renderCtx:n,counts:this.nodeCount,group:this}),a&&m&&(m.layersSkipped++,m.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}let S=this.visible;if(a){if(d=a.context,d.save(),d.setTransform(a.pixelRatio,0,0,a.pixelRatio,0,0),h!=="dirtyTransform"&&(h=x||o),h&&a.clear(),f){let{width:E,height:A,x:R,y:_}=f;r?.(()=>({name:i,clipBBox:f,ctxTransform:d.getTransform(),renderCtx:n,group:this})),d.beginPath(),d.rect(R,_,E,A),d.clip()}d.setTransform(y)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),c){let{x:E,y:A,width:R,height:_}=c;d.save(),r?.(()=>({name:i,clipRect:c,ctxTransform:d.getTransform(),renderCtx:n,group:this})),d.beginPath(),d.rect(E,A,R,_),d.clip(),f=this.matrix.transformBBox(c)}let w=this.hasVirtualChildren();o?(this.sortChildren(l),h!=="dirtyTransform"&&(h=!0)):w&&this.sortChildren(l);let C=h!==n.forceRender||f!==n.clipBBox||d!==n.ctx?N(M({},n),{ctx:d,forceRender:h,clipBBox:f}):n,T=0;for(let E of l){if(!E.visible||!S){E.markClean(),m&&(T+=E.nodeCount.count);continue}if(!h&&E.dirty===0){m&&(T+=E.nodeCount.count);continue}d.save(),E.render(C),d.restore()}if(m&&(m.nodesSkipped+=T),super.render(n),c&&d.restore(),w)for(let E of this.virtualChildren)E.markClean({recursive:"virtual"});a&&(m&&m.layersRendered++,d.restore(),h&&a.snapshot(),a.context.verifyDepthZero?.()),i&&m&&r?.({name:i,result:"rendered",skipped:T,renderCtx:n,counts:this.nodeCount,group:this})}sortChildren(n){this.dirtyZIndex=!1,n.sort((i,r)=>wI([i.zIndex,...i.zIndexSubOrder??[void 0,void 0],i.serialNumber],[r.zIndex,...r.zIndexSubOrder??[void 0,void 0],r.serialNumber],SI))}static computeBBox(n){let i=1/0,r=-1/0,s=1/0,o=-1/0;for(let a of n){if(!a.visible)continue;let l=a.computeTransformedBBox();if(!l)continue;let{x:c,y:u,width:d,height:h}=l;c<i&&(i=c),u<s&&(s=u),c+d>r&&(r=c+d),u+h>o&&(o=u+h)}return new V(i,s,r-i,o-s)}setClipRectInGroupCoordinateSpace(n){this.clipRect=n?this.transformBBox(n):void 0}};return t.className="Group",t})();g([j({redraw:3,convertor:t=>ae(0,t,1)})],MI.prototype,"opacity",2);var U=MI,On=Math.PI*2;function $e(t){return t%=On,t+=On,t%=On,t}function oF(t){return t%=On,t+=On,t!==On&&(t%=On),t}function Tc(t){return t%=On,t<-Math.PI?t+=On:t>=Math.PI&&(t-=On),t}function jr(t,e,n){let i=$e(t),r=$e(e),s=$e(n);return r<s?r<=i&&i<=s:r>s?r<=i||i<=s:!0}function $t(t){return t/180*Math.PI}function aF(t){return t/Math.PI*180}function II(t,e,n){n&&([t,e]=[e,t]);let i=$e(t);return($e(e)+On-i)%On}function hf(t,e){return t=$e(t),e=$e(e),e-t+(t>e?2*Math.PI:0)}function lF(t,e,n,i){let r=t+n*Math.cos(i),s=e+n*Math.sin(i);return{x:r,y:s}}var cF=class{constructor(t=[]){this.stops=t}},uF=class extends cF{constructor(t,e=0){super(t),this.angle=e}createGradient(t,e){let{stops:i,angle:r}=this,s=$e($t(r+90)),o=Math.cos(s),a=Math.sin(s),l=e.width,c=e.height,u=e.x+l*.5,d=e.y+c*.5;if(l>0&&c>0){let h=Math.sqrt(c*c+l*l)/2,f=Math.atan2(c,l),p;s<Math.PI/2?p=s:s<Math.PI?p=Math.PI-s:s<1.5*Math.PI?p=s-Math.PI:p=2*Math.PI-s;let m=h*Math.abs(Math.cos(p-f)),y=t.createLinearGradient(u+o*m,d+a*m,u-o*m,d-a*m);for(let v of i)y.addColorStop(v.offset,v.color);return y}return"black"}},dF=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,bn=(()=>{let t=class Mi extends Ea{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Mi.defaultStyles.fill,this.stroke=Mi.defaultStyles.stroke,this.strokeWidth=Mi.defaultStyles.strokeWidth,this.lineDash=Mi.defaultStyles.lineDash,this.lineDashOffset=Mi.defaultStyles.lineDashOffset,this.lineCap=Mi.defaultStyles.lineCap,this.lineJoin=Mi.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=Mi.defaultStyles.opacity,this.fillShadow=Mi.defaultStyles.fillShadow}restoreOwnStyles(){let{defaultStyles:n}=this.constructor;Object.assign(this,n)}onFillChange(){let{fill:n}=this,i;if(n?.startsWith("linear-gradient")&&(i=dF.exec(n))){let r=parseFloat(i[1]),s=[],o=i[2],a=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,l;for(;l=a.exec(o);)s.push(l[0]);this.gradient=new uF(s.map((c,u)=>({color:c,offset:u/(s.length-1)})),r)}else this.gradient=void 0}align(n,i){let r=this.layerManager?.canvas?.pixelRatio??1,s=Math.round(n*r)/r;return i==null?s:i===0?0:i<1?Math.ceil(i*r)/r:Math.round((i+n)*r)/r-s}fillStroke(n,i){this.renderFill(n,i),this.renderStroke(n,i)}renderFill(n,i){if(this.fill){let{globalAlpha:r}=n;this.applyFill(n),this.applyFillAlpha(n),this.applyShadow(n),this.executeFill(n,i),n.globalAlpha=r}n.shadowColor="rgba(0, 0, 0, 0)"}executeFill(n,i){i?n.fill(i):n.fill()}applyFill(n){n.fillStyle=this.gradient?.createGradient(n,this.computeBBox())??this.fill}applyFillAlpha(n){n.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(n){let i=this.layerManager?.canvas.pixelRatio??1,r=this.fillShadow;r?.enabled&&(n.shadowColor=r.color,n.shadowOffsetX=r.xOffset*i,n.shadowOffsetY=r.yOffset*i,n.shadowBlur=r.blur*i)}renderStroke(n,i){if(this.stroke&&this.strokeWidth){let{globalAlpha:r}=n;n.strokeStyle=this.stroke,n.globalAlpha*=this.opacity*this.strokeOpacity,n.lineWidth=this.strokeWidth,this.lineDash&&n.setLineDash(this.lineDash),this.lineDashOffset&&(n.lineDashOffset=this.lineDashOffset),this.lineCap&&(n.lineCap=this.lineCap),this.lineJoin&&(n.lineJoin=this.lineJoin),this.miterLimit!=null&&(n.miterLimit=this.miterLimit),this.executeStroke(n,i),n.globalAlpha=r}}executeStroke(n,i){i?n.stroke(i):n.stroke()}containsPoint(n,i){return this.isPointInPath(n,i)}};return t.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},t})();g([j({redraw:2})],bn.prototype,"fillOpacity",2);g([j({redraw:2})],bn.prototype,"strokeOpacity",2);g([j({redraw:2,changeCb:t=>t.onFillChange()})],bn.prototype,"fill",2);g([j({redraw:2})],bn.prototype,"stroke",2);g([j({redraw:2})],bn.prototype,"strokeWidth",2);g([j({redraw:2})],bn.prototype,"lineDash",2);g([j({redraw:2})],bn.prototype,"lineDashOffset",2);g([j({redraw:2})],bn.prototype,"lineCap",2);g([j({redraw:2})],bn.prototype,"lineJoin",2);g([j({redraw:2})],bn.prototype,"miterLimit",2);g([j({redraw:2,convertor:t=>ae(0,t,1)})],bn.prototype,"opacity",2);g([j({redraw:2,checkDirtyOnAssignment:!0})],bn.prototype,"fillShadow",2);var Vn=bn,$i=class extends Vn{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new V(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){let{ctx:e,forceRender:n,stats:i}=t;if(this.dirty===0&&!n){i&&(i.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(e);let{x1:r,y1:s,x2:o,y2:a}=this;r=this.align(r),s=this.align(s),o=this.align(o),a=this.align(a);let{fill:l,opacity:c,isRange:u}=this;if(!!(u&&l)){let{fillOpacity:v}=this;e.fillStyle=l,e.globalAlpha=c*v,e.beginPath(),e.moveTo(r,s),e.lineTo(o,s),e.lineTo(o,a),e.lineTo(r,a),e.closePath(),e.fill()}let{stroke:h,strokeWidth:f,startLine:p,endLine:m}=this;if(!!((p||m)&&h&&f)){let{strokeOpacity:v,lineDash:x,lineDashOffset:D,lineCap:S,lineJoin:w}=this;e.strokeStyle=h,e.globalAlpha=c*v,e.lineWidth=f,x&&e.setLineDash(x),D&&(e.lineDashOffset=D),S&&(e.lineCap=S),w&&(e.lineJoin=w),e.beginPath(),p&&(e.moveTo(r,s),e.lineTo(o,s)),m&&(e.moveTo(o,a),e.lineTo(r,a)),e.stroke()}this.fillShadow?.markClean(),super.render(t)}};$i.className="Range";$i.defaultStyles=N(M({},Vn.defaultStyles),{strokeWidth:1});g([j({redraw:2})],$i.prototype,"x1",2);g([j({redraw:2})],$i.prototype,"y1",2);g([j({redraw:2})],$i.prototype,"x2",2);g([j({redraw:2})],$i.prototype,"y2",2);g([j({redraw:2})],$i.prototype,"startLine",2);g([j({redraw:2})],$i.prototype,"endLine",2);g([j({redraw:2})],$i.prototype,"isRange",2);var Yl=new WeakMap,Kl=new WeakMap;function Ac(t,e){let n=JSON.stringify(t,null,0);return Yl.has(e)||Yl.set(e,new Map),Yl.get(e)?.has(n)||Yl.get(e)?.set(n,e(t)),Yl.get(e)?.get(n)}function CI(t){return(e,...n)=>{let i=JSON.stringify(e,null,0);return Kl.has(t)||Kl.set(t,new Map),Kl.get(t)?.has(i)||Kl.get(t)?.set(i,t(e,...n)),Kl.get(t)?.get(i)}}function hF(t=0,e=0){return new OffscreenCanvas(t,e).getContext("2d")}var sr=(()=>{let t=class{constructor(e){this.ctx=e,this.charMap=new Map}static createFontMeasurer(e){let n=hF(),i=new this(n);return this.instanceMap.set(e,i),n.font=e,i}static getFontMeasurer(e){let n=this.instanceMap.get(e.font)??this.createFontMeasurer(e.font);return e.textAlign&&(n.ctx.textAlign=e.textAlign),e.textBaseline&&(n.ctx.textBaseline=e.textBaseline),n}static measureText(e,n){let{ctx:i}=this.getFontMeasurer(n);return this.getMetrics(i,e)}static measureLines(e,n){let{ctx:i}=this.getFontMeasurer(n),r=typeof e=="string"?e.split(this.lineSplitter):e;return this.getMultilineMetrics(i,r)}static wrapText(e,n){return this.wrapLines(e,n).join(`
`)}static wrapLines(e,n){let i=e.split(this.lineSplitter),r=this.getFontMeasurer(n);if(n.textWrap==="never")return i.map(l=>this.truncateLine(l.trimEnd(),r,n.maxWidth));let s=[],o=n.textWrap==="hyphenate",a=n.textWrap==="on-space";for(let l of i){l=l.trimEnd();for(let c=0,u=0,d=0;c<l.length;c++){let h=l.charAt(c);if(u+=r.textWidth(h),h===" "&&(d=c),u>n.maxWidth){if(c===0)break;if(d){let m=this.getWordAt(l,d+1),y=r.textWidth(m);if(y<=n.maxWidth){s.push(l.slice(0,d).trimEnd()),l=l.slice(d).trimStart(),c=-1,u=0,d=0;continue}else a&&y>n.maxWidth&&s.push(l.slice(0,d).trimEnd(),this.truncateLine(l.slice(d).trimStart(),r,n.maxWidth,!0))}else a&&s.push(this.truncateLine(l,r,n.maxWidth,!0));if(a){l="";break}let f=o?"-":"",p=l.slice(0,c).trim();for(;p.length&&r.textWidth(p+f)>n.maxWidth;)p=p.slice(0,-1).trimEnd();if(s.push(p+f),!p.length){l="";break}l=l.slice(p.length).trimStart(),c=-1,u=0,d=0}}l&&s.push(l)}return this.avoidOrphans(s,r,n),this.clipLines(s,r,n)}static getWordAt(e,n){let i=e.indexOf(" ",n);return i===-1?e.slice(n):e.slice(n,i)}static clipLines(e,n,i){if(!i.maxHeight)return e;let{height:r,lineMetrics:s}=this.measureLines(e,i);if(r<=i.maxHeight)return e;for(let o=0,a=0;o<s.length;o++){let{lineHeight:l}=s[o];if(a+=l,a>i.maxHeight){let c=e.slice(0,Math.max(o,1)),u=c.pop();return c.concat(this.truncateLine(u,n,i.maxWidth,!0))}}return e}static avoidOrphans(e,n,i){if(e.length<2)return;let{length:r}=e,s=e[r-1],o=e[r-2];if(o.length<s.length)return;let a=o.lastIndexOf(" ");if(a===-1||a===o.indexOf(" ")||s.includes(" "))return;let l=o.slice(a+1);n.textWidth(s+l)<=i.maxWidth&&(e[r-2]=o.slice(0,a),e[r-1]=l+" "+s)}static truncateLine(e,n,i,r){let s=n.textWidth(this.EllipsisChar),o=0,a=0;for(;a<e.length;a++){let l=n.textWidth(e.charAt(a));if(o+l>i)break;o+=l}if(e.length===a&&(!r||o+s<=i))return r?e+this.EllipsisChar:e;for(e=e.slice(0,a).trimEnd();e.length&&n.textWidth(e)+s>i;)e=e.slice(0,-1).trimEnd();return e+this.EllipsisChar}static getMetrics(e,n){let i=e.measureText(n);return i.fontBoundingBoxAscent??(i.fontBoundingBoxAscent=i.emHeightAscent),i.fontBoundingBoxDescent??(i.fontBoundingBoxDescent=i.emHeightDescent),{width:i.width,height:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,lineHeight:i.fontBoundingBoxAscent+i.fontBoundingBoxDescent,offsetTop:i.actualBoundingBoxAscent,offsetLeft:i.actualBoundingBoxLeft}}static getMultilineMetrics(e,n){let i=0,r=0,s=0,o=0,a=0,l=this.getVerticalModifier(e.textBaseline),c=n.map((u,d,{length:h})=>{let f=e.measureText(u);return f.fontBoundingBoxAscent??(f.fontBoundingBoxAscent=f.emHeightAscent),f.fontBoundingBoxDescent??(f.fontBoundingBoxDescent=f.emHeightDescent),i<f.width&&(i=f.width),o<f.actualBoundingBoxLeft&&(o=f.actualBoundingBoxLeft),d===0?(r+=f.actualBoundingBoxAscent,s+=f.actualBoundingBoxAscent):a+=f.fontBoundingBoxAscent,d===h-1?r+=f.actualBoundingBoxDescent:a+=f.fontBoundingBoxDescent,{text:u,width:f.width,height:f.actualBoundingBoxAscent+f.actualBoundingBoxDescent,lineHeight:f.fontBoundingBoxAscent+f.fontBoundingBoxDescent,offsetTop:f.actualBoundingBoxAscent,offsetLeft:f.actualBoundingBoxLeft}});return r+=a,s+=a*l,{width:i,height:r,offsetTop:s,offsetLeft:o,lineMetrics:c}}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}textWidth(e,n){if(n){let i=0;for(let r=0;r<e.length;r++)i+=this.textWidth(e.charAt(r));return i}return e.length>1?this.ctx.measureText(e).width:this.charMap.get(e)??this.charWidth(e)}charWidth(e){let{width:n}=this.ctx.measureText(e);return this.charMap.set(e,n),n}};return t.EllipsisChar="\u2026",t.instanceMap=new Map,t.lineSplitter=/\r?\n/g,t})(),fF="\u2026";function ff(t){let{redraw:e=3,changeCb:n}=t??{};return j({redraw:e,type:"font",changeCb:n})}var Pt=class Ps extends Vn{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=Ps.defaultStyles.textAlign,this.textBaseline=Ps.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split(`
`).map(e=>e.trim())??[]}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=$s(this)),this._font}computeBBox(){let{x:e,y:n,lines:i,textBaseline:r,textAlign:s}=this,{offsetTop:o,offsetLeft:a,width:l,height:c}=sr.measureLines(i,{font:$s(this),textBaseline:r,textAlign:s});return new V(e-a,n-o,l,c)}getLineHeight(e){return this.lineHeight??sr.measureText(e,this).lineHeight}isPointInPath(e,n){let i=this.transformPoint(e,n),r=this.computeBBox();return r?r.containsPoint(i.x,i.y):!1}render(e){let{ctx:n,forceRender:i,stats:r}=e;if(this.dirty===0&&!i){r&&(r.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){r&&(r.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(n);let{fill:s,stroke:o,strokeWidth:a}=this,{pixelRatio:l}=this.layerManager.canvas;if(n.font=this.font,n.textAlign=this.textAlign,n.textBaseline=this.textBaseline,s){n.fillStyle=s,n.globalAlpha*=this.opacity*this.fillOpacity;let{fillShadow:c}=this;c?.enabled&&(n.shadowColor=c.color,n.shadowOffsetX=c.xOffset*l,n.shadowOffsetY=c.yOffset*l,n.shadowBlur=c.blur*l),this.renderLines((u,d,h)=>n.fillText(u,d,h))}if(o&&a){n.strokeStyle=o,n.lineWidth=a,n.globalAlpha*=this.opacity*this.strokeOpacity;let{lineDash:c,lineDashOffset:u,lineCap:d,lineJoin:h}=this;c&&n.setLineDash(c),u&&(n.lineDashOffset=u),d&&(n.lineCap=d),h&&(n.lineJoin=h),this.renderLines((f,p,m)=>n.strokeText(f,p,m))}super.render(e)}renderLines(e){let{lines:n,x:i,y:r}=this,s=n.map(l=>this.getLineHeight(l)),o=s.reduce((l,c)=>l+c,0),a=(s[0]-o)*Ps.getVerticalModifier(this.textBaseline);for(let l=0;l<n.length;l++)e(n[l],i,r+a),a+=s[l]}static wrapLines(e,n,i,r,s,o){let a=sr.wrapLines(e,{maxWidth:n,maxHeight:i,font:$s(r),textAlign:r.textAlign,textBaseline:r.textBaseline,textWrap:s});if(!(o==="hide"&&a.some(l=>l.endsWith(sr.EllipsisChar))))return a}static wrap(e,n,i,r,s,o="ellipsis"){return Ps.wrapLines(e,n,i,r,s,o)?.join(`
`).trim()??""}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}static getVerticalModifier(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}static measureText(e,n,i,r){return this._measureText({text:e,font:n,textBaseline:i,textAlign:r})}static getTextSize(e,n){return this._getTextSize({text:e,font:n})}static getTextSizeMultiline(e,n,i=Ps.defaultStyles.textBaseline,r=Ps.defaultStyles.textAlign){let s=sr.measureLines(e,{font:n,textBaseline:i,textAlign:r});return{top:s.offsetTop,left:s.offsetLeft,width:s.width,height:s.height}}};Pt.className="Text";Pt.defaultLineHeightRatio=1.15;Pt.defaultStyles=Object.assign({},Vn.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"});Pt.ellipsis=fF;Pt._measureText=CI(({text:t,font:e,textBaseline:n,textAlign:i})=>sr.measureText(t,{font:e,textBaseline:n,textAlign:i}));Pt._getTextSize=CI(({text:t,font:e})=>sr.measureText(t,{font:e}));g([j({redraw:3})],Pt.prototype,"x",2);g([j({redraw:3})],Pt.prototype,"y",2);g([j({redraw:3,changeCb:t=>t.onTextChange()})],Pt.prototype,"text",2);g([ff()],Pt.prototype,"fontStyle",2);g([ff()],Pt.prototype,"fontWeight",2);g([ff()],Pt.prototype,"fontSize",2);g([ff()],Pt.prototype,"fontFamily",2);g([j({redraw:3})],Pt.prototype,"textAlign",2);g([j({redraw:3})],Pt.prototype,"textBaseline",2);g([j({redraw:3})],Pt.prototype,"lineHeight",2);var Me=Pt;function $s(t){let{fontFamily:e,fontSize:n,fontStyle:i,fontWeight:r}=t;return[i??"",r??"",n+"px",e].join(" ").trim()}var vt=class extends le{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return $s(this)}};g([b(H)],vt.prototype,"enabled",2);g([b(we,{optional:!0})],vt.prototype,"color",2);g([b(Jr,{optional:!0})],vt.prototype,"fontStyle",2);g([b(es,{optional:!0})],vt.prototype,"fontWeight",2);g([b(O)],vt.prototype,"fontSize",2);g([b(P)],vt.prototype,"fontFamily",2);g([b(tn,{optional:!0})],vt.prototype,"formatter",2);function Oh(t){let{parallelFlipRotation:e=0,regularFlipRotation:n=0}=t,i=t.rotation?$e($t(t.rotation)):0,r=!i&&e>=0&&e<=Math.PI?-1:1,s=!i&&n>=0&&n<=Math.PI?-1:1,o=0;return t.parallel?o=r*Math.PI/2:s===-1&&(o=Math.PI),{configuredRotation:i,defaultRotation:o,parallelFlipFlag:r,regularFlipFlag:s}}function pF(t,e){return isNaN(t)?e?0:10:t}function gF(t,e,n,i){return t&&!e?n*i===-1?"hanging":"bottom":"middle"}function jm(t,e,n,i,r){let s=e>0&&e<=Math.PI,o=n>0&&n<=Math.PI,a=s||o?-1:1;if(t)if(e||n){if(i*a===-1)return"end"}else return"center";else if(i*r===-1)return"end";return"start"}function mF(t,e,n,i,r){let{width:s,height:o}=e,a=new V(n,i,0,0);r.transformBBox(a,e);let{x:l,y:c}=e;return e.width=s,e.height=o,{point:{x:l,y:c},label:{text:t,width:s,height:o}}}var EI=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.SERIES_HIGHLIGHT_ZINDEX=5]="SERIES_HIGHLIGHT_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=6]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=7]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=8]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=9]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.SERIES_ANNOTATION_ZINDEX=10]="SERIES_ANNOTATION_ZINDEX",t[t.LEGEND_ZINDEX=11]="LEGEND_ZINDEX",t[t.NAVIGATOR_ZINDEX=12]="NAVIGATOR_ZINDEX",t))(EI||{});function TI(t){return t!=null&&Object.hasOwn(t,"toString")&&Bn(t.toString())}function AI(t){return t!=null&&Object.hasOwn(t,"valueOf")&&be(t.valueOf())}function pf(t){return be(t)||Gc(t)||AI(t)}function yy(t,e){return t!=null&&(!e||pf(t))}function ha(t){return TI(t)&&Object.hasOwn(t,"id")?t.id:t}var cv=t=>t==="value"?Oe((e,n)=>n.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Oe((e,n)=>n.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),NI=(t,e,n,i)=>{let r=t==="line"&&e!==void 0,s=t==="range"&&n!==void 0;if(!r&&!s)return!0;let[o,a]=n??[e,void 0],l=ke.is(i)||ii.is(i),c=yy(o,l)&&!isNaN(i.convert(o)),u=yy(a,l)&&!isNaN(i.convert(a));if(r&&c||s&&c&&u)return!0;let d=["Expecting crossLine"];return s?(c||d.push(`range start ${hc(o)}`),u||d.push(`${c?"":"and "}range end ${hc(a)}`)):d.push(`value ${hc(o)}`),d.push("to match the axis scale domain."),L.warnOnce(d.join(" ")),!1},yF={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},vF={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function vy({yDirection:t,padding:e=0,position:n="top",bbox:i}){let r=t?yF:vF,{xTranslationDirection:s,yTranslationDirection:o}=r[n],a=t?i.width:i.height,l=t?i.height:i.width,c=s*(e+a/2),u=o*(e+l/2);return{xTranslation:c,yTranslation:u}}function kI({yDirection:t,bbox:e,padding:n=0,position:i="top"}){let r={};return i.startsWith("inside")||(i==="top"&&!t?r.top=n+e.height:i==="bottom"&&!t?r.bottom=n+e.height:i==="left"&&t?r.left=n+e.width:i==="right"&&t&&(r.right=n+e.width)),r}var _h=({yDirection:t,xEnd:e,yStart:n,yEnd:i})=>t?{x:e/2,y:n}:{x:e,y:isNaN(i)?n:(n+i)/2},Iw=({yDirection:t,xStart:e,xEnd:n,yStart:i,yEnd:r})=>t?{x:e,y:isNaN(r)?i:(i+r)/2}:{x:n/2,y:i},Cw=({yDirection:t,xEnd:e,yStart:n,yEnd:i})=>t?{x:e,y:isNaN(i)?n:(n+i)/2}:{x:e/2,y:isNaN(i)?n:i},Ew=({yDirection:t,xStart:e,xEnd:n,yStart:i,yEnd:r})=>t?{x:n/2,y:isNaN(r)?i:r}:{x:e,y:isNaN(r)?i:(i+r)/2},bF=({xEnd:t,yStart:e,yEnd:n})=>({x:t/2,y:isNaN(n)?e:(e+n)/2}),Tw=({yDirection:t,xStart:e,xEnd:n,yStart:i})=>t?{x:e/2,y:i}:{x:n,y:i},Aw=({yDirection:t,xStart:e,yStart:n,yEnd:i})=>t?{x:e,y:isNaN(i)?n:i}:{x:e,y:n},Nw=({yDirection:t,xEnd:e,yStart:n,yEnd:i})=>t?{x:e,y:n}:{x:e,y:isNaN(i)?n:i},kw=({yDirection:t,xStart:e,xEnd:n,yStart:i,yEnd:r})=>t?{x:n,y:isNaN(r)?i:r}:{x:e,y:isNaN(r)?i:r},RI={top:{c:_h},bottom:{c:Ew},left:{c:Iw},right:{c:Cw},topLeft:{c:Tw},topRight:{c:Nw},bottomLeft:{c:Aw},bottomRight:{c:kw},inside:{c:bF},insideLeft:{c:Iw},insideRight:{c:Cw},insideTop:{c:_h},insideBottom:{c:Ew},insideTopLeft:{c:Tw},insideBottomLeft:{c:Aw},insideTopRight:{c:Nw},insideBottomRight:{c:kw}},xF=je(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Un=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};g([b(H,{optional:!0})],Un.prototype,"enabled",2);g([b(P,{optional:!0})],Un.prototype,"text",2);g([b(Jr,{optional:!0})],Un.prototype,"fontStyle",2);g([b(es,{optional:!0})],Un.prototype,"fontWeight",2);g([b(O)],Un.prototype,"fontSize",2);g([b(P)],Un.prototype,"fontFamily",2);g([b(Pe)],Un.prototype,"padding",2);g([b(we,{optional:!0})],Un.prototype,"color",2);g([b(xF,{optional:!0})],Un.prototype,"position",2);g([b(Qr,{optional:!0})],Un.prototype,"rotation",2);g([b(H,{optional:!0})],Un.prototype,"parallel",2);var oi=(()=>{let t=class ic{constructor(){this.id=Gi(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Un,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new U({name:`${this.id}`,layer:!0,zIndex:ic.LINE_LAYER_ZINDEX}),this.labelGroup=new U({name:`${this.id}`,layer:!0,zIndex:ic.LABEL_LAYER_ZINDEX}),this.crossLineRange=new $i,this.crossLineLabel=new Me,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;let{group:n,labelGroup:i,crossLineRange:r,crossLineLabel:s}=this;n.append(r),i.append(s),r.pointerEvents=1}update(n){let{enabled:i,data:r,type:s,value:o,range:a,scale:l}=this;if(!s||!l||!i||!n||!NI(s,o,a,l)||r.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=n,this.labelGroup.visible=n,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(n,i){if(!n||!this.createNodeData(i))return;let{sideFlag:s,gridLength:o,data:a}=this,l=[],c=0,u=s*o,d=a[0],h=a[1],f=new V(Math.min(c,u),Math.min(d,h),Math.abs(c-u),Math.abs(d-h));l.push(f);let p=this.computeLabelBBox();return p&&l.push(p),V.merge(l)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(n){let{scale:i,gridLength:r,sideFlag:s,direction:o,label:{position:a="top"},clippedRange:l,strokeWidth:c=0}=this;if(this.data=[],!i)return!1;let u=i.bandwidth??0,d=i.step??0,h=(n?-1:1)*(i instanceof Kr?(d-u)/2:0),[f,p]=[0,s*r],[m,y]=this.getRange(),v=y===void 0&&ii.is(i)?u/2+h:0,[x,D]=[Number(i.convert(m,{clampMode:"clamped"}))-h+v,i.convert(y,{clampMode:"clamped"})+u+h];x=Ah(x,l),D=Ah(D,l),[m,y]=[Number(i.convert(m))+v,i.convert(y)+u];let S=(m===x||y===D||x!==D)&&Math.abs(D-x)>0;if(S&&x>D&&([x,D]=[D,x],[m,y]=[y,m]),m-h>=x&&(m-=h),y+h<=D&&(y+=h),this.isRange=S,this.startLine=c>0&&m>=x&&m<=x+h,this.endLine=c>0&&y>=D-u-h&&y<=D,!S&&!this.startLine&&!this.endLine)return!1;if(this.data=[x,D],this.label.enabled){let w=o==="y",{c:I=_h}=RI[a]??{},{x:C,y:T}=I({yDirection:w,xStart:f,xEnd:p,yStart:x,yEnd:D});this.labelPoint={x:C,y:T}}return!0}updateRangeNode(){let{crossLineRange:n,sideFlag:i,gridLength:r,data:s,startLine:o,endLine:a,isRange:l,fill:c,fillOpacity:u,stroke:d,strokeWidth:h,lineDash:f}=this;n.x1=0,n.x2=i*r,n.y1=s[0],n.y2=s[1],n.startLine=o,n.endLine=a,n.isRange=l,n.fill=c,n.fillOpacity=u??1,n.stroke=d,n.strokeWidth=h??1,n.strokeOpacity=this.strokeOpacity??1,n.lineDash=f}updateLabel(){let{crossLineLabel:n,label:i}=this;i.text&&(n.fontStyle=i.fontStyle,n.fontWeight=i.fontWeight,n.fontSize=i.fontSize,n.fontFamily=i.fontFamily,n.fill=i.color,n.text=i.text)}positionLabel(){let{crossLineLabel:n,labelPoint:{x:i=void 0,y:r=void 0}={},label:{parallel:s,rotation:o,position:a="top",padding:l=0},direction:c,parallelFlipRotation:u,regularFlipRotation:d}=this;if(i===void 0||r===void 0)return;let{defaultRotation:h,configuredRotation:f}=Oh({rotation:o,parallel:s,regularFlipRotation:d,parallelFlipRotation:u});n.rotation=h+f,n.textBaseline="middle",n.textAlign="center";let p=n.computeTransformedBBox();if(!p)return;let m=c==="y",{xTranslation:y,yTranslation:v}=vy({yDirection:m,padding:l,position:a,bbox:p});n.translationX=i+y,n.translationY=r+v}getZIndex(n=!1){return n?ic.RANGE_LAYER_ZINDEX:ic.LINE_LAYER_ZINDEX}getRange(){let{value:n,range:i,scale:r}=this,s=ke.is(r)||ii.is(r),o=i?.[0]??n,a=i?.[1];return!s&&a===void 0&&(a=o),s&&o===a&&(a=void 0),[o,a]}computeLabelBBox(){let{label:n}=this;if(!n.enabled)return;let i=new Me;i.fontFamily=n.fontFamily,i.fontSize=n.fontSize,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.text=n.text;let{labelPoint:{x:r=void 0,y:s=void 0}={},label:{parallel:o,rotation:a,position:l="top",padding:c=0},direction:u,parallelFlipRotation:d,regularFlipRotation:h}=this;if(r===void 0||s===void 0)return;let{configuredRotation:f}=Oh({rotation:a,parallel:o,regularFlipRotation:h,parallelFlipRotation:d});i.rotation=f,i.textBaseline="middle",i.textAlign="center";let p=i.computeTransformedBBox();if(!p)return;let m=u==="y",{xTranslation:y,yTranslation:v}=vy({yDirection:m,padding:c,position:l,bbox:p});return i.translationX=r+y,i.translationY=s+v,i.computeTransformedBBox()}calculatePadding(n){let{isRange:i,startLine:r,endLine:s,direction:o,label:{padding:a=0,position:l="top"}}=this;if(!i&&!r&&!s)return;let c=this.computeLabelBBox();if(c?.x==null||c?.y==null)return;let u=kI({yDirection:o==="y",padding:a,position:l,bbox:c});n.left=Math.max(n.left??0,u.left??0),n.right=Math.max(n.right??0,u.right??0),n.top=Math.max(n.top??0,u.top??0),n.bottom=Math.max(n.bottom??0,u.bottom??0)}};return t.LINE_LAYER_ZINDEX=9,t.RANGE_LAYER_ZINDEX=3,t.LABEL_LAYER_ZINDEX=8,t.className="CrossLine",t})();g([b(H,{optional:!0})],oi.prototype,"enabled",2);g([b(je(["range","line"],"a crossLine type"),{optional:!0})],oi.prototype,"type",2);g([b(zn(cv("range"),Aa.restrict({length:2})),{optional:!0})],oi.prototype,"range",2);g([b(cv("value"),{optional:!0})],oi.prototype,"value",2);g([b(we,{optional:!0})],oi.prototype,"fill",2);g([b(Ie,{optional:!0})],oi.prototype,"fillOpacity",2);g([b(we,{optional:!0})],oi.prototype,"stroke",2);g([b(Pe,{optional:!0})],oi.prototype,"strokeWidth",2);g([b(Ie,{optional:!0})],oi.prototype,"strokeOpacity",2);g([b(gr,{optional:!0})],oi.prototype,"lineDash",2);var by=oi,uv=class{constructor(){this.moduleMap=new Map}*modules(){let t=["toolbar","navigator"];for(let e of this.moduleMap.values())t.includes(e.module.optionsKey)||(yield e.moduleInstance);for(let e of t){let n=this.moduleMap.get(e);n&&(yield n.moduleInstance)}}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){let e=Bn(t)?t:t.optionsKey;this.moduleMap.get(e)?.moduleInstance.destroy(),this.moduleMap.delete(e)}getModule(t){return this.moduleMap.get(Bn(t)?t:t.optionsKey)?.moduleInstance}isEnabled(t){return this.moduleMap.has(Bn(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,n)=>t(e.moduleInstance,n))}destroy(){for(let t of this.moduleMap.keys())this.moduleMap.get(t)?.moduleInstance.destroy();this.moduleMap.clear()}},LI={};zi(LI,{resetMotion:()=>dt});function dt(t,e){let{nodes:n,selections:i}=nf(t);for(let r of i){for(let s of r.nodes()){let o=e(s,s.datum);s.setProperties(o)}r.cleanup()}for(let r of n){let s=e(r,r.datum);r.setProperties(s)}}var OI=class xy extends ke{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=mw,this.basePow=mw,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,L.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=xy.getBaseLogMethod(this.base),this.basePow=xy.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){let[e,n]=this.domain,i=e>n?Math.ceil:Math.floor,r=e>n?Math.floor:Math.ceil,s=this.pow(i(this.log(e))),o=this.pow(r(this.log(n)));this.niceDomain=[s,o]}ticks(){let e=this.tickCount??10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();let n=this.base,[i,r]=this.getDomain(),s=Math.min(i,r),o=Math.max(i,r),a=this.log(s),l=this.log(o);if(this.interval){let m=x=>x>=s&&x<=o,y=Math.min(Math.abs(this.interval),Math.abs(l-a)),v=Cc(a,l,y).map(this.pow).filter(m);if(!Ec(v.length,this.getPixelRange()))return v}let c=n%1===0,u=l-a>=e;if(!c||u)return uf(a,l,Math.min(l-a,e)).map(this.pow);let d=[],h=s>0;a=Math.floor(a)-1,l=Math.round(l)+1;let f=Dc(this.range)/e,p=1/0;for(let m=a;m<=l;m++){let y=this.convert(this.pow(m+1));for(let v=1;v<n;v++){let x=h?v:n-v+1,D=this.pow(m)*x,S=this.convert(D),w=Math.abs(p-S),I=Math.abs(S-y),C=w>=f&&I>=f;D>=s&&D<=o&&(v===1||C||d.length===0)&&(d.push(D),p=S)}}return d}tickFormat({count:e,ticks:n,specifier:i}){return e!==1/0&&n==null&&this.ticks(),i??(i=this.base===10?".0e":","),Bn(i)?gI(i):i}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:let n=Math.log(e);return i=>Math.log(i)/n}}static getBasePowerMethod(e){switch(e){case 10:return n=>n>=0?10**n:1/10**-n;case Math.E:return Math.exp;default:return n=>e**n}}};g([Mt],OI.prototype,"base",2);var dv=OI,Bi={};typeof window<"u"?Bi.window=window:typeof global<"u"&&(Bi.window=global.window);typeof document<"u"?Bi.document=document:typeof global<"u"&&(Bi.document=global.document);function dr(t){return t?Bi.document?.[t]:Bi.document}function ji(t){return t?Bi.window?.[t]:Bi.window}function Lt(t,e,n){let i=dr().createElement(t);return typeof e=="object"&&(n=e,e=void 0),e&&i.classList.add(e),n&&Object.assign(i.style,n),i}function _I(t,e){let{body:n}=dr(),i=Lt("a",{display:"none"});i.href=t,i.download=e,n.appendChild(i),i.click(),setTimeout(()=>n.removeChild(i))}function PI(t){Bi.document=t}function FI(t){Bi.window=t}function or(t,e){t&&(t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.left=`${e.x}px`,t.style.top=`${e.y}px`)}var DF=2e3,Rw=Date.now(),SF=()=>{let t=Date.now()-Rw;if(t>DF){let e=(Math.floor(t/100)/10).toFixed(1);L.log(`**** ${e}s since last log message ****`)}Rw=Date.now()},_e={create(...t){return Object.assign((...n)=>{_e.check(...t)&&(typeof n[0]=="function"&&(n=gy(n[0]())),SF(),L.log(...n))},{check:()=>_e.check(...t)})},check(...t){return t.length===0&&t.push(!0),gy(ji("agChartsDebug")).some(n=>t.includes(n))}},et=class Fs{constructor(e,n,i=!0){this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=_e.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Ea,n)?()=>new n:n}static select(e,n,i=!0){return new Fs(e,n,i)}static selectAll(e,n){let i=[],r=s=>{n(s)&&i.push(s),s.children.forEach(r)};return r(e),i}static selectByClass(e,n,...i){return Fs.selectAll(e,r=>r instanceof n||i.some(s=>r instanceof s))}static selectByTag(e,n){return Fs.selectAll(e,i=>i.tag===n)}createNode(e,n,i){let r=this.nodeFactory(e);return r.datum=e,n?.(r),i==null?this._nodes.push(r):this._nodes.splice(i,0,r),this.parentNode.appendChild(r),r}update(e,n,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),i){let r=new Map(e.map((s,o)=>[i(s),[s,o]]));for(let[s,o]of this._nodesMap.entries())if(r.has(o)){let[a]=r.get(o);s.datum=a,this.garbageBin.delete(s),r.delete(o)}else this.garbageBin.add(s);for(let[s,[o,a]]of r.entries())this._nodesMap.set(this.createNode(o,n,a),s)}else{let r=Math.max(e.length,this.data.length);for(let s=0;s<r;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],n):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(let n of this._nodes.entries())e(n[1],n[1].datum,n[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){let n=this._nodes[e],i=this._nodes[e].datum;yield{node:n,datum:i,index:e}}}select(e){return Fs.selectAll(this.parentNode,e)}selectByClass(e){return Fs.selectByClass(this.parentNode,e)}selectByTag(e){return Fs.selectByTag(this.parentNode,e)}nodes(){return this._nodes}};function fc(t,e,n,i){let r=t-n,s=e-i;return r*r+s*s}function bh(t,e,n,i,r,s,o){if(n===r&&i===s)return Math.min(o,fc(t,e,n,i));let a=r-n,l=s-i,c=Math.max(0,Math.min(1,((t-n)*a+(e-i)*l)/(a*a+l*l))),u=n+c*a,d=i+c*l;return Math.min(o,fc(t,e,u,d))}function wF(t,e,n,i,r,s,o,a,l){a&&([o,s]=[s,o]);let c=Math.atan2(e-i,t-n);if(!jr(c,s,o)){let d=n+Math.cos(s)*r,h=i+Math.sin(s)*r,f=n+Math.cos(s)*r,p=i+Math.sin(s)*r;return Math.min(l,fc(t,e,d,h),fc(t,e,f,p))}let u=r-Math.sqrt(fc(t,e,n,i));return Math.min(l,u*u)}var St=class extends Vn{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new V(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){let{x:n,y:i}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(n,i)}return!1}distanceSquared(t,e){let{x1:n,y1:i,x2:r,y2:s}=this;return bh(t,e,n,i,r,s,1/0)}render(t){let{ctx:e,forceRender:n,stats:i,devicePixelRatio:r}=t;if(this.dirty===0&&!n){i&&(i.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(e);let{x1:s,y1:o,x2:a,y2:l}=this;if(s===a){let{strokeWidth:c}=this,u=Math.round(s*r)/r+Math.trunc(c*r)%2/(r*2);s=u,a=u}else if(o===l){let{strokeWidth:c}=this,u=Math.round(o*r)/r+Math.trunc(c*r)%2/(r*2);o=u,l=u}e.beginPath(),e.moveTo(s,o),e.lineTo(a,l),this.fillStroke(e),this.fillShadow?.markClean(),super.render(t)}};St.className="Line";St.defaultStyles=Object.assign({},Vn.defaultStyles,{fill:void 0,strokeWidth:1});g([j({redraw:3})],St.prototype,"x1",2);g([j({redraw:3})],St.prototype,"y1",2);g([j({redraw:3})],St.prototype,"x2",2);g([j({redraw:3})],St.prototype,"y2",2);function MF(t,e,n,i,r,s){if(t.size===0)return!1;let o=t.x,a=t.y;e!=null&&(o-=(e.x-.5)*t.size,a-=(e.y-.5)*t.size);let l=o;o<n?l=n:o>n+r&&(l=n+r);let c=a;a<i?c=i:a>i+s&&(c=i+s);let u=o-l,d=a-c;return Math.sqrt(u*u+d*d)<=t.size*.5}function BI(t,e,n,i,r){let s=t.x+t.width>e&&t.x<e+i,o=t.y+t.height>n&&t.y<n+r;return s&&o}function IF(t,e,n,i,r){return e+i<t.x+t.width&&e>t.x&&n>t.y&&n+r<t.y+t.height}function CF(t){return t!=null&&typeof t.point=="object"&&typeof t.label=="object"}var EF={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};function TF(t,e,n=5){let i=[];t=t.map(r=>r.slice().sort((s,o)=>o.point.size-s.point.size));for(let r=0;r<t.length;r++){let s=i[r]=[],o=t[r];if(o?.length&&o[0].label)for(let a=0,l=o.length;a<l;a++){let c=o[a],{point:u,label:d,marker:h}=c,{text:f,width:p,height:m}=d,y=u.size*.5,v=0,x=0;if(y>0&&c.placement!=null){let T=EF[c.placement];v=(p*.5+y+n)*T.x,x=(m*.5+y+n)*T.y}let D=u.x-p*.5+v-((h?.center.x??.5)-.5)*u.size,S=u.y-m*.5+x-((h?.center.y??.5)-.5)*u.size;!(!e||IF(e,D,S,p,m))||t.some(T=>T.some(E=>MF(E.point,E.marker?.center,D,S,p,m)))||i.some(T=>T.some(E=>BI(E,D,S,p,m)))||s.push({index:a,text:f,x:D,y:S,width:p,height:m,datum:c})}}return i}function AF(t,e){let n=[];for(let i=0;i<t.length;i++){let r=t[i],{point:{x:s,y:o},label:{text:a}}=r,{label:{width:l,height:c}}=r;if(l+=e??0,c+=e??0,n.some(d=>BI(d,s,o,l,c)))return!0;n.push({index:i,text:a,x:s,y:o,width:l,height:c,datum:r})}return!1}function jI(t,e){return t.length===e.length&&t.every((n,i)=>{let r=e[i];return Array.isArray(n)&&Array.isArray(r)?jI(n,r):n===r})}function VI(t,e){return t.length===e.length&&t.every((n,i)=>Number(n)===Number(e[i]))}function bt(t,e){let n=rt(t)?t:t.split(".");if(n.length===1){let[i]=n;return fr((r,s,o)=>r[i]=o,r=>r[i],e)}return fr((i,r,s)=>Jy(i,n,s),i=>Xy(i,n),e)}function NF(t){return fr((e,n,i)=>e[t]=i)}function Ft(t,e){return fr((n,i,r)=>n[t][e??i]=r)}function Wt(t){let{newValue:e,oldValue:n,changeValue:i}=t;return fr((r,s,o,a)=>(o!==a&&(a!==void 0&&n?.call(r,a),o!==void 0&&e?.call(r,o),i?.call(r,o,a)),o))}function Yt(t){return mP(t)}var Vm="color: green",Yc=class xh{constructor(e,n,i){this.defaultState=e,this.states=n,this.enterEach=i,this.debug=_e.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,Vm)}is(e){return this.state==="__child"&&this.childState?this.childState.is(e):this.state===e}transition(e,n){if(!this.transitionChild(e,n)||this.state==="__child"||this.state==="__parent")return;let r=this.states[this.state],s=r?.[e];if(!s){this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey");return}let o=this.getDestinationState(s),a=o===this.state?void 0:r.onExit;this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${o}`,Vm),this.enterEach?.(this.state,o),o!=="__child"&&o!=="__parent"&&this.states[o].onEnter?.(),this.state=o,typeof s=="function"?s(n):typeof s=="object"&&!(s instanceof xh)&&s.action?.(n),a?.()}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,n){return this.state!=="__child"||!this.childState||(this.childState.transition(e,n),!this.childState.is("__parent"))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,Vm),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(e){let n=this.state;return typeof e=="string"?n=e:e instanceof xh?(this.childState=e,n="__child"):typeof e=="object"&&(e.target instanceof xh?(this.childState=e.target,n="__child"):n=e.target),n}};function Zs(t,e,n){n===void 0||n===""?t?.removeAttribute(e):t?.setAttribute(e,n.toString())}function zI(t,e,n,i,r){let{top:s,right:o,bottom:a,left:l,width:c,height:u}=r;return l!=null?c!=null?o=n-l+c:o!=null&&(c=n-l-o):o!=null&&c!=null&&(l=n-o-c),s!=null?u!=null?a=i-s-u:a!=null&&(u=i-a-s):a!=null&&u!=null&&(s=i-a-u),c==null?u==null?(c=t,u=e):c=Math.ceil(t*u/e):u==null&&(u=Math.ceil(e*c/t)),l==null&&(o==null?l=Math.floor((n-c)/2):l=n-o-c),s==null&&(a==null?s=Math.floor((i-u)/2):s=i-u-a),{x:l,y:s,width:c,height:u}}var Ri="ag-chart-tooltip",GI="ag-chart-dark-tooltip",mr={html:"",ariaLabel:""};function kF(t){let e=(n,i,r)=>i===0||r[i-1]!=="."?". ":" ";return t.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*>/g,e).replace(/<[^<>]+>/g,"").replace(/\n+/g," ").replace(/\s+/g," ")}function ba(t,e){if(typeof t=="string")return{html:t,ariaLabel:t};let{content:n=e?.content??"",title:i=e?.title,color:r=e?.color??"white",backgroundColor:s=e?.backgroundColor??"#888"}=t,o=i?`<div class="${Ri}-title"
        style="color: ${r}; background-color: ${s}">${i}</div>`:"",a=i?`${i}: `:"",l=n?`<div class="${Ri}-content">${n}</div>`:"";return{html:`${o}${l}`,ariaLabel:kF(`${a}${n}`)}}var Ra=class extends le{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};g([b(je(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],Ra.prototype,"type",2);g([b(Pe)],Ra.prototype,"xOffset",2);g([b(Pe)],Ra.prototype,"yOffset",2);var Hn=class extends le{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Ra,this.darkTheme=!1,this.nestedDOM=!0,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0}get interactive(){return this.enableInteraction}setup(t){this.element=t.addChild("canvas-overlay",Ri),this.element.classList.add(Ri),Zs(this.element,"aria-hidden",!0)}destroy(t){t.removeChild("canvas-overlay",Ri)}isVisible(){return!this.element?.classList.contains(Ri+"-hidden")}show(t,e,n,i=!1){let{element:r}=this;if(n!=null&&r!=null)r.innerHTML=n.html;else if(!r?.innerHTML){this.toggle(!1);return}let s=e.position?.type??this.position.type,o=e.position?.xOffset??0,a=e.position?.yOffset??0,l=this.getTooltipBounds({positionType:s,meta:e,yOffset:a,xOffset:o,canvasRect:t}),c=zI(r.clientWidth,r.clientHeight,t.width,t.height,l),u=this.nestedDOM?t:this.getWindowSize(),d=this.nestedDOM?0:-t.left,h=this.nestedDOM?0:-t.top,f=u.width-r.clientWidth-1+d,p=u.height-r.clientHeight+h,m=ae(d,c.x,f),y=ae(h,c.y,p),v=m!==c.x||y!==c.y,x=(s==="node"||s==="pointer")&&!v&&!o&&!a,D=e.showArrow??this.showArrow??x;this.updateShowArrow(D),r.style.transform=`translate(${Math.round(m)}px, ${Math.round(y)}px)`,this.enableInteraction=e.enableInteraction??!1,this.delay>0&&!i?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}getWindowSize(){let{innerWidth:t,innerHeight:e}=ji();return{width:t,height:e}}toggle(t){if(!this.element)return;let{classList:e}=this.element,n=(l,c)=>e.toggle(`${Ri}-${l}`,c),i=this.isVisible(),r=1/0;if(t||clearTimeout(this.showTimeout),i!==t){let l=Date.now();r=l-this.lastVisibilityChange,this.lastVisibilityChange=l}let s=100,o=5,a=!i&&t&&r>s;r>o&&n("no-animation",a),n("no-interaction",!this.enableInteraction),n("hidden",!t),n("arrow",this._showArrow),e.toggle(GI,this.darkTheme);for(let l of this.wrapTypes)e.toggle(`${Ri}-wrap-${l}`,l===this.wrapping)}updateShowArrow(t){this._showArrow=t}getTooltipBounds(t){if(!this.element)return{};let{positionType:e,meta:n,yOffset:i,xOffset:r,canvasRect:s}=t,{clientWidth:o,clientHeight:a}=this.element,l={width:o,height:a};switch(e){case"node":case"pointer":return l.top=n.offsetY+i-a-8,l.left=n.offsetX+r-o/2,l;case"top":return l.top=i,l.left=s.width/2-o/2+r,l;case"right":return l.top=s.height/2-a/2+i,l.left=s.width-o/2+r,l;case"left":return l.top=s.height/2-a/2+i,l.left=r,l;case"bottom":return l.top=s.height-a+i,l.left=s.width/2-o/2+r,l;case"top-left":return l.top=i,l.left=r,l;case"top-right":return l.top=i,l.left=s.width-o+r,l;case"bottom-right":return l.top=s.height-a+i,l.left=s.width-o+r,l;case"bottom-left":return l.top=s.height-a+i,l.left=r,l}}};g([b(H)],Hn.prototype,"enabled",2);g([b(H,{optional:!0})],Hn.prototype,"showArrow",2);g([Yt((t,e,n)=>{e&&t.element?.classList.add(e),n&&t.element?.classList.remove(n)}),b(P,{optional:!0})],Hn.prototype,"class",2);g([b(O)],Hn.prototype,"delay",2);g([b(lf,{optional:!0})],Hn.prototype,"range",2);g([b(af)],Hn.prototype,"wrapping",2);g([b(z)],Hn.prototype,"position",2);g([b(H)],Hn.prototype,"darkTheme",2);g([b(H)],Hn.prototype,"nestedDOM",2);var We=(()=>{let t=class extends le{constructor(){super(...arguments),this.id=Gi(this),this.node=new Me({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1,this.layoutStyle="block"}registerInteraction(e){let n=e.regionManager.getRegion("root"),i=[n.addListener("hover",r=>this.handleMouseMove(e,r)),n.addListener("leave",r=>this.handleMouseLeave(e,r))];return R1(...i)}computeTextWrap(e,n){let{text:i,wrapping:r}=this,s=Math.min(this.maxWidth??1/0,e),o=this.maxHeight??n;if(!isFinite(s)&&!isFinite(o)){this.node.text=i;return}let a=Me.wrap(i??"",s,o,this,r);this.node.text=a,this.truncated=a.includes(sr.EllipsisChar)}handleMouseMove(e,n){if(n!==void 0&&this.enabled&&this.node.visible&&this.truncated){let{offsetX:i,offsetY:r}=n;e.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:r,lastPointerEvent:n,showArrow:!1},ba({content:this.text}))}}handleMouseLeave(e,n){e.tooltipManager.removeTooltip(this.id)}};return t.SMALL_PADDING=10,t.LARGE_PADDING=20,t})();g([b(H)],We.prototype,"enabled",2);g([b(P,{optional:!0}),Ft("node")],We.prototype,"text",2);g([b(rI,{optional:!0}),Ft("node")],We.prototype,"textAlign",2);g([b(Jr,{optional:!0}),Ft("node")],We.prototype,"fontStyle",2);g([b(es,{optional:!0}),Ft("node")],We.prototype,"fontWeight",2);g([b(O),Ft("node")],We.prototype,"fontSize",2);g([b(P),Ft("node")],We.prototype,"fontFamily",2);g([b(we,{optional:!0}),Ft("node","fill")],We.prototype,"color",2);g([b(O,{optional:!0})],We.prototype,"spacing",2);g([b(O,{optional:!0})],We.prototype,"lineHeight",2);g([b(O,{optional:!0})],We.prototype,"maxWidth",2);g([b(O,{optional:!0})],We.prototype,"maxHeight",2);g([b(af)],We.prototype,"wrapping",2);g([b(P)],We.prototype,"layoutStyle",2);var ns=class{constructor(){this.registeredListeners=new Map}addListener(t,e){let n={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(n):this.registeredListeners.set(t,[n]),()=>this.removeListener(n.symbol)}removeListener(t){for(let[e,n]of this.registeredListeners.entries()){let i=n.findIndex(r=>r.symbol===t);if(i>=0){n.splice(i,1),n.length===0&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(let n of this.getListenersByType(t))try{n.handler(...e)}catch(i){L.errorOnce(i)}}dispatchWrapHandlers(t,e,...n){for(let i of this.getListenersByType(t))try{e(i.handler,...n)}catch(r){L.errorOnce(r)}}getListenersByType(t){return this.registeredListeners.get(t)??[]}destroy(){this.registeredListeners.clear()}},ai=class{constructor(){this.listeners=new ns,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t())}};function Nc(t){let e=N(M({},t),{preventDefault(){e.sourceEvent?.preventDefault()}});return e}function Dh(t,e){t.dispatchWrapHandlers(e.type,(n,i)=>n(i),Nc(e))}var hv=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],RF=["blur","focus"],LF=["keydown","keyup"],zm=["mousemove","mouseup"],Lw=["pagehide","mousemove","mouseup"],Ow=["click","dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],xa=(t=>(t[t.Default=16]="Default",t[t.ZoomDrag=8]="ZoomDrag",t[t.Annotations=4]="Annotations",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=31]="All",t))(xa||{}),UI=class Dy extends ai{constructor(e,n){super(),this.keyboardOptions=e,this.domManager=n,this.debug=_e.create(!0,"interaction"),this.eventHandler=i=>this.processEvent(i),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=17,this.rootElement=this.domManager.getDocumentRoot();for(let i of Ow)i.startsWith("touch")||i==="wheel"?this.domManager.addEventListener(i,this.eventHandler,{passive:!1}):this.domManager.addEventListener(i,this.eventHandler);for(let i of Lw)ji().addEventListener(i,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",()=>this.containerChanged())}containerChanged(e=!1){let n=this.domManager.getDocumentRoot();if(!(!e&&n===this.rootElement)){for(let i of zm)this.rootElement?.removeEventListener(i,this.eventHandler);this.rootElement=n,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(let i of zm)this.rootElement?.addEventListener(i,this.eventHandler)}}destroy(){super.destroy();for(let e of Lw)ji().removeEventListener(e,this.eventHandler);for(let e of zm)this.rootElement?.removeEventListener(e,this.eventHandler);for(let e of Ow)this.domManager.removeEventListener(e,this.eventHandler);this.domManager.removeStyles("interactionManager")}addListener(e,n,i=16){return super.addListener(e,r=>{this.getState()&i&&n(r)})}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){let n=this.decideInteractionEventTypes(e),i=e.target;if(e.type==="click"&&i?.ariaDisabled==="true"){e.preventDefault();return}n.length>0&&this.dispatchEvent(e,n).catch(r=>L.errorOnce(r))}dispatchEvent(e,n){return k(this,null,function*(){if(mh(hv,n)){this.dispatchPointerEvent(e,n);return}let{relatedElement:i,targetElement:r}=this.extractElements(e);if(mh(RF,n))for(let s of n){let o=e;Dh(this.listeners,{type:s,sourceEvent:o,relatedElement:i,targetElement:r})}else if(mh(LF,n))for(let s of n){let o=e;Dh(this.listeners,{type:s,sourceEvent:o,relatedElement:i,targetElement:r})}})}extractElements(e){let n,i;return"relatedTarget"in e&&e.relatedTarget instanceof HTMLElement&&(n=e.relatedTarget),"target"in e&&e.target instanceof HTMLElement&&(i=e.target),{relatedElement:n,targetElement:i}}dispatchPointerEvent(e,n){let i=this.calculateCoordinates(e);if(i!=null)for(let r of n)Dh(this.listeners,this.buildPointerEvent(M({type:r,event:e},i)))}getEventHTMLTarget(e){if(e.target instanceof HTMLElement)return e.target;if(e.currentTarget instanceof HTMLElement)return e.currentTarget}recordDown(e){e instanceof MouseEvent&&(js(["offsetX","offsetY"],this.clickHistory[0],e),js(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),js(["offsetX","offsetY"],this.dblclickHistory[0],e)),this.dragStartElement=this.getEventHTMLTarget(e)}recordUp(e){e instanceof MouseEvent&&js(["offsetX","offsetY"],this.dblclickHistory[1],e),this.dragStartElement=void 0}decideInteractionEventTypes(e){let n="drag-start";switch(e.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?[e.type]:[];case"click":case"dblclick":case"contextmenu":case"wheel":return[e.type];case"mousedown":return!this.isEventOverElement(e)||!("button"in e)||e.button!==0?[]:(this.mouseDown=!0,this.recordDown(e),[n]);case"touchstart":return this.isEventOverElement(e)?(this.touchDown=!0,this.recordDown(e),[n]):[];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.recordUp(e),["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.recordUp(e),["drag-end"]);case"mouseleave":case"touchcancel":return["leave"];case"mouseenter":let i=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==i?(this.mouseDown=i,[i?n:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(e){return this.domManager.isEventOverElement(e)}calculateCoordinates(e){if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){let n=e.touches[0]??e.changedTouches[0],{clientX:i,clientY:r,pageX:s,pageY:o}=n;return N(M({},Dy.NULL_COORDS),{clientX:i,clientY:r,pageX:s,pageY:o})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:Dy.NULL_COORDS}getMouseEventCoords(e){let{clientX:n,clientY:i,pageX:r,pageY:s}=e,{offsetX:o,offsetY:a}=e,l=this.getEventHTMLTarget(e),{x:c=0,y:u=0}=l?this.domManager.calculateCanvasPosition(l):{};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){let d=this.domManager.calculateCanvasPosition(this.dragStartElement);o-=d.x-c,a-=d.y-u}else o+=c,a+=u;return{clientX:n,clientY:i,pageX:r,pageY:s,offsetX:o,offsetY:a}}isWheelEvent(e){return e.type==="wheel"}buildPointerEvent(e){let{type:n,event:i,clientX:r,clientY:s}=e,{offsetX:o,offsetY:a,pageX:l,pageY:c}=e;if(!be(o)||!be(a)){let y=this.domManager.getBoundingClientRect();o=r-y.left,a=s-y.top}if(!be(l)||!be(c)){let y=this.rootElement?.getBoundingClientRect();l=r-(y?.left??0),c=s-(y?.top??0)}let[u,d]=[NaN,NaN];if(this.isWheelEvent(i)){let y=i.deltaMode===0?.01:1;u=i.deltaX*y,d=i.deltaY*y}let h=[];i.type==="click"?h=this.clickHistory:i.type==="dblclick"&&(h=this.dblclickHistory);let{relatedElement:f,targetElement:p}=this.extractElements(i),m={type:n,offsetX:o,offsetY:a,pageX:l,pageY:c,deltaX:u,deltaY:d,pointerHistory:h,sourceEvent:i,relatedElement:f,targetElement:p};return this.debug("InteractionManager - builtEvent: ",m),m}};UI.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var HI=UI,$I=(t=>(t.TITLE="title",t.SUBTITLE="subtitle",t.FOOTNOTE="footnote",t.LEGEND="legend",t.NAVIGATOR="navigator",t.PAGINATION="pagination",t.ROOT="root",t.SERIES="series",t.HORIZONTAL_AXES="horizontal-axes",t.VERTICAL_AXES="vertical-axes",t.TOOLBAR="toolbar",t))($I||{}),OF=["stroke","lineDash"],_F=pr(t=>Fn(t)&&Object.keys(t).every(e=>OF.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),gf=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};g([b(H)],gf.prototype,"enabled",2);g([b(O)],gf.prototype,"width",2);g([b(_F)],gf.prototype,"style",2);function is(t,e=[void 0]){return fr((n,i,r)=>e.includes(r)?Qs(t)?t(r):t:r)}var WI=Oe(t=>be(t)&&t>0||t instanceof qs,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),La=class extends le{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};g([b(WI,{optional:!0})],La.prototype,"step",2);g([b(Aa,{optional:!0})],La.prototype,"values",2);g([b(aI),is(NaN)],La.prototype,"minSpacing",2);g([b(lI),is(NaN)],La.prototype,"maxSpacing",2);var st=class extends le{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};g([b(H)],st.prototype,"enabled",2);g([b(H,{optional:!0})],st.prototype,"autoWrap",2);g([b(O,{optional:!0})],st.prototype,"maxWidth",2);g([b(O,{optional:!0})],st.prototype,"maxHeight",2);g([b(Jr,{optional:!0})],st.prototype,"fontStyle",2);g([b(es,{optional:!0})],st.prototype,"fontWeight",2);g([b(Pe.restrict({min:1}))],st.prototype,"fontSize",2);g([b(P)],st.prototype,"fontFamily",2);g([b(O)],st.prototype,"padding",2);g([b(Ta),is(NaN)],st.prototype,"minSpacing",2);g([b(we,{optional:!0})],st.prototype,"color",2);g([b(Qr,{optional:!0})],st.prototype,"rotation",2);g([b(H)],st.prototype,"avoidCollisions",2);g([b(H)],st.prototype,"mirrored",2);g([b(H)],st.prototype,"parallel",2);g([b(tn,{optional:!0})],st.prototype,"formatter",2);g([b(P,{optional:!0})],st.prototype,"format",2);var Kc=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};g([b(H)],Kc.prototype,"enabled",2);g([b(O)],Kc.prototype,"width",2);g([b(we,{optional:!0})],Kc.prototype,"stroke",2);var Oa=class extends le{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};g([b(H)],Oa.prototype,"enabled",2);g([b(O)],Oa.prototype,"width",2);g([b(O)],Oa.prototype,"size",2);g([b(we,{optional:!0})],Oa.prototype,"stroke",2);var li=class extends le{constructor(){super(...arguments),this.enabled=!1,this.spacing=We.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};g([b(H)],li.prototype,"enabled",2);g([b(P,{optional:!0})],li.prototype,"text",2);g([b(O,{optional:!0})],li.prototype,"spacing",2);g([b(Jr,{optional:!0})],li.prototype,"fontStyle",2);g([b(es,{optional:!0})],li.prototype,"fontWeight",2);g([b(O)],li.prototype,"fontSize",2);g([b(P)],li.prototype,"fontFamily",2);g([b(we,{optional:!0})],li.prototype,"color",2);g([b(af)],li.prototype,"wrapping",2);g([b(tn,{optional:!0})],li.prototype,"formatter",2);function Sy(t){let[e,n]=Pn(t.range),i=Math.floor(e),r=Math.ceil(n);return{min:i,max:r,visible:i!==r}}var wy=Math.PI*2,PF=wy/2;function FF(t,e){return Math.abs(e-t)<PF?e:t>e?e+wy:e-wy}function YI(t){let e=(o,a)=>{let[l=t.min,c=t.max]=Pn(a??[]);return o<l||o>c};return{tick:{fromFn(o,a,l){let c=o.y1+o.translationY,u=o.opacity;return(l==="added"||e(o.datum.translationY,o.datum.range))&&(c=a.translationY,u=0),{y:0,translationY:c,opacity:u,phase:Ht[l]}},toFn(o,a,l){let c=a.translationY,u=1;return l==="removed"&&(u=0),{y:0,translationY:c,opacity:u,finish:{y:c,translationY:0}}},intermediateFn(o,a,l){return{visible:!e(o.y)}}},line:{fromFn(o,a){return N(M({},o.previousDatum??a),{phase:Ht.updated})},toFn(o,a){return M({},a)}},label:{fromFn(o,a,l){let c=o.previousDatum??a,u=c.x,d=c.y,h=c.rotationCenterX,f=Math.round(o.translationY),p=c.rotation,m=o.opacity;return l==="removed"||e(c.y,c.range)?p=a.rotation:(l==="added"||e(o.datum.y,o.datum.range))&&(f=Math.round(c.translationY),m=0,p=a.rotation),{x:u,y:d,rotationCenterX:h,translationY:f,rotation:p,opacity:m,phase:Ht[l]}},toFn(o,a,l){let c=a.x,u=a.y,d=a.rotationCenterX,h=Math.round(a.translationY),f=0,p=1;return l==="added"?(p=1,f=a.rotation):l==="removed"?(p=0,f=a.rotation):f=FF(o.previousDatum?.rotation??a.rotation,a.rotation),{x:c,y:u,rotationCenterX:d,translationY:h,rotation:f,opacity:p,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){let{rotation:l,translationX:c,translationY:u}=o;return{rotation:l,translationX:c,translationY:u,phase:Ht.updated}},toFn(o,a){let{rotation:l,translationX:c,translationY:u}=a;return{rotation:l,translationX:c,translationY:u}}}}}function KI(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function qI(t){let{visible:e,min:n,max:i}=t;return(r,s)=>{let o=s.translationY,a=e&&o>=n&&o<=i;return{y:o,translationY:0,opacity:1,visible:a}}}function ZI(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function XI(){return(t,e)=>M({},e)}var rs=(()=>{let t=class QI{constructor(n,i,r){this.moduleCtx=n,this.scale=i,this.id=Gi(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new La,this.disableZoom=!1,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new U({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new St),this.tickLineGroup=this.axisGroup.appendChild(new U({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new U({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new U({name:`${this.id}-CrossLines`}),this.labelGroup=new U({name:`${this.id}-Labels`,zIndex:10}),this.gridGroup=new U({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new U({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=et.select(this.tickLineGroup,St,!1),this.tickLabelGroupSelection=et.select(this.tickLabelGroup,Me,!1),this.gridLineGroupSelection=et.select(this.gridLineGroup,St,!1),this.line=new Kc,this.tick=new Oa,this.gridLine=new gf,this.label=this.createLabel(),this.defaultTickMinSpacing=QI.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.minRect=void 0,this.range=[0,1],this.visibleRange=[0,1],this.title=new li,this._titleCaption=new We,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new uv,this.range=this.scale.range.slice(),this.crossLines?.forEach(o=>this.initCrossLine(o)),this.destroyFns.push(this._titleCaption.registerInteraction(this.moduleCtx)),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(n.regionManager.getRegion("series").addListener("hover",o=>this.checkAxisHover(o)),n.regionManager.getRegion("horizontal-axes").addListener("hover",o=>this.checkAxisHover(o)),n.regionManager.getRegion("vertical-axes").addListener("hover",o=>this.checkAxisHover(o))),this.animationManager=n.animationManager,this.animationState=new Yc("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:o=>this.animateReadyUpdate(o),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let s;this.destroyFns.push(n.layoutService.addListener("layout-complete",o=>{s!=null&&mn(o.chart,s)!=null&&this.animationState.transition("resize"),s=M({},o.chart)})),r?.respondsToZoom!==!1&&this.destroyFns.push(n.updateService.addListener("update-complete",o=>{this.minRect=o.minRect}))}get type(){return this.constructor.type??""}set crossLines(n){this._crossLines?.forEach(i=>this.detachCrossLine(i)),n&&this.assignCrossLineArrayConstructor(n),this._crossLines=n,this._crossLines?.forEach(i=>{this.attachCrossLine(i),this.initCrossLine(i)})}get crossLines(){return this._crossLines}resetAnimation(n){n==="initial"&&this.animationState.transition("reset")}attachCrossLine(n){this.crossLineGroup.appendChild(n.group),this.crossLineGroup.appendChild(n.labelGroup)}detachCrossLine(n){this.crossLineGroup.removeChild(n.group),this.crossLineGroup.removeChild(n.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(n=>n())}updateRange(){let{range:n,visibleRange:i,scale:r}=this,s=(n[1]-n[0])/(i[1]-i[0]),o=s*i[0],a=n[0]-o;r.setVisibleRange?.(i),r.range=[a,a+s],this.crossLines?.forEach(l=>{l.clippedRange=[n[0],n[1]]})}setCrossLinesVisible(n){this.crossLineGroup.visible=n}attachAxis(n,i){i.appendChild(this.gridGroup),n.appendChild(this.axisGroup),n.appendChild(this.crossLineGroup),n.appendChild(this.labelGroup)}attachLabel(n){this.labelGroup.append(n)}detachAxis(n,i){i.removeChild(this.gridGroup),n.removeChild(this.axisGroup),n.removeChild(this.crossLineGroup),n.removeChild(this.labelGroup)}getAxisGroup(){return this.axisGroup}inRange(n,i=0){let[r,s]=Pn(this.range);return n>=r-i&&n<=s+i}onFormatChange(n,i,r,s){let{scale:o}=this,a=o instanceof dv,l=c=>a?String:u=>typeof u=="number"?u.toFixed(i+c):String(u);if(s&&o&&o.tickFormat)try{let c=o.tickFormat({ticks:n,specifier:s});this.labelFormatter=c,this.datumFormatter=c}catch{this.labelFormatter=l(0),this.datumFormatter=l(1),L.warnOnce(`the axis label format string ${s} is invalid. No formatting will be applied`)}else this.labelFormatter=l(0),this.datumFormatter=l(1)}setTickInterval(n){this.scale.interval=this.interval?.step??n}onGridLengthChange(n,i){(i&&!n||!i&&n)&&this.onGridVisibilityChange(),this.crossLines?.forEach(r=>this.initCrossLine(r))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new st}checkAxisHover(n){!this.interactionEnabled||!this.computeBBox().containsPoint(n.offsetX,n.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(n=0,i=!0){if(!this.tickGenerationResult)return;let{rotation:r,parallelFlipRotation:s,regularFlipRotation:o}=this.calculateRotations(),a=this.label.getSideFlag();this.updatePosition();let l=this.getAxisLineCoordinates(),{tickData:c,combinedRotation:u,textBaseline:d,textAlign:h,primaryTickCount:f}=this.tickGenerationResult,p=this.tickLabelGroupSelection.nodes().map(m=>m.datum.tickId);if(this.updateSelections(l,c.ticks,{combinedRotation:u,textAlign:h,textBaseline:d,range:this.scale.range}),!i||this.animationManager.isSkipped())this.resetSelectionNodes();else{let m=this.calculateUpdateDiff(p,c);this.animationState.transition("update",m)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(a),this.updateTickLines(),this.updateTitle({anyTickVisible:c.ticks.length>0}),this.updateCrossLines({rotation:r,parallelFlipRotation:s,regularFlipRotation:o}),this.updateLayoutState(c.fractionDigits),f}getAxisLineCoordinates(){let[n,i]=Pn(this.range);return{x:0,y1:n,y2:i}}getTickLineCoordinates(n){let r=this.label.getSideFlag()*this.getTickSize(),s=Math.min(0,r),o=s+Math.abs(r),a=n.translationY;return{x1:s,x2:o,y:a}}getTickLabelProps(n,i){let{label:r}=this,{combinedRotation:s,textBaseline:o,textAlign:a,range:l}=i,c=n.tickLabel,d=r.getSideFlag()*(this.getTickSize()+r.padding+this.seriesAreaPadding),h=c!==""&&c!=null;return{tickId:n.tickId,translationY:n.translationY,fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,rotation:s,rotationCenterX:d,text:c,textAlign:a,textBaseline:o,visible:h,x:d,y:0,range:l}}getTickSize(){return this.tick.enabled?this.tick.size:6}setTitleProps(n,i){let{title:r}=this;if(!r.enabled){n.enabled=!1,n.node.visible=!1;return}n.color=r.color,n.fontFamily=r.fontFamily,n.fontSize=r.fontSize,n.fontStyle=r.fontStyle,n.fontWeight=r.fontWeight,n.enabled=r.enabled,n.wrapping=r.wrapping;let s=n.node,o=(r.spacing??0)+i.spacing,a=this.label.getSideFlag(),l=$e(this.rotation),c=a===-1&&l>Math.PI&&l<Math.PI*2?-1:1,u=c*a*Math.PI/2,d=c===1?"bottom":"top",{range:h}=this,f=Math.floor(c*a*(h[0]+h[1])/2),p=Math.floor(a===-1?c*-o:-o),{callbackCache:m}=this.moduleCtx,{formatter:y=x=>x.defaultValue}=r,v=m.call(y,this.getTitleFormatterParams());s.setProperties({rotation:u,text:v,textBaseline:d,visible:!0,x:f,y:p})}calculateLayout(n){let{rotation:i,parallelFlipRotation:r,regularFlipRotation:s}=this.calculateRotations(),o=this.label.getSideFlag(),a=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:n,parallelFlipRotation:r,regularFlipRotation:s,labelX:a,sideFlag:o});let I=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:u,textAlign:d}=I,h=Ve(I,["tickData","combinedRotation","textBaseline","textAlign"]);this.updateLayoutState(l.fractionDigits);let f=[],{x:p,y1:m,y2:y}=this.getAxisLineCoordinates(),v=new V(p+Math.min(o*this.seriesAreaPadding,0),m,this.seriesAreaPadding,y-m);if(f.push(v),this.tick.enabled&&l.ticks.forEach(C=>{let{x1:T,x2:E,y:A}=this.getTickLineCoordinates(C),R=new V(T,A,E-T,0);f.push(R)}),this.label.enabled){let C=new Me;l.ticks.forEach(T=>{let E=this.getTickLabelProps(T,{combinedRotation:c,textAlign:d,textBaseline:u,range:this.scale.range});if(!E.visible)return;C.setProperties(N(M({},E),{translationY:Math.round(T.translationY)}));let A=C.computeTransformedBBox();A&&f.push(A)})}let x=C=>{let T=new Oi,{rotation:E,translationX:A,translationY:R,rotationCenterX:_,rotationCenterY:G}=this.getAxisTransform();return Oi.updateTransformMatrix(T,1,1,E,A,R,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:_,rotationCenterY:G}),T.transformBBox(C)};if(this.title?.enabled){let C=new We,T=V.merge(f).width;this.setTitleProps(C,{spacing:T});let A=C.node.computeTransformedBBox();A&&f.push(A)}let D=V.merge(f),S=x(D),w=this.isAnySeriesActive();return this.crossLines?.forEach(C=>{var T;C.sideFlag=-o,C.direction=i===-Math.PI/2?"x":"y",C instanceof by&&((T=C.label).parallel??(T.parallel=this.label.parallel)),C.parallelFlipRotation=r,C.regularFlipRotation=s,C.calculateLayout(w,this.reverse)}),n=h.primaryTickCount,{primaryTickCount:n,bbox:S}}updateLayoutState(n){this.layout.label={fractionDigits:n,padding:this.label.padding,format:this.label.format}}setDomain(n){this.dataDomain=this.normaliseDataDomain(n),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.interval.step);let{scale:n,nice:i}=this;ke.is(n)&&(n.nice=i,n.update())}calculateRotations(){let n=$t(this.rotation),i=$e(n),r=$e(n-Math.PI/2);return{rotation:n,parallelFlipRotation:i,regularFlipRotation:r}}generateTicks({primaryTickCount:n,parallelFlipRotation:i,regularFlipRotation:r,labelX:s,sideFlag:o}){let{scale:a,interval:{minSpacing:l,maxSpacing:c},label:{parallel:u,rotation:d,fontFamily:h,fontSize:f,fontStyle:p,fontWeight:m}}=this,y=n!==void 0,{defaultRotation:v,configuredRotation:x,parallelFlipFlag:D,regularFlipFlag:S}=Oh({rotation:d,parallel:u,regularFlipRotation:r,parallelFlipRotation:i}),w=x+v,I=new Oi,{maxTickCount:C}=this.estimateTickCount({minSpacing:l,maxSpacing:c}),E=!(ke.is(a)||ii.is(a))||isNaN(C)?10:C,A=jm(u,x,0,o,S),R=gF(u,x,o,D),_=$s({fontFamily:h,fontSize:f,fontStyle:p,fontWeight:m}),G={fontFamily:h,fontSize:f,fontStyle:p,fontWeight:m,textBaseline:R,textAlign:A},J={rawTicks:[],fractionDigits:0,ticks:[],labelCount:0},ee=0,se=0,ne=!0,q=!1;for(;ne&&ee<=E&&!q;){se=0,A=jm(u,x,0,o,S);let Xe=this.getTickStrategies({secondaryAxis:y,index:ee});for(let Ce of Xe){({tickData:J,index:ee,autoRotation:se,terminate:q}=Ce({index:ee,tickData:J,textProps:G,labelOverlap:ne,terminate:q,primaryTickCount:n}));let ot=x!==0||se!==0,Ge=w+se;A=jm(u,x,se,o,S),ne=this.label.avoidCollisions?this.checkLabelOverlap(Ge,ot,I,J.ticks,s,{font:_}):!1}}let xe=v+x+se;return!y&&J.rawTicks.length>0&&(n=J.rawTicks.length),{tickData:J,primaryTickCount:n,combinedRotation:xe,textBaseline:R,textAlign:A}}getTickStrategies({index:n,secondaryAxis:i}){let{scale:r,label:s}=this,{minSpacing:o}=this.interval,a=ke.is(r)||ii.is(r),l=s.enabled&&s.avoidCollisions,c=!a&&n!==0&&l,u=s.autoRotate===!0&&s.rotation===void 0,d=[],h;this.interval.values?h=3:i?h=1:c?h=2:h=0;let f=({index:p,tickData:m,primaryTickCount:y,terminate:v})=>this.createTickData(h,p,m,v,y);if(d.push(f),!a&&!isNaN(o)){let p=({index:m,tickData:y,primaryTickCount:v,terminate:x})=>this.createTickData(2,m,y,x,v);d.push(p)}if(!l)return d;if(s.autoWrap){let p=({index:m,tickData:y,textProps:v})=>this.wrapLabels(y,m,v);d.push(p)}else if(u){let p=({index:m,tickData:y,labelOverlap:v,terminate:x})=>({index:m,tickData:y,autoRotation:this.getAutoRotation(v),terminate:x});d.push(p)}return d}createTickData(n,i,r,s,o){let{scale:a}=this,{step:l,values:c,minSpacing:u,maxSpacing:d}=this.interval,{maxTickCount:h,minTickCount:f,defaultTickCount:p}=this.estimateTickCount({minSpacing:u,maxSpacing:d}),m=ke.is(a)||ii.is(a),y=!m||isNaN(h)?10:h,v=m?Math.max(p-i,f):h,x=l===void 0&&c===void 0&&v>f&&(m||n===2),D=!0;for(;D&&i<=y;){let w=r.rawTicks;v=m?Math.max(p-i,f):h;let{rawTicks:I,fractionDigits:C,ticks:T,labelCount:E}=this.getTicks({tickGenerationType:n,previousTicks:w,tickCount:v,minTickCount:f,maxTickCount:h,primaryTickCount:o});r.rawTicks=I,r.fractionDigits=C,r.ticks=T,r.labelCount=E,D=x?VI(I,w):!1,i++}return s||(s=l!==void 0||c!==void 0),{tickData:r,index:i,autoRotation:0,terminate:s}}checkLabelOverlap(n,i,r,s,o,a){Oi.updateTransformMatrix(r,1,1,n,0,0);let l=this.createLabelData(s,o,a,r),c=pF(this.label.minSpacing,i);return AF(l,c)}createLabelData(n,i,r,s){let o=[];for(let{tickLabel:a,translationY:l}of n){if(!a)continue;let{width:c,height:u}=sr.measureLines(a,r),d=new V(i,l,c,u),h=mF(a,d,i,l,s);o.push(h)}return o}getAutoRotation(n){return n?$e($t(this.label.autoRotateAngle??0)):0}getTicks({tickGenerationType:n,previousTicks:i,tickCount:r,minTickCount:s,maxTickCount:o,primaryTickCount:a}){let{range:l,scale:c,visibleRange:u}=this,d;switch(n){case 3:if(d=this.interval.values,ke.is(c)){let[S,w]=Pn(c.getDomain().map(Number));d=d.filter(I=>I>=S&&I<=w).sort((I,C)=>I-C)}break;case 1:ke.is(c)?d=this.updateSecondaryAxisTicks(a):d=this.createTicks(r,s,o);break;case 2:d=this.filterTicks(i,r);break;default:d=this.createTicks(r,s,o);break}let h=d.reduce((S,w)=>Math.max(S,Jh(w)),0),f=(c.bandwidth??0)/2,p=[],m=0,y=new Map,v=Math.max(0,Math.floor(u[0]*d.length)),x=Math.min(d.length,Math.ceil(u[1]*d.length)),D=d.slice(v,x);this.onFormatChange(D,h,d,this.label.format);for(let S=0;S<D.length;S++){let w=D[S],I=c.convert(w)+f;if(l.length>0&&!this.inRange(I,.001))continue;let C=this.formatTick(w,h,v+S),T=C;if(y.has(T)){let E=y.get(T);y.set(T,E+1),T=`${T}_${E}`}else y.set(T,1);p.push({tick:w,tickId:T,tickLabel:C,translationY:Math.floor(I)}),!(C===""||C==null)&&m++}return{rawTicks:d,fractionDigits:h,ticks:p,labelCount:m}}filterTicks(n,i){let{minSpacing:r,maxSpacing:s}=this.interval,a=!isNaN(r)||!isNaN(s)?Math.ceil(n.length/i):2;return n.filter((l,c)=>c%a===0)}createTicks(n,i,r){let{scale:s}=this;return n&&(ke.is(s)||ii.is(s))&&(typeof n=="number"?(s.tickCount=n,s.minTickCount=i??0,s.maxTickCount=r??1/0):s instanceof df&&this.setTickInterval(n)),s.ticks?.()??[]}estimateTickCount({minSpacing:n,maxSpacing:i}){let{minRect:r,label:{avoidCollisions:s}}=this;if(!s)return{minTickCount:ke.defaultMaxTickCount,maxTickCount:ke.defaultMaxTickCount,defaultTickCount:ke.defaultMaxTickCount};let o=this.calculateRangeWithBleed(),a=Math.max(this.defaultTickMinSpacing,o/ke.defaultMaxTickCount),l=!isNaN(i);isNaN(n)&&(n=a),isNaN(i)&&(i=o),n>i&&(n===a?n=i:i=n);let c=1;r&&(c=this.direction==="x"?r.width:r.height),l&&(l=c<a);let u=ae(1,Math.floor(o/n),l?Math.min(Math.floor(o/c),100):100),d=Math.min(u,Math.ceil(o/i)),h=ae(d,ke.defaultTickCount,u);return{minTickCount:d,maxTickCount:u,defaultTickCount:h}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:n,parallelFlipRotation:i,regularFlipRotation:r}){let s=this.label.getSideFlag(),o=this.isAnySeriesActive();this.crossLines?.forEach(a=>{a.sideFlag=-s,a.direction=n===-Math.PI/2?"x":"y",a instanceof by&&(a.label.parallel=a.label.parallel??this.label.parallel),a.parallelFlipRotation=i,a.regularFlipRotation=r,a.update(o)})}updateTickLines(){let{tick:n,label:i}=this,r=i.getSideFlag();this.tickLineGroupSelection.each(s=>{s.strokeWidth=n.width,s.stroke=n.stroke,s.x1=r*this.getTickSize(),s.x2=0})}calculateAvailableRange(){return Dc(this.range)}calculateRangeWithBleed(){let n=1/Dc(this.visibleRange);return Yy(this.calculateAvailableRange()*n,2)}calculateDomain(){let i=this.boundSeries.filter(r=>this.includeInvisibleDomains||r.isEnabled()).flatMap(r=>r.getDomain(this.direction));this.setDomain(i)}getAxisTransform(){return{rotation:$t(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){let{crossLineGroup:n,axisGroup:i,gridGroup:r,translation:s,gridLineGroupSelection:o,gridPadding:a,gridLength:l}=this,{rotation:c}=this.calculateRotations(),u=this.label.getSideFlag(),d=Math.floor(s.x),h=Math.floor(s.y);n.setProperties({rotation:c,translationX:d,translationY:h}),r.setProperties({rotation:c,translationX:d,translationY:h}),i.datum=this.getAxisTransform(),o.each(f=>{f.x1=a,f.x2=-u*l+a})}updateSecondaryAxisTicks(n){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(n,i,r){this.lineNode.datum=n,this.gridLineGroupSelection.update(this.gridLength?i:[],s=>s.append(new St),s=>s.tickId),this.tickLineGroupSelection.update(i,s=>s.appendChild(new St),s=>s.tickId),this.tickLabelGroupSelection.update(i.map(s=>this.getTickLabelProps(s,r)),s=>s.appendChild(new Me),s=>s.tickId)}updateAxisLine(){let{line:n}=this,i=n.enabled?n.width:0;this.lineNode.setProperties({stroke:n.stroke,strokeWidth:i})}updateGridLines(n){let{gridLine:{style:i,width:r},gridPadding:s,gridLength:o}=this;o===0||i.length===0||this.gridLineGroupSelection.each((a,l,c)=>{let{stroke:u,lineDash:d}=i[c%i.length];a.setProperties({x1:s,x2:-n*o+s,fill:void 0,stroke:u,strokeWidth:r,lineDash:d})})}updateLabels(){let{label:n}=this;n.enabled&&this.tickLabelGroupSelection.each((i,r)=>{i.setProperties(r,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(n,i,r){let{parallel:s,maxWidth:o,maxHeight:a}=this.label,l=this.maxThickness,c=Math.round(this.calculateAvailableRange()/n.labelCount);return s&&([l,c]=[c,l]),n.ticks.forEach(u=>{u.tickLabel=Me.wrap(u.tickLabel,o??l,a??c,r,"hyphenate")}),{tickData:n,index:i,autoRotation:0,terminate:!0}}updateTitle(n){let{rotation:i,title:r,_titleCaption:s,lineNode:o,tickLineGroup:a,tickLabelGroup:l}=this,c=0;if(r.enabled&&n.anyTickVisible){let u=U.computeBBox([a,l,o]),d=i===0?u.width:u.height;c+=d+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(s,{spacing:c})}formatTick(n,i,r){return String(this.getFormatter(r,!0)(n,i))}formatDatum(n){return String(this.getFormatter()(n))}getFormatter(n=0,i){let{label:r,labelFormatter:s,datumFormatter:o,moduleCtx:{callbackCache:a}}=this;return r.formatter?(l,c)=>a.call(r.formatter,{value:l,index:n,fractionDigits:c})??l:!i&&o?l=>a.call(o,l)??String(l):s?l=>a.call(s,l)??String(l):l=>String(l)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(n){n.scale=this.scale,n.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(n=>this.includeInvisibleDomains||n.isEnabled())}clipTickLines(n,i,r,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new V(n,i,r,s))}clipGrid(n,i,r,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new V(n,i,r,s))}calculatePadding(n,i){let r=Math.abs(this.reverse?i:n)*.01;return[r,r]}getTitleFormatterParams(){let n=this.boundSeries.reduce((i,r)=>{let s=r.getKeys(this.direction),o=r.getNames(this.direction);for(let a=0;a<s.length;a++)i.push({key:s[a],name:o[a]});return i},[]);return{direction:this.direction,boundSeries:n,defaultValue:this.title?.text}}normaliseDataDomain(n){return{domain:[...n],clipped:!1}}getLayoutState(){return M({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),N(M({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){let{scale:n}=this;return{axisId:this.id,direction:this.direction,continuous:ke.is(n)||ii.is(n),keys:()=>this.boundSeries.flatMap(i=>i.getKeys(this.direction)),seriesKeyProperties:()=>this.boundSeries.reduce((i,r)=>(r.getKeyProperties(this.direction).forEach(o=>{i.indexOf(o)<0&&i.push(o)}),i),[]),scaleValueFormatter:i=>i?n.tickFormat?.({specifier:i}):this.getFormatter(),scaleBandwidth:()=>n.bandwidth??0,scaleDomain:()=>n.getDomain?.(),scaleConvert:i=>n.convert(i),scaleInvert:ii.is(n)?i=>n.invertNearest?.(i):i=>n.invert?.(i),scaleInvertNearest:i=>n.invertNearest?.(i),attachLabel:i=>this.attachLabel(i),inRange:(i,r)=>this.inRange(i,r)}}animateReadyUpdate(n){let{animationManager:i}=this.moduleCtx,r=Sy(this),s=YI(r);Je(this.id,"axis-group",i,[this.axisGroup],s.group),Je(this.id,"line",i,[this.lineNode],s.line),Je(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],s.tick,(o,a)=>a.tickId,n),Je(this.id,"tick-labels",i,[this.tickLabelGroupSelection],s.label,(o,a)=>a.tickId,n)}resetSelectionNodes(){let{gridLineGroupSelection:n,tickLineGroupSelection:i,tickLabelGroupSelection:r,lineNode:s}=this,o=Sy(this);dt([this.axisGroup],KI()),dt([n,i],qI(o)),dt([r],ZI()),dt([s],XI())}calculateUpdateDiff(n,i){let r=new Set,s=new Set,o={},a=Math.max(n.length,i.ticks.length);for(let l=0;l<a;l++){let c=i.ticks[l],u=n[l],d=c?.tickId;o[d??u]=c,u!==d&&(s.has(d)?s.delete(d):d&&r.add(d),r.has(u)?r.delete(u):u&&s.add(u))}return{changed:r.size>0||s.size>0,added:r,removed:s}}isReversed(){return this.reverse}};return t.defaultTickMinSpacing=50,t})();g([b(H)],rs.prototype,"nice",2);g([b(H)],rs.prototype,"reverse",2);g([b(tI)],rs.prototype,"keys",2);g([b(z)],rs.prototype,"interval",2);g([b(H)],rs.prototype,"disableZoom",2);g([b(z,{optional:!0})],rs.prototype,"title",2);g([Yt((t,e,n)=>t.onGridLengthChange(e,n))],rs.prototype,"gridLength",2);var fv=rs,pv=class extends st{constructor(){super(...arguments),this.autoRotateAngle=335}};g([b(H,{optional:!0})],pv.prototype,"autoRotate",2);g([b(Qr)],pv.prototype,"autoRotateAngle",2);var gv=class JI extends fv{constructor(){super(...arguments),this.thickness=0}static is(e){return e instanceof JI}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e,n){return this.updateDirection(),super.update(e,n)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return N(M({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){uI(e,by)}createLabel(){return new pv}};g([b(O)],gv.prototype,"thickness",2);g([b(sv)],gv.prototype,"position",2);var _a=gv,Pa=(()=>{let t=class extends _a{constructor(e,n=new Kr){super(e,n),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(e){this.scale.paddingOuter=e}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(e){let n=[],i=new Set;for(let r of e){let s=r instanceof Date?r.getTime():r;i.has(s)||(i.add(s),n.push(r))}return{domain:n,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){let e=1/0,n=-1/0;for(let i of this.boundSeries){let r=i.getBandScalePadding?.();r!=null&&(e=Math.min(e,r.inner),n=Math.max(n,r.outer))}this.scale.paddingInner=Number.isFinite(e)?e:0,this.scale.paddingOuter=Number.isFinite(n)?n:0}return super.calculateDomain()}};return t.className="CategoryAxis",t.type="category",t})();g([b(Ie)],Pa.prototype,"groupPaddingInner",2);var eC=class{constructor(t="",e,n=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=n}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}};function BF(t,e=!0){let n=new eC,i=0;return e&&t.forEach(r=>i=Math.max(i,r.labels.length)),t.forEach(r=>{if(e)for(;r.labels.length<i;)r.labels.unshift("");jF(n,r)}),n}function jF(t,e){let n=e.labels.slice().reverse(),i=n.length-1;n.forEach((r,s)=>{let o=t.children,a=o.find(c=>c.label===r),l=s!==i;if(a&&l)t=a;else{let c=new eC(r,t);c.number=o.length,o.push(c),l&&(t=c)}})}function VF(t,e,n){let i=e.number-t.number,r=n/i;e.change-=r,e.shift+=n,t.change+=r,e.prelim+=n,e.mod+=n}function zF(t,e,n){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:n}function GF(t){let e=t.children;if(e){let n=0,i=0;for(let r=e.length-1;r>=0;r--){let s=e[r];s.prelim+=n,s.mod+=n,i+=s.change,n+=s.shift+i}}}function UF(t,e,n){let i=t.getLeftSibling();if(i){let r=t,s=t,o=i,a=s.getLeftmostSibling(),l=s.mod,c=r.mod,u=o.mod,d=a.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),a=a.nextLeft(),r=r.nextRight(),r.ancestor=t;let h=o.prelim+u-(s.prelim+l)+n;h>0&&(VF(zF(o,t,e),t,h),l+=h,c+=h),u+=o.mod,l+=s.mod,d+=a.mod,c+=r.mod}o.nextRight()&&!r.nextRight()?(r.thread=o.nextRight(),r.mod+=u-c):(s.nextLeft()&&!a.nextLeft()&&(a.thread=s.nextLeft(),a.mod+=l-d),e=t)}return e}function tC(t,e){let n=t.children;if(n.length){let i=n[0];n.forEach(o=>{tC(o,e),i=UF(o,i,e)}),GF(t);let r=(n[0].prelim+n.at(-1).prelim)/2,s=t.getLeftSibling();s?(t.prelim=s.prelim+e,t.mod=t.prelim-r):t.prelim=r}else{let i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var _w=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){let{x:n,y:i}=e(t);n>this.right&&(this.right=n),n<this.left&&(this.left=n),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)}};function nC(t,e,n){t.x=t.prelim+e,t.y=t.depth,n.update(t),t.children.forEach(i=>nC(i,e+t.mod,n))}function iC(t){let e=t.children,n=0;e.forEach(i=>{iC(i),i.children.length?n+=i.leafCount:n++}),t.leafCount=n,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function HF(t){let e=new $F;return tC(t,1),nC(t,-t.prelim,e),iC(t),e}var $F=class{constructor(){this.dimensions=new _w,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,n=0,i=0,r=!1){let s=this.leafCount-1,o=this.depth,a=this.dimensions,l=1,c=1;if(t>0&&s){let f=(a.right-a.left)/s;l=t/s/f,r&&(l=-l)}if(e>0&&o){let f=(a.bottom-a.top)/o;c=e/o/f}let u=new _w;this.nodes.forEach(f=>{f.screenX=f.x*l,f.screenY=f.y*c,u.update(f,p=>({x:p.screenX,y:p.screenY}))});let d=-u.left,h=-u.top;this.nodes.forEach(f=>{f.screenX+=d+n,f.screenY+=h+i})}},rC=class extends st{constructor(){super(...arguments),this.grid=!1}};g([b(H)],rC.prototype,"grid",2);var Da=(()=>{let t=class extends _a{constructor(e){let n=new Kr;n.paddingOuter=.1,n.paddingInner=n.paddingOuter*2,super(e,n),this.tickScale=new Kr,this.line=new Kc,this.label=new rC,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;let{tickLineGroup:i,tickLabelGroup:r,gridLineGroup:s,tickScale:o}=this;o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=et.select(s,St),this.axisLineSelection=et.select(i,St),this.separatorSelection=et.select(i,St),this.labelSelection=et.select(r,Me)}updateRange(){let{range:e,visibleRange:n,scale:i}=this,r=(e[1]-e[0])/(n[1]-n[0]),s=r*n[0],o=e[0]-s;this.tickScale.range=i.range=[o,o+r],this.resizeTickTree()}resizeTickTree(){let e=this.scale,n=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,i=this.tickTreeLayout,r=this.lineHeight;i&&i.resize(Math.abs(n[1]-n[0]),i.depth*r,(Math.min(n[0],n[1])||0)+(e.bandwidth??0)/2,-i.depth*r,n[1]-n[0]<0)}get lineHeight(){return this.label.fontSize*1.5}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){let{direction:e}=this,n=null,i=this.boundSeries.filter(s=>s.visible).flatMap(s=>{if(e==="y"||n)return s.getDomain(e);if(n===null){let o=s.getDomain(e);return n=gn(o[0]),o}return[]});this.setDomain(Hi(i)??cf(i));let{domain:r}=this.dataDomain;this.tickTreeLayout=HF(BF(r)),this.tickScale.domain=r.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){let{_titleCaption:e}=this;e.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;let{tickLabelLayout:e}=this.computedLayout;this.labelSelection.update(e).each((i,r)=>{i.setProperties(r)})}updateSeparators(){if(!this.computedLayout)return;let{separatorLayout:e}=this.computedLayout,{range:n}=this,i=1e-7;this.separatorSelection.update(e).each((s,o)=>{s.x1=o.x1,s.x2=o.x2,s.y1=o.y,s.y2=o.y,s.visible=o.y>=n[0]-i&&o.y<=n[1]+i,s.stroke=this.tick.stroke,s.fill=void 0,s.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;let{axisLineLayout:e}=this.computedLayout;this.axisLineSelection.update(e).each((i,r)=>{i.setProperties(N(M({},r),{stroke:this.line.stroke,strokeWidth:this.line.width})),i.x1=r.x,i.x2=r.x,i.y1=r.y1,i.y2=r.y2,i.strokeWidth=this.line.width,i.stroke=this.line.stroke})}updateCategoryGridLines(){let{gridLength:e,gridLine:n,label:i,range:r,tickScale:s}=this,o=s.ticks(),a=i.getSideFlag(),l=this.gridLineSelection.update(e?o:[]);if(e){let{width:c,style:u}=n,d=u.length;l.each((h,f,p)=>{let m=Math.round(s.convert(f));h.x1=0,h.x2=-a*e,h.y1=m,h.y2=m,h.visible=m>=r[0]&&m<=r[1];let{stroke:y,lineDash:v}=u[p%d];h.stroke=y,h.strokeWidth=c,h.lineDash=v,h.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();let{scale:e,label:n,label:{parallel:i},moduleCtx:{callbackCache:r},range:s,title:o,title:{formatter:a=B=>B.defaultValue}={}}=this,l=e.range[0],c=e.range[1],d=Math.abs(c-l)/e.domain.length||0,h=Math.ceil(n.fontSize/d),f=$t(this.rotation),p=Math.abs(Math.cos(f))<1e-8,m=n.getSideFlag(),y=this.lineHeight,v=this.tickTreeLayout,x=e.ticks(),D=v?v.nodes:[],S=v?v.depth>1:!1,{defaultRotation:w,configuredRotation:I,parallelFlipFlag:C}=Oh({rotation:n.rotation,parallel:i,regularFlipRotation:$e(f-Math.PI/2),parallelFlipRotation:$e(f)}),T=[],E=B=>({fill:B.fill,fontFamily:B.fontFamily,fontSize:B.fontSize,fontStyle:B.fontStyle,fontWeight:B.fontWeight,rotation:B.rotation,rotationCenterX:B.rotationCenterX,rotationCenterY:B.rotationCenterY,text:B.text,textAlign:B.textAlign,textBaseline:B.textBaseline,translationX:B.translationX,translationY:B.translationY,visible:B.visible,x:B.x,y:B.y}),A=new Map,R=0,_=new Me,G=(B,de)=>{if(_.setProperties({fill:n.color,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,textAlign:"center",textBaseline:C===-1?"bottom":"hanging",translationX:B.screenY-n.fontSize*.25,translationY:B.screenX}),de===0){if(!(o?.enabled&&x.length>0))return!1;let Y=r.call(a,this.getTitleFormatterParams());_.setProperties({fill:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,text:Y,textBaseline:"hanging",translationX:B.screenY-n.fontSize*.25,translationY:B.screenX})}else if(de%h===0){if(!(B.screenX>=s[0]&&B.screenX<=s[1]))return!1;n.formatter?_.text=r.call(n.formatter,{value:String(B.label),index:de})??String(B.label):_.text=String(B.label)}else return!1;return!0};D.forEach((B,de)=>{if(!G(B,de))return;let Y=_.computeTransformedBBox();if(!Y)return;A.set(de,Y),!B.children.length&&Y.width>R&&(R=Y.width)});let J=m*n.padding,ee=this.label.grid,se=[];D.forEach((B,de)=>{let $=G(B,de),Y=de;_.x=J,_.rotationCenterX=J;let De=!B.children.length;if(De)_.rotation=I,_.textAlign="end",_.textBaseline="middle";else{_.translationX-=R-y+this.label.padding;let fe=B.leafCount*d,lt=A.get(Y);lt&&lt.width>fe?($=!1,A.delete(Y)):p?_.rotation=w:_.rotation=-Math.PI/2}if(B.parent&&S){let fe=De?B.screenX-d/2:B.screenX-B.leafCount*d/2;if(De)(B.number!==B.children.length-1||ee)&&se.push({y:fe,x1:0,x2:-R-this.label.padding*2});else{let lt=-R-this.label.padding*2+B.screenY;se.push({y:fe,x1:lt+y,x2:lt})}}let at;if($){let fe=_.computeTransformedBBox();fe&&A.set(de,fe),at=N(M({},E(_)),{visible:$})}else A.delete(de),at={visible:$};T.push(at)});let ne=0;se.forEach(B=>ne=Math.min(ne,B.x2)),se.push({y:Math.max(l,c),x1:0,x2:ne});let q=[],xe=[],Xe=1e-7;se.forEach(B=>{if(B.y>=s[0]-Xe&&B.y<=s[1]+Xe){let{x1:de,x2:$,y:Y}=B,De=new V(Math.min(de,$),Y,Math.abs(de-$),0);xe.push(De),q.push({x1:de,x2:$,y:Y})}});let Ce=[],ot=[],Ge=v?v.depth+1:1;for(let B=0;B<Ge;B++){let de=x.length>0&&(B===0||ee&&S),$=B>0?-R-this.label.padding*2-(B-1)*y:0,Y=new V($,Math.min(...s),0,Math.abs(s[1]-s[0]));ot.push(Y),Ce.push({x:$,y1:s[0],y2:s[1],visible:de})}let Ye=B=>{let de=new Oi,{rotation:$,translationX:Y,translationY:De,rotationCenterX:at,rotationCenterY:fe}=this.getAxisTransform();return Oi.updateTransformMatrix(de,1,1,$,Y,De,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:at,rotationCenterY:fe}),de.transformBBox(B)},Le=V.merge([...A.values(),...xe,...ot]);return{bbox:Ye(Le),tickLabelLayout:T,separatorLayout:q,axisLineLayout:Ce}}calculateLayout(){let{axisLineLayout:e,separatorLayout:n,tickLabelLayout:i,bbox:r}=this.computeLayout();return this.computedLayout={axisLineLayout:e,separatorLayout:n,tickLabelLayout:i},{bbox:r,primaryTickCount:void 0}}};return t.className="GroupedCategoryAxis",t.type="grouped-category",t})();g([b(we,{optional:!0})],Da.prototype,"labelColor",2);var qc=class{constructor(){this.destroyFns=[]}destroy(){for(let t of this.destroyFns)t()}},sC=class{constructor(){this.modules=[],this.dependencies=new Map,this.dependents=new Map}register(...t){for(let e of t){this.registerDependencies(e);let n=this.modules.find(i=>e.type===i.type&&e.optionsKey===i.optionsKey&&e.identifier===i.identifier);if(n){if(e.packageType==="enterprise"&&n.packageType==="community"){let i=this.modules.indexOf(n);this.modules.splice(i,1,e)}}else this.modules.push(e)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){let{dependents:e}=this,n=new Set,i=0,r=3,s=this.modules.filter(o=>t.includes(o.type));do{for(let o of s)if(!(n.has(o.optionsKey)||e.has(o.optionsKey))){yield o,n.add(o.optionsKey);for(let[a,l]of e.entries())l.delete(o.optionsKey),l.size===0&&e.delete(a)}i++}while(n.size<s.length&&i<r);if(e.size>0)throw new Error(`Could not resolve module dependencies: [${[...e.keys()]}]`)}registerDependencies(t){if(!(t.dependencies==null||t.dependencies.length===0)){for(let e of t.dependencies){let n=this.dependencies.get(e)??new Set;n.add(t.optionsKey),this.dependencies.set(e,n)}this.dependents.set(t.optionsKey,new Set(t.dependencies))}}},Hr=new sC;function WF(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}var YF=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(n=>L.errorOnce(n))})}acquireImmediately(t){return k(this,null,function*(){return this.available?(yield this.acquire(t),!0):!1})}waitForClearAcquireQueue(){return k(this,null,function*(){return this.acquire(()=>k(this,null,function*(){}))})}dispatchNext(){return k(this,null,function*(){this.available=!1;let[t,e]=this.acquireQueue.shift()??[];for(;t;){try{yield t(),e?.()}catch(n){L.error("mutex callback error",n),e?.()}[t,e]=this.acquireQueue.shift()??[]}this.available=!0})}},oC=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");let n=this.eventListeners.get(t);n?n.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){this.eventListeners.get(t)?.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){this.eventListeners.get(t.type)?.forEach(e=>e(t))}},ss=class extends le{constructor(t=0,e=t,n=t,i=e){super(),this.top=t,this.right=e,this.bottom=n,this.left=i}clear(){this.top=this.right=this.bottom=this.left=0}};g([b(O)],ss.prototype,"top",2);g([b(O)],ss.prototype,"right",2);g([b(O)],ss.prototype,"bottom",2);g([b(O)],ss.prototype,"left",2);function KF(t){return aC((e,n)=>requestAnimationFrame(e),t)}function qF(t){return aC((e,n=0)=>setTimeout(e,n),t)}function aC(t,e){let n=0,i=!1,r,s,o=()=>i,a=()=>{i=!1,s?.(),s=void 0,r=void 0,n>0&&t(l)},l=()=>{let u=n;n=0,i=!0;let d=e({count:u});if(!d){a();return}d.then(a,a)};return{schedule(u){n===0&&!o()&&t(l,u),n++},await(){return k(this,null,function*(){if(o())for(r==null&&(r=new Promise(u=>{s=u}));o();)yield r})}}}var lC="10.0.2",cC=class{constructor(t){this.version=t.split("-")[0]}save(...t){let e={version:this.version};for(let n of Object.values(t))e[n.mementoOriginatorKey]=this.encode(n,n.createMemento());return e}restore(t,...e){if(typeof t!="object"){L.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){L.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){L.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(let n of e){if(!(n.mementoOriginatorKey in t))continue;let i=this.decode(n,t[n.mementoOriginatorKey]);if(!n.guardMemento(i)){L.warnOnce(`Could not restore [${n.mementoOriginatorKey}] data, value was invalid, ignoring.`,i);return}n.restoreMemento(this.version,t.version,i)}}encode(t,e){try{return JSON.parse(JSON.stringify(e,this.encodeTypes))}catch(n){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}decode(t,e){try{return JSON.parse(JSON.stringify(e),this.decodeTypes)}catch(n){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}encodeTypes(t,e){return zc(this[t])?{__type:"date",value:String(this[t])}:e}decodeTypes(t,e){return Fn(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):e}},ZF=class{constructor(){this.caretaker=new cC(lC),this.state=new Map}setState(t,e){mn(this.state.get(t.mementoOriginatorKey),e)!=null&&(this.state.set(t.mementoOriginatorKey,e),this.restoreState(t))}restoreState(t){let{caretaker:e,state:n}=this;if(!n.has(t.mementoOriginatorKey))return;let i=n.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:i},t)}};function XF(){if(typeof navigator>"u")return!1;let t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(t==null)return!1;let[e,n]=t[1].split("_").map(Number);return e<16||e===16&&n<6}var uC=class My{constructor(e){this.enabled=!0,this.width=600,this.height=300;let{width:n,height:i,pixelRatio:r,canvasConstructor:s}=e;this.pixelRatio=XF()?1:r??ji("devicePixelRatio"),this.element=s?.()??Lt("canvas"),this.element.style.display="block",this.element.style.width=(n??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((n??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(n??0,i??0),My.debugContext(this.context)}static is(e){return e instanceof My}drawImage(e,n=0,i=0){return e.drawImage(this.context.canvas,n,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,n){if(!(e>0&&n>0))return;let{element:i,context:r,pixelRatio:s}=this;i.width=Math.round(e*s),i.height=Math.round(n*s),r.setTransform(s,0,0,s,0,0),i.style.width=e+"px",i.style.height=n+"px",this.width=e,this.height=n}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}static debugContext(e){if(_e.check("canvas")){let n=e.save.bind(e),i=e.restore.bind(e),r=0;Object.assign(e,{save(){n(),r++},restore(){if(r===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),r--},verifyDepthZero(){if(r!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${r}`)}})}}};g([Yt(t=>t.onEnabledChange())],uC.prototype,"enabled",2);var mv=uC,QF=class dC{constructor(e,n){this.canvas=e,this.markDirty=n,this.debug=_e.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(e,n){return wI([e.zIndex,...e.zIndexSubOrder??[void 0,void 0],e.id],[n.zIndex,...n.zIndexSubOrder??[void 0,void 0],n.id],SI)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(dC.sortLayers).forEach(e)}resize(e,n){this.canvas.resize(e,n),this.layersMap.forEach(({canvas:i})=>i.resize(e,n))}addLayer(e){let{width:n,height:i,pixelRatio:r}=this.canvas,{zIndex:s=this.nextZIndex++,name:o,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c}=e,u=new mv({width:n,height:i,pixelRatio:r}),d={id:this.nextLayerId++,name:o,canvas:u,zIndex:s,zIndexSubOrder:a,getComputedOpacity:l,getVisibility:c};return s>=this.nextZIndex&&(this.nextZIndex=s+1),this.layersMap.set(u,d),this.debug("Scene.addLayer() - layers",this.layersMap),d.canvas}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(e,n,i){let r=this.layersMap.get(e);r&&(r.zIndex=n,r.zIndexSubOrder=i,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}};function Pw(t,e,n,i,r={}){if(!_e.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:s=0,layersSkipped:o=0,nodesRendered:a=0,nodesSkipped:l=0}=i??{},c=performance.now(),S=e,{start:u}=S,d=Ve(S,["start"]),h=Object.entries(d).map(([w,I])=>Bw(w,I)).filter(w=>w!=null).join(" + "),f=Object.entries(r).map(([w,I])=>`${w}: ${I}`).join(" ; "),p=_e.check("scene:stats:verbose"),m=[`${Bw("\u23F1\uFE0F",u,c)} (${h})`,`${f}`,`Layers: ${p?Fw(s,o):t.size}`,p?`Nodes: ${Fw(a,l)}`:null].filter(Bn),y=new Map(m.map(w=>[w,Me.getTextSize(w,n.font)])),v=Math.max(...Array.from(y.values(),w=>w.width)),x=e2(y.values(),w=>w.height);n.save(),n.fillStyle="white",n.fillRect(0,0,v,x),n.fillStyle="black";let D=0;for(let[w,I]of y.entries())D+=I.height,n.fillText(w,2,D);n.restore()}function JF(t,e){t.save();for(let[n,i]of Object.entries(e)){let r=i.computeTransformedBBox();if(!r){L.log(`Scene.render() - no bbox for debugged node [${n}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(r.x,r.y,r.width,r.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(n,r.x,r.y,r.width),t.fillText(n,r.x,r.y,r.width)}t.restore()}function Sh(t){return _e.check(!0,"scene")?M(M({node:t,name:(t instanceof U?t.name:null)??t.id,dirty:Ur[t.dirty]},t.parent?.isVirtual?{virtualParentDirty:Ur[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(e=>Sh(e)).reduce((e,n)=>{let{name:i}=n,{node:{visible:r,opacity:s,zIndex:o,zIndexSubOrder:a},node:l,virtualParent:c}=n;(!r||s<=0)&&(i=`(${i})`),l instanceof U&&l.isLayer()&&(i=`*${i}*`);let u=[`${i??"<unknown>"}`,`z: ${o}`,a&&`zo: ${a.map(f=>typeof f=="function"?`${f()} (fn)`:f).join(" / ")}`,c&&"(virtual parent)"].filter(f=>!!f).join(" "),d=u,h=1;for(;e[d]!=null&&h<100;)d=`${u} (${h++})`;return e[d]=n,e},{})):{}}function hC(t){if(t.dirty===0)return{dirtyTree:{},paths:[]};let e=t.children.map(r=>hC(r)).filter(r=>r.paths.length>0),n=U.is(t)?t.name??t.id:t.id,i=e.length?e.flatMap(r=>r.paths).map(r=>`${n}.${r}`):[n];return{dirtyTree:M({name:n,node:t,dirty:Ur[t.dirty]},e.map(r=>r.dirtyTree).filter(r=>r.dirty!=null).reduce((r,s)=>(r[s.name??"<unknown>"]=s,r),{})),paths:i}}function Fw(t,e){let n=t+e;return`${t} / ${n} (${Math.round(100*t/n)}%)`}function Bw(t,e,n){let i=n!=null?n-e:e;return`${t}: ${Math.round(i*100)/100}ms`}function e2(t,e){let n=0;for(let i of t)n+=e(i);return n}var fC=(()=>{let t=class{constructor({width:e,height:n,pixelRatio:i,domManager:r}){this.debug=_e.create(!0,"scene"),this.id=Gi(this),this.root=null,this.isDirty=!1,this.domManager=r;let s={width:e,height:n,pixelRatio:i};r&&(s.canvasConstructor=()=>r.addChild("canvas","scene-canvas")),this.canvas=new mv(s),this.layersManager=new QF(this.canvas,()=>{this.isDirty=!0})}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}setContainer(e){if((i=>typeof i.tagName<"u")(e)){let{element:i}=this.canvas;i.parentElement?.removeChild(i),e.appendChild(i)}else this.domManager=e,this.domManager.addChild("canvas","scene-canvas",this.canvas.element);return this}setRoot(e){return this.root===e?this:(this.isDirty=!0,this.root?._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager)),this)}attachNode(e,n){if(!n)return this.root?.appendChild(e),()=>this.removeChild(e);let i=this.root?.children.find(r=>r instanceof U&&r.name===n);if(!i)throw new Error("AG Charts - Unrecognized root group name: "+n);return i.appendChild(e),()=>i.removeChild(e)}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return this.root?.removeChild(e),this}download(e,n){_I(this.canvas.toDataURL(n),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,n){return e=Math.round(e),n=Math.round(n),e>0&&n>0&&(e!==this.width||n!==this.height)?(this.pendingSize=[e,n],this.isDirty=!0,!0):!1}render(e){return k(this,null,function*(){let{debugSplitTimes:n={start:performance.now()},extraDebugStats:i}=e??{},{canvas:r,canvas:{context:s}={},root:o,pendingSize:a}=this;if(!s)return;let l=performance.now();if(a&&(this.layersManager.resize(...a),this.pendingSize=void 0),o&&!o.visible){this.isDirty=!1;return}if(o&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:Ur[o.dirty],tree:Sh(o)}),Pw(this.layersManager,n,s,void 0,i);return}let c={ctx:s,devicePixelRatio:this.canvas.pixelRatio??1,forceRender:!0,resized:!!a,debugNodes:{}};_e.check("scene:stats:verbose")&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let u=!1;if((!o||o.dirty>=1)&&(u=!0,r.clear()),o&&_e.check("scene:dirtyTree")){let{dirtyTree:d,paths:h}=hC(o);_e.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:d,paths:h})}if(o&&u&&(this.debug("Scene.render() - before",{redrawType:Ur[o.dirty],canvasCleared:u,tree:Sh(o)}),o.visible&&(o.preRender(),s.save(),o.render(c),s.restore())),n["\u270D\uFE0F"]=performance.now()-l,this.layersManager.size&&u){let d=performance.now();s.save(),s.resetTransform(),this.layersManager.forEach(h=>{h.canvas.enabled&&h.getVisibility()&&(s.globalAlpha=h.getComputedOpacity(),h.canvas.drawImage(s))}),s.restore(),n["\u26D9"]=performance.now()-d}s.verifyDepthZero?.(),this.isDirty=!1,Pw(this.layersManager,n,s,c.stats,i),JF(s,c.debugNodes),o&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:Ur[o.dirty],tree:Sh(o),canvasCleared:u})})}strip(){let{context:e,pixelRatio:n}=this.canvas;e.setTransform(n,0,0,n,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};return t.className="Scene",t})(),t2=class{constructor(){this.cache=new WeakMap}call(t,...e){let n,i=this.cache.get(t),r=()=>{try{let s=t(...e);return i&&n!=null&&i.set(n,s),s}catch(s){L.warnOnce("User callback errored, ignoring",s);return}};try{n=JSON.stringify(e)}catch{return r()}return i==null&&(i=new Map,this.cache.set(t,i)),i.has(n)?i.get(n):r()}invalidateCache(){this.cache=new WeakMap}},n2=class extends ai{constructor(t){super(),this.annotationRoot=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return rt(t)}restoreMemento(t,e,n){this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:n})}updateData(t){this.annotations=t??[]}attachNode(t){return this.annotationRoot.append(t),()=>(this.annotationRoot?.removeChild(t),this)}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){return this.styles?.[t]}},i2=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new U({name:"Axes-Grids",layer:!0,zIndex:1}),this.axisGroup=new U({name:"Axes",layer:!0,zIndex:2}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup)}updateAxes(t,e){for(let n of t)e.includes(n)||(n.detachAxis(this.axisGroup,this.axisGridGroup),n.destroy());for(let n of e)t?.includes(n)||n.attachAxis(this.axisGroup,this.axisGridGroup);this.axes.clear();for(let n of e){let i=n.createAxisContext();this.axes.has(i.direction)?this.axes.get(i.direction)?.push(i):this.axes.set(i.direction,[i])}}getAxisContext(t){return[...this.axes.get(t)??[]]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},mf=class extends ns{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=_e.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){typeof t=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return yw(e=>this.fetch(e),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return yw((e,n)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:n})},t,{leading:!0,trailing:!0})}fetch(t){return k(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");let e=performance.now(),n=this.requestCounter++;this.debug(`DataService - requesting | ${n}`),this.freshRequests.push(n);let i;try{i=yield this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${n}`)}catch(s){this.debug(`DataService - request failed | ${n}`),L.errorOnce(`DataService - request failed | [${s}]`)}this.isLoadingInitialData=!1;let r=this.freshRequests.findIndex(s=>s===n);if(r===-1||this.dispatchOnlyLatest&&r!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${n}`);return}this.freshRequests=this.freshRequests.slice(r+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(i)?this.throttledDispatch(n,i):this.dispatch("data-error")})}};g([Wt({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],mf.prototype,"dispatchThrottle",2);g([Wt({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],mf.prototype,"requestThrottle",2);var r2=class{constructor(t,e,n){this.element=t,this.topTabGuard=e,this.bottomTabGuard=n,this.destroyFns=[],this.guardTabIndex=0,this.element.tabIndex=-1,this.initEventListener(this.element,"blur",()=>this.onBlur()),this.initEventListener(this.element,"focus",()=>this.onFocus()),this.initEventListener(this.topTabGuard,"focus",i=>this.onTabStart(i,this.topTabGuard)),this.initEventListener(this.bottomTabGuard,"focus",i=>this.onTabStart(i,this.bottomTabGuard))}set tabIndex(t){t>=0&&(this.guardTabIndex=t),t>0?(this.topTabGuard.tabIndex=t,this.bottomTabGuard.style.display="none"):(this.topTabGuard.tabIndex=t,this.bottomTabGuard.tabIndex=t)}destroy(){for(let t of this.destroyFns)t();this.destroyFns.length=0}initEventListener(t,e,n){t.addEventListener(e,n),this.destroyFns.push(()=>t.removeEventListener(e,n))}onBlur(){this.element.tabIndex===-1&&(this.tabIndex=this.guardTabIndex,this.guardTarget=void 0,this.guessedDelta=void 0)}onFocus(){this.element.tabIndex===-1&&(this.tabIndex=-1)}onTabStart(t,e){if(e.tabIndex>0&&(this.guessedDelta=0,t.relatedTarget!=null&&"tabIndex"in t.relatedTarget)){let n=Number(t.relatedTarget.tabIndex);!isNaN(n)&&n>0&&(this.guessedDelta=n<e.tabIndex?1:-1)}this.guardTarget=e,this.element.focus()}getBrowserFocusDelta(){let{guessedDelta:t,guardTarget:e,topTabGuard:n,bottomTabGuard:i}=this;return t!==void 0?t:e===n?1:e===i?-1:0}},s2=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([t,e])=>this.observe(t,e)),this.queuedObserveRequests=[]},!(typeof ResizeObserver>"u")&&(this.resizeObserver=new ResizeObserver(t=>{for(let{target:e,contentRect:{width:n,height:i}}of t){let r=this.elements.get(e);this.checkSize(r,e,n,i)}}),this.documentReady=dr("readyState")==="complete",this.documentReady||ji()?.addEventListener("load",this.onLoad))}destroy(){ji()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=null}checkSize(t,e,n,i){t&&(n!==t.size?.width||i!==t.size?.height)&&(t.size={width:n,height:i},t.cb(t.size,e))}observe(t,e){if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):this.resizeObserver?.observe(t);let n={cb:e};this.elements.set(t,n),this.checkSize(n,t,t.offsetWidth,t.offsetHeight)}unobserve(t){this.resizeObserver?.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}},o2='<div class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div class="ag-charts-canvas-center"><div class="ag-charts-canvas-container"><div class="ag-charts-tab-guard"></div><div class="ag-charts-canvas"></div><div class="ag-charts-canvas-proxy"></div><div class="ag-charts-tab-guard"></div><div class="ag-charts-canvas-overlay"></div></div></div></div>',a2=`.ag-charts-wrapper,
.ag-charts-wrapper:focus,
.ag-charts-wrapper:after,
.ag-charts-wrapper:before,
.ag-charts-wrapper *,
.ag-charts-wrapper *:focus,
.ag-charts-wrapper *:after,
.ag-charts-wrapper *:before{box-sizing:border-box;outline:none}.ag-charts-wrapper{position:relative}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,
.ag-charts-canvas{position:relative}.ag-charts-canvas-container > *,
.ag-charts-canvas > *{display:block}.ag-charts-canvas-proxy{opacity:0;position:absolute;top:0;left:0;pointer-events:none}.ag-charts-tab-guard{opacity:0;width:0px;height:0px}.ag-charts-canvas-overlay{pointer-events:none;position:absolute;top:0;left:0;right:0;bottom:0}.ag-charts-canvas-overlay > *{position:absolute;pointer-events:auto}.ag-charts-theme-default,
.ag-charts-theme-default-dark{--ag-charts-active-color:var(--ag-active-color,#2196f3);--ag-charts-background-color:var(--ag-background-color,#fff);--ag-charts-foreground-color:var(--ag-foreground-color,#181d1f);--ag-charts-border-color:var(--ag-border-color,#dddddd);--ag-charts-font-size:var(--ag-font-size,14px);--ag-charts-size:var(--ag-grid-size,8px);--ag-charts-border:var(--ag-charts-border-color) var(--ag-borders,solid 1px);--ag-charts-border-critical:var(--ag-borders-critical,solid 1px);--ag-charts-layer-context-menu:5;--ag-charts-layer-tooltip:4;--ag-charts-layer-toolbar:3;--ag-charts-layer-crosshair:2;--ag-charts-layer-annotations:1;--ag-charts-align:center;--ag-charts-justify:center;--ag-charts-axis-label-background-color:#474747;--ag-charts-axis-label-color:#ffffff;--ag-charts-toolbar-foreground-color:var(--ag-header-foreground-color,var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color:var(
        --ag-header-background-color,color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-foreground-color) 2%)
    );--ag-charts-toolbar-size:34px;--ag-charts-toolbar-size-small:24px;--ag-charts-toolbar-border:var(--ag-charts-border-critical,solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color:color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-active-color) 12%);--ag-charts-toolbar-focus-color:var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color:color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-active-color) 24%);--ag-charts-toolbar-active-color:var(--ag-active-color,#5090dc);--ag-charts-toolbar-disabled-foreground-color:var(
        --ag-disabled-foreground-color,color-mix(in srgb,transparent,var(--ag-charts-toolbar-foreground-color) 50%)
    );--ag-charts-toolbar-disabled-background-color:color-mix(in srgb,var(--ag-charts-toolbar-background-color),var(--ag-charts-toolbar-foreground-color) 6%);--ag-charts-toolbar-gap:var(--ag-charts-size);--ag-charts-toolbar-font-size:14px;--ag-charts-toolbar-font-size-small:12px;--ag-charts-toolbar-button-padding:7px;--ag-charts-toolbar-button-padding-small:3px;--ag-charts-button-radius:var(--ag-border-radius,4px);--ag-charts-focus-border-color:var(--ag-input-focus-border-color,var(--ag-charts-active-color));--ag-charts-focus-border:solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow:var(
        --ag-input-focus-box-shadow,0 0 0 3px color-mix(in srgb,transparent,var(--ag-input-focus-border-color,var(--ag-charts-active-color)) 47%)
    );--ag-charts-icon-font-family:'agChartsDefault';--ag-charts-icon-font-weight:normal;--ag-charts-icon-font-color:color-mix(in srgb,transparent,var(--ag-charts-foreground-color),90%)}.ag-charts-theme-default-dark{--ag-charts-background-color:var(--ag-background-color,color-mix(in srgb,#fff,#182230 97%));--ag-charts-foreground-color:var(--ag-foreground-color,#fff);--ag-charts-border-color:var(--ag-border-color,rgba(255,255,255,0.16));--ag-charts-hover-color:var(
        --ag-row-hover-color,color-mix(in srgb,transparent,var(--ag-charts-active-color) 20%)
    );--ag-charts-axis-label-background-color:#9caebb;--ag-charts-axis-label-color:#000000;--ag-charts-toolbar-background-color:var(--ag-header-background-color,color-mix(in srgb,#fff,#182230 93%))}[class^='ag-charts-icon']{display:block;speak:none;speak:never;mask-size:contain;mask-repeat:no-repeat;background-color:currentColor}.ag-charts-icon-zoom-in{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDQuNWEuNzUuNzUgMCAwIDAtMS41IDB2Mi43NUg0LjVhLjc1Ljc1IDAgMCAwIDAgMS41aDIuNzV2Mi43NWEuNzUuNzUgMCAwIDAgMS41IDBWOC43NWgyLjc1YS43NS43NSAwIDAgMCAwLTEuNUg4Ljc1VjQuNVoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjc1IDhhLjc1Ljc1IDAgMCAxIC43NS0uNzVoN2EuNzUuNzUgMCAwIDEgMCAxLjVoLTdBLjc1Ljc1IDAgMCAxIDMuNzUgOFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-icon-reset{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00LjQxMiA0LjA1OCAyLjc1IDIuMzk2VjYuNzVoLjc0NGEuNzYuNzYgMCAwIDAgLjAxMiAwaDMuNTk4TDUuNDc4IDUuMTI1YTQuMTI1IDQuMTI1IDAgMCAxIDIuNTIzLS44NzUgMy43NSAzLjc1IDAgMSAxLTMuMTE5IDUuODMzLjc1Ljc1IDAgMCAwLTEuMjQ3LjgzNEE1LjI1IDUuMjUgMCAxIDAgOCAyLjc1aC0uMDAzYTUuNjI1IDUuNjI1IDAgMCAwLTMuNTg1IDEuMzA4WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-left{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4wMyA0LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZMNy41NiA4bDIuNDcgMi40N2EuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC0zLTNhLjc1Ljc1IDAgMCAxIDAtMS4wNmwzLTNhLjc1Ljc1IDAgMCAxIDEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-right{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljk3IDExLjUzYS43NS43NSAwIDAgMSAwLTEuMDZMOC40NCA4IDUuOTcgNS41M2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDMgM2EuNzUuNzUgMCAwIDEgMCAxLjA2bC0zIDNhLjc1Ljc1IDAgMCAxLTEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-start{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==)}.ag-charts-icon-pan-end{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+)}.ag-charts-icon-trend-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMi41IiBjeT0iOCIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxjaXJjbGUgY3g9IjEzLjUiIGN5PSI4IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTQgOGg4Ii8+PC9zdmc+)}.ag-charts-icon-horizontal-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4zODYgOC43NWEyLjUwMSAyLjUwMSAwIDAgMS00Ljc3MiAwSC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC44NjRhMi41MDEgMi41MDEgMCAwIDEgNC43NzIgMGg0Ljg2NGEuNzUuNzUgMCAwIDEgMCAxLjVoLTQuODY0Wk05IDhhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-vertical-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDUuNjE0YTIuNTAxIDIuNTAxIDAgMCAxIDAgNC43NzJ2NC44NjRhLjc1Ljc1IDAgMCAxLTEuNSAwdi00Ljg2NGEyLjUwMSAyLjUwMSAwIDAgMSAwLTQuNzcyVi43NWEuNzUuNzUgMCAwIDEgMS41IDB2NC44NjRaTTggN2ExIDEgMCAxIDEgMCAyIDEgMSAwIDAgMSAwLTJaIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-parallel-channel{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzc3LTIuMTRsLTYuNjMgMi45YTIuNTAxIDIuNTAxIDAgMSAwIC42MDcgMS4zNzJsNi41ODUtMi44OGEyLjUwMSAyLjUwMSAwIDAgMCAyLjgxNS43NDhabS4wNS0yLjY5M2ExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptLTExIDQuNzVhMSAxIDAgMSAxLTEuODcuNzA4IDEgMSAwIDAgMSAxLjg3LS43MDhabTEuNTUgNi4wNzVhMi41MDEgMi41MDEgMCAxIDEtLjYwNy0xLjM3Mmw2LjYzLTIuOWEyLjUwMSAyLjUwMSAwIDEgMSAuNTYyIDEuMzkxbC02LjU4NSAyLjg4Wm0tMS41NS0uMDc1YTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0xMC40Mi0zLjQ2YTEgMSAwIDEgMC0uNzA5LTEuODcgMSAxIDAgMCAwIC43MDggMS44N1oiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-disjoint-channel{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzgzLTIuNDUzTDQuNjkgNC4wNTVhMi41IDIuNSAwIDEgMCAuMzQ0IDEuNDZsNi4zOTItMS41OThhMi41MDEgMi41MDEgMCAwIDAgMyAxLjAwM1ptLjA1LTIuNjkzYTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0tMTEgMi43NWExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptMS41NiA1LjQyYTIuNSAyLjUgMCAxIDAtLjM0NSAxLjQ2MWw2LjM1MiAxLjU4OGEyLjUgMi41IDAgMSAwIC4zODQtMS40NWwtNi4zOTItMS41OThabS0xLjU2LjUzOGExIDEgMCAxIDAtMS44Ny0uNzA4IDEgMSAwIDAgMCAxLjg3LjcwOFptMTAuNDIgMS40NjFhMSAxIDAgMSAxLS43MDkgMS44NyAxIDEgMCAwIDEgLjcwOC0xLjg3WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjc4OC41ODNhMi42MyAyLjYzIDAgMCAwLTEuODYuNzdMOS41NDQgMi43MzhhLjc1Ny43NTcgMCAwIDAtLjE0LjE0TDIuMDMyIDEwLjI1di4wMDFjLS4yNDIuMjQxLS40Mi41MzgtLjUyLjg2NGwtLjAwMi4wMDItLjg4IDIuOTAyLS4wMDEuMDAzYTEuMDgzIDEuMDgzIDAgMCAwIDEuMzUgMS4zNDdoLjAwMWwyLjkwMi0uODhoLjAwMWMuMzI2LS4xLjYyMy0uMjc3Ljg2NS0uNTE4di0uMDAxbDcuMzc1LTcuMzc2YS43NjMuNzYzIDAgMCAwIC4xMzktLjEzOWwxLjM4NC0xLjM4NEEyLjYzIDIuNjMgMCAwIDAgMTIuNzg4LjU4M1ptLS4xMjYgNC4zNTIuOTI0LS45MjRhMS4xMyAxLjEzIDAgMCAwLTEuNTk3LTEuNTk3bC0uOTI0LjkyNCAxLjU5NyAxLjU5N1ptLTIuNjU3LS41MzYtNi45MTMgNi45MTRIMy4wOWEuNTgzLjU4MyAwIDAgMC0uMTQ2LjI0MmwtLjY1MyAyLjE1MyAyLjE1NS0uNjU0YS41ODMuNTgzIDAgMCAwIC4yNDEtLjE0NGw2LjkxNC02LjkxNC0xLjU5Ny0xLjU5N1oiIGZpbGw9IiMwMDAiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDE2djE2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+)}.ag-charts-icon-delete{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA4MyAyLjY2N2MwLS4wOS4wNTMtLjI0Mi4xOTctLjM4Ny4xNDUtLjE0NC4yOTctLjE5Ny4zODctLjE5N2gyLjY2N2MuMDg5IDAgLjI0MS4wNTMuMzg2LjE5Ny4xNDUuMTQ1LjE5Ny4yOTcuMTk3LjM4N3YuNTgzSDYuMDg0di0uNTgzWk01LjMzIDQuNzVIMTEuOTE3djguNTgzYzAgLjA5LS4wNTIuMjQyLS4xOTcuMzg3LS4xNDUuMTQ0LS4yOTcuMTk3LS4zODYuMTk3SDQuNjY3Yy0uMDkgMC0uMjQyLS4wNTMtLjM4Ny0uMTk3LS4xNDQtLjE0NS0uMTk3LS4yOTctLjE5Ny0uMzg3VjQuNzVINS4zM1ptLS43NDUtMS41di0uNTgzYzAtLjU3OC4yOC0xLjA5Mi42MzYtMS40NDcuMzU1LS4zNTYuODctLjYzNyAxLjQ0Ny0uNjM3aDIuNjY3Yy41NzcgMCAxLjA5MS4yODEgMS40NDcuNjM3LjM1NS4zNTUuNjM2Ljg3LjYzNiAxLjQ0N3YuNTgzSDE0YS43NS43NSAwIDAgMSAwIDEuNWgtLjU4M3Y4LjU4M2MwIC41NzgtLjI4MSAxLjA5Mi0uNjM2IDEuNDQ3LS4zNTYuMzU2LS44Ny42MzctMS40NDcuNjM3SDQuNjY3Yy0uNTc3IDAtMS4wOTItLjI4MS0xLjQ0Ny0uNjM3LS4zNTUtLjM1NS0uNjM3LS44Ny0uNjM3LTEuNDQ3VjQuNzVIMmEuNzUuNzUgMCAwIDEgMC0xLjVoMi41ODNabTIuMDgzIDMuMzMzYS43NS43NSAwIDAgMSAuNzUuNzV2NGEuNzUuNzUgMCAxIDEtMS41IDB2LTRhLjc1Ljc1IDAgMCAxIC43NS0uNzVabTMuNDE3Ljc1YS43NS43NSAwIDAgMC0xLjUgMHY0YS43NS43NSAwIDEgMCAxLjUgMHYtNFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-lock{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjE3MyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDQuNDEgMS44Mjd2MS45MTZINS40MTZWNC42NjdjMC0uNjg1LjI3My0xLjM0My43NTctMS44MjdaTTMuOTE3IDYuNTgzVjQuNjY3YTQuMDgzIDQuMDgzIDAgMCAxIDguMTY2IDB2MS45MTZoLjU4NGMxLjE1IDAgMi4wODMuOTMzIDIuMDgzIDIuMDg0djQuNjY2YzAgMS4xNS0uOTMzIDIuMDg0LTIuMDgzIDIuMDg0SDMuMzMzYTIuMDgzIDIuMDgzIDAgMCAxLTIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEuOTMzLTIuMDg0IDIuMDgzLTIuMDg0aC41ODNabTcuNDE2IDEuNWgtOGEuNTgzLjU4MyAwIDAgMC0uNTgzLjU4NHY0LjY2NmMwIC4zMjIuMjYxLjU4NC41ODMuNTg0aDkuMzM0YS41ODMuNTgzIDAgMCAwIC41ODMtLjU4NFY4LjY2N2EuNTgzLjU4MyAwIDAgMC0uNTgzLS41ODRoLTEuMzM0WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjkyMyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDMuNjUzIDAgMyAzIDAgMCAxIC41Ny43OThjLjEzNC4yNzguMTcuNDc0LjE3LjU0NWEuNzUuNzUgMCAwIDAgMS41IDBjMC0uMzgxLS4xMzItLjgwOS0uMzItMS4xOThhNC41MDEgNC41MDEgMCAwIDAtLjg1OS0xLjIwNiA0LjA4MyA0LjA4MyAwIDAgMC02Ljk3IDIuODg4djEuOTE2aC0uNTg0QzIuOTMzIDYuNTgzIDIgNy41MTYgMiA4LjY2N3Y0LjY2NmMwIDEuMTUuOTMzIDIuMDg0IDIuMDgzIDIuMDg0aDkuMzM0YzEuMTUgMCAyLjA4My0uOTMzIDIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEtLjkzMy0yLjA4NC0yLjA4My0yLjA4NGgtNy4yNVY0LjY2N2MwLS42ODUuMjcyLTEuMzQzLjc1Ni0xLjgyN1pNNS40MTcgOC4wODNINC4wODJhLjU4My41ODMgMCAwIDAtLjU4My41ODR2NC42NjZjMCAuMzIyLjI2MS41ODQuNTgzLjU4NGg5LjMzNGEuNTgzLjU4MyAwIDAgMCAuNTgzLS41ODRWOC42NjdhLjU4My41ODMgMCAwIDAtLjU4My0uNTg0aC04WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-plus{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXBsdXMiPjxwYXRoIGQ9Ik01IDEyaDE0Ii8+PHBhdGggZD0iTTEyIDV2MTQiLz48L3N2Zz4=)}.ag-charts-icon-crossline-add-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43NSA0LjVhLjc1Ljc1IDAgMCAwLTEuNSAwdjIuNzVINC41YS43NS43NSAwIDAgMCAwIDEuNWgyLjc1djIuNzVhLjc1Ljc1IDAgMCAwIDEuNSAwVjguNzVoMi43NWEuNzUuNzUgMCAwIDAgMC0xLjVIOC43NXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}`,yv="canvas-center",l2=["styles",yv,"canvas","canvas-proxy","canvas-overlay"],Gm=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas",eventTypes:["focus","blur"]}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],[yv,{childElementType:"div"}]]);function c2(t,e){if(typeof IntersectionObserver>"u")return;let n=new IntersectionObserver(i=>{for(let r of i)r.target===t&&e(r.intersectionRatio)},{root:t});return n.observe(t),n}var pC=class extends ai{constructor(t){super(),this.containerSize=void 0,this.sizeMonitor=new s2;let e=Lt("div");e.innerHTML=o2,this.element=e.children.item(0),this.rootElements=l2.reduce((i,r)=>{let s=`ag-charts-${r}`,o=this.element.classList.contains(s)?this.element:this.element.querySelector(`.${s}`);if(!o)throw new Error(`AG Charts - unable to find DOM element ${s}`);return i[r]={element:o,children:new Map,listeners:[]},i},{});let n=!1;this.observer=c2(this.element,i=>{i===0&&!n&&this.listeners.dispatch("hidden",{type:"hidden"}),n=i===0}),this.setSizeOptions(),this.addStyles("dom-manager",a2),t&&this.setContainer(t)}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(t=>{t.children.forEach(e=>e.remove()),t.element.remove()}),this.guardedElement?.destroy(),this.element.remove()}setSizeOptions(t=300,e=300,n,i){let{style:r}=this.element;r.width=`${n??t}px`,r.height=`${i??e}px`}updateContainerSize(){let{style:t}=this.rootElements[yv].element;t.width=`${this.containerSize?.width??0}px`,t.height=`${this.containerSize?.height??0}px`}setContainer(t){t!==this.container&&(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),t.appendChild(this.element),this.sizeMonitor.observe(t,e=>{this.containerSize=e,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.container=t,this.listeners.dispatch("container-changed",{type:"container-changed"}))}setThemeClass(t){let e="ag-charts-theme-";this.element.classList.forEach(n=>{n.startsWith(e)&&n!==t&&this.element.classList.remove(n)}),this.element.classList.add(t)}createTabGuards(){let t=this.rootElements.canvas.element.querySelector("canvas"),e=this.element.querySelectorAll(".ag-charts-tab-guard");if(t==null||e[0]==null||e[1]==null)throw new Error("AG Charts - error initialising canvas tab guards");return new r2(t,e[0],e[1])}setTabIndex(t){this.guardedElement??(this.guardedElement=this.createTabGuards()),this.guardedElement.tabIndex=t}getBrowserFocusDelta(){return this.guardedElement?.getBrowserFocusDelta()??0}addEventListener(t,e,n){this.element.addEventListener(t,e,n),Gm.forEach((i,r)=>{if(!i.eventTypes?.includes(t))return;let s=this.rootElements[r];s.listeners.push([t,e,n]),s.children.forEach(o=>{o.addEventListener(t,e)})})}removeEventListener(t,e,n){this.element.removeEventListener(t,e,n),Gm.forEach((i,r)=>{if(!i.eventTypes?.includes(t))return;let s=this.rootElements[r];s.listeners=s.listeners.filter(([o,a])=>o!==t&&a!==e),s.children.forEach(o=>{o.removeEventListener(t,e,n)})})}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getDocumentRoot(){let t=this.container?.ownerDocument?.body??dr("body"),e=this.container;for(;e!=null;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}}getChildBoundingClientRect(t){let{children:e}=this.rootElements[t],n=[];for(let i of e.values())n.push(V.fromDOMRect(i.getBoundingClientRect()));return V.merge(n)}calculateCanvasPosition(t){let e=0,n=0,{x:i=0,y:r=0}=this.getChildBoundingClientRect("canvas")??{},s=t.getBoundingClientRect();return e=s.x-i,n=s.y-r,{x:e,y:n}}isManagedDOMElement(t,e=this.element){for(;t&&t!==e;){if(t.parentElement==null)return!1;t=t.parentElement}return!0}isManagedChildDOMElement(t,e,n){let{children:i}=this.rootElements[e],r=i?.get(n);return r!=null&&this.isManagedDOMElement(t,r)}isEventOverElement(t){let e=t.target;if(e==null)return!1;for(;e!==this.element;)if(e=e.parentElement,e==null)return!1;return!0}addStyles(t,e){let n=this.addChild("styles",t);n.innerHTML=e}removeStyles(t){this.removeChild("styles",t)}updateCursor(t){this.element.style.cursor=t}getCursor(){return this.element.style.cursor}addChild(t,e,n){let{element:i,children:r,listeners:s}=this.rootElements[t];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(e))return r.get(e);let{childElementType:o="div"}=Gm.get(t)??{};if(n&&n.tagName.toLowerCase()!==o.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");let a=n??Lt(o);for(let[l,c,u]of s)a.addEventListener(l,c,u);return r.set(e,a),i?.appendChild(a),a}removeChild(t,e){let{children:n}=this.rootElements[t];n&&n.has(e)&&(n.get(e)?.remove(),n.delete(e))}incrementDataCounter(t){let{dataset:e}=this.element;e[t]??(e[t]="0"),e[t]=String(Number(e[t])+1)}};function u2(t,e){let n=-e/t;return t!==0&&n>=0&&n<=1?[n]:[]}function d2(t,e,n){if(t===0)return u2(e,n);let i=e*e-4*t*n,r=[];if(i===0){let s=-e/(2*t);s>=0&&s<=1&&r.push(s)}else if(i>0){let s=Math.sqrt(i),o=(-e-s)/(2*t),a=(-e+s)/(2*t);o>=0&&o<=1&&r.push(o),a>=0&&a<=1&&r.push(a)}return r}function h2(t,e,n,i){if(t===0)return d2(e,n,i);let r=e/t,s=n/t,o=i/t,a=(3*s-r*r)/9,l=(9*r*s-27*o-2*r*r*r)/54,c=a*a*a+l*l,u=1/3,d=[];if(c>=0){let h=Math.sqrt(c),f=Math.sign(l+h)*Math.pow(Math.abs(l+h),u),p=Math.sign(l-h)*Math.pow(Math.abs(l-h),u),m=Math.abs(Math.sqrt(3)*(f-p)/2),y=-u*r+(f+p);if(y>=0&&y<=1&&d.push(y),m===0){let v=-u*r-(f+p)/2;v>=0&&v<=1&&d.push(v)}}else{let h=Math.acos(l/Math.sqrt(-a*a*a)),f=u*r,p=2*Math.sqrt(-a),m=p*Math.cos(u*h)-f,y=p*Math.cos(u*(h+2*Math.PI))-f,v=p*Math.cos(u*(h+4*Math.PI))-f;m>=0&&m<=1&&d.push(m),y>=0&&y<=1&&d.push(y),v>=0&&v<=1&&d.push(v)}return d}function la(t,e,n,i,r,s,o,a){let l=(n-t)*(a-s)-(i-e)*(o-r);if(l===0)return 0;let c=((o-r)*(e-s)-(t-r)*(a-s))/l,u=((n-t)*(e-s)-(i-e)*(t-r))/l;return c>=0&&c<=1&&u>=0&&u<=1?1:0}function f2(t,e,n,i,r,s,o,a,l,c,u,d){let h=0,f=c-d,p=u-l,m=l*(d-c)-c*(u-l),y=jw(t,n,r,o),v=jw(e,i,s,a),x=f*y[0]+p*v[0],D=f*y[1]+p*v[1],S=f*y[2]+p*v[2],w=f*y[3]+p*v[3]+m,I=h2(x,D,S,w);for(let C of I){let T=C*C,E=C*T,A=y[0]*E+y[1]*T+y[2]*C+y[3],R=v[0]*E+v[1]*T+v[2]*C+v[3],_;l===u?_=(R-c)/(d-c):_=(A-l)/(u-l),_>=0&&_<=1&&h++}return h}function jw(t,e,n,i){return[-t+3*e-3*n+i,3*t-6*e+3*n,-3*t+3*e,t]}function gC(t,e,n,i,r,s,o,a,l,c){if(isNaN(t)||isNaN(e))return 0;s&&([r,i]=[i,r]);let u=(c-a)/(l-o),d=a-u*o,h=Math.pow(u,2)+1,f=2*(u*(d-e)-t),p=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(n,2),m=Math.pow(f,2)-4*h*p;if(m<0)return 0;let y=(-f+Math.sqrt(m))/2/h,v=(-f-Math.sqrt(m))/2/h,x=0;return[y,v].forEach(D=>{if(!(D>=Math.min(o,l)&&D<=Math.max(o,l)))return;let w=u*D+d,I=D-t,C=w-e,T=Math.atan2(C,I);jr(T,i,r)&&x++}),x}var kc=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,n,i){this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath()}roundRect(t,e,n,i,r){r=Math.min(r,n/2,i/2),this.moveTo(t,e+r),this.arc(t+r,e+r,r,Math.PI,1.5*Math.PI),this.lineTo(t+r,e),this.lineTo(t+n-r,e),this.arc(t+n-r,e+r,r,1.5*Math.PI,2*Math.PI),this.lineTo(t+n,e+r),this.lineTo(t+n,e+i-r),this.arc(t+n-r,e+i-r,r,0,Math.PI/2),this.lineTo(t+n-r,e+i),this.lineTo(t+r,e+i),this.arc(t+ +r,e+i-r,r,Math.PI/2,Math.PI),this.lineTo(t,e+i-r),this.closePath()}arc(t,e,n,i,r,s){this.openedPath=!0,this.path2d.arc(t,e,n,i,r,s),this.commands.push(2),this.params.push(t,e,n,i,r,s?1:0)}cubicCurveTo(t,e,n,i,r,s){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,n,i,r,s),this.commands.push(3),this.params.push(t,e,n,i,r,s)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){let n=this.commands,i=this.params,r=n.length,s=-1e4,o=-1e4,a=NaN,l=NaN,c=0,u=0,d=0;for(let h=0,f=0;h<r;h++)switch(n[h]){case 0:d+=la(a,l,c,u,s,o,t,e),c=i[f++],a=c,u=i[f++],l=u;break;case 1:d+=la(c,u,i[f++],i[f++],s,o,t,e),c=i[f-2],u=i[f-1];break;case 3:d+=f2(c,u,i[f++],i[f++],i[f++],i[f++],i[f++],i[f++],s,o,t,e),c=i[f-2],u=i[f-1];break;case 2:let p=i[f++],m=i[f++],y=i[f++],v=i[f++],x=i[f++],D=!!i[f++];if(d+=gC(p,m,y,v,x,D,s,o,t,e),!isNaN(a)){let S=p+Math.cos(v)*y,w=m+Math.sin(v)*y;d+=la(c,u,S,w,s,o,t,e)}c=p+Math.cos(x)*y,u=m+Math.sin(x)*y;break;case 4:d+=la(a,l,c,u,s,o,t,e);break}return d%2===1}distanceSquared(t,e){let n=1/0,i=this.commands,r=this.params,s=i.length,o=NaN,a=NaN,l=0,c=0;for(let u=0,d=0;u<s;u++)switch(i[u]){case 0:l=o=r[d++],c=a=r[d++];break;case 1:{let h=r[d++],f=r[d++];n=bh(t,e,l,c,h,f,n);break}case 3:L.error("Command.Curve distanceSquare not implemented");break;case 2:{let h=r[d++],f=r[d++],p=r[d++],m=r[d++],y=r[d++],v=h+Math.cos(m)*p,x=f+Math.sin(m)*p,D=!!r[d++];n=bh(t,e,l,c,v,x,n),n=wF(t,e,h,f,p,m,y,D,n),l=h+Math.cos(y)*p,c=f+Math.sin(y)*p;break}case 4:n=bh(t,e,l,c,o,a,n);break}return n}getPoints(){let{commands:t,params:e}=this,n=[],i=0;for(let r=0;r<t.length;r++)switch(t[r]){case 0:case 1:n.push({x:e[i++],y:e[i++]});break;case 3:i+=4,n.push({x:e[i++],y:e[i++]});break;case 2:n.push({x:e[i++],y:e[i++]}),i+=4;break;case 4:break}return n}computeSVGDataPath(t,e){let n=[],{commands:i,params:r}=this,s=0;for(let o=0;o<i.length;o++)switch(i[o]){case 0:n.push("M",t+r[s++],e+r[s++]);break;case 1:n.push("L",t+r[s++],e+r[s++]);break;case 3:n.push("C",t+r[s++],e+r[s++],t+r[s++],e+r[s++],t+r[s++],e+r[s++]);break;case 2:let[a,l,c,u,d,h]=[r[s++],r[s++],r[s++],r[s++],r[s++],r[s++]],f=t+a+Math.cos(u)*c,p=e+l+Math.sin(u)*c,m=t+a+Math.cos(d)*c,y=e+l+Math.sin(d)*c,v=II(u,d,!!h)>Math.PI?1:0,x=(h+1)%2;n.push("L",f,p,"A",c,c,0,v,x,m,y);break;case 4:n.push("Z");break}return n.join(" ")}};function X(t){let{redraw:e=3,changeCb:n,convertor:i}=t??{};return j({redraw:e,type:"path",convertor:i,changeCb:n})}var nn=(()=>{let t=class extends Vn{constructor(){super(...arguments),this.path=new kc,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}isPointInPath(e,n){let i=this.transformPoint(e,n);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}distanceSquared(e,n){let i=this.transformPoint(e,n);return this.distanceSquaredTransformedPoint(i.x,i.y)}computeSVGDataPath(){let{x:e,y:n}=this.inverseTransformPoint(0,0);return this.path.computeSVGDataPath(e,n)}distanceSquaredTransformedPoint(e,n){return this.path.closedPath&&this.path.isPointInPath(e,n)?0:this.path.distanceSquared(e,n)}isDirtyPath(){return!1}updatePath(){}render(e){let{ctx:n,forceRender:i,stats:r}=e;if(this.dirty===0&&!i){r&&(r.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(n),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),!isNaN(this._clipX)&&!isNaN(this._clipY)&&this.clipMode!=null){n.save();let s=this.strokeWidth/2;if(this._clipPath??(this._clipPath=new kc),this._clipPath.clear(),this._clipPath.rect(-s,-s,this._clipX+s,this._clipY+s+s),this.clipMode==="normal"&&n.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(n),this.clipMode==="punch-out"){n.clip(this._clipPath?.getPath2D());let{x:o=-1e4,y:a=-1e4,width:l=2e4,height:c=2e4}=this.computeBBox()??{};n.clearRect(o,a,l,c)}n.restore()}else this.drawPath(n);this.fillShadow?.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}};return t.className="Path",t})();g([X()],nn.prototype,"clipMode",2);g([X()],nn.prototype,"clipX",1);g([X()],nn.prototype,"clipY",1);var mC={};zi(mC,{block:()=>Iy,css:()=>p2,elements:()=>g2,modifiers:()=>Cy});var p2=".ag-charts-focus.ag-charts-focus__indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus.ag-charts-focus__indicator > div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus.ag-charts-focus__indicator > svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-focus--hidden{visibility:hidden}",Iy="ag-charts-focus",g2={indicator:"ag-charts-focus__indicator",svg:"ag-charts-focus__svg"},Cy={hidden:"ag-charts-focus--hidden"},m2=class{constructor(t){this.domManager=t;let{css:e,block:n,elements:i,modifiers:r}=mC;this.div=dr().createElement("div"),this.svg=dr().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=dr().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),t.addStyles(n,e),this.element=t.addChild("canvas-overlay",n),this.element.classList.add(n,i.indicator,r.hidden),this.element.append(this.svg)}destroy(){this.domManager.removeStyles(Iy),this.domManager.removeChild("canvas-overlay",Iy)}updateBounds(t){t===void 0?this.element.classList.add(Cy.hidden):t instanceof nn?(this.path.setAttribute("d",t.computeSVGDataPath()),this.show(this.svg)):(or(this.div,t),this.show(this.div))}show(t){this.element.classList.remove(Cy.hidden),this.element.innerHTML="",this.element.append(t)}};function Vw(t,e){return e.params?.type===t}function zw(t){return{params:t,result:Lt({button:"button",slider:"input",toolbar:"div",group:"div"}[t.type])}}var y2=class{constructor(t,e,n,i){this.localeManager=e,this.domManager=n,this.focusIndicator=i,this.debugShowDOMProxies=_e.check("showDOMProxies"),this.destroyFns=[],this.destroyFns.push(t.addListener("update-complete",()=>this.update()))}destroy(){this.destroyFns.forEach(t=>t())}update(){this.focusable&&this.focusIndicator.updateBounds(this.focusable.computeTransformedBBox())}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){let e=zw(t),{params:n,result:i}=e;return this.domManager.addChild("canvas-overlay",n.id,i),i.classList.add(...n.classList),i.style.pointerEvents="none",i.role=n.type,i.ariaOrientation=n.ariaOrientation,this.addLocalisation(()=>{i.ariaLabel=this.localeManager.t(n.ariaLabel.id,n.ariaLabel.params)}),i}createProxyElement(t){let e=zw(t);if(Vw("button",e)){let{params:n,result:i}=e;if(this.initElement(n,i),typeof n.textContent=="string")i.textContent=n.textContent;else{let{textContent:r}=n;this.addLocalisation(()=>{i.textContent=this.localeManager.t(r.id,r.params)})}}if(Vw("slider",e)){let{params:n,result:i}=e;this.initElement(n,i),i.type="range",i.role="presentation",i.style.margin="0px",i.ariaOrientation=n.ariaOrientation,this.addLocalisation(()=>{i.ariaLabel=this.localeManager.t(n.ariaLabel.id,n.ariaLabel.params)})}return e.result}initElement(t,e){let{focusable:n,onclick:i,onchange:r,onfocus:s,onblur:o,tabIndex:a,id:l,parent:c}=t;e.id=l,e.style.pointerEvents="none",e.style.opacity=this.debugShowDOMProxies?"0.25":"0",e.style.position="absolute",e.style.overflow="hidden",a!==void 0&&(e.tabIndex=a),c.appendChild(e),e.addEventListener("focus",u=>{this.focusable=n,e.style.setProperty("pointerEvents",null),this.focusIndicator.updateBounds(n.computeTransformedBBox())}),e.addEventListener("blur",u=>{this.focusable=void 0,e.style.pointerEvents="none",this.focusIndicator.updateBounds(void 0)}),i&&e.addEventListener("click",i),s&&e.addEventListener("focus",s),o&&e.addEventListener("blur",o),r&&e.addEventListener("change",r)}},Gw=class{constructor(t){this.maxAnimationTime=t,this.debug=_e.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(ia.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(ia[this.currentPhase])??[]}checkOverlappingId(t){t!=null&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){if(t.isComplete)return;if(ia.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),this.phases.get(t.phase)?.push(t)}removeAnimation(t){this.controllers.delete(t.id);let e=this.phases.get(t.phase),n=e?.indexOf(t);n!=null&&n>=0&&e?.splice(n,1)}progress(t){if(!this.isReady)return;let e=t===0?.01:t,n=()=>{let c=ia[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:Ic[c]}},{phase:i,phaseControllers:r,phaseMeta:s}=n(),o=()=>ia[this.currentPhase]==null,a=()=>{for({phase:i,phaseControllers:r,phaseMeta:s}=n();!o()&&r.length===0;)this.currentPhase++,{phase:i,phaseControllers:r,phaseMeta:s}=n(),this.debug(`AnimationBatch - phase changing to ${i}`,{unusedTime:e},r)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${i} with ${r?.length} of ${l}`);do{let c=e,u=s.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0,d=0;for(let h of r)u?h.stop():e=Math.min(h.update(c),e),h.isComplete&&(d++,this.removeAnimation(h));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${r.length} controllers; ${d} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(L.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(let[,e]of this.controllers)if(e.duration>0&&Ic[e.phase].skipIfNoEarlierAnimations!==!0){t=!1;break}if(!t)for(let[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(this.skipAnimations===!1&&t===!0){for(let e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(let t of this.controllers.values())t.play()}pause(){for(let t of this.controllers.values())t.pause()}stop(){for(let t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){L.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(t){if(t!=null&&this.controllers.has(t)){let e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(let e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}};function Uw(t){return t==null?!0:!isNaN(t)&&t>=0&&t<=2}var yC=class extends ai{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new Gw(this.defaultDuration*1.5),this.debug=_e.create(!0,"animation"),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1,this.currentAnonymousAnimationId=0}animate(e){var t=Ve(e,[]);let n=this.batch;try{n.checkOverlappingId(t.id)}catch(l){this.failsafeOnError(l);return}let{id:i}=t;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);let r=this.isSkipped()||t.phase==="none";r&&this.debug("AnimationManager - skipping animation");let{delay:s,duration:o}=t;if(!Uw(s))throw new Error(`Animation delay of ${s} is unsupported (${i})`);if(!Uw(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);let a=new KM(N(M({},t),{id:i,skip:r,autoplay:this.isPlaying?t.autoplay:!1,phase:t.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(a,this.defaultDuration))return this.batch.addAnimation(a),a}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let t,e=n=>k(this,null,function*(){let i=()=>k(this,null,function*(){let r=n-(t??n);t=n,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:r}),this.interactionManager.pushState(1);try{this.batch.progress(r)}catch(s){this.failsafeOnError(s)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:r})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(i):yield this.chartUpdateMutex.acquire(i),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.listeners.dispatch("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))});this.listeners.dispatch("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){L.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new Gw(this.defaultDuration*1.5),t===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}},v2=class vC{constructor(e,n,i){this.localeManager=e,this.domManager=n,this.layoutService=i,this.debug=_e.create(!0,"aria"),this.destroyFns=[],this.liveElem=vC.createAnnouncer(),this.domManager.addChild("canvas-proxy","ag-charts-canvas-proxy",this.liveElem),this.destroyFns.push(this.layoutService.addListener("layout-complete",r=>this.onResize(r)),()=>this.domManager.removeChild("canvas-proxy","ag-charts-canvas-proxy"))}static createAnnouncer(){let e=dr().createElement("div");return e.classList.add("ag-charts-aria-announcer"),Zs(e,"role","figure"),Zs(e,"aria-live","assertive"),e}destroy(){this.destroyFns.forEach(e=>e())}onResize(e){this.liveElem.style.width=`${e.chart.width}px`,this.liveElem.style.height=`${e.chart.height}px`}announceValue(e,n){let{localeManager:i,liveElem:r}=this,s=i.t(e,n);this.debug(`AriaAnnouncementService - announceValue: ${s}`),r.textContent="\xA0",setTimeout(()=>r.innerText=s,16)}},bC=class extends ai{legendItemClick(t,e,n,i){let r={type:"legend-item-click",series:t,itemId:e,enabled:n,legendItemName:i};this.listeners.dispatch("legend-item-click",r)}legendItemDoubleClick(t,e,n,i,r){let s={type:"legend-item-double-click",series:t,itemId:e,enabled:n,legendItemName:r,numVisibleItems:i};this.listeners.dispatch("legend-item-double-click",s)}axisHover(t,e){let n={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",n)}},xC=class DC{constructor(e){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new ns;let{Default:n,ContextMenu:i}=xa;this.destroyFns=[e.listenAll("contextmenu",r=>this.onContextMenu(r),n|i)]}destroy(){this.destroyFns.forEach(e=>e())}onContextMenu(e){DC.toContextType(e.region)==="all"&&this.dispatchContext("all",e,{})}static toContextType(e){return e==="legend"||e==="series"?e:"all"}static check(e,n){return n.type===e}static checkCallback(e,n,i){return e===n}dispatchContext(e,n,i){let{offsetX:r,offsetY:s,sourceEvent:o}=n;this.listeners.dispatch("",Nc({type:e,x:r,y:s,context:i,sourceEvent:o}))}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter(n=>n.id&&!this.hiddenActions.has(n.id)&&["all",e].includes(n.type))}registerDefaultAction(e){e.id&&this.defaultActions.find(({id:n})=>n===e.id)||this.defaultActions.push(e)}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}setActionVisiblity(e,n){n?this.hiddenActions.delete(e):this.hiddenActions.add(e)}isDisabled(e){return this.disabledActions.has(e)}},Sa=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},SC=(t=>(t.Auto="auto",t.Default="default",t.Grab="grab",t.Grabbing="grabbing",t.Move="move",t.NotAllowed="not-allowed",t.Pointer="pointer",t.EWResize="ew-resize",t.NSResize="ns-resize",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t))(SC||{}),wC=class{constructor(t){this.domManager=t,this.stateTracker=new Sa("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}};function b2(t,e){let n=t.screenX-e.screenX,i=t.screenY-e.screenY;return n*n+i*i}function Hw(t,e){return Math.sqrt(b2(t,e))}var x2=1,MC=class extends ai{constructor(t){super(),this.domManager=t,this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){let{touches:e}=t,{finger1:n,finger2:i}=this.pinch;if(this.pinch.status!==0&&e.length===2){if(e[0].identifier===n.identifier&&e[1].identifier===i.identifier)return[e[0],e[1]];if(e[0].identifier===i.identifier&&e[1].identifier===n.identifier)return[e[1],e[0]]}}copyTouchData(t){let e=["identifier","screenX","screenY"];js(e,this.pinch.finger1,t.touches[0]),js(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=Hw(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e,n){let{finger1:i,finger2:r,origin:s}=this.pinch;this.listeners.dispatch(t,Nc({sourceEvent:n,type:t,finger1:i,finger2:r,deltaDistance:e,origin:s}))}onTouchStart(t){this.stopPinchTracking(t);let{pinch:e}=this;t.touches.length===2&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){let e=this.findPinchTouches(t);if(e!==void 0){let[n,i]=e,{pinch:r}=this,s=Hw(n,i),o=s-r.distance;r.status===1?Math.abs(o)>x2&&(r.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0,t)):r.status===2?(r.distance=s,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o,t)):L.error(`unexpected pinch.status: ${r.status}`)}}onTouchEnd(t){this.stopPinchTracking(t)}onTouchCancel(t){this.stopPinchTracking(t)}stopPinchTracking(t){let{pinch:e}=this;e.status===2&&this.dispatchPinchEvent("pinch-end",0,t),this.pinch.status=0}},IC=class extends ai{constructor(){super(...arguments),this.highlightStates=new Sa}updateHighlight(t,e){let{activeHighlight:n}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,n)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:n})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}},CC=class extends ai{constructor(t,e){super(),this.domManager=e,this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.isClicking=!1,this.destroyFns.push(t.addListener("drag-start",n=>this.onClickStart(n),31),t.addListener("click",n=>this.onClickStop(n),31),t.addListener("drag-end",n=>this.onClickStop(n),31),t.addListener("wheel",n=>this.mouseBlur(n)),t.addListener("hover",n=>this.mouseBlur(n)),t.addListener("drag",n=>this.mouseBlur(n)),t.addListener("blur",n=>this.onBlur(n),31),t.addListener("focus",n=>this.onFocus(n),31),t.addListener("keydown",n=>this.onKeyDown(n),31))}destroy(){super.destroy()}onClickStart(t){this.isClicking=!0,this.mouseBlur(t)}onClickStop(t){this.mouseBlur(t),this.isClicking=!1}mouseBlur(t){this.hasBrowserFocus&&(this.isMouseBlurred||(this.dispatch("blur",0,t),this.isMouseBlurred=!0))}onBlur(t){this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.dispatch("blur",0,t)}onFocus(t){let e=this.domManager.getBrowserFocusDelta();if(this.dispatch("browserfocus",e,t),this.hasBrowserFocus=!0,this.isClicking){this.isMouseBlurred=!0;return}this.dispatch("tab",e,t)}onKeyDown(t){if(!this.hasBrowserFocus)return;this.isMouseBlurred=!1;let{code:e,altKey:n,shiftKey:i,metaKey:r,ctrlKey:s}=t.sourceEvent;if(e==="Tab")return i?this.dispatch("tab",-1,t):this.dispatch("tab",1,t);if(!(n||i||r||s)){switch(e){case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,t);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,t);case"Space":case"Enter":return this.dispatch("submit",0,t);case"Escape":return this.dispatch("cancel",0,t);case"Backspace":case"Delete":return this.dispatch("delete",0,t)}switch(t.sourceEvent.key){case"+":return this.dispatch("nav-zoom",1,t);case"-":return this.dispatch("nav-zoom",-1,t)}}}dispatch(t,e,n){Dh(this.listeners,{type:t,delta:e,sourceEvent:n})}},Um=["series"],$w=class extends ns{};function Ww(t,e,n,i,r=16){return t?.addListener(n,s=>{e.getState()&r&&i(s)})??(()=>{})}var D2=class{constructor(t,e,n){this.interactionManager=t,this.keyNavManager=e,this.focusIndicator=n,this.currentTabIndex=0,this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.allRegionsListeners=new $w,this.destroyFns.push(...hv.map(i=>t.addListener(i,this.processPointerEvent.bind(this),31)),this.keyNavManager.addListener("blur",this.onNav.bind(this)),this.keyNavManager.addListener("browserfocus",this.onBrowserFocus.bind(this)),this.keyNavManager.addListener("tab",this.onTab.bind(this)),this.keyNavManager.addListener("nav-vert",this.onNav.bind(this)),this.keyNavManager.addListener("nav-hori",this.onNav.bind(this)),this.keyNavManager.addListener("nav-zoom",this.onNav.bind(this)),this.keyNavManager.addListener("submit",this.onNav.bind(this)),this.keyNavManager.addListener("cancel",this.onNav.bind(this)),this.keyNavManager.addListener("delete",this.onNav.bind(this)))}destroy(){this.destroyFns.forEach(t=>t()),this.currentRegion=void 0;for(let t of this.regions.values())t.listeners.destroy();this.focusIndicator.destroy(),this.regions.clear()}addRegion(t,...e){if(this.regions.has(t))throw new Error(`AG Charts - Region: ${t} already exists`);let n={properties:{name:t,bboxproviders:[...e]},listeners:new $w};return this.regions.set(t,n),this.makeObserver(n)}updateRegion(t,...e){let n=this.regions.get(t);n&&(n.properties.bboxproviders=[...e])}getRegion(t){return this.makeObserver(this.regions.get(t))}listenAll(t,e,n=16){return Ww(this.allRegionsListeners,this.interactionManager,t,e,n)}makeObserver(t){let{interactionManager:e}=this;class n{addListener(r,s,o=16){return Ww(t?.listeners,e,r,s,o)}}return new n}checkPointerHistory(t,e){for(let n of e.pointerHistory){let i=this.pickRegion(n.offsetX,n.offsetY);if(t.properties.name!==i?.properties.name)return!1}return!0}dispatch(t,e){if(t==null)return;let n=Nc(N(M({},e),{region:t.properties.name}));this.allRegionsListeners.dispatch(n.type,n),t.listeners.dispatch(n.type,n)}handleDragging(t){let{currentRegion:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,N(M({},t),{type:"leave"})),!0;break}return!1}processPointerEvent(t){if(this.handleDragging(t))return;let{currentRegion:e}=this,n=this.pickRegion(t.offsetX,t.offsetY);e!==void 0&&n?.properties.name!==e.properties.name&&this.dispatch(e,N(M({},t),{type:"leave"})),n!==void 0&&n.properties.name!==e?.properties.name&&this.dispatch(n,N(M({},t),{type:"enter"})),n!==void 0&&this.checkPointerHistory(n,t)&&this.dispatch(n,t),this.currentRegion=n}pickRegion(t,e){let n=1/0,i;for(let r of this.regions.values())for(let s of r.properties.bboxproviders){let o=s.computeTransformedRegionBBox?.()??s.computeTransformedBBox(),a=o.width*o.height;a<n&&o.containsPoint(t,e)&&(n=a,i=r)}return i}getTabRegion(t){if(t!==void 0&&t>=0&&t<Um.length)return this.regions.get(Um[t])}getNextInteractableTabIndex(t,e){let n=e<0?-1:1,i=t;for(;e!==0;){if(this.getTabRegion(i+n)===void 0)return;e=e-n,i=i+n}return i}validateCurrentTabIndex(){this.getTabRegion(this.currentTabIndex)!==void 0&&(this.currentTabIndex=this.getNextInteractableTabIndex(-1,1)??0)}onBrowserFocus(t){t.delta>0?this.currentTabIndex=-1:t.delta<0&&(this.currentTabIndex=Um.length)}onTab(t){this.validateCurrentTabIndex();let e=this.getNextInteractableTabIndex(this.currentTabIndex,t.delta),n=this.getTabRegion(e),i=this.getTabRegion(this.currentTabIndex);if(e!==void 0&&(this.currentTabIndex=e),i!==void 0&&n?.properties.name!==i.properties.name){let{delta:r,sourceEvent:s}=t,o=Nc({type:"blur",delta:r,sourceEvent:s});this.dispatch(i,o)}n===void 0?this.focusIndicator.updateBounds(void 0):this.dispatch(n,t)}onNav(t){let e=this.getTabRegion(this.currentTabIndex);this.dispatch(e,t)}},EC=["start","center","end"],Hm=["annotations","annotationOptions","ranges","zoom"],pc=(t=>(t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left",t.Floating="floating",t.FloatingTop="floating-top",t.FloatingBottom="floating-bottom",t))(pc||{}),ca=Object.values(pc);function Yw(t){return["floating-top","floating-bottom"].includes(t)}var TC=class extends ai{static isGroup(t,e){return e.group===t}static isChildElement(t,e){for(let n of ca)if(t.isManagedChildDOMElement(e,"canvas-overlay",`toolbar-${n}`))return!0;return!1}pressButton(t,e){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:t,value:e})}cancel(t){this.listeners.dispatch("cancelled",{type:"cancelled",group:t})}toggleButton(t,e,n){let{active:i=!1,enabled:r=!0,visible:s=!0}=n;this.listeners.dispatch("button-toggled",{type:"button-toggled",group:t,value:e,active:i,enabled:r,visible:s})}toggleGroup(t,e,n){this.listeners.dispatch("group-toggled",{type:"group-toggled",caller:t,group:e,visible:n})}changeFloatingAnchor(t,e){this.listeners.dispatch("floating-anchor-changed",{type:"floating-anchor-changed",group:t,anchor:e})}buttonMoved(t,e,n){this.listeners.dispatch("button-moved",{type:"button-moved",group:t,value:e,rect:n})}proxyGroupOptions(t,e,n){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",caller:t,group:e,options:n})}},S2=".ag-chart-tooltip{transition:transform 0.1s ease;max-width:100%;z-index:99999;font:12px Verdana,sans-serif;color:rgb(70,70,70);box-shadow:0 4px 8px rgba(0,0,0,0.08)}.ag-chart-tooltip-wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-chart-tooltip-wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-chart-tooltip-wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-chart-tooltip-wrap-never{white-space:pre;text-overflow:ellipsis}.ag-chart-tooltip-no-interaction{pointer-events:none;user-select:none}.ag-chart-tooltip-no-animation{transition:none!important}.ag-chart-tooltip-hidden{visibility:hidden}.ag-chart-tooltip-title{overflow:hidden;position:relative;padding:8px 14px;border-top-left-radius:2px;border-top-right-radius:2px;color:white;background-color:#888888;z-index:1;text-overflow:inherit}.ag-chart-tooltip-title:only-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.ag-chart-tooltip-content{overflow:hidden;padding:6px 14px;line-height:1.7em;background:white;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border:1px solid rgba(0,0,0,0.15);text-overflow:inherit}.ag-chart-tooltip-arrow::before{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:5px solid #d9d9d9;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}.ag-chart-tooltip-arrow::after{content:'';position:absolute;top:calc(100% - 1px);left:50%;transform:translateX(-50%);border:5px solid white;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}",Ph=class{constructor(t,e){this.domManager=t,this.tooltip=e,this.stateTracker=new Sa,this.suppressState=new Sa(!1),this.appliedState=null,e.setup(t),t.addListener("hidden",()=>this.tooltip.toggle(!1)),t.addStyles("tooltip",S2)}updateTooltip(t,e,n){this.tooltip.enabled&&(n??(n=this.stateTracker.get(t)?.content),this.stateTracker.set(t,{content:n,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}getTooltipMeta(t){return this.stateTracker.get(t)?.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){let t=this.stateTracker.stateId(),e=t?this.stateTracker.get(t):null;if(this.suppressState.stateValue()||e?.meta==null||e?.content==null){this.appliedState=null,this.tooltip.toggle(!1);return}let n=this.domManager.getBoundingClientRect();if(this.appliedState?.content===e?.content){let i=this.tooltip.isVisible();this.tooltip.show(n,e?.meta,null,i)}else this.tooltip.show(n,e?.meta,e?.content);this.appliedState=e}static makeTooltipMeta(t,e){let{offsetX:n,offsetY:i}=t,{tooltip:r}=e.series.properties,s={offsetX:n,offsetY:i,enableInteraction:r.interaction?.enabled??!1,lastPointerEvent:{type:t.type,offsetX:n,offsetY:i},showArrow:r.showArrow,position:{type:r.position.type,xOffset:r.position.xOffset,yOffset:r.position.yOffset}},o=e.yBar?.upperPoint??e.midPoint??e.series.datumMidPoint?.(e);if(r.position.type==="node"&&o){let{x:a,y:l}=o,c=e.series.contentGroup.inverseTransformPoint(a,l);return N(M({},s),{offsetX:Math.round(c.x),offsetY:Math.round(c.y)})}return s}},AC=class extends ns{constructor(){super(...arguments),this.layoutComplete="layout-complete",this.debug=_e.create(!0,"layout")}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((n,i)=>{try{let r=i.handler(n);return this.debug("[LayoutService] Context updated to: ",M({},r),i),r}catch(r){return L.errorOnce(r),n}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}},w2=/\$\{(\w+)\}(?:\[(\w+)\])?/gi,$m={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent"}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},M2=({defaultValue:t,variables:e})=>t?.replaceAll(w2,(n,i,r)=>{let s=e[i],o=r!=null?$m[r]:void 0;return r!=null&&o==null&&L.warnOnce(`Format style [${r}] is not supported`),o!=null?o.format(s):typeof s=="number"?$m.number.format(s):s instanceof Date?$m.datetime.format(s):s}),I2=class extends ns{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){let{localeText:n=C1,getLocaleText:i}=this,r=n[t];return i?.({key:t,defaultValue:r,variables:e})??M2({key:t,defaultValue:r,variables:e})??t}},C2=class{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:n,type:i}){var r;e&&((r=this.groups)[i]??(r[i]={}),this.groups[i][t]={grouping:e,visible:n})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:n}){if(!e)return{visibleGroupCount:n?1:0,visibleSameStackCount:n?1:0,index:0};let i=new Set,r=new Set;for(let o of Object.values(this.groups[t]??{}))o.visible&&(i.add(o.grouping.groupIndex),o.grouping.groupIndex===e.groupIndex&&r.add(o.grouping.stackIndex));let s=Array.from(i);return s.sort((o,a)=>o-a),{visibleGroupCount:s.length,visibleSameStackCount:r.size,index:s.indexOf(e.groupIndex)}}},gc=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(gc||{}),NC=class extends ns{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t?.minRect,minVisibleRect:t?.minVisibleRect})}},E2=class{constructor(t,e){let{scene:n,root:i,syncManager:r,container:s,updateCallback:o,updateMutex:a,overrideDevicePixelRatio:l}=e;this.chartService=t,this.syncManager=r,this.zoomManager=t.zoomManager,this.domManager=new pC(s),n?.setContainer(this.domManager),this.scene=n??new fC({pixelRatio:l,domManager:this.domManager}),this.scene.setRoot(i),this.axisManager=new i2(i),this.localeManager=new I2,this.annotationManager=new n2(t.annotationRoot),this.chartEventManager=new bC,this.cursorManager=new wC(this.domManager),this.highlightManager=new IC,this.interactionManager=new HI(t.keyboard,this.domManager),this.keyNavManager=new CC(this.interactionManager,this.domManager),this.focusIndicator=new m2(this.domManager),this.regionManager=new D2(this.interactionManager,this.keyNavManager,this.focusIndicator),this.contextMenuRegistry=new xC(this.regionManager),this.toolbarManager=new TC,this.gestureDetector=new MC(this.domManager),this.layoutService=new AC,this.ariaAnnouncementService=new v2(this.localeManager,this.domManager,this.layoutService),this.updateService=new NC(o),this.proxyInteractionService=new y2(this.updateService,this.localeManager,this.domManager,this.focusIndicator),this.seriesStateManager=new C2,this.stateManager=new ZF,this.callbackCache=new t2,this.animationManager=new yC(this.interactionManager,a),this.animationManager.skip(),this.animationManager.play(),this.dataService=new mf(this.animationManager),this.tooltipManager=new Ph(this.domManager,t.tooltip)}destroy(){this.tooltipManager.destroy(),this.contextMenuRegistry.destroy(),this.regionManager.destroy(),this.proxyInteractionService.destroy(),this.focusIndicator.destroy(),this.keyNavManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.ariaAnnouncementService.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.callbackCache.invalidateCache(),this.animationManager.reset(),this.syncManager.destroy(),this.domManager.destroy(),this.axisManager.destroy()}},kC=class extends le{constructor(){super(...arguments),this.range="tooltip"}};g([b(je(["tooltip","node"],"a range"))],kC.prototype,"range",2);var Kw=class RC{constructor(){this.domain=new Set}static is(e){return e instanceof RC}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},ra=class LC{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof LC}static extendDomain(e,n=[1/0,-1/0]){for(let i of e)typeof i=="number"&&(n[0]>i&&(n[0]=i),n[1]<i&&(n[1]=i));return n}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}};function T2(t){return t.map(e=>Fn(e)?JSON.stringify(e):e).join("-")}function A2(t){return Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(t*1e4)/1e4}function N2(t){if(t==null)return[];let[e,n]=t.map(Number);return e===0&&n===0?[0,1]:e===1/0&&n===-1/0?[]:(e===1/0?e=0:n===-1/0&&(n=0),be(e)&&be(n)?[e,n]:[])}function en(t,e){let n=N2(t);if(n.length===0)return n;let[i,r]=n;if(i===r){let[s,o]=e?.calculatePadding(i,r)??[1,1];i-=s,r+=o}return[i,r]}function vv(t,e){return e?.get(t.id)??0}var _s=Symbol("invalid");function OC(t){let e=[],n=0,i,r=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;i=r.exec(t);){if(i.index!==n)return;n=i.index+i[0].length;let s=i[1].trim();if(s.startsWith("."))e.push(s.slice(1).trim());else if(s.startsWith("[")){let o=s.slice(1,-1).trim();o.startsWith("'")?e.push(o.slice(1,-1).replace(new RegExp("(?<!\\\\)\\\\'","g"),"'")):o.startsWith('"')?e.push(o.slice(1,-1).replace(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):e.push(o)}else e.push(s)}if(n===t.length)return e}function k2(t){return e=>{let n=e;for(let i of t)n=n[i];return n}}var _C=class{constructor(t,e="standalone"){this.opts=t,this.mode=e,this.debug=_e.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let n=!0;for(let r of t.props){if(r.type==="key"&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&n&&(n=!1)}let i=({matchGroupIds:r=[]})=>{for(let s of r)if(this.values.every(o=>o.groupId!==s))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${s}).`)};for(let r of t.props)switch(r.type){case"key":this.keys.push(N(M({},r),{index:this.keys.length,missing:new Map}));break;case"value":if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push(N(M({},r),{index:this.values.length,missing:new Map}));break;case"aggregate":i(r),this.aggregates.push(N(M({},r),{index:this.aggregates.length}));break;case"group-value-processor":i(r),this.groupProcessors.push(N(M({},r),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(N(M({},r),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(N(M({},r),{index:this.reducers.length}));break;case"processor":this.processors.push(N(M({},r),{index:this.processors.length}));break}}resolveProcessedDataDefById(t,e){let n=this.scopeCache.get(t.id)?.get(e);if(!n)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:n.index,def:n}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map(n=>[n,this.resolveProcessedDataDefById(t,n)])}resolveProcessedDataDefsValues(t,{keys:e,values:n}){let i={};for(let[r,{index:s,def:o}]of t){let a=o.type==="key"?e:n;i[r]=a[s]}return i}getDomain(t,e,n="value",i){return this.getDomainsByType(n,i)?.[this.resolveProcessedDataIndexById(t,e)]??[]}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){let{opts:{groupByKeys:n,groupByFn:i},aggregates:r,groupProcessors:s,reducers:o,processors:a,propertyProcessors:l}=this,c=performance.now();if(n&&this.keys.length===0)return;let u=this.extractData(t,e);if(n?u=this.groupData(u):i&&(u=this.groupData(u,i(u))),s.length>0&&this.postProcessGroups(u),r.length>0&&this.aggregateData(u),l.length>0&&this.postProcessProperties(u),o.length>0&&this.reduceData(u),a.length>0&&this.postProcessData(u),t.length>0){for(let h of Jd(this.keys,this.values))for(let[f,p]of h.missing)if(p>=t.length){let m=f==null?"":` for ${f}`;L.warnOnce(`the key '${h.property}' was not found in any data element${m}.`)}}let d=performance.now();u.time=d-c,this.debug.check()&&R2(u),this.scopeCache.clear();for(let h of Jd(this.keys,this.values,this.aggregates))if(h.idsMap)for(let[f,p]of h.idsMap)for(let m of p)if(!this.scopeCache.has(f))this.scopeCache.set(f,new Map([[m,h]]));else{if(this.scopeCache.get(f)?.has(m))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(f).set(m,h)}return u}valueGroupIdxLookup({matchGroupIds:t}){let e=[];for(let[n,i]of this.values.entries())(!t||i.groupId&&t.includes(i.groupId))&&e.push(n);return e}valueIdxLookup(t,e){let n=t==null||t.length===0,i=typeof e=="string"?e:e.id,r=o=>{if(o.idsMap){for(let[a,l]of o.idsMap)if(t?.includes(a)&&l.has(i))return!0}return!1},s=this.values.findIndex(o=>(o.scopes==null||n&&!o.scopes.length||o.scopes.some(l=>t?.includes(l)))&&(o.property===i||o.id===i||r(o)));if(s===-1)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return s}extractData(t,e){let{dataDomain:n,processValue:i,scopes:r,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),o=new Map(e?.map(f=>[f.id,f])),{keys:a,values:l}=this,c=new Array(t.length),u=0,d=0;for(let[f,p]of t.entries()){let m={},y=r.size>0?new Set(r):void 0,v=new Array(a.length),x=0,D;for(let C of a){if(D=i(C,p,D),D===_s)break;v&&(v[x++]=D)}if(D===_s)continue;let S=l.length>0?new Array(l.length):void 0,w;for(let[C,T]of l.entries()){for(let E of T.scopes??r){let A=o.get(E),R=A?.data[f]??p;if(w=i(T,R,w,E),!(w===_s||!S)){if(A!=null&&T.includeProperty!==!1){let _=T.includeProperty&&T.id!=null?T.id:T.property;m[E]??(m[E]={}),m[E][_]=w}S[C]=w}}if(w===_s){if(s)break;for(let E of T.scopes??r)y?.delete(E);if(y?.size===0)break}}if(w===_s&&s||y?.size===0)continue;let I={datum:M(M({},p),m),keys:v,values:S};!s&&y&&y.size<r.size&&(d++,I.validScopes=new Set(y)),c[u++]=I}c.length=u;let h=f=>{let p=n.get(f),m=p.getDomain();return ra.is(p)&&m[0]>m[1]?[]:m};return{type:"ungrouped",input:{count:t.length},data:c,domain:{keys:a.map(h),values:l.map(h)},defs:{allScopesHaveSameDefs:s,keys:a,values:l},partialValidDataCount:d,time:0}}groupData(t,e){let n=new Map;for(let o of t.data){let{keys:a,values:l,datum:c,validScopes:u}=o,d=e?.(o)??a,h=T2(d);if(n.has(h)){let f=n.get(h);if(f.values.push(l),f.datum.push(c),u!=null&&f.validScopes!=null)for(let p of f.validScopes)u.has(p)||f.validScopes.delete(p)}else n.set(h,{keys:d,values:[l],datum:[c],validScopes:u})}let i=new Array(n.size),r=new Array(n.size),s=0;for(let{keys:o,values:a,datum:l,validScopes:c}of n.values())c?.size!==0&&(r[s]=o,i[s++]={keys:o,values:a,datum:l,validScopes:c});return N(M({},t),{type:"grouped",data:i,domain:N(M({},t.domain),{groups:r})})}aggregateData(t){let e=t.type==="ungrouped";t.domain.aggValues=[];for(let[n,i]of this.aggregates.entries()){let r=this.valueGroupIdxLookup(i),s=[1/0,-1/0];for(let o of t.data){if(o.aggValues??(o.aggValues=new Array(this.aggregates.length)),o.validScopes)continue;let a=e?[o.values]:o.values,l=i.groupAggregateFunction?.()??[1/0,-1/0];for(let u of a){let d=r.map(f=>u[f]),h=i.aggregateFunction(d,o.keys);h&&(l=i.groupAggregateFunction?.(h,l)??ra.extendDomain(h,l))}let c=(i.finalFunction?.(l)??l).map(u=>A2(u));o.aggValues[n]=c,ra.extendDomain(c,s)}t.domain.aggValues.push(s)}}postProcessGroups(t){let{groupProcessors:e}=this,n=new Set,i=new Map,r=new Map,s=new Map;for(let a of e){let l=this.valueGroupIdxLookup(a);r.set(a,l),s.set(a,a.adjust());for(let c of l){let d=this.values[c].valueType==="category";n.add(c),i.set(c,d?new Kw:new ra)}}let o=a=>{for(let l of n)i.get(l)?.extend(a[l])};for(let a of t.data){for(let l of e){if(a.validScopes)continue;let c=r.get(l)??[],u=s.get(l)?.();if(u)if(t.type==="grouped")for(let d of a.values)d&&u(d,c);else a.values&&u(a.values,c)}if(t.type==="grouped")for(let l of a.values)o(l);else o(a.values)}for(let[a,l]of i)t.domain.values[a]=l.getDomain()}postProcessProperties(t){for(let{adjust:e,property:n,scopes:i}of this.propertyProcessors)e()(t,this.valueIdxLookup(i,n))}reduceData(t){t.reduced??(t.reduced={});for(let e of this.reducers){let n=e.reducer(),i=e.initialValue;for(let r of t.data)(!r.validScopes||e.scopes?.some(s=>r.validScopes?.has(s)))&&(i=n(i,r));t.reduced[e.property]=i}}postProcessData(t){t.reduced??(t.reduced={});for(let e of this.processors)t.reduced[e.property]=e.calculate(t)}initDataDomainProcessor(){let{keys:t,values:e}=this,n=new Set;for(let c of e)if(c.scopes)for(let u of c.scopes)n.add(u);let i=new Map,r=new Map,s=!0,o=()=>{for(let c of Jd(t,e))c.valueType==="category"?i.set(c,new Kw):(i.set(c,new ra),s&&(s=(c.scopes??[]).length===n.size))};o();let a=this.buildAccessors(Jd(t,e));return{dataDomain:i,processValue:(c,u,d,h)=>{let f,p;if(a.has(c.property)){try{p=a.get(c.property)(u)}catch{}f=p!=null}else f=c.property in u,p=f?u[c.property]:c.missingValue;c.forceValue!=null&&(p=f&&Ia(p)?-1*c.forceValue:c.forceValue,f=!0);let m="missingValue"in c;if(!f&&!m){let y=c.missing.get(h)??0;c.missing.set(h,y+1)}if(i.has(c)||o(),f&&!(c.validation?.(p,u)??!0))if("invalidValue"in c)p=c.invalidValue;else return this.mode!=="integrated"&&L.warnOnce(`invalid value of type [${typeof p}] for [${c.scopes} / ${c.id}] ignored:`,`[${p}]`),_s;return c.processor&&(r.has(c)||r.set(c,c.processor()),p=r.get(c)?.(p,d===_s?void 0:d)),i.get(c)?.extend(p),p},initDataDomain:o,scopes:n,allScopesHaveSameDefs:s}}buildAccessors(t){let e=new Map;if(this.mode==="integrated")return e;for(let n of t){if(!(n.property.includes(".")||n.property.includes("[")))continue;let r=OC(n.property);if(r==null){L.warnOnce("Invalid property path [%s]",n.property);continue}let s=k2(r);e.set(n.property,s)}return e}};function R2(t){let e=(n,i)=>{i.length>0&&(L.log(`DataModel.processData() - ${n}`),L.table(i))};if(L.log("DataModel.processData() - processedData",t),e("Key Domains",t.domain.keys),e("Group Domains",t.domain.groups??[]),e("Value Domains",t.domain.values),e("Aggregate Domains",t.domain.aggValues??[]),t.type==="grouped"){let n=t.data.reduce((i,r)=>{let s=r.keys??[],o=r.aggValues??[],a=r.keys.map(()=>{}),l=o?.map(()=>{});return i.push(...r.values.map((c,u)=>[...u===0?s:a,...c??[],...u==0?o:l])),i},[]);e("Values",n)}else{let n=t.data.reduce((i,r)=>{let s=r.aggValues??[];return i.push([...r.keys,...r.values,...s]),i},[]);e("Values",n)}}var L2=(()=>{let t=class rr{constructor(n){this.mode=n,this.debug=_e.create(!0,"data-model"),this.requested=[],this.status="setup"}request(n,i,r){return k(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,o)=>{this.requested.push({id:n,opts:r,data:i,resolve:s,reject:o})})})}execute(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let n=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",n);let i=this.mergeRequested(n);this.debug("DataController.execute() - merged",i),this.debug.check()&&(ji().processedData=[]);let r=this.requested.map(({id:o})=>o),s=this.hasMultipleDataSources(n);for(let{opts:o,data:a,resolves:l,rejects:c,ids:u}of i)try{let d=new _C(o,this.mode),h=d.processData(a,n);this.debug.check()&&ji("processedData").push(h),h?.partialValidDataCount===0?l.forEach((f,p)=>f({dataModel:d,processedData:this.processScopedData(u[p],h,r,s)})):h?this.splitResult(d,h,u,l):c.forEach(f=>f(new Error("AG Charts - no processed data generated")))}catch(d){c.forEach(h=>h(d))}}hasMultipleDataSources(n){if(n.length){let[{data:i},...r]=n;return r.some(s=>i!==s.data)}return!1}processScopedData(n,i,r,s){let o=l=>{if(Array.isArray(l))return l.map(o);let c=s?M(M({},l),l[n]):l;for(let u of r)delete c[u];return c},a=l=>Array.isArray(l)?l.map(a):l?.[n]??l;return N(M({},i),{data:i.data.map(l=>N(M({},l),{datum:o(l.datum),values:s?l.values?.map(a):l.values}))})}validateRequests(n){let i=[];for(let[r,s]of n.entries())r>0&&s.data.length!==n[0].data.length&&s.opts.groupByData===!1?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(s);return i}mergeRequested(n){let i=[];for(let r of n){let s=i.find(rr.groupMatch(r));s?s.push(r):i.push([r])}return i.map(rr.mergeRequests)}splitResult(n,i,r,s){for(let o=0;o<r.length;o++){let a=r[o],l=s[o];l({dataModel:n,processedData:N(M({},i),{data:i.data.filter(({validScopes:c})=>c?.has(a)??!0)})})}}static groupMatch({data:n,opts:i}){function r(s){return s.filter(o=>o.type==="key").map(o=>o.property).join(";")}return([s])=>(i.groupByData===!1||s.data===n)&&s.opts.groupByKeys===i.groupByKeys&&s.opts.groupByFn===i.groupByFn&&r(s.opts.props)===r(i.props)}static mergeRequests(n){return n.reduce((i,u)=>{var{id:r,data:s,resolve:o,reject:a,opts:d}=u,h=d,{props:l}=h,c=Ve(h,["props"]);i.ids.push(r),i.rejects.push(a),i.resolves.push(o),i.data??(i.data=s),i.opts??(i.opts=N(M({},c),{props:[]}));for(let f of l){let p=N(M({},f),{scopes:[r]});rr.createIdsMap(r,p);let m=i.opts.props.find(y=>y.type===p.type&&rr.deepEqual(y,p));if(!m){i.opts.props.push(p);continue}m.scopes??(m.scopes=[]),m.scopes.push(...p.scopes??[]),(m.type==="key"||m.type==="value")&&p.idsMap?.size&&rr.mergeIdsMap(p.idsMap,m.idsMap)}return i},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(n,i){for(let[r,s]of n)if(i.has(r))for(let o of s)i.get(r).add(o);else i.set(r,new Set(s))}static createIdsMap(n,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(n)?i.idsMap.get(n).add(i.id):i.idsMap.set(n,new Set([i.id])))}static deepEqual(n,i){if(n===i)return!0;if(n&&i&&typeof n=="object"&&typeof i=="object"){if(n.constructor!==i.constructor)return!1;let r,s;if(Array.isArray(n)){if(s=n.length,s!==i.length)return!1;for(r=s-1;r>=0;r--)if(!rr.deepEqual(n[r],i[r]))return!1;return!0}let o=Object.keys(n);if(s=o.length,s!==Object.keys(i).length)return!1;for(r=s-1;r>=0;r--){let a=o[r];if(!rr.skipKeys.has(a)&&(!Object.hasOwn(i,a)||!rr.deepEqual(n[a],i[a])))return!1}return!0}return!1}};return t.skipKeys=new Set(["id","idsMap","type","scopes"]),t})(),PC=L2,O2=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){let n=this.axesMap.get(t);if(n)return new n(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(t=>!this.hidden.has(t))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},qr=new O2,Fa=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function _2(t){return Fa.some(e=>e.type==="series"&&e.identifier===t)}function Zc(t){return Fa.find(e=>e.type==="series"&&e.identifier===t)?.chartTypes}function P2(t){return Zc(t)?.find(n=>n==="cartesian")==="cartesian"}function F2(t){return Zc(t)?.find(n=>n==="polar")==="polar"}function B2(t){return Zc(t)?.find(n=>n==="hierarchy")==="hierarchy"}function j2(t){return Zc(t)?.find(n=>n==="topology")==="topology"}function V2(t){return Zc(t)?.find(n=>n==="flow-proportion")==="flow-proportion"}function z2(t){return t.packageType==="enterprise"}function G2(t){if(!z2(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");let e=Fa.find(n=>n.type===t.type&&n.optionsKey===t.optionsKey&&n.identifier===t.identifier&&t.chartTypes.every(i=>n.chartTypes.includes(i)));return e&&(e.useCount??(e.useCount=0),e.useCount++),e!=null}function U2(){return Fa.filter(({useCount:t})=>t==null||t===0)}var H2=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,instanceConstructor:n,themeTemplate:i}){this.legendMap.set(t,{optionsKey:e,instanceConstructor:n}),this.themeTemplates.set(e,i)}create(t,e){let n=this.legendMap.get(t)?.instanceConstructor;if(n)return new n(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,n])=>(t[e]=n.optionsKey,t),{})}},bv=new H2,fa={isEnterprise:!1},FC=class extends Map{get(t){return super.get(t)??"unknown"}isCartesian(t){return this.get(t)==="cartesian"}isPolar(t){return this.get(t)==="polar"}isHierarchy(t){return this.get(t)==="hierarchy"}isTopology(t){return this.get(t)==="topology"}isFlowProportion(t){return this.get(t)==="flow-proportion"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}get flowProportionTypes(){return this.seriesTypes.filter(t=>this.isFlowProportion(t))}},$2=class extends Map{set(t,e){return super.set(t,ue(e,this.get(t)))}},yt=new FC,BC=new FC,Ey=new $2,W2=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],instanceConstructor:n,tooltipDefaults:i,defaultAxes:r,themeTemplate:s,enterpriseThemeTemplate:o,paletteFactory:a,solo:l,stackable:c,groupable:u,stackedByDefault:d,swapDefaultAxesCondition:h,hidden:f}){this.setThemeTemplate(t,s,o),this.seriesMap.set(t,{instanceConstructor:n,tooltipDefaults:i,defaultAxes:r,paletteFactory:a,solo:l,stackable:c,groupable:u,stackedByDefault:d,swapDefaultAxesCondition:h}),yt.set(t,e),f||BC.set(t,e)}create(t,e){let n=this.seriesMap.get(t)?.instanceConstructor;if(n)return new n(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t){let e=this.seriesMap.get(t)?.defaultAxes;return e?{axes:Rt(e)}:null}setThemeTemplate(t,e,n={}){let i=this.themeTemplates.get(t);this.themeTemplates.set(t,{community:ue(e,i?.community),enterprise:ue(n,e,i?.community)})}getThemeTemplate(t){let e=this.themeTemplates.get(t);return fa.isEnterprise?e?.enterprise:e?.community}getPaletteFactory(t){return this.seriesMap.get(t)?.paletteFactory}getTooltipDefauls(t){return this.seriesMap.get(t)?.tooltipDefaults}isSolo(t){return this.seriesMap.get(t)?.solo??!1}isGroupable(t){return this.seriesMap.get(t)?.groupable??!1}isStackable(t){return this.seriesMap.get(t)?.stackable??!1}isStackedByDefault(t){return this.seriesMap.get(t)?.stackedByDefault??!1}isDefaultAxisSwapNeeded(t){let e;for(let n of t.series??[]){let{type:i="line"}=n,r=this.seriesMap.get(i)?.swapDefaultAxesCondition?.(n);if(r!=null){if(e!=null&&e!=r)throw new Error("AG Charts - The provided series have incompatible directions");e=r}}return e}},Qt=new W2,xv=class Bs extends ai{constructor(e){super(),this.chart=e}subscribe(e=Bs.DEFAULT_GROUP){let n=this.get(e);return n||(n=new Set,Bs.chartsGroups.set(e,n)),n.add(this.chart),this}unsubscribe(e=Bs.DEFAULT_GROUP){return this.get(e)?.delete(this.chart),this}getChart(){return this.chart}getGroup(e=Bs.DEFAULT_GROUP){let n=this.get(e);return n?Array.from(n):[]}getGroupSiblings(e=Bs.DEFAULT_GROUP){return this.getGroup(e).filter(n=>n!==this.chart)}get(e){return Bs.chartsGroups.get(e)}};xv.chartsGroups=new Map;xv.DEFAULT_GROUP=Symbol("sync-group-default");var Y2=xv,jC=class extends ai{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new Sa(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(t){let e=new Map(t.map(n=>[n.id,this.axisZoomManagers.get(n.id)]));this.axisZoomManagers.clear();for(let n of t)this.axisZoomManagers.set(n.id,e.get(n.id)??new K2(n));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e,n=!0,i){if(i&&this.rejectCallbacks.set(t,i),this.axisZoomManagers.size===0){let r=this.state.stateId();r==="initial"||r===t||n?(this.state.set(t,e),r!==t&&this.rejectCallbacks.get(r)?.(t)):i?.(r);return}this.state.set(t,e),this.axisZoomManagers.forEach(r=>{r.updateZoom(t,e?.[r.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,n){this.axisZoomManagers.get(e)?.updateZoom(t,n),this.applyChanges(t)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(n=>{n.getDirection()==="x"?t??(t=n.getZoom()):n.getDirection()==="y"&&(e??(e=n.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){return this.axisZoomManagers.get(t)?.getZoom()??{min:0,max:1}}getAxisZooms(){let t={};for(let[e,n]of this.axisZoomManagers.entries())t[e]={direction:n.getDirection(),zoom:n.getZoom()};return t}applyChanges(t){if(!Array.from(this.axisZoomManagers.values(),i=>i.applyChanges()).some(Boolean))return;let n={};for(let[i,r]of this.axisZoomManagers.entries())n[i]=r.getZoom();this.listeners.dispatch("zoom-change",N(M({type:"zoom-change"},this.getZoom()),{axes:n,callerId:t}))}},K2=class{constructor(t){this.axis=t;let[e=0,n=1]=t.visibleRange;this.state=new Sa({min:e,max:n}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return Rt(this.state.stateValue())}applyChanges(){let t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}},Dv=class extends le{constructor(){super(...arguments),this.enabled=!1}};g([b(H)],Dv.prototype,"enabled",2);g([b(Pe)],Dv.prototype,"tabIndex",2);function q2(t){return t instanceof V?t.computeCenter():t?.computeTransformedBBox()?.computeCenter()}function VC(t,e){let{bounds:n,showFocusBox:i}=e;i&&t?.updateBounds(n);let{x:r,y:s}=q2(n)??{};if(r!==void 0&&s!==void 0)return{type:"keyboard",offsetX:r,offsetY:s}}var zC=["top","right","bottom","left"];function Z2(t){return typeof t=="string"&&zC.includes(t)}function X2(t){let e=[],n=[],i=[...zC];for(let r of t)r instanceof _a&&(Z2(r.position)?n.push(r.position):e.push(r));for(let r of e){let s;do s=i.pop();while(s&&n.includes(s));if(s==null)break;r.position=s}}var Q2=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"];function J2(t,e,n){let i=(u,d)=>{let h=[u];for(let f of Q2)f in d&&d[f]!=null&&h.push(`${f}=${d[f]}`);return h.join(";")},r=new Map,s=0;for(let u of t){let d=i(u.type,u.properties);r.has(d)||r.set(d,[]),r.get(d)?.push([u,s++])}let o=new Map;for(let u of e){let d=i(u.type,u);o.has(d)||o.set(d,[]),o.get(d)?.push(u)}if(![...r.keys()].some(u=>o.has(u)))return{status:"no-overlap",oldKeys:r.keys(),newKeys:o.keys()};let l=[],c=-1;for(let[u,d]of o.entries())for(let h of d){c++;let f=r.get(u);if(f==null||f.length<1){l.push({opts:h,idx:c,status:"add"}),r.delete(u);continue}let[p,m]=f.shift(),y=n?.[m]??{},v=mn(y,h??{}),{groupIndex:x,stackIndex:D}=v?.seriesGrouping??{};x!=null||D!=null?l.push({opts:h,series:p,diff:v,idx:m,status:"series-grouping"}):v?l.push({opts:h,series:p,diff:v,idx:m,status:"update"}):l.push({opts:h,series:p,idx:m,status:"no-op"}),f.length===0&&r.delete(u)}for(let u of r.values())for(let[d,h]of u)l.push({series:d,idx:h,status:"remove"});return{status:"overlap",changes:l}}function eo(t){return t.series?.[0]?.type??"line"}function pa(t){let e=eo(t);return e==null?!0:e==="cartesian"?(L.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):yt.isCartesian(e)||P2(e)}function yf(t){let e=eo(t);return e==null?!1:e==="polar"?(L.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):yt.isPolar(e)||F2(e)}function Sv(t){let e=eo(t);return e==null?!1:e==="hierarchy"?(L.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):yt.isHierarchy(e)||B2(e)}function wv(t){let e=eo(t);return e==null?!1:e==="topology"?(L.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):yt.isTopology(e)||j2(e)}function Mv(t){let e=eo(t);return e==null?!1:e==="flow-proportion"?(L.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):yt.isFlowProportion(e)||V2(e)}function eB(t){let e=eo(t);return yf(t)&&e!=="pie"&&e!=="donut"}function tB(t){return t==null?!1:yt.has(t)}function nB(t){return t==null?!1:qr.has(t)}var iB=class extends uv{applyOptions(t){for(let e of this.moduleMap.values())e.module.optionsKey in t&&Fi(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(let{module:t,moduleInstance:e}of this.moduleMap.values())t.type==="legend"&&(yield{legendType:t.identifier,legend:e})}},Ty="ag-chart-overlay",qw="ag-chart-dark-overlay",mc=class extends le{constructor(t,e){super(),this.className=t,this.defaultMessageId=e}getText(t){return t.t(this.text??this.defaultMessageId)}getElement(t,e,n){if(this.content?.remove(),this.focusBox=n,this.renderer){let i=this.renderer();this.content=Lt("div"),i instanceof HTMLElement?this.content.replaceChildren(i):this.content.innerHTML=i}else{let i=Lt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});i.innerText=this.getText(e),this.content=i,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(r){i.style.opacity=String(r)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(t=()=>this.content?.remove(),e){if(this.content){if(e){let{content:n}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(i){n.style.opacity=String(i)},onStop(){t?.()}})}else t?.();this.content=void 0,this.focusBox=void 0}}};g([b(P,{optional:!0})],mc.prototype,"text",2);g([b(tn,{optional:!0})],mc.prototype,"renderer",2);var Xc=class extends le{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new mc("ag-chart-loading-overlay","overlayLoadingData"),this.noData=new mc("ag-chart-no-data-overlay","overlayNoData"),this.noVisibleSeries=new mc("ag-chart-no-visible-series","overlayNoVisibleSeries")}getFocusInfo(t){for(let e of[this.loading,this.noData,this.noVisibleSeries])if(e.focusBox!==void 0)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};g([b(H)],Xc.prototype,"darkTheme",2);g([b(z)],Xc.prototype,"loading",2);g([b(z)],Xc.prototype,"noData",2);g([b(z)],Xc.prototype,"noVisibleSeries",2);function rB(t,e){let{animationDuration:n}=Ic.add,i=n*e,r=Lt("div",`${Ty}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i}ms linear 50ms both`}),s=Lt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Lt("p",{marginTop:"1em"});o.innerText=t;let a=Lt("div",`${Ty}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Lt("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),r.replaceChildren(l,s,o,a),r}function vf(t,e=[0,0]){for(let n of t)typeof n=="number"&&(n<0&&(e[0]+=n),n>0&&(e[1]+=n));return e}function sB(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:i=>vf(i)}}function GC(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:n=>vf(n),groupAggregateFunction:(n,i=[0,0])=>(i[0]+=n?.[0]??0,i[1]+=n?.[1]??0,i)}}function UC(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:i=>ra.extendDomain(i)}}function Ay(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,n=[0,0])=>(n[0]+=e?.[0]??0,n[1]+=e?.[1]??0,n)}}function HC(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:i=>vf(i),groupAggregateFunction:(i,r=[0,0,-1])=>(r[0]+=i?.[0]??0,r[1]+=i?.[1]??0,r[2]++,r),finalFunction:(i=[0,0,0])=>{let r=i[0]+i[1];return r>=0?[0,r/i[2]]:[r/i[2],0]}}}function Ny(t,e,n){let i={id:t,matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:(r,s=[])=>{let o=s[1]-s[0];return e.aggregateFunction(r).map(a=>a/o)}};return e.groupAggregateFunction&&(i.groupAggregateFunction=e.groupAggregateFunction),i}function $C(t){return()=>{let e=0;return n=>be(n)?(e+=t?Math.max(0,n):n,e):n}}function WC(){return()=>{let t=0;return e=>{if(!be(e))return e;let n=t;return t+=e,n}}}var YC={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,n)=>{let i=n.keys[0],r=Math.abs(i-t);return t=i,!isNaN(r)&&r>0&&r<e?r:e}}},KC={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,n)=>{let i=n.keys[0],r=Math.abs(i-t);return t=i,!isNaN(r)&&r>0&&r>e?r:e}}},qC={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t?.slice().sort((e,n)=>{for(let i=0;i<e.length;i++){let r=e[i]-n[i];if(r!==0)return r}return 0})};function oB({normaliseTo:t,mode:e}){let n=(i,r)=>{let s=i*t/r;return s>=0?Math.min(t,s):Math.max(-t,s)};return()=>()=>(i,r)=>{let s=[0,0];for(let a of r){let l=i[a],c=l<0?0:1;e==="sum"?s[c]+=l:c===0?s[c]=Math.min(s[c],l):s[c]=Math.max(s[c],l)}let o=Math.max(Math.abs(s[0]),s[1]);for(let a of r)i[a]=n(i[a],o)}}function Rc(t,e,n="sum"){return{type:"group-value-processor",matchGroupIds:t,adjust:Ac({normaliseTo:e,mode:n},oB)}}function aB({normaliseTo:t,zeroDomain:e,rangeMin:n,rangeMax:i}){let r=t[1]-t[0],s=(o,a,l)=>{let c=t[0]+(o-a)/l*r;return l===0?e:c>=t[1]?t[1]:c<t[0]?t[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];n!=null&&(l=n),i!=null&&(c=i);let u=c-l;o.domain.values[a]=[t[0],t[1]];for(let d of o.data){let h=d.values;o.type==="ungrouped"&&(h=[h]);for(let f of h)f[a]=s(f[a],l,u)}}}function Lc(t,e,n,i,r){return{type:"property-value-processor",property:t,adjust:Ac({normaliseTo:e,rangeMin:i,rangeMax:r,zeroDomain:n},aB)}}function Ba(t){return{type:"processor",property:"animationValidation",calculate(e){let{keys:n,values:i}=e.defs,{input:r,data:s}=e,o=!0,a=!0,l=[];for(let u=0;u<i.length;u++)t?.includes(i[u].id)&&l.push([u,i[u]]);let c=(u,d,h)=>{if(d.valueType==="category"){let p=e.domain[h][u];o&&(o=p.length===r.count);return}let f=s[0]?.[h][u];for(let p=1;(o||a)&&p<s.length;p++){let m=s[p][h][u];a&&(a=f<=m),o&&(o=f!==m),f=m}};for(let u=0;(o||a)&&u<n.length;u++)c(u,n[u],"keys");for(let u=0;(o||a)&&u<l.length;u++){let[d,h]=l[u];c(d,h,"values")}return{uniqueKeys:o,orderedKeys:a}}}}function lB({mode:t,separateNegative:e}){return()=>()=>(n,i)=>{let r=[0,0];for(let s of i){let o=n[s],a=Ia(o)&&e?0:1;be(o)&&(t==="normal"&&(r[a]+=o),n[s]=r[a],t==="trailing"&&(r[a]+=o))}}}function cB({mode:t,sum:e}){return()=>{let n=[],i=!0;return()=>(r,s)=>{let o=0;for(let a of s){let l=r[a],c=i&&e==="current"?0:n[a];n[a]=l;let u=e==="current"?l:c;if(!be(l)||!be(c)){r[a]=o;continue}t==="normal"&&(o+=u),r[a]=o,t==="trailing"&&(o+=u)}i=!1}}}function ZC(t,e,n,i=!1){let r;if(e.startsWith("window")){let s=e.endsWith("-trailing")?"trailing":"normal";r=Ac({mode:s,sum:n},cB)}else r=Ac({mode:e,separateNegative:i},lB);return{type:"group-value-processor",matchGroupIds:[t],adjust:r}}function uB({separateNegative:t}){return()=>()=>(e,n)=>{let i=[!0,!0];for(let r of n){let s=e[r],o=Ia(s)&&t?0:1;i[o]&&(i[o]=be(s)),e[r]=i[o]}}}function XC(t,e=!1){let n=Ac({separateNegative:e},uB);return{type:"group-value-processor",matchGroupIds:[t],adjust:n}}function to(t,e=!0){return{type:"processor",property:"diff",calculate:n=>{let i=new Map,r=new Map,s=new Map,o=new Map,a=Math.max(t.data.length,n.data.length);for(let c=0;c<a;c++){let u=t.data[c],d=n.data[c],h=u?Zr(u.keys):"",f=d?Zr(d.keys):"";if(d&&u&&h===f){Hs(u.values,d.values)||s.set(f,d);continue}o.has(f)?((e||!Hs(o.get(f).values,d.values))&&(s.set(f,d),i.set(f,d)),o.delete(f)):d&&r.set(f,d),r.has(h)?((e||!Hs(r.get(h).values,u.values))&&(s.set(h,u),i.set(h,u)),r.delete(h)):u&&(s.delete(h),o.set(h,u))}return{changed:r.size>0||s.size>0||o.size>0,added:r,updated:s,removed:o,moved:i}}}}function Zr(t,...e){let n;return rt(t)?n=t.map(r=>ha(r)).join("___"):n=ha(t),(typeof n=="string"||typeof n=="number"||n instanceof Date)&&e.length>0&&(n+=`___${e.join("___")}`),n}var QC=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(QC||{});function Iv(t){return t!=null&&pf(t)}function dB(t){return t!=null}function JC(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return Iv;default:return dB}}function eE(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function _t(t,e,n={}){return M({property:t,type:"key",valueType:eE(e),validation:JC(e)},n)}function Re(t,e,n={}){return M({property:t,type:"value",valueType:eE(e),validation:JC(e)},n)}function Cv(t,e={}){let s=e,{min:n=-1/0,max:i=1/0}=s,r=Ve(s,["min","max"]);return M({type:"value",property:t,valueType:"range",validation:Iv,processor:()=>o=>be(o)?ae(n,o,i):o},r)}function Ev(t,e,n={}){let o=n,{onlyPositive:i}=o,r=Ve(o,["onlyPositive"]);return N(M({},Re(t,e,r)),{processor:$C(i)})}function hB(t,e,n={}){return N(M({},Re(t,e,n)),{processor:WC()})}function ri(t,e,n="current",i,r){return[Re(t,r,i),ZC(i.groupId,e,n,i.separateNegative),...i.rangeId!=null?[UC(i.rangeId,i.groupId)]:[]]}function tE(t,e,n){return[Re(t,n,e),XC(e.groupId,e.separateNegative)]}var Qc=class{constructor(t,e,{datum:n},i){this.type=t,this.event=e,this.datum=n,this.seriesId=i.id}},Tv=class{constructor(t,e,n){this.series=t,this.seriesGrouping=e,this.oldGrouping=n,this.type="groupingChanged"}},Jc=(()=>{let t=class extends oC{constructor(e){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=Qc,this.internalId=Gi(this),this.rootGroup=new U({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new uv,this._declarationOrder=-1,this.seriesListeners=new ns;let{moduleCtx:n,pickModes:i=[1],directionKeys:r={},directionNames:s={},contentGroupVirtual:o=!0,canHaveAxes:a=!1}=e;this.ctx=n,this.directionKeys=r,this.directionNames=s,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new U({name:`${this.internalId}-content`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new U({name:`${this.internalId}-highlight`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new U({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new U({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new U({name:`${this.internalId}-series-labels`,zIndex:8})),this.annotationGroup=new U({name:`${this.id}-annotation`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.visibleMaybeChanged()}get visible(){return this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled??!1}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,n){let{internalId:i,type:r,visible:s}=this;e&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:r}),n&&this.ctx.seriesStateManager.registerSeries({id:i,type:r,visible:s,seriesGrouping:n}),this.fireEvent(new Tv(this,n,e))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(e,n=0){let i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":n+=15e3;break;case"annotation":i+=15e3;break}return[()=>this._declarationOrder+i,n]}addListener(e,n){return this.seriesListeners.addListener(e,n)}dispatch(e,n){this.seriesListeners.dispatch(e,n)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,n){let i=this.resolveKeyDirection(e),r=n?.[i],s=[];if(!r)return s;let o=(...a)=>{for(let l of a)Array.isArray(l)?o(...l):typeof l=="object"?o(...Object.values(l)):s.push(l)};return o(...r.map(a=>this.properties[a])),s}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){let n=this.getSeriesDomain(e),i=this.moduleMap.mapModules(r=>r.getDomain(e));return n.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0,this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){let{dimOpacity:n=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||n===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return n}}getStrokeWidth(e){let{strokeWidth:n,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||n===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return n;case 0:case 2:return e}}isItemIdHighlighted(){let e=this.ctx.highlightManager?.getActiveHighlight()?.series;return e==null?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,n)=>Object.assign(e,n),{})}pickNode(e,n){let{pickModes:i,visible:r,rootGroup:s}=this;if(!(!r||!s.visible))for(let o of i){if(n&&!n.includes(o))continue;let a;switch(o){case 0:a=this.pickNodeExactShape(e);break;case 1:case 2:a=this.pickNodeMainAxisFirst(e,o===2);break;case 3:a=this.pickNodeClosestDatum(e);break}if(a)return{pickMode:o,match:a.datum,distance:a.distance}}}pickNodeExactShape(e){let n=this.contentGroup.pickNode(e.x,e.y);if(n&&n.datum.missing!==!0)return{datum:n.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,n){let i=Zh(e.x,e.y,n);if(i.nearest!==void 0&&i.nearest.datum.missing!==!0)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,n){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,n){this.fireEvent(new this.NodeEvent("nodeClick",e,n,this))}fireNodeDoubleClickEvent(e,n){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,n,this))}createNodeContextMenuActionEvent(e,n){return new this.NodeEvent("nodeContextMenuAction",e,n,this)}toggleSeriesItem(e,n){this.visible=n,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:e,enabled:n})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return N(M({},this.ctx),{series:this})}getLabelText(e,n,i=String){return e.formatter?this.ctx.callbackCache.call(e.formatter,M({seriesId:this.id},n))??i(n.value):i(n.value)}getMarkerStyle(e,n,i=e.getStyle()){let r={size:n.datum.point?.size??0},s=ue(r,i);if(e.itemStyler){let o=this.ctx.callbackCache.call(e.itemStyler,N(M(M({seriesId:this.id},s),n),{datum:n.datum.datum}));return ue(o,s)}return s}updateMarkerStyle(e,n,i,r=n.getStyle(),{applyTranslation:s=!0}={}){let{point:o}=i.datum,a=this.getMarkerStyle(n,i,r),l=this.visible&&a.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);s?e.setProperties(N(M({visible:l},a),{translationX:o?.x,translationY:o?.y})):e.setProperties(M({visible:l},a)),typeof n.shape=="function"&&!e.dirtyPath&&(e.path.clear(!0),e.updatePath(),e.checkPathDirty())}getMinRects(e,n){}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){let{width:n,height:i}=e??{width:NaN,height:NaN},r=e?{seriesRectWidth:n,seriesRectHeight:i}:void 0,s=mn(this.nodeDataDependencies,r)!=null;return s&&(this._nodeDataDependencies=r,this.markNodeDataDirty()),s}pickFocus(e){}};return t.highlightedZIndex=1e12,t})();g([Wt({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Jc.prototype,"seriesGrouping",2);var Zw=30,fB=class{constructor(t,e,n){this.seriesRoot=t,this.highlightRoot=e,this.annotationRoot=n,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,n;let{internalId:i,type:r,rootGroup:s,highlightGroup:o,annotationGroup:a,seriesGrouping:l}=t,{groupIndex:c=i}=l??{};if(this.series[i]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[i]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=Zw?"aggressive-grouping":"normal"),(e=this.groups)[r]??(e[r]={});let u=this.lookupIdx(c),d=this.groups[r][u];return d||(d=(n=this.groups[r])[u]??(n[u]={type:r,id:u,seriesIds:[],group:this.seriesRoot.appendChild(new U({name:`${r}-content`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new U({name:`${r}-highlight`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new U({name:`${r}-annotation`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))})),this.series[i]={layerState:d,seriesConfig:t},d.seriesIds.push(i),d.group.appendChild(s),d.highlight.appendChild(o),d.annotation.appendChild(a),d.group}changeGroup(t){let{internalId:e,seriesGrouping:n,type:i,rootGroup:r,highlightGroup:s,annotationGroup:o,oldGrouping:a}=t,{groupIndex:l=e}=n??{};this.groups[i]?.[l]?.seriesIds.includes(e)||(this.series[e]!=null&&this.releaseGroup({internalId:e,seriesGrouping:a,type:i,rootGroup:r,highlightGroup:s,annotationGroup:o}),this.requestGroup(t))}releaseGroup(t){let{internalId:e,rootGroup:n,highlightGroup:i,annotationGroup:r,type:s}=t;if(this.series[e]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${e}`);let o=this.series[e]?.layerState;if(o&&(o.seriesIds=o.seriesIds.filter(a=>a!==e),o.group.removeChild(n),o.highlight.removeChild(i),o.annotation.removeChild(r)),o?.seriesIds.length===0)this.seriesRoot.removeChild(o.group),this.highlightRoot.removeChild(o.highlight),this.annotationRoot.removeChild(o.annotation),delete this.groups[o.type][o.id],delete this.groups[s][e];else if(o?.seriesIds.length>0){let a=this.series[o?.seriesIds?.[0]]?.seriesConfig;o.group.zIndexSubOrder=a?.getGroupZIndexSubOrder("data"),o.highlight.zIndexSubOrder=a?.getGroupZIndexSubOrder("highlight"),o.annotation.zIndexSubOrder=a?.getGroupZIndexSubOrder("annotation")}delete this.series[e]}lookupIdx(t){return this.mode==="normal"?t:typeof t=="string"&&(t=Number(t.split("-").at(-1)),!t)?0:Math.floor(ae(0,t/this.expectedSeriesCount,1)*Zw)}destroy(){for(let t of Object.values(this.groups))for(let e of Object.values(t))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}},pB=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("start-layout",n=>this.positionPadding(n)),this.layoutService.addListener("layout-complete",n=>this.alignCaptions(n)),this.layoutService.addListener("start-layout",n=>this.positionCaptions(n)))}destroy(){this.destroyFns.forEach(t=>t())}positionPadding(t){let{shrinkRect:e}=t,{padding:n}=this.chartLike;return e.shrink(n.left,"left"),e.shrink(n.top,"top"),e.shrink(n.right,"right"),e.shrink(n.bottom,"bottom"),N(M({},t),{shrinkRect:e})}positionCaptions(t){let{shrinkRect:e,positions:n,padding:i}=t,{title:r,subtitle:s,footnote:o,titlePadding:a}=this.chartLike,l=e.clone().shrink(a),c=e.clone(),u=p=>{let m=e.height/10,y=p.lineHeight??p.fontSize*Me.defaultLineHeightRatio,v=e.width,x=Math.max(y,m);p.computeTextWrap(v,x)},d=p=>p==="left"?l.x:p==="right"?l.x+l.width:(p!=="center"&&L.error(`invalid textAlign value: ${p}`),l.x+l.width/2),h=(p,m)=>{let y=l.y;p.node.x=d(p.textAlign),p.node.y=y,p.node.textBaseline="top",u(p);let v=p.node.computeBBox(),x=Math.ceil(v.y-y+v.height+m);return p.layoutStyle==="block"&&(c.shrink(x+2*a,"top"),l.shrink(x,"top")),v},f=(p,m)=>{let y=l.y+l.height;p.node.x=d(p.textAlign),p.node.y=y,p.node.textBaseline="bottom",u(p);let v=p.node.computeBBox(),x=Math.ceil(y-v.y+m);return p.layoutStyle==="block"&&(c.shrink(x+2*a,"bottom"),l.shrink(x,"bottom")),v};if(r.node.visible=r.enabled,s.node.visible=s.enabled,o.node.visible=o.enabled,r.enabled){let{spacing:p=s.enabled?We.SMALL_PADDING:We.LARGE_PADDING}=r;n.title=h(r,p)}return s.enabled&&(n.subtitle=h(s,s.spacing??0)),o.enabled&&(n.footnote=f(o,o.spacing??0)),i.title=a,N(M({},t),{shrinkRect:c,positions:n})}alignCaptions(t){let{title:e,subtitle:n,footnote:i,titlePadding:r}=this.chartLike,s=(o,a)=>{if(o.layoutStyle==="overlay"){if(o.textAlign==="left")o.node.x=a.x+r;else if(o.textAlign==="right"){let l=o.node.computeBBox();o.node.x=a.x+a.width-l.width-r}}};s(e,t.series.rect),s(n,t.series.rect),s(i,t.series.rect)}},gB=class{constructor(t,e,n,i){this.chart=t,this.dataService=e,this.updateService=n,this.zoomManager=i,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow().catch(t=>L.errorOnce(t))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return k(this,null,function*(){if(!this.dataService.isLazy())return;let t=this.getValidAxis(),e,n=!0;if(t){let i=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,i),n=this.shouldRefresh(t,i)}this.dirtyZoom=!1,this.dirtyDataSource=!1,n&&this.dataService.load({windowStart:e?.min,windowEnd:e?.max})})}getValidAxis(){return this.chart.axes.find(t=>t.type==="time")}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let n=this.lastAxisZooms.get(t.id);return n&&e.min===n.min&&e.max===n.max?!1:(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){let n=t.scale.getDomain?.();if(!e||!n||n.length===0||isNaN(Number(n[0])))return;let i=Number(n[1])-Number(n[0]),r=new Date(Number(n[0])+i*e.min),s=new Date(Number(n[0])+i*e.max);return{min:r,max:s}}},mB=".ag-chart-overlay{color:#181d1f;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay{color:#ffffff}.ag-chart-overlay--loading{color:rgb(140,140,140)}.ag-chart-overlay__loading-background{background:white;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay .ag-chart-overlay__loading-background{background:#192232}",yB=class{constructor(t,e,n,i,r,s,o){this.chartLike=t,this.overlays=e,this.dataService=n,this.layoutService=i,this.localeManager=r,this.animationManager=s,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(Ty),this.domManager.addStyles("overlays",mB),this.destroyFns.push(this.layoutService.addListener("layout-complete",a=>this.onLayoutComplete(a)))}destroy(){this.destroyFns.forEach(t=>t()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){let e=this.dataService.isLoading(),n=this.chartLike.series.some(r=>r.hasData),i=this.chartLike.series.some(r=>r.visible);this.overlays.darkTheme?this.overlayElem.classList.add(qw):this.overlayElem.classList.remove(qw),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`,this.toggleOverlay(this.overlays.loading,t,e),this.toggleOverlay(this.overlays.noData,t,!e&&!n),this.toggleOverlay(this.overlays.noVisibleSeries,t,n&&!i)}toggleOverlay(t,e,n){if(n){let i=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(i)}else t.removeElement(()=>{this.overlayElem.innerText="\xA0"},this.animationManager)}},ei=_e.create(!0,"opts"),Av=class extends le{constructor(){super(...arguments),this.padding=new ss(0)}};g([b(H,{optional:!0})],Av.prototype,"clip",2);g([b(z)],Av.prototype,"padding",2);var wt=(()=>{let t=class wh extends oC{constructor(n,i){var r;super(),this.id=Gi(this),this.seriesRoot=new U({name:`${this.id}-series-root`}),this.highlightRoot=new U({name:`${this.id}-highlight-root`,layer:!0,zIndex:5,nonEmptyChildDerivedZIndex:!0}),this.annotationRoot=new U({name:`${this.id}-annotation-root`,layer:!0,zIndex:10}),this.debug=_e.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new ss(20),this.titlePadding=0,this.seriesArea=new Av,this.title=new We,this.subtitle=new We,this.footnote=new We,this.keyboard=new Dv,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new iB,this.zoomManager=new jC,this.processors=[],this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new YF,this.updateRequestors={},this.performUpdateTrigger=qF(v=>k(this,[v],function*({count:y}){this.destroyed||this.updateMutex.acquire(()=>k(this,null,function*(){try{yield this.performUpdate(y)}catch(x){L.error("update error",x)}})).catch(x=>L.errorOnce(x))})),this._performUpdateSplits={},this.axes=[],this.series=[],this.focus={hasFocus:!1,series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.pointerScheduler=KF(()=>{if(this.lastInteractionEvent){if(this.performUpdateType<=4){this.pointerScheduler.schedule();return}this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0}}),this.onSeriesNodeClick=y=>{let v=N(M({},y),{type:"seriesNodeClick"});Object.defineProperty(v,"series",{enumerable:!1,get:()=>y.series}),this.fireEvent(v)},this.onSeriesNodeDoubleClick=y=>{let v=N(M({},y),{type:"seriesNodeDoubleClick"});this.fireEvent(v)},this.seriesGroupingChanged=y=>{if(!(y instanceof Tv))return;let{series:v,seriesGrouping:x,oldGrouping:D}=y;v.rootGroup.parent!=null&&this.seriesLayerManager.changeGroup({internalId:v.internalId,type:v.type,rootGroup:v.rootGroup,highlightGroup:v.highlightGroup,annotationGroup:v.annotationGroup,getGroupZIndexSubOrder:S=>v.getGroupZIndexSubOrder(S),seriesGrouping:x,oldGrouping:D})},this.dataProcessListeners=new Set,this.chartOptions=n;let s=i?.scene,o=i?.container,a=new U({name:"root"}),l=new U({name:"titles",layer:!0,zIndex:8});a.visible=!1,a.append(l),a.append(this.seriesRoot),a.append(this.highlightRoot),a.append(this.annotationRoot),l.append(this.title.node),l.append(this.subtitle.node),l.append(this.footnote.node);let{overrideDevicePixelRatio:c}=n.specialOverrides;this.tooltip=new Hn,this.seriesLayerManager=new fB(this.seriesRoot,this.highlightRoot,this.annotationRoot);let u=this.ctx=new E2(this,{scene:s,root:a,syncManager:new Y2(this),container:o,updateCallback:(y=0,v)=>this.update(y,v),updateMutex:this.updateMutex,overrideDevicePixelRatio:c});this._destroyFns.push(u.domManager.addListener("resize",()=>this.parentResize(u.domManager.containerSize))),this.overlays=new Xc,(r=this.overlays.loading).renderer??(r.renderer=()=>rB(this.overlays.loading.getText(u.localeManager),u.animationManager.defaultDuration)),this.processors=[new pB(this,u.layoutService),new gB(this,u.dataService,u.updateService,u.zoomManager),new yB(this,this.overlays,u.dataService,u.layoutService,u.localeManager,u.animationManager,u.domManager)],this.highlight=new kC,this.container=o;let{All:d}=xa,h=this.getModuleContext(),f=u.regionManager.addRegion("series",this.seriesRoot,this.ctx.axisManager.axisGridGroup),p=this.ctx.regionManager.addRegion("horizontal-axes"),m=this.ctx.regionManager.addRegion("vertical-axes");u.regionManager.addRegion("root",a),this._destroyFns.push(u.dataService.addListener("data-load",y=>{this.data=y.data}),this.title.registerInteraction(h),this.subtitle.registerInteraction(h),this.footnote.registerInteraction(h),u.regionManager.listenAll("click",y=>this.onClick(y)),u.regionManager.listenAll("dblclick",y=>this.onDoubleClick(y)),f.addListener("hover",y=>this.onMouseMove(y),20),f.addListener("drag",y=>this.onMouseMove(y),20),p.addListener("hover",y=>this.onMouseMove(y)),m.addListener("hover",y=>this.onMouseMove(y)),f.addListener("leave",y=>this.onLeave(y)),p.addListener("leave",y=>this.onLeave(y)),m.addListener("leave",y=>this.onLeave(y)),f.addListener("blur",()=>this.onBlur()),f.addListener("tab",y=>this.onTab(y)),f.addListener("nav-vert",y=>this.onNavVert(y)),f.addListener("nav-hori",y=>this.onNavHori(y)),f.addListener("submit",y=>this.onSubmit(y)),f.addListener("contextmenu",y=>this.onContextMenu(y),d),u.keyNavManager.addListener("browserfocus",y=>this.onBrowserFocus(y)),u.interactionManager.addListener("page-left",()=>this.destroy()),u.animationManager.addListener("animation-start",()=>this.onAnimationStart()),u.animationManager.addListener("animation-frame",()=>{this.update(6)}),u.highlightManager.addListener("highlight-change",y=>this.changeHighlightDatum(y)),u.zoomManager.addListener("zoom-pan-start",()=>this.resetPointer()),u.zoomManager.addListener("zoom-change",()=>{this.resetPointer(),this.ctx.focusIndicator.updateBounds(void 0),this.series.map(v=>v.animationState?.transition("updateData"));let y=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:y})})),this.parentResize(u.domManager.containerSize)}static getInstance(n){return wh.chartsInstances.get(n)}get canvasElement(){return this.ctx.scene.canvas.element}download(n,i){this.ctx.scene.download(n,i)}getCanvasDataURL(n){return this.ctx.scene.getDataURL(n)}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(n=>n.enabled&&n.text).map(n=>n.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length,caption:this.getCaptionText()})}getDatumAriaText(n,i){let r=i.ariaLabel;return n.series.getDatumAriaText?.(n,r)??r}resetAnimations(){this.chartAnimationPhase="initial";for(let n of this.series)n.resetAnimation(this.chartAnimationPhase);for(let n of this.axes)n.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(n){if(this.destroyed)return;let i=n?.keepTransferableResources,r;return this.performUpdateType=7,this._destroyFns.forEach(s=>s()),this.processors.forEach(s=>s.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),r={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(s=>s.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.zoomManager.destroy(),this.destroyed=!0,Object.freeze(this),r}resetPointer(n=!1){n||this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(n){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>k(this,null,function*(){this.destroyed||(yield n(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})).catch(i=>L.errorOnce(i)))}update(n=0,i){let{forceNodeDataRefresh:r=!1,skipAnimations:s,seriesToUpdate:o=this.series,newAnimationBatch:a}=i??{};r&&this.series.forEach(l=>l.markNodeDataDirty());for(let l of o)this.seriesToUpdate.add(l);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=i?.skipSync??!1,this.debug.check()){let l=new Error().stack??"<unknown>";l=l.replace(/\([^)]*/g,""),this.updateRequestors[l]=n}n<this.performUpdateType&&(this.performUpdateType=n,this.performUpdateTrigger.schedule(i?.backOffMs))}performUpdate(n){return k(this,null,function*(){let{performUpdateType:i,extraDebugStats:r,_performUpdateSplits:s,ctx:o}=this,a=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&i<6&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",gc[i]);let l=performance.now();s.start??(s.start=l);let c=h=>{s[h]??(s[h]=0),s[h]+=performance.now()-l,l=performance.now()},u=!1;switch(i){case 0:this.updateDOM();case 1:yield this.updateData(),c("\u2B07\uFE0F");case 2:yield this.processData(),this.resetPointer(!0),c("\u{1F3ED}");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(a)){u=!0;break}yield this.processLayout(),c("\u2316");case 4:if(this.checkUpdateShortcut(4))break;let{seriesRect:h}=this;yield Promise.all(a.map(p=>p.update({seriesRect:h}))),c("\u{1F914}");case 5:if(this.checkUpdateShortcut(5))break;let f=o.tooltipManager.getTooltipMeta(this.id);i<=4&&f?.lastPointerEvent!=null&&this.handlePointer(f.lastPointerEvent,!0),c("\u2196");case 6:if(this.checkUpdateShortcut(6))break;o.animationManager.endBatch(),r.updateShortcutCount=this.updateShortcutCount,yield o.scene.render({debugSplitTimes:s,extraDebugStats:r}),this.extraDebugStats={};for(let p in s)delete s[p];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}u||o.updateService.dispatchUpdateComplete(this.getMinRects());let d=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((d-s.start)*100)/100,count:n,performUpdateType:gc[i]})})}updateThemeClassName(){let{theme:n}=this.chartOptions.processedOptions,i="ag-charts-theme-",r=[`${i}default`,`${i}default-dark`],s=r[0],o=!1;typeof n=="string"?(s=n.replace("ag-",i),o=n.includes("-dark")):typeof n?.baseTheme=="string"&&(s=n.baseTheme.replace("ag-",i),o=n.baseTheme.includes("-dark")),r.includes(s)||(s=o?r[1]:r[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();let{enabled:n,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabIndex(n?i??0:-1),Zs(this.ctx.scene.canvas.element,"role","figure"),Zs(this.ctx.scene.canvas.element,"aria-label",this.getAriaLabel())}checkUpdateShortcut(n){return this.updateShortcutCount>3?(L.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=n?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(n){if(!(this.width!=null&&this.height!=null)){if(!this._lastAutoSize){let i=this._performUpdateNoRenderCount++,r=(i+1)**2*40;if(i<8)return this.update(3,{seriesToUpdate:n,backOffMs:r}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",r),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}return this._performUpdateNoRenderCount=0,!0}onAxisChange(n,i){i==null&&n.length===0||this.ctx.axisManager.updateAxes(i??[],n)}onSeriesChange(n,i){let r=i?.filter(s=>!n.includes(s))??[];this.destroySeries(r),this.seriesLayerManager?.setSeriesCount(n.length);for(let s of n){if(i?.includes(s))continue;s.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(s);let o=this;s.chart={get mode(){return o.mode},get isMiniChart(){return!1},get seriesRect(){return o.seriesRect},placeLabels(){return o.placeLabels()}},s.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(s),s.addChartEventListeners()}}destroySeries(n){n?.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.chart=void 0})}addSeriesListeners(n){this.hasEventListener("seriesNodeClick")&&n.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&n.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),n.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(n=>{n.removeEventListener("nodeClick",this.onSeriesNodeClick),n.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(n)})}assignSeriesToAxes(){this.axes.forEach(n=>{n.boundSeries=this.series.filter(i=>i.axes[n.direction]===n)})}assignAxesToSeries(){let n=lv(this.axes,i=>i.direction);this.series.forEach(i=>{i.directions.forEach(r=>{let s=n[r];if(!s){L.warnOnce(`no available axis for direction [${r}]; check series and axes configuration.`);return}let o=i.getKeys(r),a=s.find(l=>!l.keys.length||o.some(c=>l.keys.includes(c)));if(!a){L.warnOnce(`no matching axis for direction [${r}] and keys [${o}]; check series and axes configuration.`);return}i.axes[r]=a})})}parentResize(n){if(n==null||this.width!=null&&this.height!=null)return;let{width:i,height:r}=n;if(i=Math.floor(i),r=Math.floor(r),i===0&&r===0)return;let[s=0,o=0]=this._lastAutoSize??[];s===i&&o===r||(this._lastAutoSize=[i,r],this.resize("SizeMonitor",{}))}resize(n,i){let{scene:r,animationManager:s}=this.ctx,{inWidth:o,inHeight:a,inMinWidth:l,inMinHeight:c}=i;this.ctx.domManager.setSizeOptions(l??this.minWidth,c??this.minHeight,o??this.width,a??this.height);let u=o??this.width??this._lastAutoSize?.[0],d=a??this.height??this._lastAutoSize?.[1];if(this.debug(`Chart.resize() from ${n}`,{width:u,height:d,stack:new Error().stack}),!(u==null||d==null||!be(u)||!be(d))&&r.resize(u,d)){this.resetPointer(),s.reset();let h=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(h=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:h})}}updateData(){return k(this,null,function*(){this.series.forEach(i=>i.setChartData(this.data));let n=this.modulesManager.mapModules(i=>i.updateData?.({data:this.data}));yield Promise.all(n)})}processData(){return k(this,null,function*(){if(this.series.some(s=>s.canHaveAxes)){this.assignAxesToSeries();let s=this.modulesManager.getModule("sync");s?.enabled?s.syncAxes(this._skipSync):this.assignSeriesToAxes()}let n=new PC(this.mode),i=this.series.map(s=>s.processData(n)),r=this.modulesManager.mapModules(s=>s.processData?.({dataController:n}));n.execute(),yield Promise.all([...i,...r]);for(let{legendType:s,legend:o}of this.modulesManager.legends())o.data=this.getLegendData(s,this.mode!=="integrated");this.dataProcessListeners.forEach(s=>s()),this.dataProcessListeners.clear()})}placeLabels(){let n=[],i=[];for(let u of this.series){if(!u.visible)continue;let d=u.getLabelData();CF(d?.[0])&&(i.push(d),n.push(u))}let{seriesRect:r}=this,{top:s,right:o,bottom:a,left:l}=this.seriesArea.padding,c=r&&i.length>0?TF(i,{x:-l,y:-s,width:r.width+l+o,height:r.height+s+a}):[];return new Map(c.map((u,d)=>[n[d],u]))}getLegendData(n,i){var r;let s=this.series.filter(a=>a.properties.showInLegend).flatMap(a=>a.getLegendData(n));if(i&&(a=>a.every(l=>l.legendType==="category"))(s)){let a={},l=new Map(this.series.map(c=>[c.id,c.type]));for(let{seriesId:c,symbols:[{marker:u}],label:d}of s){if(u.fill==null)continue;let h=l.get(c),f=a[h]??(a[h]={});f[r=d.text]??(f[r]=u.fill),f[d.text]!==u.fill&&L.warnOnce(`legend item '${d.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return s}processLayout(){return k(this,null,function*(){let n=this.animationRect;yield this.performLayout(),n&&!this.animationRect?.equals(n)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return k(this,null,function*(){let{width:n,height:i}=this.ctx.scene,r={shrinkRect:new V(0,0,n,i),positions:{},padding:{}};r=this.ctx.layoutService.dispatchPerformLayout("start-layout",r),r=this.ctx.layoutService.dispatchPerformLayout("before-series",r);for(let s of this.modulesManager.modules())s.performLayout!=null&&(r=yield s.performLayout(r));return r.shrinkRect})}pickNode(n,i){let r=performance.now(),s=[...i].reverse(),o;for(let{series:a,pickModes:l,maxDistance:c}of s){if(!a.visible||!a.rootGroup.visible)continue;let{match:u,distance:d}=a.pickNode(n,l)??{};if(!(!u||d==null)&&((!o||o.distance>d)&&d<=(c??1/0)&&(o={series:a,distance:d,datum:u}),d===0))break}return this.extraDebugStats.pickSeriesNode=Math.round((this.extraDebugStats.pickSeriesNode??0)+(performance.now()-r)),o}pickSeriesNode(n,i,r){let s=i?[0]:void 0;return this.pickNode(n,this.series.map(o=>({series:o,pickModes:s,maxDistance:r})))}pickTooltip(n){return this.pickNode(n,this.series.map(i=>{let r=i.properties.tooltip.range,s;return r==="exact"?s=[0]:s=void 0,{series:i,pickModes:s,maxDistance:typeof r=="number"?r:void 0}}))}onMouseMove(n){this.lastInteractionEvent=n,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=n.offsetX,this.extraDebugStats.mouseY=n.offsetY,this.update(6)}onLeave(n){let i=n.relatedElement;i&&this.ctx.domManager.isManagedDOMElement(i)||(this.resetPointer(),this.update(6),this.ctx.cursorManager.updateCursor("chart"))}onBrowserFocus(n){n.delta>0?(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=0,this.focus.seriesIndex=0):n.delta<0&&(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=1/0,this.focus.seriesIndex=1/0)}onAnimationStart(){this.focus.hasFocus&&this.onBlur()}onBlur(){this.ctx.focusIndicator.updateBounds(void 0),this.resetPointer(),this.focus.hasFocus=!1}onTab(n){this.handleFocus(0,0),n.preventDefault(),this.focus.hasFocus=!0}onNavVert(n){this.focus.seriesIndex+=n.delta,this.handleFocus(n.delta,0),n.preventDefault()}onNavHori(n){this.focus.datumIndex+=n.delta,this.handleFocus(0,n.delta),n.preventDefault()}onSubmit(n){let{series:i,datum:r}=this.focus,s=n.sourceEvent.sourceEvent;i!==void 0&&r!==void 0?i.fireNodeClickEvent(s,r):this.fireEvent({type:"click",event:s}),n.preventDefault()}onContextMenu(n){this.ctx.tooltipManager.removeTooltip(this.id);let{Default:i,ContextMenu:r}=xa,s;this.ctx.interactionManager.getState()&(i|r)&&this.checkSeriesNodeRange(n,(o,a)=>{this.ctx.highlightManager.updateHighlight(this.id),s=a}),this.ctx.contextMenuRegistry.dispatchContext("series",n,{pickedNode:s})}handleFocus(n,i){this.focus.hasFocus=!0;let r=this.overlays.getFocusInfo(this.ctx.localeManager);r==null?this.handleSeriesFocus(n,i):(this.ctx.focusIndicator.updateBounds(r.rect),this.ctx.ariaAnnouncementService.announceValue(r.text))}handleSeriesFocus(n,i){let{series:r,seriesRect:s,focus:o}=this,a=r.filter(d=>d.visible);if(a.length===0)return;o.seriesIndex=ae(0,o.seriesIndex,a.length-1),o.series=a[o.seriesIndex];let{datumIndex:l,seriesIndex:c}=o,u=o.series.pickFocus({datumIndex:l,datumIndexDelta:i,otherIndex:c,otherIndexDelta:n,seriesRect:s});this.updatePickedFocus(u)}updatePickedFocus(n){let{focus:i}=this;if(n===void 0||i.series===void 0)return;let{datum:r,datumIndex:s}=n;i.datumIndex=s,i.datum=r;let o=VC(this.ctx.focusIndicator,n);if(o!==void 0){this.lastInteractionEvent=o;let a=i.series.getTooltipHtml(r),l=Ph.makeTooltipMeta(this.lastInteractionEvent,r),c=this.getDatumAriaText(r,a);this.ctx.highlightManager.updateHighlight(this.id,r),this.ctx.tooltipManager.updateTooltip(this.id,l,a),this.ctx.ariaAnnouncementService.announceValue("ariaAnnounceHoverDatum",{datum:c})}}static isHoverEvent(n){return n!==void 0&&n.type==="hover"}static isDragEvent(n){return n!==void 0&&n.type==="drag"}handlePointer(n,i){let r=this.ctx.interactionManager.getState();if(r!==16&&r!==4||!wh.isHoverEvent(n)&&!wh.isDragEvent(n))return;let{lastPick:s,hoverRect:o}=this,{offsetX:a,offsetY:l}=n,c=(u=!1)=>{s&&this.resetPointer(u)};if(i?this.ctx.animationManager.isActive():!o?.containsPoint(a,l)){c();return}this.handlePointerTooltip(n,c),this.handlePointerNode(n)}handlePointerTooltip(n,i){let{lastPick:r}=this,{offsetX:s,offsetY:o,targetElement:a}=n;if(a&&this.tooltip.interactive&&this.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",Ri))return;let l=this.pickTooltip({x:s,y:o});if(!l){this.ctx.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&i(!0);return}let c=this.highlight.range==="node"||!r||r!==l.datum,u;c&&(u=l.series.getTooltipHtml(l.datum),this.highlight.range==="tooltip"&&this.ctx.highlightManager.updateHighlight(this.id,l.datum));let h=this.tooltip.enabled&&l.series.tooltipEnabled&&(!c||u!==void 0),f=Ph.makeTooltipMeta(n,l.datum);h&&this.ctx.tooltipManager.updateTooltip(this.id,f,u)}handlePointerNode(n){this.checkSeriesNodeRange(n,(r,s)=>{(r.hasEventListener("nodeClick")||r.hasEventListener("nodeDoubleClick"))&&this.ctx.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id,s)})||(this.ctx.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id))}onClick(n){if(this.checkSeriesNodeClick(n)){this.update(4),n.preventDefault();return}this.fireEvent({type:"click",event:n.sourceEvent})}onDoubleClick(n){if(this.checkSeriesNodeDoubleClick(n)){this.update(4),n.preventDefault();return}this.fireEvent({type:"doubleClick",event:n.sourceEvent})}checkSeriesNodeClick(n){return this.checkSeriesNodeRange(n,(i,r)=>i.fireNodeClickEvent(n.sourceEvent,r))}checkSeriesNodeDoubleClick(n){return this.checkSeriesNodeRange(n,(i,r)=>i.fireNodeDoubleClickEvent(n.sourceEvent,r))}checkSeriesNodeRange(n,i){let s=this.pickSeriesNode({x:n.offsetX,y:n.offsetY},!1)?.datum,o=s?.series.properties.nodeClickRange,a;be(o)&&(a=o);let l=this.pickSeriesNode({x:n.offsetX,y:n.offsetY},!0);if(l&&(n.preventZoomDblClick=!0),s&&o==="nearest")return i(s.series,s),!0;if(o!=="exact"&&(l=this.pickSeriesNode({x:n.offsetX,y:n.offsetY},!1,a)),!l)return!1;let c=a!=null,u=o==="exact"&&l.distance===0;return(c||u)&&(n.pointerHistory===void 0||n.pointerHistory?.every(h=>{let f={x:h.offsetX,y:h.offsetY};return this.pickSeriesNode(f,!1,a)?.datum===l?.datum}))?(i(l.series,l.datum),!0):!1}changeHighlightDatum(n){let i=new Set,{series:r=void 0,datum:s}=n.currentHighlight??{},{series:o=void 0,datum:a}=n.previousHighlight??{};o&&i.add(o),r&&i.add(r),o?.properties.cursor&&a&&this.ctx.cursorManager.updateCursor(o.id),r?.properties.cursor&&s&&this.ctx.cursorManager.updateCursor(r.id,r.properties.cursor),this.lastPick=n.currentHighlight,r==null||o==null?this.update(4):this.update(4,{seriesToUpdate:i})}waitForUpdate(n=1e4,i=!1){return k(this,null,function*(){let r=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this.performUpdateType!==7;){if(performance.now()-r>n){let s=`Chart.waitForUpdate() timeout of ${n} reached - first chart update taking too long.`;if(i)throw new Error(s);L.warnOnce(s)}yield WF(50)}yield this.updateMutex.waitForClearAcquireQueue()})}waitForDataProcess(n){return new Promise(i=>{this.dataProcessListeners.add(i),gn(n)&&setTimeout(()=>{this.dataProcessListeners.has(i)&&(this.dataProcessListeners.delete(i),i())},n)})}getMinRects(){let{width:n,height:i}=this.ctx.scene,r=this.series.map(d=>d.getMinRects(n,i)).filter(wc);if(r.length===0)return;let s=0,o=0,a=0,l=0;for(let{minRect:d,minVisibleRect:h}of r)s=Math.max(s,d.width),o=Math.max(o,d.height),a=Math.max(a,h.width),l=Math.max(l,h.height);let c=new V(0,0,s,o),u=c.clone();return a>0&&l>0&&(u=new V(0,0,a,l)),{minRect:c,minVisibleRect:u}}filterMiniChartSeries(n){return n?.filter(i=>i.showInMiniChart!==!1)}applyOptions(n){let r=n!==this.chartOptions?this.chartOptions.processedOptions:{},s=n.processedOptions,o=n.diffOptions(r);if(o==null)return;ei("Chart.applyOptions() - applying delta",o);let a=this.applyModules(s),l=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology","nodes","initialState"];o.listeners&&this.registerListeners(this,o.listeners),cr(this,o,{skip:l});let c=!1,u="no-op";o.series?.length&&(u=this.applySeries(this,o.series,r?.series),c=!0),u==="replaced"&&this.resetAnimations(),this.applyAxes(this,s,r,u,[],!0)&&(c=!0),o.data&&(this.data=o.data),o.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,o.legend.listeners),o.listeners&&this.updateAllSeriesListeners(),this.chartOptions=n;let d=this.modulesManager.getModule("navigator"),h=this.modulesManager.getModule("zoom");!d?.enabled&&!h?.enabled&&this.ctx.zoomManager.updateZoom("chart");let f=d?.miniChart,p=s.navigator?.miniChart?.series??s.series;f?.enabled===!0&&p!=null?this.applyMiniChartOptions(f,p,s,r):f?.enabled===!1&&(f.series=[],f.axes=[]),this.ctx.annotationManager.setAnnotationStyles(n.annotationThemes),c||(c=this.shouldForceNodeDataRefresh(o,u));let y=c||a?0:3;this.maybeResetAnimations(u),ei("Chart.applyOptions() - update type",gc[y],{seriesStatus:u,forceNodeDataRefresh:c}),this.update(y,{forceNodeDataRefresh:c,newAnimationBatch:!0})}applyInitialState(){let{ctx:{annotationManager:n,stateManager:i}}=this,r=this.getOptions();if(r.initialState?.annotations!=null){let s=r.initialState.annotations.map(o=>{let a=n.getAnnotationTypeStyles(o.type);return ue(o,a)});i.setState(n,s)}}maybeResetAnimations(n){if(this.mode==="standalone")switch(n){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(n,i){let r=!!n.data||i==="data-change"||i==="replaced",s=bv.getKeys(),o=Object.values(s).some(l=>n[l]!=null),a=n.title!=null&&n.subtitle!=null;return r||o||a}applyMiniChartOptions(n,i,r,s){let o=s?.navigator?.miniChart?.series??s?.series,a=this.applySeries(n,this.filterMiniChartSeries(i),this.filterMiniChartSeries(o));this.applyAxes(n,r,s,a,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);let l=n.axes,c=l.find(u=>u.direction==="x");for(let u of l)u.gridLine.enabled=!1,u.label.enabled=u===c,u.tick.enabled=!1,u.interactionEnabled=!1;if(c!=null){let u=r.navigator?.miniChart,d=u?.label,h=u?.label?.interval;c.line.enabled=!1,c.label.set(hy(d,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),c.tick.set(hy(h,["enabled","width","size","color","interval","step"]));let f=h?.step;f!=null&&(c.interval.step=f)}}applyModules(n){let{type:i}=this.constructor,r=!1;for(let s of Hr.byType("root","legend")){let a=n[s.optionsKey]!=null&&s.chartTypes.includes(i);a!==this.modulesManager.isEnabled(s)&&(a?(this.modulesManager.addModule(s,l=>new l.instanceConstructor(this.getModuleContext())),s.type==="legend"&&this.modulesManager.getModule(s)?.attachLegend(this.ctx.scene),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),r=!0)}return r}applySeries(n,i,r){if(!i)return"no-change";let s=J2(n.series,i,r);if(s.status==="no-overlap")return ei(`Chart.applySeries() - creating new series instances, status: ${s.status}`,s),n.series=i.map(u=>this.createSeries(u)),"replaced";ei("Chart.applySeries() - matchResult",s);let o=[],a=!1,l=!1,c=!1;for(let u of s.changes)switch(l||(l=u.status==="series-grouping"),a||(a=u.diff?.data!=null),c||(c=u.status!=="no-op"),u.status){case"add":let d=this.createSeries(u.opts);o.push(d),ei("Chart.applySeries() - created new series",d);break;case"remove":ei(`Chart.applySeries() - removing series at previous idx ${u.idx}`,u.series);break;case"no-op":o.push(u.series),ei(`Chart.applySeries() - no change to series at previous idx ${u.idx}`,u.series);break;case"series-grouping":case"update":default:let{series:h,diff:f,idx:p}=u;ei(`Chart.applySeries() - applying series diff previous idx ${p}`,f,h),this.applySeriesValues(h,f),h.markNodeDataDirty(),o.push(h)}for(let u=0;u<o.length;u++)o[u]._declarationOrder=u;return ei("Chart.applySeries() - final series instances",o),n.series=o,l?"series-grouping-change":a?"data-change":c?"updated":"no-op"}applyAxes(n,i,r,s,o=[],a=!1){if(!("axes"in i)||!i.axes)return!1;o=["axes[].type",...o];let{axes:l}=i;if(!(s==="replaced")&&n.axes.length===l.length&&n.axes.every((h,f)=>h.type===l[f].type)&&pa(r))return n.axes.forEach((h,f)=>{let p=r.axes?.[f]??{},m=mn(p,l[f]);ei(`Chart.applyAxes() - applying axis diff idx ${f}`,m);let y=`axes[${f}]`;cr(h,m,N(M({},fy),{path:y,skip:o}))}),!0;ei(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),n.axes=this.createAxis(l,o);let d={x:[],y:[]};return n.axes.forEach(h=>d[h.direction].push(h.getAxisGroup())),a&&(this.ctx.regionManager.updateRegion("horizontal-axes",...d.x),this.ctx.regionManager.updateRegion("vertical-axes",...d.y)),!0}createSeries(n){let i=Qt.create(n.type,this.getModuleContext());return this.applySeriesOptionModules(i,n),this.applySeriesValues(i,n),i}applySeriesOptionModules(n,i){let r=n.createModuleContext(),s=n.getModuleMap();for(let o of Hr.byType("series-option"))o.optionsKey in i&&o.seriesTypes.includes(n.type)&&s.addModule(o,a=>new a.instanceConstructor(r))}applySeriesValues(n,i){let r=n.getModuleMap(),d=i,{type:s,data:o,listeners:a,seriesGrouping:l,showInMiniChart:c}=d,u=Ve(d,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(let h of Fa)if(h.type==="series-option"&&h.optionsKey in u){let f=r.getModule(h.optionsKey);if(f){let p=u[h.optionsKey];delete u[h.optionsKey],f.properties.set(p)}}n.properties.set(u),"data"in i&&n.setOptionsData(o),a&&this.registerListeners(n,a),"seriesGrouping"in i&&(l==null?n.seriesGrouping=void 0:n.seriesGrouping=M(M({},n.seriesGrouping),l))}createAxis(n,i){let r=[],s=this.getModuleContext();for(let o=0;o<n.length;o++){let a=n[o],l=qr.create(a.type,s);this.applyAxisModules(l,a),cr(l,a,N(M({},fy),{path:`axes[${o}]`,skip:i})),r.push(l)}return X2(r),r}applyAxisModules(n,i){let r=n.createModuleContext(),s=n.getModuleMap();for(let o of Hr.byType("axis-option")){let a=i[o.optionsKey]!=null;a!==s.isEnabled(o)&&(a?(s.addModule(o,l=>new l.instanceConstructor(r)),n[o.optionsKey]=s.getModule(o)):(s.removeModule(o),delete n[o.optionsKey]))}}registerListeners(n,i){n.clearEventListeners();for(let[r,s]of Object.entries(i))Qs(s)&&n.addEventListener(r,s)}};return t.chartsInstances=new WeakMap,t})();g([Wt({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),wt.chartsInstances.set(t,this))},oldValue(t){wt.chartsInstances.delete(t)}})],wt.prototype,"container",2);g([Wt({newValue(t){this.resize("width option",{inWidth:t})}})],wt.prototype,"width",2);g([Wt({newValue(t){this.resize("height option",{inHeight:t})}})],wt.prototype,"height",2);g([Wt({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],wt.prototype,"minWidth",2);g([Wt({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],wt.prototype,"minHeight",2);g([b(z)],wt.prototype,"padding",2);g([b(Pe)],wt.prototype,"titlePadding",2);g([b(z)],wt.prototype,"seriesArea",2);g([b(z)],wt.prototype,"title",2);g([b(z)],wt.prototype,"subtitle",2);g([b(z)],wt.prototype,"footnote",2);g([b(z)],wt.prototype,"keyboard",2);g([b(je(["standalone","integrated"],"a chart mode"))],wt.prototype,"mode",2);g([Wt({changeValue(t,e){this.onAxisChange(t,e)}})],wt.prototype,"axes",2);g([Wt({changeValue(t,e){this.onSeriesChange(t,e)}})],wt.prototype,"series",2);var ja=wt,vB=class{constructor(t,e,n){this.root=new DB(t,e,n)}clear(t){this.root.clear(t)}addValue(t,e){let n={hitTester:t,value:e,distanceSquared:(i,r)=>t.distanceSquared(i,r)};this.root.addElem(n)}find(t,e){let n={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,n),n.best}},bB=class{constructor(t,e,n,i){this.nw=t,this.ne=e,this.sw=n,this.se=i}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,n){this.nw.find(t,e,n),this.ne.find(t,e,n),this.sw.find(t,e,n),this.se.find(t,e,n)}},xB=class{constructor(t,e,n){this.capacity=t,this.maxdepth=e,this.boundary=n??V.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,n){this.findCondition(t,e,n)&&(this.subdivisions===void 0?this.findAction(t,e,n):this.subdivisions.find(t,e,n))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(let e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){let{x:t,y:e,width:n,height:i}=this.boundary,{capacity:r}=this,s=this.maxdepth-1,o=n/2,a=i/2,l=new V(t,e,o,a),c=new V(t+o,e,o,a),u=new V(t,e+a,o,a),d=new V(t+o,e+a,o,a);return new bB(this.child(r,s,l),this.child(r,s,c),this.child(r,s,u),this.child(r,s,d))}},DB=class nE extends xB{addCondition(e){let{x:n,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(n,i)}findCondition(e,n,i){let{best:r}=i;return r.distanceSquared!==0&&this.boundary.distanceSquared(e,n)<r.distanceSquared}findAction(e,n,i){let r=Zh(e,n,this.elems,i.best.distanceSquared);r.nearest!==void 0&&r.distanceSquared<i.best.distanceSquared&&(i.best=r)}child(e,n,i){return new nE(e,n,i)}},Kt=(()=>{let t=class extends nn{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){let{x:e,y:n,size:i}=this,{center:r}=this.constructor;return new V(e-i*r.x,n-i*r.y,i,i)}computeTransformedBBox(){return super.computeTransformedBBox()}applyPath(e,n){let{path:i}=this,{x:r,y:s}=this;this.repeat!=null&&(r=0,s=0),i.clear();for(let{x:o,y:a,t:l}of n)r+=o*e,s+=a*e,l==="move"?i.moveTo(r,s):i.lineTo(r,s);i.closePath()}executeFill(e,n){if(!n)return;if(this.repeat==null)return super.executeFill(e,n);e.save();let i=this.translationX,r=this.translationY;for(let s of this.repeat)e.translate(s.x-i,s.y-r),e.fill(n),i=s.x,r=s.y;e.restore()}executeStroke(e,n){if(!n)return;if(this.repeat==null)return super.executeStroke(e,n);e.save();let i=this.translationX,r=this.translationY;for(let s of this.repeat)e.translate(s.x-i,s.y-r),e.stroke(n),i=s.x,r=s.y;e.restore()}};return t.center={x:.5,y:.5},t})();g([X()],Kt.prototype,"x",2);g([X()],Kt.prototype,"y",2);g([X({convertor:Math.abs})],Kt.prototype,"size",2);g([X()],Kt.prototype,"repeat",2);var Ws=(()=>{let t=class extends Kt{updatePath(){let{x:e,y:n,path:i,size:r}=this,s=r/2;i.clear(),i.arc(e,n,s,0,Math.PI*2),i.closePath()}};return t.className="Circle",t})(),SB=(()=>{let t=class iE extends Kt{updatePath(){let n=this.size/4.2;super.applyPath(n,iE.moves)}};return t.className="Cross",t.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],t})(),wB=SB,MB=(()=>{let t=class rE extends Kt{updatePath(){let n=this.size/2;super.applyPath(n,rE.moves)}};return t.className="Diamond",t.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],t})(),sE=MB,IB=(()=>{let t=class extends Kt{rad(e){return e/180*Math.PI}updatePath(){let{x:e,path:n,size:i,rad:r}=this,s=i/4,o=this.y+s/2;n.clear(),n.arc(e-s,o-s,s,r(130),r(330)),n.arc(e+s,o-s,s,r(220),r(50)),n.lineTo(e,o+s),n.closePath()}};return t.className="Heart",t})(),CB=(()=>{let t=class extends Kt{updatePath(){let{path:e,x:n,y:i}=this,r=this.size,s=.5,o=1;e.clear(),e.moveTo(n+(.15625-s)*r,i+(.34375-o)*r),e.cubicCurveTo(n+(.15625-s)*r,i+(.151491-o)*r,n+(.307741-s)*r,i+(0-o)*r,n+(.5-s)*r,i+(0-o)*r),e.cubicCurveTo(n+(.692259-s)*r,i+(0-o)*r,n+(.84375-s)*r,i+(.151491-o)*r,n+(.84375-s)*r,i+(.34375-o)*r),e.cubicCurveTo(n+(.84375-s)*r,i+(.493824-o)*r,n+(.784625-s)*r,i+(.600181-o)*r,n+(.716461-s)*r,i+(.695393-o)*r),e.cubicCurveTo(n+(.699009-s)*r,i+(.719769-o)*r,n+(.681271-s)*r,i+(.743104-o)*r,n+(.663785-s)*r,i+(.766105-o)*r),e.cubicCurveTo(n+(.611893-s)*r,i+(.834367-o)*r,n+(.562228-s)*r,i+(.899699-o)*r,n+(.528896-s)*r,i+(.980648-o)*r),e.cubicCurveTo(n+(.524075-s)*r,i+(.992358-o)*r,n+(.512663-s)*r,i+(1-o)*r,n+(.5-s)*r,i+(1-o)*r),e.cubicCurveTo(n+(.487337-s)*r,i+(1-o)*r,n+(.475925-s)*r,i+(.992358-o)*r,n+(.471104-s)*r,i+(.980648-o)*r),e.cubicCurveTo(n+(.487337-s)*r,i+(1-o)*r,n+(.475925-s)*r,i+(.992358-o)*r,n+(.471104-s)*r,i+(.980648-o)*r),e.cubicCurveTo(n+(.437772-s)*r,i+(.899699-o)*r,n+(.388107-s)*r,i+(.834367-o)*r,n+(.336215-s)*r,i+(.766105-o)*r),e.cubicCurveTo(n+(.318729-s)*r,i+(.743104-o)*r,n+(.300991-s)*r,i+(.719769-o)*r,n+(.283539-s)*r,i+(.695393-o)*r),e.cubicCurveTo(n+(.215375-s)*r,i+(.600181-o)*r,n+(.15625-s)*r,i+(.493824-o)*r,n+(.15625-s)*r,i+(.34375-o)*r),e.closePath()}};return t.className="MapPin",t.center={x:.5,y:1},t})(),EB=(()=>{let t=class oE extends Kt{updatePath(){let n=this.size/3;super.applyPath(n,oE.moves)}};return t.className="Plus",t.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],t})(),TB=EB,Fh=(()=>{let t=class extends Kt{updatePath(){let{path:e,x:n,y:i}=this,r=this.size/2;e.clear(),e.moveTo(this.align(n-r),this.align(i-r)),e.lineTo(this.align(n+r),this.align(i-r)),e.lineTo(this.align(n+r),this.align(i+r)),e.lineTo(this.align(n-r),this.align(i+r)),e.closePath()}};return t.className="Square",t})(),AB=(()=>{let t=class extends Kt{updatePath(){let{x:e,y:n,path:i,size:r}=this,s=5,o=r/2,a=Math.PI/2;i.clear();for(let l=0;l<s*2;l++){let c=l%2===0?r:o,u=l*Math.PI/s-a,d=e+Math.cos(u)*c,h=n+Math.sin(u)*c;i.lineTo(d,h)}i.closePath()}};return t.className="Star",t})(),NB=(()=>{let t=class aE extends Kt{updatePath(){let n=this.size*1.1;super.applyPath(n,aE.moves)}};return t.className="Triangle",t.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],t})(),ga=NB,lE={circle:Ws,cross:wB,diamond:sE,heart:IB,pin:CB,plus:TB,square:Fh,star:AB,triangle:ga},kB=Object.keys(lE);function cE(t){return typeof t=="string"&&kB.includes(t)}function Vi(t=Fh){return cE(t)?lE[t]:typeof t=="function"?t:Fh}var Nv=class extends Jc{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){let n=ke.is(t),i=ke.is(e);return{isContinuousX:n,isContinuousY:i,xScaleType:t?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){let t=this.axes.x?.scale,e=this.axes.y?.scale;return this.moduleMap.mapModules(n=>n.getPropertyDefinitions(this.getScaleInformation({xScale:t,yScale:e}))).flat()}requestDataModel(t,e,n){return k(this,null,function*(){n.props.push(...this.getModulePropertyDefinitions());let{dataModel:i,processedData:r}=yield t.request(this.id,e??[],n);return this.dataModel=i,this.processedData=r,this.dispatch("data-processed",{dataModel:i,processedData:r}),{dataModel:i,processedData:r}})}isProcessedDataAnimatable(){let t=this.processedData?.reduced?.animationValidation;if(!t)return!0;let{orderedKeys:e,uniqueKeys:n}=t;return e&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){let e=this.getNodeData();if(e===void 0||e.length===0)return;let n=this.computeFocusDatumIndex(t,e);if(n===void 0)return;let{showFocusBox:i}=this,r=e[n],s=N(M({},t),{datumIndex:n}),o=this.computeFocusBounds(s);if(o!==void 0)return{bounds:o,showFocusBox:i,datum:r,datumIndex:n}}computeFocusDatumIndex(t,e){let n=a=>{let{missing:l=!1,enabled:c=!0}=e[a];return!l&&c},i=a=>{for(;a>=0&&!n(a);)a--;return a===-1?void 0:a},r=a=>{for(;a<e.length&&!n(a);)a++;return a===e.length?void 0:a},s,o=ae(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?s=i(o):t.datumIndexDelta>0?s=r(o):(s??(s=r(o)),s??(s=i(o))),s===void 0?t.datumIndexDelta===0?void 0:t.datumIndex-t.datumIndexDelta:s}},yr=class extends le{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};g([b(we,{optional:!0})],yr.prototype,"fill",2);g([b(Ie,{optional:!0})],yr.prototype,"fillOpacity",2);g([b(we,{optional:!0})],yr.prototype,"stroke",2);g([b(O,{optional:!0})],yr.prototype,"strokeWidth",2);g([b(Ie,{optional:!0})],yr.prototype,"strokeOpacity",2);g([b(gr,{optional:!0})],yr.prototype,"lineDash",2);g([b(O,{optional:!0})],yr.prototype,"lineDashOffset",2);var bf=class extends le{};g([b(O,{optional:!0})],bf.prototype,"strokeWidth",2);g([b(Ie,{optional:!0})],bf.prototype,"dimOpacity",2);g([b(H,{optional:!0})],bf.prototype,"enabled",2);var uE=class extends le{constructor(){super(...arguments),this.color="black"}};g([b(we,{optional:!0})],uE.prototype,"color",2);var eu=class extends le{constructor(){super(...arguments),this.item=new yr,this.series=new bf,this.text=new uE}};g([b(z)],eu.prototype,"item",2);g([b(z)],eu.prototype,"series",2);g([b(z)],eu.prototype,"text",2);var ci=class extends le{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new eu}};g([b(P,{optional:!0})],ci.prototype,"id",2);g([b(H)],ci.prototype,"visible",2);g([b(H)],ci.prototype,"showInLegend",2);g([b(P)],ci.prototype,"cursor",2);g([b(lf)],ci.prototype,"nodeClickRange",2);g([b(z)],ci.prototype,"highlightStyle",2);var no={x:["xKey"],y:["yKey"]},io={x:["xName"],y:["yName"]},kv=class extends Qc{constructor(t,e,n,i){super(t,e,n,i),this.xKey=i.properties.xKey,this.yKey=i.properties.yKey}},os=class extends ci{};g([b(P,{optional:!0})],os.prototype,"legendItemName",2);var as=class extends Nv{constructor(d){var h=d,{pathsPerSeries:t=1,hasMarkers:e=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:i=[],datumSelectionGarbageCollection:r=!0,markerSelectionGarbageCollection:s=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:a,directionKeys:l,directionNames:c}=h,u=Ve(h,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(M({directionKeys:l,directionNames:c,canHaveAxes:!0},u)),this.NodeEvent=kv,this.dataNodeGroup=this.contentGroup.appendChild(new U({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new U({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new U({name:`${this.id}-series-labels`,zIndex:8,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=et.select(this.labelGroup,Me),this.highlightSelection=et.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=et.select(this.highlightLabel,Me),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=_e.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:e,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:i,directionKeys:l,directionNames:c,animationResetFns:a,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:s},this.paths=[];for(let f=0;f<t;f++)this.paths[f]=new nn,this.paths[f].zIndex=4,this.paths[f].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",f),this.contentGroup.appendChild(this.paths[f]);this.datumSelection=et.select(this.dataNodeGroup,()=>this.nodeFactory(),r),this.markerSelection=et.select(this.markerGroup,()=>this.markerFactory(),s),this.animationState=new Yc("empty",{empty:{update:{target:"ready",action:f=>this.animateEmptyUpdateReady(f)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:f=>this.animateReadyHighlight(f),highlightMarkers:f=>this.animateReadyHighlightMarkers(f),resize:f=>this.animateReadyResize(f),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:f=>this.animateWaitingUpdateReady(f)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:f=>this.resetAllAnimation(f),reset:"empty"},clearing:{update:{target:"empty",action:f=>this.animateClearingUpdateEmpty(f)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"?this.animationState.transition("skip"):t==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}update(e){return k(this,arguments,function*({seriesRect:t}){let{visible:n,_contextNodeData:i}=this,s=this.ctx.highlightManager?.getActiveHighlight()?.series===this,o=this.checkResize(t),a=yield this.updateHighlightSelection(s);yield this.updateSelections(n),yield this.updateNodes(a,s,n);let l=this.getAnimationData(t,i);l&&(o&&this.animationState.transition("resize",l),this.animationState.transition("update",l))})}updateSelections(t){return k(this,null,function*(){var e;let n=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!t&&n)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=yield this.createNodeData();let i=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=i)),this.minRectsCache.dirtyNodeData=!0;let{dataModel:r,processedData:s}=this;r!==void 0&&s!==void 0&&this.dispatch("data-update",{dataModel:r,processedData:s})}yield this.updateSeriesSelections()}})}updateSeriesSelections(t){return k(this,null,function*(){let{datumSelection:e,labelSelection:n,markerSelection:i,paths:r}=this,s=this._contextNodeData;if(!s)return;let{nodeData:o,labelData:a,itemId:l}=s;yield this.updatePaths({seriesHighlighted:t,itemId:l,contextData:s,paths:r}),this.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:n}),this.opts.hasMarkers&&(this.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:i}))})}markerFactory(){let t=Vi();return new t}getGroupZIndexSubOrder(t,e=0){let n=super.getGroupZIndexSubOrder(t,e);if(t==="paths"){let[i]=n,r=this.opts.pathsZIndexSubOrderOffset[e]??0;n[0]=Qs(i)?()=>Number(i())+r:Number(i)+r}return n}updateNodes(t,e,n){return k(this,null,function*(){let{highlightSelection:i,highlightLabelSelection:r,opts:{hasMarkers:s,hasHighlightedLabels:o}}=this,a=!this.ctx.animationManager.isSkipped(),l=this.visible&&this._contextNodeData!=null&&n;this.rootGroup.visible=a||l,this.contentGroup.visible=a||l,this.highlightGroup.visible=(a||l)&&e;let c=this.getOpacity();s?(yield this.updateMarkerNodes({markerSelection:i,isHighlight:!0}),this.animationState.transition("highlightMarkers",i)):(yield this.updateDatumNodes({datumSelection:i,isHighlight:!0}),this.animationState.transition("highlight",i)),o&&(yield this.updateLabelNodes({labelSelection:r}));let{dataNodeGroup:u,markerGroup:d,datumSelection:h,labelSelection:f,markerSelection:p,paths:m,labelGroup:y}=this,{itemId:v}=this.contextNodeData??{};u.opacity=c,u.visible=a||l,y.visible=l,s&&(d.opacity=c,d.zIndex=u.zIndex>=4?u.zIndex:u.zIndex+1,d.visible=l),y&&(y.opacity=c),yield this.updatePathNodes({seriesHighlighted:e,itemId:v,paths:m,opacity:c,visible:l,animationEnabled:a}),u.visible&&(yield this.updateDatumNodes({datumSelection:h,highlightedItems:t,isHighlight:!1}),yield this.updateLabelNodes({labelSelection:f}),s&&(yield this.updateMarkerNodes({markerSelection:p,isHighlight:!1})))})}getHighlightLabelData(t,e){let n=t.filter(i=>i.datum===e.datum&&i.itemId===e.itemId);return n.length===0?void 0:n}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return k(this,null,function*(){let{highlightSelection:e,highlightLabelSelection:n,_contextNodeData:i}=this;if(!i)return;let r=this.ctx.highlightManager?.getActiveHighlight(),s=t&&r?.datum?r:void 0,o,a;if(s!=null){let l=this.isLabelEnabled(),{labelData:c,nodeData:u}=i;a=this.getHighlightData(u,s),o=l?this.getHighlightLabelData(c,s):void 0}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:a,highlightSelection:e}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:n}),a})}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:t}of this.datumSelection)t.datum.missing!==!0&&(yield t)}getQuadTree(){if(this.quadtree===void 0){let{width:t,height:e}=this.ctx.scene.canvas,n=new V(0,0,t,e);this.quadtree=new vB(100,10,n),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){let e=super.pickNodeExactShape(t);if(e)return e;let{x:n,y:i}=t,{opts:{hasMarkers:r}}=this,s,{dataNodeGroup:o,markerGroup:a}=this;if(s=o.pickNode(n,i),!s&&r&&(s=a?.pickNode(n,i)),s&&s.datum.missing!==!0)return{datum:s.datum,distance:0};for(let l of this.moduleMap.modules()){let{datum:c}=l.pickNodeExact(t)??{};if(c!=null&&c?.missing!==!0)return{datum:c,distance:0}}}pickNodeClosestDatum(t){let{x:e,y:n}=t,{axes:i,rootGroup:r,_contextNodeData:s}=this;if(!s)return;let o=i.x,a=i.y,l=r.transformPoint(e,n),c=1/0,u;for(let d of s.nodeData){let{point:{x:h=NaN,y:f=NaN}={}}=d;if(isNaN(h)||isNaN(f)||!(o?.inRange(h)&&a?.inRange(f)))continue;let m=Math.max((l.x-h)**2+(l.y-f)**2,0);m<c&&(c=m,u=d)}for(let d of this.moduleMap.modules()){let h=d.pickNodeNearest(t);if(h!==void 0&&h.distanceSquared<c){c=h.distanceSquared,u=h.datum;break}}if(u){let d=Math.max(Math.sqrt(c)-(u.point?.size??0),0);return{datum:u,distance:d}}}pickNodeMainAxisFirst(t,e){let{x:n,y:i}=t,{axes:r,rootGroup:s,_contextNodeData:o}=this;if(!o)return;let a=r.x,l=r.y,c=[a,l].filter(m=>m instanceof Pa).map(m=>m.direction);if(e&&c.length===0)return;let[u="x"]=c,d=s.transformPoint(n,i),h=u==="x"?[d.x,d.y]:[d.y,d.x],f=[1/0,1/0],p;for(let m of o.nodeData){let{x:y=NaN,y:v=NaN}=m.point??m.midPoint??{};if(isNaN(y)||isNaN(v)||m.missing===!0||!(a?.inRange(y)&&l?.inRange(v)))continue;let D=u==="x"?[y,v]:[v,y],S=!0;for(let w=0;w<D.length;w++){let I=Math.abs(D[w]-h[w]);if(I>f[w]){S=!1;break}I<f[w]&&(f[w]=I,f.fill(1/0,w+1,f.length))}S&&(p=m)}if(p){let m=Math.max(f[0]**2+f[1]**2-(p.point?.size??0),0);for(let y of this.moduleMap.modules()){let v=y.pickNodeMainAxisFirst(t);if(v!==void 0&&v.distanceSquared<m){p=v.datum,m=v.distanceSquared;break}}return{datum:p,distance:Math.sqrt(m)}}}onLegendItemClick(t){let{legendItemName:e}=this.properties,{enabled:n,itemId:i,series:r}=t,s=e!=null&&e===t.legendItemName;(r.id===this.id||s)&&this.toggleSeriesItem(i,n)}onLegendItemDoubleClick(t){let{enabled:e,itemId:n,series:i,numVisibleItems:r}=t,{legendItemName:s}=this.properties,o=s!=null&&s===t.legendItemName;i.id===this.id||o?this.toggleSeriesItem(n,!0):e&&r===1?this.toggleSeriesItem(n,!0):this.toggleSeriesItem(n,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){let{dirtyNodeData:n,sizeCache:i,minRect:r,minVisibleRect:s}=this.minRectsCache,o=JSON.stringify({width:t,height:e});if(!(o!==i)&&!n&&r&&s)return{minRect:r,minVisibleRect:s};let l=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l?.minRect,minVisibleRect:l?.minVisibleRect},l}computeMinRects(t,e){let n=this._contextNodeData;if(!n?.nodeData.length)return;let{nodeData:i}=n,r=Array(i.length),s=Array(i.length);for(let[x,{midPoint:D}]of i.entries())r[x]=D?.x??0,s[x]=D?.y??0;r.sort((x,D)=>x-D),s.sort((x,D)=>x-D);let o,a,l,c,u=0,d=0;for(let x=1;x<i.length;x++)r[x]>=0&&(o??(o=x)),r[x]>t&&(a??(a=x)),s[x]>=0&&(l??(l=x)),s[x]>e&&(c??(c=x)),u=Math.max(u,r[x]-r[x-1]),d=Math.max(d,s[x]-s[x-1]);a??(a=i.length),c??(c=i.length);let h=o!=null&&a!=null?r.slice(o,a):[],f=l!=null&&c!=null?s.slice(l,c):[],p=0,m=0;for(let x=1;x<Math.max(h.length,f.length);x++){let D=h[x],S=h[x-1],w=f[x],I=f[x-1];D!=null&&S!=null&&(p=Math.max(p,D-S)),w!=null&&I!=null&&(m=Math.max(m,w-I))}let y=new V(0,0,u,d),v=new V(0,0,p,m);return{minRect:y,minVisibleRect:v}}updateHighlightSelectionItem(t){let{opts:{hasMarkers:e}}=this,{items:n,highlightSelection:i}=t,r=n??[];if(e){let s=i;return this.updateMarkerSelection({nodeData:r,markerSelection:s})}else return this.updateDatumSelection({nodeData:r,datumSelection:i})}updateHighlightSelectionLabel(t){return this.updateLabelSelection({labelData:t.items??[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return k(this,null,function*(){return t.datumSelection})}updateDatumNodes(t){return k(this,null,function*(){})}updateMarkerSelection(t){return k(this,null,function*(){return t.markerSelection})}updateMarkerNodes(t){return k(this,null,function*(){})}updatePaths(t){return k(this,null,function*(){t.paths.forEach(e=>e.visible=!1)})}updatePathNodes(t){return k(this,null,function*(){let{paths:e,opacity:n,visible:i}=t;for(let r of e)r.opacity=n,r.visible=i})}resetAllAnimation(t){let{path:e,datum:n,label:i,marker:r}=this.opts?.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&t.paths.forEach(s=>{dt([s],e)}),n&&dt([t.datumSelection],n),i&&dt([t.labelSelection],i),r&&this.opts.hasMarkers&&dt([t.markerSelection],r),t.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){let{datum:e}=this.opts?.animationResetFns??{};e&&dt([t],e)}animateReadyHighlightMarkers(t){let{marker:e}=this.opts?.animationResetFns??{};e&&dt([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){let t=this.getAnimationData();t&&this.animationState.transition("clear",t)}getAnimationData(t,e){let{_contextNodeData:n}=this;return n?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:n,previousContextData:e,paths:this.paths,seriesRect:t}:void 0}calculateScaling(){let t={};for(let e of Object.values(av)){let n=this.axes[e];if(n){if(n.scale instanceof dv){let{range:i,domain:r}=n.scale;t[e]={type:"log",convert:s=>n.scale.convert(s),domain:[r[0],r[1]],range:[i[0],i[1]]}}else if(n.scale instanceof ke){let{range:i}=n.scale,r=n.scale.getDomain();t[e]={type:"continuous",domain:[r[0],r[1]],range:[i[0],i[1]]}}else if(n.scale){let{domain:i}=n.scale;t[e]={type:"category",domain:i,range:i.map(r=>n.scale.convert(r))}}}}return t}},RB=["top","right","bottom","left"],LB=(()=>{let t=class e extends ja{constructor(n,i){super(n,i),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisAreaWidths=new Map,this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(n,i){super.onAxisChange(n,i),this.zoomManager.updateAxes(n)}destroySeries(n){super.destroySeries(n),this.firstSeriesTranslation=!0}performLayout(){return k(this,null,function*(){let n=yield br(e.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,{animationRect:a,seriesRect:l,visibility:c,clipSeries:u}=this.updateAxes(n);this.seriesRoot.visible=c.series,this.seriesRect=l,this.animationRect=a;let{x:d,y:h}=l;if(i){for(let y of[r,s,o])y.translationX=Math.floor(d),y.translationY=Math.floor(h);this.firstSeriesTranslation=!1}else{let{translationX:y,translationY:v}=r;Ui(this.id,"seriesRect",this.ctx.animationManager,[r,o,s],{translationX:y,translationY:v},{translationX:Math.floor(d),translationY:Math.floor(h)},{phase:"update"})}let f=l.clone().grow(this.seriesArea.padding);this.hoverRect=f;let p=this.seriesArea.clip||u?f:void 0;r.setClipRectInGroupCoordinateSpace(p),o.setClipRectInGroupCoordinateSpace(p),s.setClipRectInGroupCoordinateSpace(p),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:u,series:{rect:l,paddedRect:f,visible:c.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(y=>M({id:y.id},y.getLayoutState()))});let m=this.modulesManager.mapModules(y=>y.performCartesianLayout?.({seriesRect:l}));return yield Promise.all(m),n})}updateAxes(n){let i=this.axes.flatMap(x=>x.crossLines??[]).map(x=>x.id),r=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every((x,D)=>i[D]===x),s,o,a;r?(s=new Map(this._lastAxisAreaWidths.entries()),o=this._lastClipSeries,a=M({},this._lastVisibility)):(s=new Map,o=!1,a={crossLines:!0,series:!0},this._lastCrossLineIds=i);let l=new Set(this.axes.map(x=>x.position));for(let x of s.keys())l.has(x)||s.delete(x);let c=(x,D,S)=>[...x.keys()].some(w=>!s.has(w))||a.crossLines!==S.crossLines||a.series!==S.series||o!==D?!1:[...s.entries()].every(([w,I])=>{let C=x.get(w);return I!=null||C!=null?I===C:!0}),u=x=>{for(let[D,S]of x.entries()){if(S&&Math.abs(S)===1/0){x.set(D,0);continue}x.set(D,S!=null?Math.ceil(S):S)}return x},d=new Map,h={},f=!1,p=this.seriesRect?.clone(),m=0,y={};do{s=new Map(d.entries()),o=f,Object.assign(a,h);let x=this.updateAxesPass(s,n.clone(),p);if(d=u(x.axisAreaWidths),h=x.visibility,f=x.clipSeries,{seriesRect:p,primaryTickCounts:y}=x,m++>10){L.warn("unable to find stable axis layout.");break}}while(!c(d,f,h));this.axes.forEach(x=>{x.update(y[x.direction])});let v=5;return this.axes.forEach(x=>{if(x.setCrossLinesVisible(a.crossLines),!!p)switch(x.clipGrid(p.x,p.y,p.width+v,p.height+v),x.position){case"left":case"right":x.clipTickLines(n.x,p.y,n.width+v,p.height+v);break;case"top":case"bottom":x.clipTickLines(p.x,n.y,p.width+v,n.height+v);break}}),this._lastAxisAreaWidths=s,this._lastVisibility=a,this._lastClipSeries=o,{seriesRect:p,animationRect:n,visibility:a,clipSeries:o}}updateAxesPass(n,i,r){let s=new Map,o=new Map,a={series:!0,crossLines:!0},l=!1,c={},u=this.applySeriesPadding(i),d=r?this.buildCrossLinePadding(n):{},h=this.buildAxisBound(u,n,d,a),f=this.buildSeriesRect(h,n);for(let y of this.axes){let{position:v="left"}=y,{clipSeries:x,axisThickness:D}=this.calculateAxisDimensions({axis:y,seriesRect:f,paddedBounds:u,primaryTickCounts:c,clipSeries:l});s.set(y.id,D),o.has(v)||o.set(v,[]),o.get(v)?.push(y),l=l||x}let p=new Map,m=new Map;for(let[y,v]of o.entries())p.set(y,this.calculateAxisArea(v,s,m));for(let[y,v]of o.entries())this.positionAxes({axes:v,position:y,axisWidths:s,axisOffsets:m,axisAreaWidths:p,axisBound:h,seriesRect:f});return{clipSeries:l,seriesRect:f,axisAreaWidths:p,visibility:a,primaryTickCounts:c}}buildCrossLinePadding(n){let i={};this.axes.forEach(r=>{r.crossLines?.forEach(s=>{s.calculatePadding?.(i)})});for(let[r,s=0]of Object.entries(i))i[r]=Math.max(s-(n.get(r)??0),0);return i}applySeriesPadding(n){let i=n.clone(),r=this.axes.slice().reverse();return RB.forEach(s=>{let o=this.seriesArea.padding[s],a=r.find(l=>l.position===s);a?a.seriesAreaPadding=o:i.shrink(o,s)}),i}buildAxisBound(n,i,r,s){let o=n.clone(),{top:a=0,right:l=0,bottom:c=0,left:u=0}=r,d=u+l,h=a+c,f=(i.get("left")??0)+(i.get("right")??0)+d,p=(i.get("top")??0)+(i.get("bottom")??0)+h;return o.width<=f||o.height<=p?(s.crossLines=!1,s.series=!1,o):(o.x+=u,o.y+=a,o.width-=d,o.height-=h,o)}buildSeriesRect(n,i){let r=n.clone();return r.x+=i.get("left")??0,r.y+=i.get("top")??0,r.width-=(i.get("left")??0)+(i.get("right")??0),r.height-=(i.get("top")??0)+(i.get("bottom")??0),r.width=Math.max(0,r.width),r.height=Math.max(0,r.height),r}clampToOutsideSeriesRect(n,i,r,s){let{x:o,y:a,width:l,height:c}=n,d=[o,a,o+l,a+c][(r==="x"?0:1)+(s===1?0:2)];return(s===1?Math.min:Math.max)(i,d)}calculateAxisDimensions(n){let{axis:i,seriesRect:r,paddedBounds:s,primaryTickCounts:o}=n,{clipSeries:a}=n,{position:l="left",direction:c}=i;this.sizeAxis(i,r,l);let u=i.nice?o[c]:void 0,d=c==="y",h=.3;i.thickness?i.maxThickness=i.thickness:i.maxThickness=(d?s.width:s.height)*h;let f=i.calculateLayout(u);u=f.primaryTickCount,o[c]??(o[c]=u),a||(a=i.dataDomain.clipped||i.visibleRange[0]>0||i.visibleRange[1]<1);let p;return i.thickness!=null&&i.thickness>0?p=i.thickness:p=d?f.bbox.width:f.bbox.height,p=Math.ceil(p),{clipSeries:a,axisThickness:p,primaryTickCount:u}}sizeAxis(n,i,r){let s=n instanceof Pa||n instanceof Da,o=r==="left"||r==="right",{min:a=0,max:l=1}=n.disableZoom?{}:this.ctx.zoomManager.getAxisZoom(n.id),{width:c,height:u}=i,d=0,h=o?u:c,f=d,p=h,{width:m,unit:y,align:v}=n.layoutConstraints;y==="px"?p=f+m:p=p*m/100,v==="end"&&(f=h-(p-f),p=h),s&&o?[a,l]=[1-l,1-a]:o&&([f,p]=[p,f]),n.range=[f,p],n.visibleRange=[a,l],n.gridLength=o?c:u}calculateAxisArea(n,i,r){let s=0,o=0;for(let a of n){r.set(a.id,o);let l=i.get(a.id)??0;s=Math.max(s,o+l),a.layoutConstraints.stacked&&(o+=l+15)}return s}positionAxes(n){let{axes:i,axisBound:r,axisWidths:s,axisOffsets:o,axisAreaWidths:a,seriesRect:l,position:c}=n,u=a.get(c)??0,d="x",h="y",f=1,p=0;(c==="top"||c==="bottom")&&(d="y",h="x",p+=1),p+=r[d],(c==="right"||c==="bottom")&&(f=-1,p+=d==="x"?r.width:r.height);for(let m of i){let y=a.get(h==="x"?"left":"top")??0;m.translation[h]=r[h]+y;let v=s.get(m.id)??0,x=o.get(m.id)??0;m.translation[d]=this.clampToOutsideSeriesRect(l,p+f*(x+v),d,f),m.gridPadding=u-x-v,m.updatePosition()}}shouldFlipXY(){return!this.series.some(n=>!(n instanceof as&&n.shouldFlipXY()))}};return t.className="CartesianChart",t.type="cartesian",t})(),Mh=(()=>{let t=class dE{constructor(n,i){this.factoryApi=i,this.chart=n}static isInstance(n){return n instanceof dE||n.constructor?.name==="AgChartInstanceProxy"&&n.chart!=null?!0:n.chart!=null&&this.validateImplementation(n)}static validateImplementation(n){let i=["getOptions","destroy"],r=Object.keys(Object.getPrototypeOf(n)??{});return i.every(s=>r.includes(s))}update(n){return k(this,null,function*(){this.factoryApi.createOrUpdate(n,this),yield this.chart.waitForUpdate()})}updateDelta(n){return k(this,null,function*(){this.factoryApi.updateUserDelta(this,n),yield this.chart.waitForUpdate()})}getOptions(){let n=Rt(this.chart.getOptions());for(let i in n)i.startsWith("_")&&delete n[i];return n}waitForUpdate(){return this.chart.waitForUpdate()}download(n){return k(this,null,function*(){let i=yield this.prepareResizedChart(this,n);try{i.chart.download(n?.fileName,n?.fileFormat)}finally{i.destroy()}})}getImageDataURL(n){return k(this,null,function*(){let i=yield this.prepareResizedChart(this,n);try{return i.chart.getCanvasDataURL(n?.fileFormat)}finally{i.destroy()}})}getState(){return this.factoryApi.caretaker.save(this.chart.ctx.annotationManager)}setState(n){return k(this,null,function*(){this.factoryApi.caretaker.restore(n,this.chart.ctx.annotationManager),yield this.chart.waitForUpdate()})}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}prepareResizedChart(r){return k(this,arguments,function*({chart:n},i={}){let s=i.width??n.width??n.ctx.scene.canvas.width,o=i.height??n.height??n.ctx.scene.canvas.height,a=ue({container:document.createElement("div"),overrideDevicePixelRatio:1,width:s,height:o},Hr.hasEnterpriseModules()&&{animation:{enabled:!1}},n.getOptions()),l=yield this.factoryApi.createOrUpdate(a);return l.chart.ctx.zoomManager.updateZoom("agChartV2",n.ctx.zoomManager.getZoom()),n.series.forEach((c,u)=>{c.visible||(l.chart.series[u].visible=!1)}),n.update(0,{forceNodeDataRefresh:!0}),yield l.waitForUpdate(),l})}};return t.chartInstances=new WeakMap,t})();g([Wt({oldValue(t){Mh.chartInstances.delete(t)},newValue(t){Mh.chartInstances.set(t,this)}})],Mh.prototype,"chart",2);var Xw=Mh,Pi=class extends ke{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(t){return t}ticks(){let t=this.tickCount??ke.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||!this.domain.every(isFinite))return[];this.refresh();let[e,n]=this.getDomain();if(this.interval){let i=Math.abs(this.interval);if(!Ec((n-e)/i,this.getPixelRange()))return Cc(e,n,i)}return uf(e,n,t,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){return this.interval??va(t,e,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){let t=this.tickCount;if(t<1){this.niceDomain=[...this.domain];return}let[e,n]=this.domain;if(t===1)[e,n]=rF(e,n);else{let i=e>n?Math.ceil:Math.floor,r=n<e?Math.floor:Math.ceil,s=4;for(let o=0;o<s;o++){let a=e,l=n,c=this.getTickStep(e,n),[u,d]=this.domain;if(c>=1)e=i(u/c)*c,n=r(d/c)*c;else{let h=1/c;e=i(u*h)/h,n=r(d*h)/h}if(e===a&&n===l)break}}this.niceDomain=[e,n]}tickFormat({ticks:t,specifier:e}){return xI(t??this.ticks(),e)}};function OB(t,e,n){let[i,r]=Pn(t);i=_B(Math.floor(i),r,e);let s=FB(i,r,e),o=e-1;r=i+o*s;let a=n?[r,i]:[i,r],l=PB(i,s,e);return{domain:a,ticks:l}}function _B(t,e,n){let i=Math.abs(e-t)/(n-1),r=Math.floor(Math.log10(i)),s=Math.pow(10,r);return Math.floor(t/s)*s}function PB(t,e,n){let i=Math.floor(Math.log10(e)),r=e>0&&e<1?Math.abs(i):0,s=Math.pow(10,r),o=[];for(let a=0;a<n;a++){let l=t+e*a;o[a]=Math.round(l*s)/s}return o}function FB(t,e,n){let i=n-1,r=(e-t)/i;return BB(r)}function BB(t){let e=Math.floor(Math.log10(t)),n=Math.pow(10,e),i=t/n*10;return i>0&&i<=1?n/10:i>1&&i<=2?2*n/10:i>1&&i<=5?5*n/10:i>5&&i<=10?10*n/10:i>10&&i<=20?20*n/10:i>20&&i<=40?40*n/10:i>40&&i<=50?50*n/10:i>50&&i<=100?100*n/10:i}var wa=(()=>{let t=class extends _a{constructor(e,n=new Pi){super(e,n),this.min=NaN,this.max=NaN}normaliseDataDomain(e){let{min:n,max:i}=this,{extent:r,clipped:s}=$c(e,n,i);return{domain:r,clipped:s}}updateSecondaryAxisTicks(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];let{domain:n,ticks:i}=OB(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=n,this.scale.update(),i}};return t.className="NumberAxis",t.type="number",t})();g([b(zn(Ta,Na("max"))),is(NaN)],wa.prototype,"min",2);g([b(zn(Ta,ka("min"))),is(NaN)],wa.prototype,"max",2);var hE=Oe(t=>gn(t)&&t!==0,"a non-zero number"),tu=(()=>{let t=class extends wa{constructor(e){super(e,new dv),this.min=NaN,this.max=NaN}normaliseDataDomain(e){let{min:n,max:i}=this,{extent:r,clipped:s}=$c(e,n,i),o=r[0]>r[1],a=r[0]<0&&r[1]>0,l=r[0]===0&&r[1]===0;return(o||a||l)&&(a?L.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):l&&L.warn("the data domain has 0 extent, no data is rendered.")),r[0]===0&&(r[0]=1),r[1]===0&&(r[1]=-1),{domain:r,clipped:s}}set base(e){this.scale.base=e}get base(){return this.scale.base}};return t.className="LogAxis",t.type="log",t})();g([b(zn(Ta,hE,Na("max"))),is(NaN)],tu.prototype,"min",2);g([b(zn(Ta,hE,ka("min"))),is(NaN)],tu.prototype,"max",2);var xf=(()=>{let t=class extends _a{constructor(e){super(e,new df),this.min=void 0,this.max=void 0}normaliseDataDomain(e){let{min:n,max:i}=this,r=!1;return typeof n=="number"&&(n=new Date(n)),typeof i=="number"&&(i=new Date(i)),e.length>2&&(e=(Hi(e)??[0,1e3]).map(s=>new Date(s))),n instanceof Date&&(r||(r=n>e[0]),e=[n,e[1]]),i instanceof Date&&(r||(r=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:r}}onFormatChange(e,n,i,r){r?super.onFormatChange(e,n,i,r):(this.labelFormatter=this.scale.tickFormat({ticks:e,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:e,domain:i,formatOffset:1}))}calculatePadding(){return[0,0]}};return t.className="TimeAxis",t.type="time",t})();g([b(zn(rv,Na("max")),{optional:!0})],xf.prototype,"min",2);g([b(zn(rv,ka("min")),{optional:!0})],xf.prototype,"max",2);var Qw=1e-6,ih=(t,e,n,i,r)=>{let s=!1,o=!1,a=i-Math.sqrt(Math.max(r**2-n**2,0)),l=0,c=0,u=n-Math.sqrt(Math.max(r**2-i**2,0));return a>t?(s=!0,a=t,l=n-Math.sqrt(Math.max(r**2-(i-t)**2))):a<Qw&&(a=0),u>e?(o=!0,c=i-Math.sqrt(Math.max(r**2-(n-e)**2)),u=e):u<Qw&&(u=0),{leading0:a,leading1:l,trailing0:c,trailing1:u,leadingClipped:s,trailingClipped:o}},rh=(t,{x0:e,y0:n,x1:i,y1:r,cx:s,cy:o},a,l)=>{if(l&&t.moveTo(e,n),e!==i||n!==r){let c=Math.atan2(n-o,e-s),u=Math.atan2(r-o,i-s);t.arc(s,o,a,c,u)}else t.lineTo(e,n)},Wm=(t,e,n,i,r,s,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=s,d=Math.max(a+u,l+c),h=Math.max(a+l,u+c);if(d<=0&&h<=0){o==null?t.rect(e,n,i,r):t.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&a===l&&a===c&&a===u){t.roundRect(e,n,i,r,a);return}if(i<0&&(e+=i,i=Math.abs(i)),r<0&&(n+=r,r=Math.abs(r)),i<=0||r<=0)return;if(o==null)o=new V(e,n,i,r);else{let C=Math.max(e,o.x),T=Math.min(e+i,o.x+o.width),E=Math.max(n,o.y),A=Math.min(n+r,o.y+o.height);o=new V(C,E,T-C,A-E)}let f=Math.max(d/r,h/i,1);f>1&&(a/=f,l/=f,c/=f,u/=f);let p=!0,m=!0,y=!0,v=!0,x,D,S,w;if(p){let C=ih(o.height,o.width,Math.max(e+a-o.x,0),Math.max(n+a-o.y,0),a);C.leadingClipped&&(v=!1),C.trailingClipped&&(m=!1);let T=Math.max(o.x+C.leading1,o.x),E=Math.max(o.y+C.leading0,o.y),A=Math.max(o.x+C.trailing1,o.x),R=Math.max(o.y+C.trailing0,o.y),_=e+a,G=n+a;x={x0:T,y0:E,x1:A,y1:R,cx:_,cy:G}}if(m){let C=ih(o.width,o.height,Math.max(n+l-o.y,0),Math.max(o.x+o.width-(e+i-l),0),l);C.leadingClipped&&(p=!1),C.trailingClipped&&(y=!1);let T=Math.min(o.x+o.width-C.leading0,o.x+o.width),E=Math.max(o.y+C.leading1,o.y),A=Math.min(o.x+o.width-C.trailing0,o.x+o.width),R=Math.max(o.y+C.trailing1,o.y),_=e+i-l,G=n+l;D={x0:T,y0:E,x1:A,y1:R,cx:_,cy:G}}if(y){let C=ih(o.height,o.width,Math.max(o.x+o.width-(e+i-c),0),Math.max(o.y+o.height-(n+r-c),0),c);C.leadingClipped&&(m=!1),C.trailingClipped&&(v=!1);let T=Math.min(o.x+o.width-C.leading1,o.x+o.width),E=Math.min(o.y+o.height-C.leading0,o.y+o.height),A=Math.min(o.x+o.width-C.trailing1,o.x+o.width),R=Math.min(o.y+o.height-C.trailing0,o.y+o.height),_=e+i-c,G=n+r-c;S={x0:T,y0:E,x1:A,y1:R,cx:_,cy:G}}if(v){let C=ih(o.width,o.height,Math.max(o.y+o.height-(n+r-u),0),Math.max(e+u-o.x,0),u);C.leadingClipped&&(y=!1),C.trailingClipped&&(p=!1);let T=Math.max(o.x+C.leading0,o.x),E=Math.min(o.y+o.height-C.leading1,o.y+o.height),A=Math.max(o.x+C.trailing0,o.x),R=Math.min(o.y+o.height-C.trailing1,o.y+o.height),_=e+u,G=n+r-u;w={x0:T,y0:E,x1:A,y1:R,cx:_,cy:G}}let I=!1;p&&x!=null&&(rh(t,x,a,!I),I||(I=!0)),m&&D!=null&&(rh(t,D,l,!I),I||(I=!0)),y&&S!=null&&(rh(t,S,c,!I),I||(I=!0)),v&&w!=null&&(rh(t,w,u,!I),I||(I=!0)),t.closePath()},rn=(()=>{let t=class extends nn{constructor(){super(...arguments),this.borderPath=new kc,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Vn.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Vn.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint,this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){let{path:e,borderPath:n,crisp:i,topLeftCornerRadius:r,topRightCornerRadius:s,bottomRightCornerRadius:o,bottomLeftCornerRadius:a}=this,{x:l,y:c,width:u,height:d,strokeWidth:h,clipBBox:f}=this,m=1/(this.layerManager?.canvas.pixelRatio??1),y=1;if(e.clear(!0),n.clear(!0),i&&(u<=m&&(y*=u/m),d<=m&&(y*=d/m),u=this.align(l,u),d=this.align(c,d),l=this.align(l),c=this.align(c),f=f!=null?new V(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),h)if(u<m){let v=l+m/2;n.moveTo(v,c),n.lineTo(v,c+d),h=m,this.borderClipPath=void 0}else if(d<m){let v=c+m/2;n.moveTo(l,v),n.lineTo(l+u,v),h=m,this.borderClipPath=void 0}else if(h<u&&h<d){let v=h/2;l+=v,c+=v,u-=h,d-=h;let x=f?.clone().shrink(v),D={topLeft:r>0?r-h:0,topRight:s>0?s-h:0,bottomRight:o>0?o-h:0,bottomLeft:a>0?a-h:0};this.borderClipPath=void 0,u>0&&d>0&&(x==null||x?.width>0&&x?.height>0)&&(Wm(e,l,c,u,d,D,x),Wm(n,l,c,u,d,D,x))}else this.borderClipPath=this.borderClipPath??new kc,this.borderClipPath.clear(!0),this.borderClipPath.rect(l,c,u,d),n.rect(l,c,u,d);else{let v={topLeft:r,topRight:s,bottomRight:o,bottomLeft:a};this.borderClipPath=void 0,Wm(e,l,c,u,d,v,f)}[r,s,o,a].every(v=>v===0)?(this.hittester=(v,x)=>{let D=this.transformPoint(v,x);return this.getCachedBBox().containsPoint(D.x,D.y)},this.distanceSquared=(v,x)=>this.getCachedBBox().distanceSquared(v,x)):(this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint),this.effectiveStrokeWidth=h,this.lastUpdatePathStrokeWidth=h,this.microPixelEffectOpacity=y}computeBBox(){let{x:e,y:n,width:i,height:r,clipBBox:s}=this;return s?.clone()??new V(e,n,i,r)}isPointInPath(e,n){return this.hittester(e,n)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,n){return this.distanceCalculator(e,n)}applyFillAlpha(e){let{fillOpacity:n,microPixelEffectOpacity:i,opacity:r}=this;e.globalAlpha*=r*n*i}renderStroke(e){let{stroke:n,effectiveStrokeWidth:i}=this;if(n&&i){let{globalAlpha:r}=e,{strokeOpacity:s,lineDash:o,lineDashOffset:a,lineCap:l,lineJoin:c,borderPath:u,borderClipPath:d,opacity:h,microPixelEffectOpacity:f}=this;d&&e.clip(d.getPath2D()),e.strokeStyle=n,e.globalAlpha*=h*s*f,e.lineWidth=i,o&&e.setLineDash(o),a&&(e.lineDashOffset=a),l&&(e.lineCap=l),c&&(e.lineJoin=c),e.stroke(u.getPath2D()),e.globalAlpha=r}}};return t.className="Rect",t})();g([X()],rn.prototype,"x",2);g([X()],rn.prototype,"y",2);g([X()],rn.prototype,"width",2);g([X()],rn.prototype,"height",2);g([X()],rn.prototype,"topLeftCornerRadius",2);g([X()],rn.prototype,"topRightCornerRadius",2);g([X()],rn.prototype,"bottomRightCornerRadius",2);g([X()],rn.prototype,"bottomLeftCornerRadius",2);g([X()],rn.prototype,"clipBBox",2);g([X()],rn.prototype,"crisp",2);var nu=class extends qc{constructor(t){super(),this.node=new U({name:"background",zIndex:0}),this.rectNode=new rn,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(t.scene.attachNode(this.node),t.layoutService.addListener("layout-complete",e=>this.onLayoutComplete(e)))}onLayoutComplete(t){let{width:e,height:n}=t.chart;this.rectNode.width=e,this.rectNode.height=n}};g([b(H),Ft("node","visible")],nu.prototype,"visible",2);g([b(we,{optional:!0}),Ft("rectNode","fill")],nu.prototype,"fill",2);g([b(z,{optional:!0})],nu.prototype,"image",2);var fE={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:nu};function Ys(t,e,n,i){e.addEventListener(n,i),t.push(()=>e.removeEventListener(n,i))}function ky(t,e,n){Ys(t,e,"keydown",i=>{i.key==="Escape"&&n(i)})}function pE(t,e,...n){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)&&(t.key===e||n.some(i=>t.key===i))}function Jw(t,e,n,i){n&&Ys(t,e,"keydown",r=>{pE(r,i)&&n.focus()})}function gE(t,e,n,i,r,s){Jw(t,e,r,s),Jw(t,e,n,i),Ys(t,e,"keydown",o=>{pE(o,i,s)&&o.preventDefault()})}var mE={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function Df(t){let{orientation:e,toolbar:n,buttons:i,onEscape:r,onFocus:s,onBlur:o}=t,{nextKey:a,prevKey:l}=mE[e],c=i.length===0;n.role="toolbar",n.ariaOrientation=e,n.ariaHidden=c.toString();let u=h=>{h.target&&"tabIndex"in h.target&&(i.forEach(f=>f.tabIndex=-1),h.target.tabIndex=0)},d=[];for(let h=0;h<i.length;h++){let f=i[h-1],p=i[h],m=i[h+1];Ys(d,p,"focus",u),s&&Ys(d,p,"focus",s),o&&Ys(d,p,"blur",o),r&&ky(d,p,r),gE(d,p,f,l,m,a),p.tabIndex=h===0?0:-1}return d}function jB(t){let{orientation:e,menu:n,buttons:i,onEscape:r}=t,{nextKey:s,prevKey:o}=mE[e];n.role="menu",n.ariaOrientation=e;let a=[];for(let l=0;l<i.length;l++){let c=i[(i.length+l-1)%i.length],u=i[l],d=i[(i.length+l+1)%i.length];r&&ky(a,u,r),gE(a,u,c,o,d,s),u.tabIndex=-1}return n.tabIndex=-1,r&&ky(a,n,r),Ys(a,n,"keydown",l=>{l.target===n&&(l.key===s||l.key===o)&&(l.preventDefault(),i[0]?.focus())}),a}function yE(t,e){return n=>{if(t.ariaDisabled==="true")return n.preventDefault();e(n)}}function VB({orientation:t,bboxes:e,maxHeight:n,maxWidth:i,itemPaddingY:r=0,itemPaddingX:s=0,forceResult:o=!1}){let a=t==="horizontal",l={max:a?i:n,fn:a?h=>h.width:h=>h.height,padding:a?s:r},c={max:a?n:i,fn:a?h=>h.height:h=>h.width,padding:a?r:s},u=0,d=[];for(;u<e.length;){let h=e.slice(u),f=zB(h,u,l,c,o);if(!f)return;u+=f.processedBBoxCount,d.push(f.pageIndices)}return UB(d,t,e,r,s)}function zB(t,e,n,i,r){let o=$B(t,n);if(o<1){if(!r)return;o=1}let a=o;for(;a>=1;){let l=GB(t,e,a,n,i,r);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function GB(t,e,n,i,r,s){let o=[],a=0,l=0,c=[],u=[];for(let d=0;d<t.length;d++){let h=(d+n)%n;h===0&&(a+=l,l=0,c.length>0&&o.push(c),c=[]);let f=i.fn(t[d])+i.padding;u[h]=Math.max(u[h]??0,f),l=Math.max(l,r.fn(t[d])+r.padding);let p=a+l,m=!s||o.length>0;if(p>r.max&&m){c=[];break}if(u.reduce((v,x)=>v+x,0)>i.max&&!s)return u.length<n?u.length:void 0;c.push(d+e)}return c.length>0&&o.push(c),o.length>0?o:void 0}function UB(t,e,n,i,r){let s=0,o=0;return{pages:t.map(l=>{e==="horizontal"&&(l=HB(l));let c=0,u=l.map(f=>{let p=f.map(v=>(c=Math.max(v,c),n[v])),m=0,y=0;return p.forEach(v=>{m+=v.height+i,y=Math.max(y,v.width+r)}),{indices:f,bboxes:p,columnHeight:Math.ceil(m),columnWidth:Math.ceil(y)}}),d=0,h=0;return u.forEach(f=>{d+=f.columnWidth,h=Math.max(h,f.columnHeight)}),s=Math.max(d,s),o=Math.max(h,o),{columns:u,startIndex:l[0][0],endIndex:c,pageWidth:d,pageHeight:h}}),maxPageWidth:s,maxPageHeight:o}}function HB(t){let e=[];for(let n of t[0])e.push([]);return t.forEach((n,i)=>{n.forEach((r,s)=>{e[s][i]=r})}),e}function $B(t,e){let n=t.length,i=0;for(let r=0;r<n;r++)if(i+=e.fn(t[r])+e.padding,i>e.max)return n/r<2?Math.ceil(n/2):r;return n}var Xr=(()=>{let t=class extends U{constructor(){super({name:"markerLabelGroup"}),this.label=new Me,this.symbolsGroup=new U({name:"legend-markerLabel-symbols"}),this.pageIndex=NaN,this._markers=[],this._lines=[];let{markers:e,label:n,lines:i}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=1,this.symbolsGroup.append([...i,...e]),this.append([this.symbolsGroup,n])}destroy(){super.destroy(),this.proxyButton?.remove()}set markers(e){Hs(this._markers,e)||(this._markers.forEach(n=>{this.removeChild(n)}),this._markers=e,this._markers.forEach(n=>{this.symbolsGroup.appendChild(n)}))}get markers(){return this._markers}set lines(e){Hs(this._lines,e)||(this._lines.forEach(n=>{this.removeChild(n)}),this._lines=e,this._lines.forEach(n=>{this.symbolsGroup.appendChild(n)}))}get lines(){return this._lines}update(e){let{markers:n,lines:i}=this,r=0;for(let f=0;f<Math.max(n.length,i.length);f++){let{length:p,spacing:m}=e[f]??0,y=n[f],v=i[f],x=y?.size??0;if(y){let D=y.constructor.center;y.x=(D.x-.5)*x+p/2+r,y.y=(D.y-.5)*x}v&&(v.x1=r,v.x2=r+p,v.y1=0,v.y2=0,v.markDirtyTransform()),r+=m+Math.max(p,x)}let s=e.at(-1),o=this.lines.at(-1),a=this.markers.at(-1),l=o?.visible?o.x2:-1/0,c=(a?.x??0)+(a?.size??0)/2;if(this.label.x=Math.max(l,c)+(s?.spacing??0),e.length<2)return;let u=this.symbolsGroup.computeBBox(),d=Math.max(a?.size??0,s?.length??0),h=new V(u.x+d/2,u.y,d,u.height);this.symbolsGroup.setClipRectInGroupCoordinateSpace(h)}render(e){this.markers.forEach(n=>{n.opacity=this.opacity}),this.lines.forEach(n=>{n.opacity=this.opacity}),this.label.opacity=this.opacity,super.render(e)}};return t.className="MarkerLabel",t})();g([Ft("label")],Xr.prototype,"text",2);g([Ft("label")],Xr.prototype,"fontStyle",2);g([Ft("label")],Xr.prototype,"fontWeight",2);g([Ft("label")],Xr.prototype,"fontSize",2);g([Ft("label")],Xr.prototype,"fontFamily",2);g([Ft("label","fill")],Xr.prototype,"color",2);var Va=class extends le{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};g([b(we)],Va.prototype,"color",2);g([b(Jr,{optional:!0})],Va.prototype,"fontStyle",2);g([b(es,{optional:!0})],Va.prototype,"fontWeight",2);g([b(O)],Va.prototype,"fontSize",2);g([b(P)],Va.prototype,"fontFamily",2);var hr=class extends le{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};g([b(O)],hr.prototype,"size",2);g([b(we,{optional:!0})],hr.prototype,"fill",2);g([b(Ie,{optional:!0})],hr.prototype,"fillOpacity",2);g([b(we,{optional:!0})],hr.prototype,"stroke",2);g([b(O)],hr.prototype,"strokeWidth",2);g([b(Ie)],hr.prototype,"strokeOpacity",2);var Sf=class extends le{constructor(t){super(),this.parent=t,this.shape=ga,this.size=15,this.padding=8}};g([Wt({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Sf.prototype,"shape",2);g([b(O)],Sf.prototype,"size",2);g([b(O)],Sf.prototype,"padding",2);var za=(()=>{let t=class extends le{constructor(e,n,i,r){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=n,this.regionManager=i,this.cursorManager=r,this.id=Gi(this),this.marker=new Sf(this),this.activeStyle=new hr,this.inactiveStyle=new hr,this.highlightStyle=new hr,this.label=new Va,this.group=new U({name:"pagination"}),this.labelNode=new Me,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new ga,this._previousButton=new ga,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);let s=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(s.addListener("click",o=>this.onPaginationClick(o)),s.addListener("hover",o=>this.onPaginationMouseMove(o))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(e=>e())}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:e,padding:n}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+n}updateNextButtonPosition(){let e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){let{currentPage:e,totalPages:n,labelNode:i,label:{color:r,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:l}}=this;i.text=`${e+1} / ${n}`,i.fill=r,i.fontStyle=s,i.fontWeight=o,i.fontSize=a,i.fontFamily=l}updateMarkers(){let{nextButton:e,previousButton:n,nextButtonDisabled:i,previousButtonDisabled:r,activeStyle:s,inactiveStyle:o,highlightStyle:a,highlightActive:l}=this,c=(u,d)=>d?o:u===l?a:s;this.updateMarker(e,c("next",i)),this.updateMarker(n,c("previous",r))}updateMarker(e,n){let{size:i}=this.marker;e.size=i,e.fill=n.fill,e.fillOpacity=n.fillOpacity??1,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth,e.strokeOpacity=n.strokeOpacity}enableOrDisableButtons(){let{currentPage:e,totalPages:n}=this,i=n===0,r=e===n-1,s=e===0;this.nextButtonDisabled=r||i,this.previousButtonDisabled=s||i}nextButtonContainsPoint(e,n){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,n)}previousButtonContainsPoint(e,n){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,n)}clickNext(){this.incrementPage(),this.onPaginationChanged()}clickPrevious(){this.decrementPage(),this.onPaginationChanged()}setPage(e){e=ae(0,e,this.totalPages-1),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}onPaginationClick(e){let{offsetX:n,offsetY:i}=e;e.preventDefault(),this.nextButtonContainsPoint(n,i)?this.clickNext():this.previousButtonContainsPoint(n,i)&&this.clickPrevious()}onPaginationMouseMove(e){let{offsetX:n,offsetY:i}=e;this.nextButtonContainsPoint(n,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(n,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){let e=Vi(this.marker.shape||ga);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}computeCSSBounds(){let e=this.group.computeTransformedBBox(),n=this._previousButton.computeTransformedBBox(),i=this._nextButton.computeTransformedBBox();return n.x-=e.x,n.y-=e.y,i.x-=e.x,i.y-=e.y,{group:e,prev:n,next:i}}};return t.className="Pagination",t})();g([b(z)],za.prototype,"marker",2);g([b(z)],za.prototype,"activeStyle",2);g([b(z)],za.prototype,"inactiveStyle",2);g([b(z)],za.prototype,"highlightStyle",2);g([b(z)],za.prototype,"label",2);var ls=class extends le{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};g([b(O,{optional:!0})],ls.prototype,"maxLength",2);g([b(we)],ls.prototype,"color",2);g([b(Jr,{optional:!0})],ls.prototype,"fontStyle",2);g([b(es,{optional:!0})],ls.prototype,"fontWeight",2);g([b(O)],ls.prototype,"fontSize",2);g([b(P)],ls.prototype,"fontFamily",2);g([b(tn,{optional:!0})],ls.prototype,"formatter",2);var Ga=class extends le{constructor(){super(...arguments),this.size=15,this.padding=8}};g([Yt(t=>t.parent?.onMarkerShapeChange())],Ga.prototype,"shape",2);g([b(O)],Ga.prototype,"size",2);g([b(O)],Ga.prototype,"padding",2);g([b(O,{optional:!0})],Ga.prototype,"strokeWidth",2);g([b(H)],Ga.prototype,"enabled",2);var Rv=class extends le{};g([b(O,{optional:!0})],Rv.prototype,"strokeWidth",2);g([b(O,{optional:!0})],Rv.prototype,"length",2);var cs=class extends le{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Ga,this.label=new ls,this.line=new Rv}};g([b(O,{optional:!0})],cs.prototype,"maxWidth",2);g([b(O)],cs.prototype,"paddingX",2);g([b(O)],cs.prototype,"paddingY",2);g([b(H)],cs.prototype,"showSeriesStroke",2);g([b(z)],cs.prototype,"marker",2);g([b(z)],cs.prototype,"label",2);g([b(z)],cs.prototype,"line",2);var Lv=class extends le{};g([b(tn,{optional:!0})],Lv.prototype,"legendItemClick",2);g([b(tn,{optional:!0})],Lv.prototype,"legendItemDoubleClick",2);var sh="legend-visibility",eM="legend-other-series",xn=(()=>{let t=class extends le{constructor(e){super(),this.ctx=e,this.id=Gi(this),this.group=new U({name:"legend",layer:!0,zIndex:11}),this.itemSelection=et.select(this.group,Xr),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new cs,this.listeners=new Lv,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new za(l=>e.updateService.update(l),l=>this.updatePageNumber(l),e.regionManager,e.cursorManager),this.pagination.attachPagination(this.group),e.contextMenuRegistry.registerDefaultAction({id:sh,type:"legend",label:"contextMenuToggleSeriesVisibility",action:l=>this.contextToggleVisibility(l)}),e.contextMenuRegistry.registerDefaultAction({id:eM,type:"legend",label:"contextMenuToggleOtherSeries",action:l=>this.contextToggleOtherSeries(l)});let{Default:n,Animation:i,ContextMenu:r}=xa,s=n|i,o=n|i|r,a=e.regionManager.addRegion("legend",this.group);this.destroyFns.push(a.addListener("contextmenu",l=>this.checkContextClick(l),o),a.addListener("click",l=>this.checkLegendClick(l),s),a.addListener("dblclick",l=>this.checkLegendDoubleClick(l),s),a.addListener("hover",l=>this.handleLegendMouseMove(l)),a.addListener("leave",l=>this.handleLegendMouseExit(l),s),a.addListener("enter",l=>this.handleLegendMouseEnter(l),s),e.layoutService.addListener("start-layout",l=>this.positionLegend(l)),()=>this.detachLegend(),e.localeManager.addListener("locale-changed",()=>this.onLocaleChanged())),this.proxyLegendToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:`${this.id}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"},ariaOrientation:"horizontal"}),this.proxyLegendPagination=this.ctx.proxyInteractionService.createProxyContainer({type:"group",id:`${this.id}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"})}set data(e){this._data=e,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(e=>e()),this.pagination.destroy(),this.itemSelection.clear()}initLegendItemToolbar(){this.itemSelection.each((n,i,r)=>{n.proxyButton??(n.proxyButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`ag-charts-legend-item-${r}`,textContent:this.getItemAriaText(r),parent:this.proxyLegendToolbar,focusable:n,onclick:()=>{this.doClick(n.datum),n.proxyButton.textContent=this.getItemAriaText(r,!n.datum.enabled)},onblur:()=>this.doMouseExit(),onfocus:()=>{let s=n?.computeTransformedBBox(),o=VC(this.ctx.focusIndicator,{bounds:s,showFocusBox:!0});this.doHover(o,n.datum),this.pagination.setPage(n.pageIndex)}}))});let e=this.itemSelection.nodes().map(n=>n.proxyButton).filter(n=>!!n);Df({orientation:this.getOrientation(),buttons:e,toolbar:this.proxyLegendToolbar})}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(e){let{characterWidths:n}=this;if(n.has(e))return n.get(e);let i={"...":Me.getTextSize("...",e).width};return n.set(e,i),i}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}detachLegend(){this.group.parent?.removeChild(this.group)}getItemLabel(e){let{ctx:{callbackCache:n}}=this,{formatter:i}=this.item.label;return i?n.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}calcLayout(e,n){let{paddingX:i,paddingY:r,label:s,maxWidth:o,label:{maxLength:a=1/0,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d}}=this.item,h=[...this.data];this.reverseOrder&&h.reverse();let f=this.itemSelection.nodes().length===0;this.itemSelection.update(h),f&&this.initLegendItemToolbar();let p=[],m=$s(s),v=o??e*.8;if(this.itemSelection.each((A,R)=>{A.fontStyle=l,A.fontWeight=c,A.fontSize=u,A.fontFamily=d;let _=this.updateMarkerLabel(A,R,this.calcMarkerWidth()),G=R.itemId??R.id,ee=(this.getItemLabel(R)??"<unknown>").replace(/\r?\n/g," ");A.text=this.truncate(ee,a,v,_,m,G),p.push(A.computeBBox())}),e=Math.max(1,e),n=Math.max(1,n),!isFinite(e))return{};let x=this.size,D=this.oldSize;x[0]=e,x[1]=n,(x[0]!==D[0]||x[1]!==D[1])&&(D[0]=x[0],D[1]=x[1]);let{pages:S,maxPageHeight:w,maxPageWidth:I}=this.updatePagination(p,e,n),C=this.pages;this.pages=S,this.maxPageSize=[I-i,w-r];let T=this.pagination.currentPage,E=this.pages[T];return this.pages.length<1||!E?(this.visible=!1,{oldPages:C}):(this.visible=!0,this.updatePositions(T),this.update(),{oldPages:C})}calcSymbolsLengths(e){let{showSeriesStroke:n,marker:i,line:r}=this.item,s=i.enabled??(n&&(e.marker.enabled??!0)),o=s?i.size:0,a=!!(e.line&&n),l=a?r.length??25:0;return{markerEnabled:s,markerLength:o,lineEnabled:a,lineLength:l}}calcMarkerWidth(){let e=0;return this.itemSelection.each((n,i)=>{i.symbols.forEach(r=>{let{lineLength:s,markerLength:o}=this.calcSymbolsLengths(r);e=Math.max(e,s,o)})}),e}updateMarkerLabel(e,n,i){let{marker:r,paddingX:s}=this.item,o=[],a=s;if(e.markers.length!==n.symbols.length&&e.lines.length!==n.symbols.length){let l=[],c=[];n.symbols.forEach(u=>{let{shape:d=u.marker.shape}=r,h=Vi(d);c.push(new St),l.push(new h)}),e.markers=l,e.lines=c}return n.symbols.forEach((l,c)=>{let u=l.marker.padding??r.padding,{markerEnabled:d,lineEnabled:h}=this.calcSymbolsLengths(l);e.markers[c].size=d||!h?r.size:0,o.push({length:i,spacing:u}),(d||h)&&(a+=u+i)}),e.update(o),a}truncate(e,n,i,r,s,o){let a="...",l=e.split(""),c=!1;if(e.length>n&&(e=`${e.substring(0,n)}`,c=!0),Math.floor(r+Me.getTextSize(e,s).width)>i){let d="",h=this.getCharacterWidths(s),f=r+h[a];for(let p of l){if(h[p]||(h[p]=Me.getTextSize(p,s).width),f+=h[p],f>i)break;d+=p}e=d,c=!0}return c?(e+=a,this.truncatedItems.add(o)):this.truncatedItems.delete(o),e}updatePagination(e,n,i){let r=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=r,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:o,maxPageHeight:a,maxPageWidth:l,paginationBBox:c,paginationVertical:u}=this.calculatePagination(e,n,i),d=o.findIndex(S=>S.endIndex>=s);this.pagination.currentPage=ae(0,d,o.length-1);let{paddingX:h,paddingY:f}=this.item,p=8,m=l-h,y=a-f,v=0,x=-c.y-this.item.marker.size/2;u?x+=y+p:(v+=-c.x+m+p,x+=(y-c.height)/2),this.pagination.translationX=v,this.pagination.translationY=x,this.pagination.update(),this.pagination.updateMarkers();let D=0;return this.itemSelection.each((S,w,I)=>{I>(o[D]?.endIndex??1/0)&&D++,S.pageIndex=D}),{maxPageHeight:a,maxPageWidth:l,pages:o}}updatePaginationProxyButtons(e){this.proxyLegendPagination.style.display=this.pagination.visible?"absolute":"none";let n=(e?.length??this.pages.length)>1,i=this.pages.length>1;if(n!==i)if(i){this.proxyPrevButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.proxyLegendPagination,focusable:this.pagination.previousButton,onclick:()=>this.pagination.clickPrevious()}),this.proxyNextButton??(this.proxyNextButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.proxyLegendPagination,focusable:this.pagination.nextButton,onclick:()=>this.pagination.clickNext()}));let{group:r,prev:s,next:o}=this.pagination.computeCSSBounds();or(this.proxyLegendPagination,r),or(this.proxyPrevButton,s),or(this.proxyNextButton,o)}else this.proxyNextButton?.remove(),this.proxyPrevButton?.remove(),[this.proxyNextButton,this.proxyPrevButton]=[void 0,void 0]}calculatePagination(e,n,i){let{paddingX:r,paddingY:s}=this.item,o=this.getOrientation(),a=["left","right"].includes(this.position),l=this.pagination.computeBBox(),c=new V(0,0,0,0),u=[],d=0,h=0,f=0,p=y=>y.width===l.width&&y.height===l.height,m=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(f++>10){L.warn("unable to find stable legend layout.");break}l=c;let y=n-(a?0:l.width),v=i-(a?l.height:0),x=VB({orientation:o,bboxes:e,maxHeight:v,maxWidth:y,itemPaddingY:s,itemPaddingX:r,forceResult:m});u=x?.pages??[],d=x?.maxPageWidth??0,h=x?.maxPageHeight??0;let D=u.length;if(this.pagination.visible=D>1,this.pagination.totalPages=D,this.pagination.update(),c=this.pagination.computeBBox(),!this.pagination.visible)break}while(!p(c));return{maxPageWidth:d,maxPageHeight:h,pages:u,paginationBBox:l,paginationVertical:a}}updatePositions(e=0){let{item:{paddingY:n},itemSelection:i,pages:r}=this;if(r.length<1||!r[e])return;let{columns:s,startIndex:o,endIndex:a}=r[e],l=0,c=0,u=s.length,d=s[0].indices.length,h=this.getOrientation()==="horizontal",f=s[0].bboxes[0].height+n,p=[];i.each((m,y,v)=>{if(v<o||v>a){m.visible=!1;return}let x=v-o,D=0,S=0;h?(D=x%u,S=Math.floor(x/u)):(D=Math.floor(x/d),S=x%d),m.visible=!0;let w=s[D];if(!w)return;c=Math.floor(f*S),l=Math.floor(p[S]??0),p[S]=(p[S]??0)+w.columnWidth,m.translationX=l,m.translationY=c;let{width:I,height:C}=m.computeBBox();or(m.proxyButton,{x:l,y:c,width:I,height:C})})}updatePageNumber(e){let{pages:n}=this,{startIndex:i,endIndex:r}=n[e];i===0?this.paginationTrackingIndex=0:e===n.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((i+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.ctx.updateService.update(6)}update(){let{label:{color:e}}=this.item;this.itemSelection.each((n,i)=>{i.symbols.forEach((r,s)=>{let o=n.markers[s],a=n.lines[s];if(o){let{strokeWidth:l,fill:c,stroke:u,fillOpacity:d,strokeOpacity:h}=this.getMarkerStyles(r);o.fill=c,o.stroke=u,o.strokeWidth=l,o.fillOpacity=d,o.strokeOpacity=h}if(a){let l=this.getLineStyles(r);a.stroke=l.stroke,a.strokeOpacity=l.strokeOpacity,a.strokeWidth=l.strokeWidth,a.lineDash=l.lineDash}}),n.opacity=i.enabled?1:.5,n.color=e}),this.updateContextMenu()}updateContextMenu(){let{toggleSeries:e}=this;this.ctx.contextMenuRegistry.setActionVisiblity(sh,e),this.ctx.contextMenuRegistry.setActionVisiblity(eM,e)}getLineStyles(e){let{stroke:n,strokeOpacity:i=1,strokeWidth:r,lineDash:s}=e.line??{},o=Math.min(2,r??1);return{stroke:n,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:s}}getMarkerStyles(e){let{fill:n,stroke:i,strokeOpacity:r=1,fillOpacity:s=1,strokeWidth:o}=e.marker,a=Math.min(2,o??1);return{fill:n,stroke:i,strokeOpacity:r,fillOpacity:s,strokeWidth:this.item.marker.strokeWidth??a}}getDatumForPoint(e,n){let i=[],r={dist:1/0,datum:void 0};for(let o of this.group.children){if(!o.visible||!(o instanceof Xr))continue;let a=o.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(e,n))return o.datum;let l=e-a.x-this.item.paddingX/2,c=n-a.y-this.item.paddingY/2,u=l**2+c**2;l>=0&&c>=0&&u<r.dist&&(r.dist=u,r.datum=o.datum),i.push(a)}if(V.merge(i).containsPoint(e,n))return r.datum}computePagedBBox(){let e=this.group.computeBBox();if(this.pages.length<=1)return e;let[n,i]=this.maxPageSize;return e.height=Math.max(i,e.height),e.width=Math.max(n,e.width),e}contextToggleVisibility(e){let n=this.data.find(i=>i.itemId===e.itemId);this.doClick(n)}contextToggleOtherSeries(e){let n=this.data.find(i=>i.itemId===e.itemId);this.doDoubleClick(n)}checkContextClick(e){let n=this.getDatumForPoint(e.offsetX,e.offsetY);this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(sh):this.ctx.contextMenuRegistry.enableAction(sh),this.ctx.contextMenuRegistry.dispatchContext("legend",e,{legendItem:n})}checkLegendClick(e){let n=this.getDatumForPoint(e.offsetX,e.offsetY);this.doClick(n)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e){let{listeners:{legendItemClick:n},ctx:{chartService:i,highlightManager:r},preventHidingAll:s,toggleSeries:o}=this;if(!e)return!1;let{id:a,itemId:l,enabled:c}=e,u=i.series.find(h=>h.id===a);if(!u)return!1;let d=c;if(o){d=!c,s&&!d&&this.getVisibleItemCount()<2&&(d=!0);let h=d?"ariaAnnounceVisible":"ariaAnnounceHidden";this.ctx.ariaAnnouncementService.announceValue(h),this.ctx.chartEventManager.legendItemClick(u,l,d,e.legendItemName)}return d?r.updateHighlight(this.id,{series:u,itemId:l,datum:void 0}):r.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),n?.({type:"click",enabled:d,itemId:l,seriesId:u.id}),!0}checkLegendDoubleClick(e){let n=this.getDatumForPoint(e.offsetX,e.offsetY);this.doDoubleClick(n)&&e.preventDefault()}doDoubleClick(e){let{listeners:{legendItemDoubleClick:n},ctx:{chartService:i},toggleSeries:r}=this;if(i.mode==="integrated"||!e)return!1;let{id:s,itemId:o,seriesId:a}=e,l=i.series.find(c=>c.id===s);if(!l)return!1;if(r){let c=i.series.flatMap(h=>h.getLegendData("category")),u=c.filter(h=>h.enabled).length,d=c.find(h=>h.itemId===o&&h.seriesId===a);this.ctx.chartEventManager.legendItemDoubleClick(l,o,d?.enabled??!1,u,d?.legendItemName)}return this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),n?.({type:"dblclick",enabled:!0,itemId:o,seriesId:l.id}),!0}handleLegendMouseMove(e){if(!this.enabled)return;let{offsetX:n,offsetY:i}=e;e.preventDefault();let r=this.getDatumForPoint(n,i);this.doHover(e,r)}doHover(e,n){let{toggleSeries:i,listeners:r}=this;if(e===void 0||n===void 0){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}let s=n?this.ctx.chartService.series.find(o=>o.id===n?.id):void 0;if(n&&this.truncatedItems.has(n.itemId??n.id)){let{offsetX:o,offsetY:a}=e;this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:o,offsetY:a,lastPointerEvent:e,showArrow:!1},ba({content:this.getItemLabel(n)}))}else this.ctx.tooltipManager.removeTooltip(this.id);(i||r.legendItemClick!=null||r.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),n?.enabled&&s?this.ctx.highlightManager.updateHighlight(this.id,{series:s,itemId:n?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(e){this.doMouseExit()}doMouseExit(){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.interactionManager.getState()===16&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(e){let{enabled:n,toggleSeries:i,listeners:{legendItemClick:r,legendItemDoubleClick:s}}=this,o=this.getDatumForPoint(e.offsetX,e.offsetY);n&&o!==void 0&&(i||r!=null||s!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}onLocaleChanged(){this.itemSelection.each(({proxyButton:e},n,i)=>{e!=null&&(e.textContent=this.getItemAriaText(i))})}getItemAriaText(e,n){let i=this.data[e],r=i&&this.getItemLabel(i);n??(n=i.enabled);let s=this.ctx.localeManager;if(e>=0&&r){let o=e+1,a=this.data.length,l=s.t("ariaLabelLegendItem",{label:r,index:o,count:a}),c=s.t(n?"ariaAnnounceVisible":"ariaAnnounceHidden");return[l,c].join("")}return s.t("ariaLabelLegendItemUnknown")}positionLegend(e){let{shrinkRect:n}=e,i=n.clone();if(!this.enabled||!this.data.length)return N(M({},e),{shrinkRect:i});let[r,s]=this.calculateLegendDimensions(n);this.group.translationX=0,this.group.translationY=0;let{oldPages:o}=this.calcLayout(r,s),a=this.computePagedBBox(),l=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return n.height-a.height;case"right":default:return n.width-a.width}};if(this.visible){let c,u;switch(this.position){case"top":case"bottom":c=(n.width-a.width)/2,u=l(),i.shrink(a.height,this.position);break;case"left":case"right":default:c=l(),u=(n.height-a.height)/2,i.shrink(a.width,this.position)}this.group.translationX=Math.floor(-a.x+n.x+c),this.group.translationY=Math.floor(-a.y+n.y+u);let d=this.group.computeTransformedBBox();d&&(or(this.proxyLegendToolbar,d),this.proxyLegendToolbar.style.removeProperty("display")),this.proxyLegendToolbar.ariaOrientation=this.getOrientation()}else this.proxyLegendToolbar.style.display="none";if(this.updatePaginationProxyButtons(o),this.visible&&this.enabled&&this.data.length){let c=this.spacing;i.shrink(c,this.position);let u=a.clone();u.x+=this.group.translationX,u.y+=this.group.translationY}return N(M({},e),{shrinkRect:i})}calculateLegendDimensions(e){let{width:n,height:i}=e,r=n/i,s=.5,o=.2,a=.25,l,c;switch(this.position){case"top":case"bottom":let u=r<1?Math.min(s,o*(1/r)):o;l=this.maxWidth?Math.min(this.maxWidth,n):n,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*u);break;case"left":case"right":default:let d=r>1?Math.min(s,a*r):a;l=this.maxWidth?Math.min(this.maxWidth,n):Math.round(n*d),c=this.maxHeight?Math.min(this.maxHeight,i):i}return[l,c]}};return t.className="Legend",t})();g([b(H)],xn.prototype,"toggleSeries",2);g([b(z)],xn.prototype,"pagination",2);g([b(z)],xn.prototype,"item",2);g([b(z)],xn.prototype,"listeners",2);g([Yt(t=>t.updateGroupVisibility()),b(H)],xn.prototype,"enabled",2);g([b(sv)],xn.prototype,"position",2);g([b(O,{optional:!0})],xn.prototype,"maxWidth",2);g([b(O,{optional:!0})],xn.prototype,"maxHeight",2);g([b(H,{optional:!0})],xn.prototype,"reverseOrder",2);g([b(je(["horizontal","vertical"],"an orientation"),{optional:!0})],xn.prototype,"orientation",2);g([b(H,{optional:!0})],xn.prototype,"preventHidingAll",2);g([b(O)],xn.prototype,"spacing",2);var WB={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:xn,packageType:"community"},Ov=class extends qc{constructor(t){super(),this.ctx=t,this.localeText=void 0}};g([Yt(t=>{t.ctx.localeManager.setLocaleText(t.localeText)}),b(JM,{optional:!0})],Ov.prototype,"localeText",2);g([Yt(t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)}),b(tn,{optional:!0})],Ov.prototype,"getLocaleText",2);var YB={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:Ov},si=(()=>{let t=class extends nn{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}layout(e,n){this.centerX=e,this.centerY=n}static align(e,n,i,r,s,o,a,l){let c=e.strokeWidth/2,u=e.align(i+s*a)+c,d=u+e.align(i+s*a,s*(l-a))-2*c,h=e.align(r+o/2)+c;e.layout(u,h),n.layout(d,h)}computeBBox(){let{centerX:e,centerY:n,width:i,height:r}=this,s=e-i/2,o=n-r/2;return new V(s,o,i,r)}computeTransformedBBox(){return super.computeTransformedBBox()}isPointInPath(e,n){let i=this.transformPoint(e,n);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){let{centerX:e,centerY:n,path:i,strokeWidth:r,gripLineGap:s,gripLineLength:o}=this,a=this.layerManager?.canvas?.pixelRatio??1;i.clear();let l=Math.floor(this.width/2*a)/a,c=Math.floor(this.height/2*a)/a;i.moveTo(e-l,n-c),i.lineTo(e+l,n-c),i.lineTo(e+l,n+c),i.lineTo(e-l,n+c),i.closePath();let u=Math.floor((s+r)/2*a)/a,d=Math.floor(o/2*a)/a;i.moveTo(e-u,n-d),i.lineTo(e-u,n+d),i.moveTo(e+u,n-d),i.lineTo(e+u,n+d)}};return t.className="RangeHandle",t})();g([b(we)],si.prototype,"_fill",2);g([b(we)],si.prototype,"_stroke",2);g([b(O)],si.prototype,"_strokeWidth",2);g([b(iI)],si.prototype,"_lineCap",2);g([b(O)],si.prototype,"_width",2);g([b(O)],si.prototype,"_gripLineGap",2);g([b(O)],si.prototype,"_gripLineLength",2);g([b(O)],si.prototype,"_height",2);var KB=(()=>{let t=class extends nn{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(e,n,i,r){this.x=e,this.y=n,this.width=i,this.height=r,this.dirtyPath=!0}update(e,n){this.min=isNaN(e)?this.min:e,this.max=isNaN(n)?this.max:n,this.dirtyPath=!0}computeBBox(){let{x:e,y:n,width:i,height:r}=this;return new V(e,n,i,r)}computeVisibleRangeBBox(){let{x:e,y:n,width:i,height:r,min:s,max:o}=this,a=e+i*s,l=e+i*o;return new V(a,n,l-a,r)}updatePath(){let{path:e,x:n,y:i,width:r,height:s,min:o,max:a,strokeWidth:l}=this,c=l/2;e.clear();let u=this.align(n)+c,d=this.align(i)+c,h=u+this.align(n,r)-2*c,f=d+this.align(i,s)-2*c;e.moveTo(u,d),e.lineTo(h,d),e.lineTo(h,f),e.lineTo(u,f),e.closePath();let p=this.align(n+r*o)+c,m=p+this.align(n+r*o,r*(a-o))-2*c;e.moveTo(p,d),e.lineTo(p,f),e.lineTo(m,f),e.lineTo(m,d),e.closePath()}};return t.className="RangeMask",t})(),qB=class extends U{constructor(t){super({name:"rangeSelectorGroup",layer:!0,zIndex:12}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new U({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(t)}layout(t,e,n,i,r,s){this.x=t,this.y=e,this.width=n,this.height=i,this.lOffset=r,this.rOffset=s,this.background.translationX=t,this.background.translationY=e}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e)}computeBBox(){let{x:t,y:e,width:n,height:i,lOffset:r,rOffset:s}=this;return new V(t-r,e,n+(r+s),i)}},us=class extends qc{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new KB,this.minHandle=new si,this.maxHandle=new si,this.maskVisibleRange={computeBBox:()=>this.mask.computeVisibleRangeBBox(),computeTransformedBBox:()=>this.mask.computeVisibleRangeBBox()},this.height=30,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new qB([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;let e=t.regionManager.addRegion("navigator",this.rangeSelector),n=25;this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",i=>this.onHover(i),n),e.addListener("drag-start",i=>this.onDragStart(i),n),e.addListener("drag",i=>this.onDrag(i),n),e.addListener("drag-end",()=>this.onDragEnd(),n),e.addListener("leave",i=>this.onLeave(i),n),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),t.zoomManager.addListener("zoom-change",i=>this.onZoomChange(i))),this.proxyNavigatorToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],ariaOrientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.updateGroupVisibility(),this.proxyNavigatorElements=[this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-min",ariaLabel:{id:"ariaLabelNavigatorMinimum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.minHandle,onchange:i=>this.onMinSliderChange(i)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-pan",ariaLabel:{id:"ariaLabelNavigatorRange"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.maskVisibleRange,onchange:i=>this.onPanSliderChange(i)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-max",ariaLabel:{id:"ariaLabelNavigatorMaximum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.maxHandle,onchange:i=>this.onMaxSliderChange(i)})],Df({orientation:"vertical",toolbar:this.proxyNavigatorToolbar,buttons:this.proxyNavigatorElements}),this.destroyFns.push(()=>{this.proxyNavigatorElements.forEach(i=>i.remove()),this.proxyNavigatorToolbar.remove()})}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){let{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(t){return k(this,null,function*(){let{shrinkRect:e}=t;if(this.enabled){let n=this.height+this.spacing;e.shrink(n,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;return N(M({},t),{shrinkRect:e})})}performCartesianLayout(t){return k(this,null,function*(){let{x:e,width:n}=t.seriesRect;if(this.enabled){let{y:i,height:r}=this;this.layoutNodes(e,i,n,r),or(this.proxyNavigatorToolbar,{x:e,y:i,width:n,height:r}),this.proxyNavigatorToolbar.style.removeProperty("display")}else this.proxyNavigatorToolbar.style.display="none";this.x=e,this.width=n})}onHover(t){if(!this.enabled)return;let{mask:e,minHandle:n,maxHandle:i}=this,{offsetX:r,offsetY:s}=t;n.containsPoint(r,s)||i.containsPoint(r,s)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(r,s)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;let{mask:e,minHandle:n,maxHandle:i,x:r,width:s,_min:o}=this,{offsetX:a,offsetY:l}=t;n.zIndex<i.zIndex?i.containsPoint(a,l)?this.dragging="max":n.containsPoint(a,l)&&(this.dragging="min"):n.containsPoint(a,l)?this.dragging="min":i.containsPoint(a,l)&&(this.dragging="max"),this.dragging==null&&e.computeVisibleRangeBBox().containsPoint(a,l)&&(this.dragging="pan",this.panStart=(a-r)/s-o),this.dragging!=null&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(t){if(!this.enabled||this.dragging==null)return;let{dragging:e,minRange:n,panStart:i,x:r,width:s}=this,{_min:o,_max:a}=this,{offsetX:l}=t,c=(l-r)/s;if(e==="min")o=ae(0,c,a-n);else if(e==="max")a=ae(o+n,c,1);else if(e==="pan"&&i!=null){let u=a-o;o=ae(0,c-i,1-u),a=o+u}this._min=o,this._max=a,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){let{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}onPanSliderChange(t){let e=this.getSliderRatio(this.proxyNavigatorElements[1]),n=this._max-this._min;this._min=ae(0,e,1-n),this._max=this._min+n,this.updateZoom()}onMinSliderChange(t){let e=this.proxyNavigatorElements[0];this._min=this.setSliderRatioClamped(e,0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(t){let e=this.proxyNavigatorElements[2];this._max=this.setSliderRatioClamped(e,this._min+this.minRange,1),this.updateZoom()}setPanSliderValue(t,e){this.proxyNavigatorElements[1].value=`${Math.round(t*100)}`,this.proxyNavigatorElements[1].ariaValueText=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e})}setSliderRatioClamped(t,e,n){let i=this.getSliderRatio(t),r=ae(e,i,n);return r!==i&&this.setSliderRatio(t,r),r}setSliderRatio(t,e){let n=Math.round(e*100);t.value=`${n}`,t.ariaValueText=qy(n)}getSliderRatio(t){return parseFloat(t.value)/100}layoutNodes(t,e,n,i){let{rangeSelector:r,mask:s,minHandle:o,maxHandle:a,_min:l,_max:c}=this;r.layout(t,e,n,i,o.width/2,a.width/2),s.layout(t,e,n,i),si.align(o,a,t,e,n,i,l,c),l+(c-l)/2<.5?(o.zIndex=3,a.zIndex=4):(o.zIndex=4,a.zIndex=3),[o,this.maskVisibleRange,a].forEach((u,d)=>{let h=u.computeBBox(),f={x:h.x-t,y:h.y-e,height:h.height,width:h.width};or(this.proxyNavigatorElements[d],f)})}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;let{_min:t,_max:e}=this,n=this.ctx.zoomManager.getZoom();if(t==null||e==null)return;let i=r=>{this.min==null&&this.max==null||L.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${r}] has modified the initial zoom state.`)};return this.setPanSliderValue(t,e),this.setSliderRatio(this.proxyNavigatorElements[0],t),this.setSliderRatio(this.proxyNavigatorElements[2],e),this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e},y:n?.y},!1,i)}};g([b(z,{optional:!0})],us.prototype,"miniChart",2);g([b(H),Yt(t=>t.updateGroupVisibility())],us.prototype,"enabled",2);g([b(O)],us.prototype,"height",2);g([b(O)],us.prototype,"spacing",2);g([Wt({newValue(t){this._min=t,this.updateZoom()}}),b(zn(Ie,Na("max")),{optional:!0})],us.prototype,"min",2);g([Wt({newValue(t){this._max=t,this.updateZoom()}}),b(zn(Ie,ka("min")),{optional:!0})],us.prototype,"max",2);var vE={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:us,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}};function Ua({takeColors:t}){let{fills:[e],strokes:[n]}=t(1);return{fill:e,stroke:n}}function wf(t){return{marker:Ua(t)}}var bE=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(bE||{}),xE=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(xE||{}),DE=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(DE||{}),SE=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(SE||{}),wE=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(wE||{}),ME=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(ME||{}),yc=Symbol("is-dark-theme"),Qe=Symbol("default-font"),Dt=Symbol("default-label-colour"),IE=Symbol("default-inverted-label-colour"),ro=Symbol("default-inside-series-label-colour"),$r=Symbol("default-muted-label-colour"),Ma=Symbol("default-axis-grid-colour"),Ih=Symbol("default-axis-line-colour"),vc=Symbol("default-cross-lines-colour"),Bh=Symbol("default-background-colour"),so=Symbol("default-shadow-colour"),ZB=Symbol("default-colours"),Fr=Symbol("default-padding"),Vs=Symbol("default-caption-layout-style"),zs=Symbol("default-caption-alignment"),jh=Symbol("palette-up-stroke"),Vh=Symbol("palette-down-stroke"),CE=Symbol("palette-up-fill"),EE=Symbol("palette-down-fill"),zh=Symbol("palette-neutral-stroke"),TE=Symbol("palette-neutral-fill"),_v=Symbol("default-polar-series-stroke"),Dn=Symbol("default-diverging-series-colour-range"),Pv=Symbol("default-hierarchy-fills"),Fv=Symbol("default-hierarchy-strokes"),Sn=Symbol("default-annotation-stroke"),wn=Symbol("default-annotation-background-fill"),Bv=Symbol("default-annotation-handle-fill"),iu=Symbol("default-toolbar-position"),ar=Symbol("default-gridline-enabled");function AE(t,e,n,i,r){let{addPhaseFn:s,updatePhaseFn:o,removePhaseFn:a}=r,l=(c,u,d)=>{n.animate({id:`${t}_${e}_${u.id}_${c}`,groupId:t,from:0,to:1,ease:Mc,collapsable:!1,onUpdate(h,f){f&&c!=="removed"||(u.path.clear(!0),d(h,u),u.checkPathDirty())},onStop(){c==="added"&&(u.path.clear(!0),d(1,u),u.checkPathDirty())},phase:Ht[c]})};for(let c of i)n.isSkipped()||(l("removed",c,a),l("updated",c,o)),l("added",c,s)}var oh=null;function He(t){if(t!=null)return t===""?"":(oh??(oh=Lt("div")),oh.textContent=String(t),oh.innerHTML)}function Se({id:t},e,n,...i){Ui(t,e,n,i,{opacity:0},{opacity:1},{phase:"trailing"})}function Vr({id:t},e,n,...i){Ui(t,e,n,i,{opacity:1},{opacity:0},{phase:"remove"})}function vr(t){return{opacity:1}}var jv=class extends le{constructor(){super(...arguments),this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},ui=class extends jv{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};g([b(H),j({redraw:3})],ui.prototype,"enabled",2);g([b(we),j({redraw:3})],ui.prototype,"color",2);g([b(Pe),j({redraw:3})],ui.prototype,"xOffset",2);g([b(Pe),j({redraw:3})],ui.prototype,"yOffset",2);g([b(O),j({redraw:3})],ui.prototype,"blur",2);var NE=Oe(t=>cE(t)||typeof t=="function"&&Object.create(t.prototype)instanceof Kt,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),sn=class extends jv{constructor(){super(...arguments),this.enabled=!0,this.shape=Ws,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){let{size:t,shape:e,fill:n,fillOpacity:i,stroke:r,strokeWidth:s,strokeOpacity:o}=this;return{size:t,shape:e,fill:n,fillOpacity:i,stroke:r,strokeWidth:s,strokeOpacity:o}}getDiameter(){return this.size+this.strokeWidth}};g([b(H),j({redraw:3})],sn.prototype,"enabled",2);g([b(NE),j({redraw:3})],sn.prototype,"shape",2);g([b(O),j({redraw:3})],sn.prototype,"size",2);g([b(we,{optional:!0}),j({redraw:3})],sn.prototype,"fill",2);g([b(Ie),j({redraw:3})],sn.prototype,"fillOpacity",2);g([b(we,{optional:!0}),j({redraw:3})],sn.prototype,"stroke",2);g([b(O),j({redraw:3})],sn.prototype,"strokeWidth",2);g([b(Ie),j({redraw:3})],sn.prototype,"strokeOpacity",2);g([b(tn,{optional:!0}),j({redraw:3})],sn.prototype,"itemStyler",2);var kE=class extends le{constructor(){super(...arguments),this.enabled=!1}};g([b(H)],kE.prototype,"enabled",2);var qt=class extends le{constructor(){super(...arguments),this.enabled=!0,this.interaction=new kE,this.position=new Ra,this.range=void 0}toTooltipHtml(t,e){return this.renderer?ba(this.renderer(e),t):ba(t)}};g([b(H)],qt.prototype,"enabled",2);g([b(H,{optional:!0})],qt.prototype,"showArrow",2);g([b(tn,{optional:!0})],qt.prototype,"renderer",2);g([b(z)],qt.prototype,"interaction",2);g([b(z)],qt.prototype,"position",2);g([b(lf,{optional:!0})],qt.prototype,"range",2);var RE=je(["linear","smooth","step"],"a line style"),LE=je(["start","middle","end"]),Ha=class extends le{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};g([b(RE)],Ha.prototype,"type",2);g([b(Ie)],Ha.prototype,"tension",2);g([b(LE)],Ha.prototype,"position",2);var xt=class extends os{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ha,this.shadow=new ui,this.marker=new sn,this.label=new vt,this.tooltip=new qt,this.connectMissingData=!1}};g([b(P)],xt.prototype,"xKey",2);g([b(P,{optional:!0})],xt.prototype,"xName",2);g([b(P)],xt.prototype,"yKey",2);g([b(P,{optional:!0})],xt.prototype,"yName",2);g([b(O,{optional:!0})],xt.prototype,"normalizedTo",2);g([b(we)],xt.prototype,"fill",2);g([b(Ie)],xt.prototype,"fillOpacity",2);g([b(we)],xt.prototype,"stroke",2);g([b(O)],xt.prototype,"strokeWidth",2);g([b(Ie)],xt.prototype,"strokeOpacity",2);g([b(gr)],xt.prototype,"lineDash",2);g([b(O)],xt.prototype,"lineDashOffset",2);g([b(z)],xt.prototype,"interpolation",2);g([b(z)],xt.prototype,"shadow",2);g([b(z)],xt.prototype,"marker",2);g([b(z)],xt.prototype,"label",2);g([b(z)],xt.prototype,"tooltip",2);g([b(H)],xt.prototype,"connectMissingData",2);function Oc({id:t},e,n,...i){let r={phase:n?Ht[n]:"trailing"};Ui(t,"markers",e,i,{opacity:0},{opacity:1},r),i.forEach(s=>s.cleanup())}function Vv({id:t},e,...n){Ui(t,"markers",e,n,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),n.forEach(i=>i.cleanup())}function zv({id:t,nodeDataDependencies:e},n,...i){let r=e.seriesRectWidth;Je(t,"markers",n,i,{fromFn:(a,l)=>{let c=l.midPoint?.x??r,u=ae(0,WM(c/r),1);return isNaN(u)&&(u=0),{scalingX:0,scalingY:0,delay:u,duration:Rh,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function ru(t){return{opacity:1,scalingX:1,scalingY:1}}function _c(t,e){return{translationX:e.point?.x??NaN,translationY:e.point?.y??NaN}}function Gv(t,e){let n=(o,a)=>{let l=t[a][o];return Array.isArray(l)?l[0]:l},i=o=>{let{xValue:a}=o;return t.moved[a]?{point:n(a,"moved"),status:"updated"}:t.removed[a]?{point:n(a,"removed"),status:"removed"}:t.added[a]?{point:n(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{let{status:l,point:c}=i(a);if(l==="unknown")return{opacity:0};let u={translationX:c?.from?.x??o.translationX,translationY:c?.from?.y??o.translationY,opacity:o.opacity,phase:Ht[l]};return e==="added"?N(M({},u),{opacity:0,translationX:c?.to?.x,translationY:c?.to?.y,phase:Ht.added}):(l==="added"&&(u.opacity=0),u)},toFn:(o,a)=>{let{status:l,point:c}=i(a);if(l==="unknown")return{opacity:0};let u={translationX:a.point.x,translationY:a.point.y,opacity:1,phase:Ht[l]};return l==="removed"||e==="removed"?N(M({},u),{translationX:c?.to?.x,translationY:c?.to?.y,opacity:0,phase:Ht.removed}):u}}}function su(t,{datumIndex:e}){let n=t.getNodeData();if(n===void 0)return;let i=n[e];if(i===void 0||i.point===void 0)return;let r=t.getFormattedMarkerStyle(i).size,s=r/2,{x:o,y:a}=t.contentGroup.inverseTransformPoint(i.point.x-s,i.point.y-s);return new V(o,a,r,r)}function XB(t,e,n){let i=n;for(let{x:r,y:s}of e)i?t.lineTo(r,s):(t.moveTo(r,s),i=!0)}var ah=.05;function QB(t,e,n,i){let r=Array.isArray(e)?e:Array.from(e);if(r.length===0||(i?t.lineTo(r[0].x,r[0].y):t.moveTo(r[0].x,r[0].y),r.length<=1))return;let s=r.map((o,a)=>{let l=a===0?o:r[a-1],c=a===r.length-1?o:r[a+1],u=a===0||a===r.length-1;if(Math.sign(l.y-o.y)===Math.sign(c.y-o.y))return 0;if(!u){let d=Math.abs(l.y-c.y),h=Math.abs(o.y-l.y)/d,f=Math.abs(o.y-c.y)/d;if(h<=ah||1-h<=ah||f<=ah||1-f<=ah)return 0}return(c.y-l.y)/(c.x-l.x)});s[1]===0&&(s[0]*=2),s[s.length-2]===0&&(s[s.length-1]*=2);for(let o=1;o<r.length;o+=1){let a=r[o-1],l=s[o-1],c=r[o],u=s[o],d=c.x-a.x,h=c.y-a.y,f=d*n/3,p=d*l*n/3,m=d*n/3,y=d*u*n/3;u===0&&Math.abs(p)>Math.abs(h)&&(f*=Math.abs(h/p),p=Math.sign(p)*Math.abs(h)),l===0&&Math.abs(y)>Math.abs(h)&&(m*=Math.abs(h/y),y=Math.sign(y)*Math.abs(h)),t.cubicCurveTo(a.x+f,a.y+p,c.x-m,c.y-y,c.x,c.y)}}function JB(t,e,n,i){let r;for(let s of e){if(r!=null){let o=r.x<s.x?n:1-n,a=(s.x-r.x)*o+r.x;t.lineTo(a,r?.y??s.y),t.lineTo(a,s.y),t.lineTo(s.x,s.y)}else i?t.lineTo(s.x,s.y):t.moveTo(s.x,s.y);r=s}}function Ry(t){return t.reduce(({min:e,max:n},i)=>((e==null||e.point.x>i.point.x)&&(e=i),(n==null||n.point.x<i.point.x)&&(n=i),{min:e,max:n}),{})}function tM(t,e,n){let i=(e.y-t.y)/(e.x-t.x),r=(n-t.x)*i+t.y;return{x:n,y:r}}function nM(t,e,n,i){let r=-1,s=0,o=[];for(;s<t.length;){if(t[s].change===e){o.push(t[s]),s++;continue}if(t[s].change===n){s++;continue}o.length>0&&(i(o,r,s),o.length=0),r=s,s++}o.length>0&&i(o,r,s)}function Uv(t,e){nM(t,"out","in",(n,i,r)=>{i===-1&&t[r]?n.forEach(s=>s.to=t[r].from):r===t.length&&t[i]?n.forEach(s=>s.to=t[i].from):e==="intersect"&&t[i]?.from&&t[r]?.from?n.forEach(s=>s.to=tM(t[i].from,t[r].from,s.from.x)):n.forEach(s=>s.to=s.from)}),nM(t,"in","out",(n,i,r)=>{i===-1&&t[r]?n.forEach(s=>s.from=t[r].to):r===t.length&&t[i]?n.forEach(s=>s.from=t[i].to):e==="intersect"&&t[i]?.to&&t[r]?.to?n.forEach(s=>s.from=tM(t[i].to,t[r].to,s.to.x)):n.forEach(s=>s.from=s.to)})}function iM(t,e,n){let i=isNaN(t.x)?e.x:t.x,r=isNaN(t.y)?e.y:t.y,s=e.x-t.x,o=e.y-t.y,a=isNaN(s)?0:s*n,l=isNaN(o)?0:o*n;return{x:i+a,y:r+l}}var ej={start:0,middle:.5,end:1};function Wr(t,e,n,i=!1){let{path:r}=e;n?.type==="smooth"?QB(r,t,n.tension??1,i):n?.type==="step"?JB(r,t,ej[n.position??"end"],i):XB(r,t,i)}function Gh(t,e){let n,i,r=[],s=()=>{i!=null&&(r.push(i),i=void 0)};for(let o of t){let{from:a,to:l}=o,c=e[o.change];if(c==null||a==null||l==null)continue;let u=iM(a,l,c);if(o.moveTo===!1)i??(i=[]),i.push(u);else if(o.moveTo===!0||!n)s(),i=[u];else if(n){let d=o.moveTo==="in"?c:1-c,{x:h,y:f}=iM(n,u,d);i??(i=[]),i.push({x:h,y:f}),s(),i=[u]}n=u}return s(),r}function OE(t,e,n,i){Gh(t,e).forEach(r=>{Wr(r,n,i)})}function Hv({id:t,visible:e,nodeDataDependencies:n},i,...r){let{seriesRectWidth:s,seriesRectHeight:o}=n;Ui(t,"path_properties",i,r,{clipX:0},{clipX:s},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function bc({id:t},e,n,i="add",...r){Ui(t,e,n,r,{opacity:0},{opacity:1},{phase:i})}function tj({id:t},e,n,...i){Ui(t,e,n,i,{opacity:1},{opacity:0},{phase:"remove"})}function $v(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function Uh({nodeDataDependencies:t},e){let n=i=>isFinite(i)?i:0;e.clipX=n(t.seriesRectWidth),e.clipY=n(t.seriesRectHeight)}function rM(t){return t.type==="continuous"||t.type==="log"}function sM(t){return t.type==="category"}function oM(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every((n,i)=>n===e.domain[i])&&t.range.every((n,i)=>n===e.range[i])}function aM(t,e){return t===void 0||e===void 0?t!==void 0||e!==void 0:rM(t)&&rM(e)?t.type===e.type&&oM(t,e):sM(t)&&sM(e)?oM(t,e):!1}function*Hh(t){let e=-1,n=0;for(let{point:i}of t){if(i.moveTo){let r=e>=0?{start:e,end:n}:void 0;e=n,n=e,r!==void 0&&(yield r)}n+=1}e!==-1&&(yield{start:e,end:n})}function*$h(t,{start:e,end:n}){for(let i=e;i<n;i+=1)yield t[i].point}function*_E(t,{start:e,end:n}){for(let i=n-1;i>=e;i-=1)yield t[i].point}function lh(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),e.type==="continuous"&&typeof t=="number")return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof t=="number")return e.convert(t);let n=e.domain.findIndex(i=>i===t);return n>=0?e.range[n]:NaN}function nj(t,e){return!aM(t.scales.x,e.scales.x)||!aM(t.scales.y,e.scales.y)}function ij(t,e){let n=Number(t),i=Number(e);return!isNaN(n)&&!isNaN(i)?Math.abs(i-n)<.25:t===e}function PE(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function Pc(t,e,n={}){let{backfillSplitMode:i="intersect"}=n,r=m=>({x:lh(m.xValue??NaN,t.scales.x),y:lh(m.yValue??NaN,t.scales.y)}),s=m=>({x:lh(m.xValue??NaN,e.scales.x),y:lh(m.yValue??NaN,e.scales.y)}),o=[],a={added:{},moved:{},removed:{}},l=(m,y,v,x="move")=>{m&&(isNaN(m.point.x)||isNaN(m.point.y))&&(m=y);let D={from:m?.point,to:y?.point,moveTo:PE(m?.point.moveTo,y?.point.moveTo),change:x};x==="move"?(a.moved[v]=D,f++,p++):x==="in"?(a.added[v]=D,p++):x==="out"&&(a.removed[v]=D,f++),o.push(D)},{min:c,max:u}=Ry(e.nodeData),{min:d,max:h}=Ry(t.nodeData),f=0,p=0;for(;f<e.nodeData.length||p<t.nodeData.length;){let m=e.nodeData[f],y=t.nodeData[p],v=m?r(m):void 0,x=y?s(y):void 0,D=void 0;if(v&&ij(v.x,y?.point.x))l(m,y,y.xValue,"move");else if(v&&v.x<(d?.point.x??-1/0))l(m,D,m.xValue,"out");else if(v&&v.x>(h?.point.x??1/0))l(m,D,m.xValue,"out");else if(x&&x.x<(c?.point.x??-1/0))l(D,y,y.xValue,"in");else if(x&&x.x>(u?.point.x??1/0))l(D,y,y.xValue,"in");else if(v&&v.x<y?.point.x)l(m,D,m.xValue,"out");else if(x&&x.x<m?.point.x)l(D,y,y.xValue,"in");else if(m)l(m,D,m.xValue,"out");else if(y)l(D,y,y.xValue,"in");else throw new Error("Unable to process points")}return Uv(o,i),{result:o,resultMap:a}}function Fc(t,e,n,i={}){let{backfillSplitMode:r="intersect",multiDatum:s=!1}=i,o=[],a={added:{},moved:{},removed:{}},l={added:{},moved:{},removed:{}},c={in:"added",move:"moved",out:"removed"},u,d,h=(v,x)=>{var D;let S=c[x.change];s?((D=l[S])[v]??(D[v]=[]),l[S][v].push(x)):a[S][v]=x,u=x,d=ha(v)},f=0,p=0,m=!1;for(;f<e.nodeData.length||p<t.nodeData.length;){let v=e.nodeData[f],x=t.nodeData[p],D=ha(v?.xValue),S=ha(x?.xValue),w;if(D===S)w={change:"move",moveTo:PE(v.point.moveTo??!1,x.point.moveTo),from:v.point,to:x.point},h(v?.xValue,w),f++,p++;else if(n?.removed.has(String(D)))w={change:"out",moveTo:v.point.moveTo??!1,from:v.point},h(v?.xValue,w),f++;else if(n?.added.has(String(S)))w={change:"in",moveTo:x.point.moveTo??!1,to:x.point},h(x?.xValue,w),p++;else if(s&&u&&d===D)w=M({},u),h(v?.xValue,w),f++;else if(s&&u&&d===S)w=M({},u),h(x?.xValue,w),p++;else{m=!0;break}o.push(w)}let y=-1/0;return m||(m=o.some(v=>{let{change:x,to:{x:D=-1/0}={}}=v;if(x==="out")return;let S=D<y;return y=D,S})),m?{result:void 0,resultMap:void 0}:(Uv(o,r),{result:o,resultMap:s?l:a})}function Wv(t,e,n){let i="updated",r=s=>s.visible;if(!r(e)&&r(t))i="added";else if(r(e)&&!r(t))i="removed";else for(let s=0;s<n.length&&!(n[s].change!=="move"||n[s].from?.x!==n[s].to?.x||n[s].from?.y!==n[s].to?.y);s++)if(s===n.length-1)return"no-op";return i}function Yv(t,e){let n=e==="none"?"updated":t,i={fromFn:r=>{let s;return t==="removed"?s={finish:{visible:!1}}:t==="added"?s={start:{visible:!0}}:s={},M({phase:Ht[n]},s)},toFn:r=>({phase:Ht[n]})};return e==="fade"?{fromFn:r=>{let s=t==="added"?0:r.opacity;return M({opacity:s},i.fromFn(r))},toFn:r=>M({opacity:t==="removed"?0:1},i.toFn(r))}:i}function FE(t,e,n,i,r,s){let o=Wv(t,e,n),a=(d,h)=>{s(n,{move:0,out:d},h,r)},l=(d,h)=>{s(n,{move:d},h,r)},c=(d,h)=>{s(n,{move:1,in:d},h,r)},u=Yv(o,i);return{status:o,path:{addPhaseFn:c,updatePhaseFn:l,removePhaseFn:a},pathProperties:u}}function BE(t,e,n,i){let r=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(r!==s)return;let{result:o,resultMap:a}=r?Fc(t,e,n):Pc(t,e),l="updated";if(e.visible&&!t.visible?l="removed":!e.visible&&t.visible&&(l="added"),o===void 0||a===void 0)return;let c=(n?.changed??!0)||nj(t,e)||l!=="updated",u=FE(t,e,o,"fade",i,OE),d=Gv(a,l);return N(M({},u),{marker:d,hasMotion:c})}var jE=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(jE||{});function Wh(t){let{points:e,phantomPoints:n}=t.fillData;return{top:e,bottom:n}}function zr(t,e,n){return{scales:e.scales,nodeData:n[t],visible:e.visible}}function rj(t,e,n){let i=Wh(e),r=Wh(t),s={multiDatum:!0};return{top:Fc(zr("top",t,r),zr("top",e,i),n,s),bottom:Fc(zr("bottom",t,r),zr("bottom",e,i),n,s)}}function sj(t,e){let n=Wh(e),i=Wh(t);return{top:Pc(zr("top",t,i),zr("top",e,n)),bottom:Pc(zr("bottom",t,i),zr("bottom",e,n))}}function Ym(t,e,n,i,r){let s=Gh(t,n),o=Gh(e,n);if(s.length===o.length)for(let a=0;a<s.length;a+=1){let l=s[a],c=o[a].reverse();Wr(l,i,r,!1),Wr(c,i,r,!0),i.path.closePath()}}function VE(t,e,n,i,r,s){let o=Wv(t,e,n),a=(d,h)=>{Ym(n,i,{move:0,out:d},h,s)},l=(d,h)=>{Ym(n,i,{move:d},h,s)},c=(d,h)=>{Ym(n,i,{move:1,in:d},h,s)},u=Yv(o,r);return{status:o,path:{addPhaseFn:c,updatePhaseFn:l,removePhaseFn:a},pathProperties:u}}function zE(t,e,n,i){let r=t.scales.x?.type==="category",s=e.scales.x?.type==="category";if(r!==s)return;let o="updated";e.visible&&!t.visible?o="removed":!e.visible&&t.visible&&(o="added");let a=()=>r?Fc(t,e,n,{backfillSplitMode:"static",multiDatum:!0}):Pc(t,e,{backfillSplitMode:"static"}),l=()=>r?rj(t,e,n):sj(t,e),{resultMap:c}=a(),{top:u,bottom:d}=l();if(c===void 0||u.result===void 0||d.result===void 0)return;let h=u.result,f=d.result,m=(e.stackVisible?t.stackVisible:!1)?"none":"fade",y=VE(t,e,h,f,m,i),v=Gv(c,o);return{status:y.status,fill:y,marker:v}}var oj=(()=>{let t=class extends as{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:$v({getOpacity:()=>this.getOpacity()}),label:vr,marker:(n,i)=>M(M({},ru(n)),_c(n,i))}}),this.properties=new xt}processData(e){return k(this,null,function*(){if(this.data==null||!this.properties.isValid())return;let{data:n,visible:i,seriesGrouping:{groupIndex:r=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:a,connectMissingData:l,normalizedTo:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,h=this.axes.y?.scale,{isContinuousX:f,xScaleType:p,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:h}),y={value:`area-stack-${r}-yValue`,values:`area-stack-${r}-yValues`,valuesTrailing:`area-stack-${r}-yValues-trailing`,marker:`area-stack-${r}-yValues-marker`},v={values:`area-stack-${r}-yValues-prev`,valuesTrailing:`area-stack-${r}-yValues-trailing-prev`},x=[];wc(c)&&(x.push(Rc(Object.values(y),c,"range")),x.push(Rc(Object.values(v),c,"range"))),!f&&u&&this.processedData&&x.push(to(this.processedData)),u&&x.push(Ba());let D={invalidValue:null};l&&s>1&&(D.invalidValue=0),i||(D.forceValue=0),yield this.requestDataModel(e,n,{props:[_t(o,p,{id:"xValue"}),Re(a,m,M({id:"yValueRaw"},D)),...tE(a,N(M({id:"yValueContinuity"},D),{groupId:`area-stack-${r}-yValues-continuity`})),Re(a,m,N(M({id:"yValue"},D),{groupId:y.value})),...ri(a,"window-trailing","current",N(M({id:"yValueStart"},D),{groupId:y.valuesTrailing}),m),...ri(a,"window","current",N(M({id:"yValueEnd"},D),{groupId:y.values}),m),...ri(a,"normal","current",N(M({id:"yValueCumulative"},D),{groupId:y.marker}),m),...ri(a,"window","last",N(M({id:"yValuePreviousEnd"},D),{groupId:v.values}),m),...ri(a,"window-trailing","last",N(M({id:"yValuePreviousStart"},D),{groupId:v.valuesTrailing}),m),...x],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:n,dataModel:i,axes:r}=this;if(!n||!i||n.data.length===0)return[];let s=r.x,o=r.y,a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",n),c=i.getDomain(this,"yValueEnd","value",n);if(e==="x")return a?.def.type==="key"&&a.def.valueType==="category"?l:en(Hi(l),s);if(o instanceof tu||o instanceof xf)return en(c,o);{let u=[c[0]>0?0:c[0],c[1]<0?0:c[1]];return en(u,o)}}createNodeData(){return k(this,null,function*(){let{axes:e,data:n,processedData:{data:i}={},dataModel:r}=this,s=e.x,o=e.y;if(!s||!o||!n||!r||!this.properties.isValid())return;let{yKey:a,xKey:l,marker:c,label:u,fill:d,stroke:h,connectMissingData:f}=this.properties,{scale:p}=s,{scale:m}=o,{isContinuousY:y}=this.getScaleInformation({xScale:p,yScale:m}),v=(p.bandwidth??0)/2,x=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative","yValueContinuity","yValue"]),D=(se,ne,q)=>{let xe;return(wc(this.properties.normalizedTo)?y&&pf(q):!isNaN(q))&&(xe=ne),{x:p.convert(se)+v,y:m.convert(xe),size:c.size}},S=a,w=[],I=[],{visibleSameStackCount:C}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),T={itemId:S,fillData:{itemId:S,points:[],phantomPoints:[]},strokeData:{itemId:S,points:[]},labelData:w,nodeData:I,scales:this.calculateScaling(),visible:this.visible,stackVisible:C>0},E=T.fillData.points,A=T.fillData.phantomPoints,R=T.strokeData.points,_=-1,G,J,ee=!0;return i?.forEach(se=>{let{keys:ne,keys:[q],datum:xe,values:Xe}=se;Xe.forEach((Ce,ot)=>{_++;let Ge=xe[ot],Ye=r.resolveProcessedDataDefsValues(x,{keys:ne,values:Ce}),{yValueRaw:Le,yValueCumulative:jt,yValueContinuity:B}=Ye,{yValueStart:de,yValueEnd:$,yValuePreviousStart:Y,yValuePreviousEnd:De,yValue:at}=Ye,fe=Le!=null,lt=D(q,+jt,Le);if(fe&&c&&I.push({index:_,series:this,itemId:S,datum:Ge,midPoint:{x:lt.x,y:lt.y},cumulativeValue:$,yValue:Le,xValue:q,yKey:a,xKey:l,point:lt,fill:c.fill??d,stroke:c.stroke??h,strokeWidth:c.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth)}),fe&&u){let di=this.getLabelText(u,{value:Le,datum:Ge,xKey:l,yKey:a,xName:this.properties.xName,yName:this.properties.yName},qa=>be(qa)?qa.toFixed(2):String(qa));w.push({index:_,series:this,itemId:a,datum:Ge,x:lt.x,y:lt.y,label:di?{text:di,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}if(fe||!f){fe||(ee=!0);let di=!ee&&!f;di&&J===!1&&B===!0?(E.push({point:{x:lt.x,y:m.convert($),moveTo:!1},yValue:Le,xValue:q}),A.push({point:{x:lt.x,y:m.convert(de),moveTo:!1},yValue:Le,xValue:q}),R.push({point:{x:lt.x,y:m.convert($),moveTo:!1},yValue:Le,xValue:q}),ee=!0):di&&J===!0&&B===!1&&(E.push({point:{x:p.convert(G)+v,y:m.convert(De),moveTo:!0},yValue:Le,xValue:q}),A.push({point:{x:p.convert(G)+v,y:m.convert(Y),moveTo:!0},yValue:Le,xValue:q}),R.push({point:{x:p.convert(G)+v,y:m.convert(De),moveTo:!0},yValue:Le,xValue:q}),ee=!1),E.push({point:{x:lt.x,y:m.convert(jt),moveTo:ee},yValue:Le,xValue:q}),A.push({point:{x:lt.x,y:m.convert(jt-at),moveTo:ee},yValue:Le,xValue:q}),R.push({point:{x:lt.x,y:m.convert(jt),moveTo:ee},yValue:Le,xValue:q}),ee=!fe}G=q,J=B})}),T})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,n=Vi(e);return new n}updatePathNodes(e){return k(this,null,function*(){let{opacity:n,visible:i,animationEnabled:r}=e,[s,o]=e.paths,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({tag:1,fill:void 0,lineJoin:o.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:n,visible:i}),s.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:n,visible:i||r,strokeWidth:a}),Uh(this,o),Uh(this,s)})}updatePaths(e){return k(this,null,function*(){this.updateAreaPaths(e.paths,e.contextData)})}updateAreaPaths(e,n){this.updateFillPath(e,n),this.updateStrokePath(e,n)}updateFillPath(e,n){let{points:i,phantomPoints:r}=n.fillData,[s]=e,{interpolation:o}=this.properties;s.path.clear(!0);for(let a of Hh(i))Wr($h(i,a),s,o,!1),Wr(_E(r,a),s,o,!0),s.path.closePath();s.checkPathDirty()}updateStrokePath(e,n){let{points:i}=n.strokeData,[,r]=e,{path:s}=r,{interpolation:o}=this.properties;s.clear(!0);for(let a of Hh(i))Wr($h(i,a),r,o);r.checkPathDirty()}updateMarkerSelection(e){return k(this,null,function*(){let{nodeData:n,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?n:[])})}updateMarkerNodes(e){return k(this,null,function*(){let{markerSelection:n,isHighlight:i}=e,{xKey:r,yKey:s,marker:o,fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d,highlightStyle:h}=this.properties,f=ue(i&&h.item,o.getStyle(),{fill:a,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:d});n.each((p,m)=>{this.updateMarkerStyle(p,o,{datum:m,highlighted:i,xKey:r,yKey:s},f)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return k(this,null,function*(){let{labelData:n,labelSelection:i}=e;return i.update(n,r=>{r.tag=3})})}updateLabelNodes(e){return k(this,null,function*(){let{labelSelection:n}=e,{enabled:i,fontStyle:r,fontWeight:s,fontSize:o,fontFamily:a,color:l}=this.properties.label;n.each((c,u)=>{let{x:d,y:h,label:f}=u;f&&i&&this.visible?(c.fontStyle=r,c.fontWeight=s,c.fontSize=o,c.fontFamily=a,c.textAlign=f.textAlign,c.textBaseline=f.textBaseline,c.text=f.text,c.x=d,c.y=h-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(e){let{id:n,axes:i,dataModel:r}=this,{xKey:s,xName:o,yName:a,tooltip:l,marker:c}=this.properties,{yKey:u,xValue:d,yValue:h,datum:f,itemId:p}=e,m=i.x,y=i.y;if(!this.properties.isValid()||!(m&&y&&be(h))||!r)return mr;let v=m.formatDatum(d),x=y.formatDatum(h),D=He(a),S=He(v+": "+x),w=ue({fill:this.properties.fill},c.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:I}=this.getMarkerStyle(c,{datum:e,xKey:s,yKey:u,highlighted:!1},w);return l.toTooltipHtml({title:D,content:S,backgroundColor:I},{datum:f,itemId:p,xKey:s,xName:o,yKey:u,yName:a,color:I,title:D,seriesId:n})}getLegendData(e){if(!this.data?.length||!this.properties.isValid()||!this.properties.showInLegend||e!=="category")return[];let{yKey:n,yName:i,fill:r,stroke:s,fillOpacity:o,strokeOpacity:a,strokeWidth:l,lineDash:c,marker:u,visible:d,legendItemName:h}=this.properties,f=!u.enabled||u.fill===void 0;return[{legendType:e,id:this.id,itemId:n,seriesId:this.id,enabled:d,label:{text:h??i??n},symbols:[{marker:{shape:u.shape,fill:f?r:u.fill,fillOpacity:f?o:u.fillOpacity,stroke:u.stroke??s,strokeOpacity:u.strokeOpacity??a,strokeWidth:u.strokeWidth??0,enabled:u.enabled||l<=0},line:{stroke:s,strokeOpacity:a,strokeWidth:l,lineDash:c}}],legendItemName:h}]}animateEmptyUpdateReady(e){let{markerSelection:n,labelSelection:i,contextData:r,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,r),Hv(this,o,...s),dt([n],_c),zv(this,o,n),Se(this,"labels",o,i)}animateReadyResize(e){let{contextData:n,paths:i}=e;this.updateAreaPaths(i,n),super.animateReadyResize(e)}animateWaitingUpdateReady(e){let{animationManager:n}=this.ctx,{markerSelection:i,labelSelection:r,contextData:s,paths:o,previousContextData:a}=e,[l,c]=o;if(l==null&&c==null)return;super.resetAllAnimation(e);let u=()=>{this.updateAreaPaths(o,s),this.updateStrokePath(o,s)},d=()=>{n.skipCurrentBatch(),u()};if(s==null||a==null){u(),Oc(this,n,"added",i),bc(this,"fill_path_properties",n,"add",l),bc(this,"stroke",n,"trailing",c),Se(this,"labels",n,r);return}let h=zE(s,a,this.processedData?.reduced?.diff,this.properties.interpolation);if(h===void 0){d();return}else if(h.status==="no-op")return;Oc(this,n,void 0,i),Je(this.id,"fill_path_properties",n,[l],h.fill.pathProperties),AE(this.id,"fill_path_update",n,[l],h.fill.path),this.updateStrokePath(o,s),bc(this,"stroke",n,"trailing",c),Se(this,"labels",n,r)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new U}getFormattedMarkerStyle(e){let{xKey:n,yKey:i}=e;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:n,yKey:i,highlighted:!0})}computeFocusBounds(e){return su(this,e)}};return t.className="AreaSeries",t.type="area",t})(),aj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:oj,stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:so,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Qe,color:Dt}}},paletteFactory:t=>{let{marker:e}=wf(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};function*GE(t){for(let e of t.children)yield e}function Kv(t,e){for(let n of e){let i=n.datum;i===void 0?L.error("undefined datum"):t.addValue(n,i)}}function qv(t,e){let{x:n,y:i}=t.contentGroup.transformPoint(e.x,e.y),{nearest:r,distanceSquared:s}=t.getQuadTree().find(n,i);if(r!==void 0)return{datum:r.value,distance:Math.sqrt(s)}}var Zv=class extends os{constructor(){super(...arguments),this.direction="vertical"}};g([b(sI)],Zv.prototype,"direction",2);var UE=class extends as{constructor(){super(...arguments),this.groupScale=new Kr,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){let t=this.getCategoryDirection();return this.axes[t]}updateGroupScale(t){let{groupScale:e,smallestDataInterval:n,ctx:{seriesStateManager:i}}=this,r=t.scale,s=ke.is(r)?r.calcBandwidth(n):r.bandwidth,o=[],{index:a,visibleGroupCount:l}=i.getVisiblePeerGroupIndex(this);for(let u=0;u<l;u++)o.push(String(u));return e.domain=o,e.range=[0,s??0],t instanceof Pa?e.paddingInner=t.groupPaddingInner:t instanceof Da?e.padding=.1:e.padding=0,e.round=e.padding!==0,{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:a}}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}initQuadTree(t){Kv(t,this.datumNodesIter())}pickNodeClosestDatum(t){return qv(this,t)}},HE=class extends vt{constructor(){super(...arguments),this.placement="inside"}};g([b(oI)],HE.prototype,"placement",2);var ht=class extends Zv{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new ui,this.label=new HE,this.tooltip=new qt}};g([b(P)],ht.prototype,"xKey",2);g([b(P,{optional:!0})],ht.prototype,"xName",2);g([b(P)],ht.prototype,"yKey",2);g([b(P,{optional:!0})],ht.prototype,"yName",2);g([b(P,{optional:!0})],ht.prototype,"stackGroup",2);g([b(Pe,{optional:!0})],ht.prototype,"normalizedTo",2);g([b(we)],ht.prototype,"fill",2);g([b(Ie)],ht.prototype,"fillOpacity",2);g([b(we)],ht.prototype,"stroke",2);g([b(O)],ht.prototype,"strokeWidth",2);g([b(Ie)],ht.prototype,"strokeOpacity",2);g([b(gr)],ht.prototype,"lineDash",2);g([b(O)],ht.prototype,"lineDashOffset",2);g([b(O)],ht.prototype,"cornerRadius",2);g([b(H,{optional:!0})],ht.prototype,"crisp",2);g([b(tn,{optional:!0})],ht.prototype,"itemStyler",2);g([b(z,{optional:!0})],ht.prototype,"shadow",2);g([b(z)],ht.prototype,"label",2);g([b(z)],ht.prototype,"tooltip",2);function $E({rect:t,config:e}){let{crisp:n=!0,fill:i,stroke:r,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:u,cornerRadius:d=0,topLeftCornerRadius:h=!0,topRightCornerRadius:f=!0,bottomRightCornerRadius:p=!0,bottomLeftCornerRadius:m=!0,visible:y=!0}=e;t.crisp=n,t.fill=i,t.stroke=r,t.strokeWidth=s,t.fillOpacity=o,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=u,t.topLeftCornerRadius=h?d:0,t.topRightCornerRadius=f?d:0,t.bottomRightCornerRadius=p?d:0,t.bottomLeftCornerRadius=m?d:0,t.visible=y}function WE(l){var c=l,{datum:t,isHighlighted:e,style:n,highlightStyle:i,itemStyler:r,seriesId:s,ctx:{callbackCache:o}}=c,a=Ve(c,["datum","isHighlighted","style","highlightStyle","itemStyler","seriesId","ctx"]);let{fill:u,fillOpacity:d,stroke:h,strokeWidth:f,strokeOpacity:p,lineDash:m,lineDashOffset:y,cornerRadius:v=0}=ue(e&&i,n),{fillShadow:x,topLeftCornerRadius:D=!0,topRightCornerRadius:S=!0,bottomRightCornerRadius:w=!0,bottomLeftCornerRadius:I=!0}=n,C;return r&&(C=o.call(r,M({datum:t.datum,xKey:t.xKey,fill:u,fillOpacity:d,stroke:h,strokeWidth:f,strokeOpacity:p,lineDash:m,lineDashOffset:y,cornerRadius:v,highlighted:e,seriesId:s},a))),{fill:C?.fill??u,fillOpacity:C?.fillOpacity??d,stroke:C?.stroke??h,strokeWidth:C?.strokeWidth??f,strokeOpacity:C?.strokeOpacity??p,lineDash:C?.lineDash??m,lineDashOffset:C?.lineDashOffset??y,cornerRadius:C?.cornerRadius??v,topLeftCornerRadius:D,topRightCornerRadius:S,bottomRightCornerRadius:w,bottomLeftCornerRadius:I,fillShadow:x}}function YE(t,e,n,i){if(e!=null){let[r,s]=e;if(r!==0||s!==1)return!1}if(ke.is(t)){let r=t.calcBandwidth(i)-t.calcBandwidth(n);if(r>0&&r<1)return!1}return!0}var Km=t=>Ia(t.yValue??0);function Bc(t,e,n){let{startingX:i,startingY:r}=cj(t,e);return{isVertical:t,calculate:(o,a)=>{let l=t?o.x:i,c=t?r:o.y,u=t?o.width:0,d=t?0:o.height,{opacity:h}=o;a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,u=t?a.width:0,d=t?0:a.height,t&&!Km(a)?c+=a.height:!t&&Km(a)&&(l+=a.width));let f;return o.clipBBox==null?f=void 0:Km(o)?f=t?new V(l,c-d,u,d):new V(l-u,c,u,d):f=new V(l,c,u,d),{x:l,y:c,width:u,height:d,clipBBox:f,opacity:h}},mode:n}}function lj(t,e){return{isVertical:t,calculate:n=>({x:t?n.x:n.x+n.width/2,y:t?n.y+n.height/2:n.y,width:t?n.width:0,height:t?0:n.height,clipBBox:n.clipBBox,opacity:n.opacity}),mode:e}}function jc(t){let e=r=>r==null||isNaN(r.x)||isNaN(r.y);return{toFn:(r,s,o)=>{let a;return o==="removed"&&r.datum==null&&t.mode==="fade"?a=N(M({},Vc(r,s)),{opacity:0}):o==="removed"||e(s)?a=t.calculate(s,r.previousDatum):a={x:s.x,y:s.y,width:s.width,height:s.height,clipBBox:s.clipBBox,opacity:s.opacity},a},fromFn:(r,s,o)=>{o==="updated"&&e(s)?o="removed":o==="updated"&&e(r.previousDatum)&&(o="added");let a;o==="added"&&r.previousDatum==null&&t.mode==="fade"?a=N(M({},Vc(r,s)),{opacity:0}):o==="unknown"||o==="added"?a=t.calculate(s,r.previousDatum):a={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity};let l=Ht[o];return N(M({},a),{phase:l})}}}function cj(t,e){let n=e[t?"y":"x"],i=1/0,r=0;return n?(t?r=n.scale.convert(ke.is(n.scale)?0:Math.max(...n.range)):i=n.scale.convert(ke.is(n.scale)?0:Math.min(...n.range)),{startingX:i,startingY:r}):{startingX:i,startingY:r}}function Vc(t,{x:e,y:n,width:i,height:r,clipBBox:s,opacity:o}){return{x:e,y:n,width:i,height:r,clipBBox:s,opacity:o}}function Xv(t,e,n){if(t===void 0)return;let{x:i,y:r,width:s,height:o}=t;return e.inverseTransformBBox(new V(i,r,s,o)).clip(n)}function KE(t,e,n){if(e.enabled&&n){let{x:i,y:r,text:s,textAlign:o,textBaseline:a}=n,{color:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h}=e;t.setProperties({visible:!0,x:i,y:r,text:s,fill:l,fontStyle:c,fontWeight:u,fontSize:d,fontFamily:h,textAlign:o,textBaseline:a})}else t.visible=!1}function qE({isPositive:t,isVertical:e,placement:n,padding:i=0,rect:r}){let s=r.x+r.width/2,o=r.y+r.height/2,a="center",l="middle";switch(n){case"start":{e?(o=t?r.y+r.height+i:r.y-i,l=t?"top":"bottom"):(s=t?r.x-i:r.x+r.width+i,a=t?"start":"end");break}case"outside":case"end":{e?(o=t?r.y-i:r.y+r.height+i,l=t?"bottom":"top"):(s=t?r.x+r.width+i:r.x-i,a=t?"start":"end");break}}return{x:s,y:o,textAlign:a,textBaseline:l}}var uj=(()=>{let t=class extends UE{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,pickModes:[3,0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Vc,label:vr}}),this.properties=new ht}processData(e){return k(this,null,function*(){if(!this.properties.isValid()||!this.data)return;let{seriesGrouping:{groupIndex:n=this.id}={},data:i=[]}=this,{xKey:r,yKey:s,normalizedTo:o}=this.properties,a=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:u,xScaleType:d,yScaleType:h}=this.getScaleInformation({xScale:l,yScale:c}),f=`bar-stack-${n}-yValues`,p=`${f}-trailing`,m=[];be(o)&&m.push(Rc([f,p],Math.abs(o),"range")),a&&this.processedData&&m.push(to(this.processedData)),a&&m.push(Ba());let y=this.visible?{}:{forceValue:0},{processedData:v}=yield this.requestDataModel(e,i,{props:[_t(r,d,{id:"xValue"}),Re(s,h,M({id:"yValue-raw",invalidValue:null},y)),...ri(s,"normal","current",M({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},y),h),...ri(s,"trailing","current",M({id:"yValue-start",invalidValue:null,missingValue:0,groupId:p,separateNegative:!0},y),h),...u?[YC,KC]:[],...m],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=v.reduced?.smallestKeyInterval,this.largestDataInterval=v.reduced?.largestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:n,dataModel:i,smallestDataInterval:r}=this;if(!n||!i||n.data.length===0)return[];let s=this.getCategoryAxis(),o=this.getValueAxis(),a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",n),c=i.getDomain(this,"yValue-end","value",n);if(e===this.getCategoryDirection()){if(a?.def.type==="key"&&a.def.valueType==="category")return l;let u=be(r)?r*.5:0,d=Hi(l)??[NaN,NaN],h=d[0]+-u,f=d[1]+u;return en([h,f],s)}else{if(this.getValueAxis()instanceof tu)return en(c,o);{let u=[Math.min(0,c[0]),Math.max(0,c[1])];return en(u,o)}}}createNodeData(){return k(this,null,function*(){let{dataModel:e}=this,n=this.getCategoryAxis(),i=this.getValueAxis();if(!e||!n||!i||!this.properties.isValid())return;let r=n.scale,s=i.scale,{xKey:o,yKey:a,xName:l,yName:c,fill:u,stroke:d,strokeWidth:h,cornerRadius:f,legendItemName:p,label:m}=this.properties,y=i.isReversed(),{barWidth:v,groupIndex:x}=this.updateGroupScale(n),D=ke.is(r)?v*-.5:0,S=e.resolveProcessedDataIndexById(this,"xValue"),w=e.resolveProcessedDataIndexById(this,"yValue-raw"),I=e.resolveProcessedDataIndexById(this,"yValue-start"),C=e.resolveProcessedDataIndexById(this,"yValue-end"),T=e.resolveProcessedDataIndexById(this,"yValue-range"),E=!this.ctx.animationManager.isSkipped(),A={itemId:a,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible||E},{groupScale:R,processedData:_}=this;return _?.data.forEach(({keys:G,datum:J,values:ee,aggValues:se})=>{ee.forEach((ne,q)=>{let xe=G[S],Xe=r.convert(xe),Ce=+ne[C],ot=+ne[I],Ge=ne[w],Ye=Ge>=0&&!Object.is(Ge,-0),Le=Ye!==y,jt=se?.[T][Ye?1:0]??0,B=Xe+R.convert(String(x))+D;if(isNaN(Ce))return;let de=s.convert(Ce),$=s.convert(ot),Y=this.getBarDirection()==="x",De=s.convert(jt),at=s.convert(0),fe={x:Y?Math.min(de,$):B,y:Y?B:Math.min(de,$),width:Y?Math.abs($-de):v,height:Y?v:Math.abs($-de)},lt=new V(fe.x,fe.y,fe.width,fe.height),di={x:Y?Math.min(at,De):B,y:Y?B:Math.min(at,De),width:Y?Math.abs(at-De):v,height:Y?v:Math.abs(at-De),clipBBox:lt},{fontStyle:qa,fontWeight:yT,fontSize:vT,fontFamily:bT,color:xT,placement:DT}=m,ub=this.getLabelText(this.properties.label,{datum:J[q],value:Ge,xKey:o,yKey:a,xName:l,yName:c,legendItemName:p},Af=>be(Af)?Af.toFixed(2):String(Af)),ST=ub?M({text:ub,fill:xT,fontStyle:qa,fontWeight:yT,fontSize:vT,fontFamily:bT},qE({isPositive:Ye,isVertical:!Y,placement:DT,rect:fe})):void 0,db=this.shouldFlipXY()?fe.height:fe.width,hb={series:this,itemId:a,datum:J[q],valueIndex:q,cumulativeValue:Ce,xValue:xe,yValue:Ge,yKey:a,xKey:o,capDefaults:{lengthRatioMultiplier:db,lengthMax:db},x:di.x,y:di.y,width:di.width,height:di.height,midPoint:{x:fe.x+fe.width/2,y:fe.y+fe.height/2},fill:u,stroke:d,opacity:1,strokeWidth:h,cornerRadius:f,topLeftCornerRadius:Y!==Le,topRightCornerRadius:Le,bottomRightCornerRadius:Y===Le,bottomLeftCornerRadius:!Le,clipBBox:lt,label:ST,missing:Ge==null};A.nodeData.push(hb),A.labelData.push(hb)})}),A})}nodeFactory(){return new rn}updateDatumSelection(e){return k(this,null,function*(){return e.datumSelection.update(e.nodeData,n=>{n.tag=0},n=>Zr(n.xValue,n.valueIndex))})}updateDatumNodes(e){return k(this,null,function*(){if(!this.properties.isValid())return;let{yKey:n,stackGroup:i,fill:r,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u,itemStyler:d,shadow:h,highlightStyle:{item:f}}=this.properties,p=this.axes.x,m=this.properties.crisp??YE(p?.scale,p?.visibleRange,this.smallestDataInterval,this.largestDataInterval),y=this.getCategoryDirection()==="x";e.datumSelection.each((v,x)=>{let D={fill:r,stroke:o,fillOpacity:s,strokeOpacity:l,lineDash:c,lineDashOffset:u,fillShadow:h,strokeWidth:this.getStrokeWidth(a),cornerRadius:x.cornerRadius,topLeftCornerRadius:x.topLeftCornerRadius,topRightCornerRadius:x.topRightCornerRadius,bottomRightCornerRadius:x.bottomRightCornerRadius,bottomLeftCornerRadius:x.bottomLeftCornerRadius},S=y?(x.clipBBox?.width??x.width)>0:(x.clipBBox?.height??x.height)>0,w=WE({datum:x,ctx:this.ctx,seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:f,yKey:n,style:D,itemStyler:d,stackGroup:i});w.crisp=m,w.visible=S,$E({rect:v,config:w})})})}updateLabelSelection(e){return k(this,null,function*(){let n=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(n,i=>{i.tag=1,i.pointerEvents=1})})}updateLabelNodes(e){return k(this,null,function*(){e.labelSelection.each((n,i)=>{KE(n,this.properties.label,i.label)})})}getTooltipHtml(e){let{id:n,processedData:i,ctx:{callbackCache:r}}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!i||!this.properties.isValid()||!s||!o)return mr;let{xKey:a,yKey:l,xName:c,yName:u,fill:d,stroke:h,strokeWidth:f,tooltip:p,itemStyler:m,stackGroup:y,legendItemName:v}=this.properties,{xValue:x,yValue:D,datum:S,itemId:w}=e,I=s.formatDatum(x),C=o.formatDatum(D),T=He(u),E=He(I+": "+C),A;m&&(A=r.call(m,{seriesId:n,datum:S,xKey:a,yKey:l,stackGroup:y,fill:d,stroke:h,strokeWidth:this.getStrokeWidth(f),highlighted:!1,cornerRadius:this.properties.cornerRadius,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash??[],lineDashOffset:this.properties.lineDashOffset}));let R=A?.fill??d;return p.toTooltipHtml({title:T,content:E,backgroundColor:R},M({seriesId:n,itemId:w,datum:S,xKey:a,yKey:l,xName:c,yName:u,stackGroup:y,title:T,color:R,legendItemName:v},this.getModuleTooltipParams()))}getLegendData(e){let{showInLegend:n}=this.properties;if(e!=="category"||!this.data?.length||!this.properties.isValid()||!n)return[];let{yKey:i,yName:r,fill:s,stroke:o,strokeWidth:a,fillOpacity:l,strokeOpacity:c,legendItemName:u,visible:d}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:d,label:{text:u??r??i},symbols:[{marker:{fill:s,fillOpacity:l,stroke:o,strokeWidth:a,strokeOpacity:c}}],legendItemName:u}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:n,annotationSelections:i}){let r=jc(Bc(this.isVertical(),this.axes,"normal"));Je(this.id,"nodes",this.ctx.animationManager,[e],r),Se(this,"labels",this.ctx.animationManager,n),Se(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){let{datumSelection:n,labelSelection:i,annotationSelections:r,previousContextData:s}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let o=this.processedData?.reduced?.diff,a=s==null?"fade":"normal",l=jc(Bc(this.isVertical(),this.axes,a));Je(this.id,"nodes",this.ctx.animationManager,[n],l,(u,d)=>Zr(d.xValue,d.valueIndex),o),(o?.changed??!0)&&(Se(this,"labels",this.ctx.animationManager,i),Se(this,"annotations",this.ctx.animationManager,...r))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e,seriesRect:n}){let i=this.contextNodeData?.nodeData[e].clipBBox;return Xv(i,this.contentGroup,n)}};return t.className="BarSeries",t.type="bar",t})(),dj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:uj,stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:t=>t?.direction==="horizontal",themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:Qe,color:ro,placement:"inside"},shadow:{enabled:!1,color:so,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Ua},lM=t=>{let e=Li.fromString(t),[n,i,r]=Li.RGBtoOKLCH(e.r,e.g,e.b);return{l:n,c:i,h:r,a:e.a}},qm=1e-6,cM=t=>t.c<qm||t.l<qm||t.l>1-qm,hj=(t,e,n)=>{n=ae(0,n,1);let i;if(cM(t))i=e.h;else if(cM(e))i=t.h;else{let a=t.h,l=e.h,c=e.h-t.h;c>180?l-=360:c<-180&&(l+=360),i=a*(1-n)+l*n}let r=t.c*(1-n)+e.c*n,s=t.l*(1-n)+e.l*n,o=t.a*(1-n)+e.a*n;return Li.fromOKLCH(s,r,i,o)},oo=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(lM)}update(){let{domain:t,range:e}=this;t.length<2&&(L.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let n=1;n<t.length;n++){let i=t[n-1],r=t[n];if(i>=r){L.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((s,o)=>s-o);break}}if(e.length<t.length)for(let n=e.length;n<t.length;n++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(lM)}convert(t){this.refresh();let{domain:e,range:n,parsedRange:i}=this,r=e[0],s=e.at(-1),o=n[0],a=n[n.length-1];if(t<=r)return o;if(t>=s)return a;let l,c;if(e.length===2){let h=(t-r)/(s-r),f=1/(n.length-1);l=n.length<=2?0:Math.min(Math.floor(h*(n.length-1)),n.length-2),c=(h-l*f)/f}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);let h=e[l],f=e[l+1];c=(t-h)/(f-h)}let u=i[l],d=i[l+1];return hj(u,d,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&L.warnOnce("Expected update to not invalidate scale"))}};g([Mt],oo.prototype,"domain",2);g([Mt],oo.prototype,"range",2);var Qv=class extends sn{constructor(){super(...arguments),this.maxSize=30}};g([b(O),j({redraw:3})],Qv.prototype,"maxSize",2);g([b(of,{optional:!0}),j({redraw:3})],Qv.prototype,"domain",2);var ZE=class extends vt{constructor(){super(...arguments),this.placement="top"}};g([b(ov)],ZE.prototype,"placement",2);var ze=class extends os{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new ZE,this.tooltip=new qt,this.marker=new Qv}};g([b(P)],ze.prototype,"xKey",2);g([b(P)],ze.prototype,"yKey",2);g([b(P)],ze.prototype,"sizeKey",2);g([b(P,{optional:!0})],ze.prototype,"labelKey",2);g([b(P,{optional:!0})],ze.prototype,"colorKey",2);g([b(P,{optional:!0})],ze.prototype,"xName",2);g([b(P,{optional:!0})],ze.prototype,"yName",2);g([b(P,{optional:!0})],ze.prototype,"sizeName",2);g([b(P,{optional:!0})],ze.prototype,"labelName",2);g([b(P,{optional:!0})],ze.prototype,"colorName",2);g([b(of,{optional:!0})],ze.prototype,"colorDomain",2);g([b(Gn)],ze.prototype,"colorRange",2);g([b(P,{optional:!0})],ze.prototype,"title",2);g([bt("marker.shape")],ze.prototype,"shape",2);g([bt("marker.size")],ze.prototype,"size",2);g([bt("marker.maxSize")],ze.prototype,"maxSize",2);g([bt("marker.domain",{optional:!0})],ze.prototype,"domain",2);g([bt("marker.fill",{optional:!0})],ze.prototype,"fill",2);g([bt("marker.fillOpacity")],ze.prototype,"fillOpacity",2);g([bt("marker.stroke",{optional:!0})],ze.prototype,"stroke",2);g([bt("marker.strokeWidth")],ze.prototype,"strokeWidth",2);g([bt("marker.strokeOpacity")],ze.prototype,"strokeOpacity",2);g([bt("marker.itemStyler",{optional:!0})],ze.prototype,"itemStyler",2);g([b(z)],ze.prototype,"label",2);g([b(z)],ze.prototype,"tooltip",2);var fj=class extends kv{constructor(t,e,n,i){super(t,e,n,i),this.sizeKey=i.properties.sizeKey}},pj=(()=>{let t=class extends as{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:vr,marker:ru}}),this.NodeEvent=fj,this.properties=new ze,this.sizeScale=new Pi,this.colorScale=new oo}processData(e){return k(this,null,function*(){if(!this.properties.isValid()||this.data==null||!this.visible)return;let n=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:r,yScaleType:s}=this.getScaleInformation({xScale:n,yScale:i}),o=this.colorScale.type,a=this.sizeScale.type,{xKey:l,yKey:c,sizeKey:u,labelKey:d,colorDomain:h,colorRange:f,colorKey:p,marker:m}=this.properties,{dataModel:y,processedData:v}=yield this.requestDataModel(e,this.data,{props:[_t(l,r,{id:"xKey-raw"}),_t(c,s,{id:"yKey-raw"}),...d?[_t(d,"band",{id:"labelKey-raw"})]:[],Re(l,r,{id:"xValue"}),Re(c,s,{id:"yValue"}),Re(u,a,{id:"sizeValue"}),...p?[Re(p,o,{id:"colorValue"})]:[],...d?[Re(d,"band",{id:"labelValue"})]:[]]}),x=y.resolveProcessedDataIndexById(this,"sizeValue"),D=v.domain.values[x]??[];if(this.sizeScale.domain=m.domain?m.domain:D,p){let S=y.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=h??v.domain.values[S]??[],this.colorScale.range=f,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:n,processedData:i}=this;if(!i||!n)return[];let r=e==="x"?"xValue":"yValue",s=n.resolveProcessedDataDefById(this,r),o=n.getDomain(this,r,"value",i);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return en(Hi(o),a)}createNodeData(){return k(this,null,function*(){let{axes:e,dataModel:n,processedData:i,colorScale:r,sizeScale:s}=this,{xKey:o,yKey:a,sizeKey:l,labelKey:c,xName:u,yName:d,sizeName:h,labelName:f,label:p,colorKey:m,marker:y,visible:v}=this.properties,x=Vi(y.shape),{placement:D}=p,S=e.x,w=e.y;if(!(n&&i&&v&&S&&w))return;let I=n.resolveProcessedDataIndexById(this,"xValue"),C=n.resolveProcessedDataIndexById(this,"yValue"),T=l?n.resolveProcessedDataIndexById(this,"sizeValue"):-1,E=m?n.resolveProcessedDataIndexById(this,"colorValue"):-1,A=c?n.resolveProcessedDataIndexById(this,"labelValue"):-1,R=S.scale,_=w.scale,G=(R.bandwidth??0)/2,J=(_.bandwidth??0)/2,ee=[];s.range=[y.size,y.maxSize];let se=p.getFont();for(let{values:ne,datum:q}of i.data??[]){let xe=ne[I],Xe=ne[C],Ce=R.convert(xe)+G,ot=_.convert(Xe)+J,Ge=this.getLabelText(p,{value:c?ne[A]:Xe,datum:q,xKey:o,yKey:a,sizeKey:l,labelKey:c,xName:u,yName:d,sizeName:h,labelName:f}),Ye=Me.getTextSize(String(Ge),se),Le=l?s.convert(ne[T]):y.size,jt=m?r.convert(ne[E]):void 0;ee.push({series:this,itemId:a,yKey:a,xKey:o,datum:q,xValue:xe,yValue:Xe,sizeValue:ne[T],point:{x:Ce,y:ot,size:Le},midPoint:{x:Ce,y:ot},fill:jt,label:M({text:Ge},Ye),marker:x,placement:D})}return{itemId:a,nodeData:ee,labelData:ee,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){let{shape:e}=this.properties.marker,n=Vi(e);return new n}updateMarkerSelection(e){return k(this,null,function*(){let{nodeData:n,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let r=this.properties.marker.enabled?n:[];return i.update(r,void 0,s=>Zr([s.xValue,s.yValue,s.label.text]))})}updateMarkerNodes(e){return k(this,null,function*(){let{markerSelection:n,isHighlight:i}=e,{xKey:r,yKey:s,sizeKey:o,labelKey:a,marker:l}=this.properties,{size:c,shape:u,fill:d,fillOpacity:h,stroke:f,strokeWidth:p,strokeOpacity:m}=ue(i&&this.properties.highlightStyle.item,l.getStyle()),y={size:c,shape:u,fill:d,fillOpacity:h,stroke:f,strokeWidth:p,strokeOpacity:m};this.sizeScale.range=[l.size,l.maxSize],n.each((v,x)=>{this.updateMarkerStyle(v,l,{datum:x,highlighted:i,xKey:r,yKey:s,sizeKey:o,labelKey:a},y)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return k(this,null,function*(){let n=this.properties.label.enabled?this.chart?.placeLabels().get(this)??[]:[];return e.labelSelection.update(n.map(i=>N(M({},i.datum),{point:{x:i.x,y:i.y,size:i.datum.point.size}})))})}updateLabelNodes(e){return k(this,null,function*(){let{label:n}=this.properties;e.labelSelection.each((i,r)=>{i.text=r.label.text,i.fill=n.color,i.x=r.point?.x??0,i.y=r.point?.y??0,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){let n=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!n||!i)return mr;let{xKey:r,yKey:s,sizeKey:o,labelKey:a,xName:l,yName:c,sizeName:u,labelName:d,marker:h,tooltip:f}=this.properties,p=this.properties.title??c,m=ue({fill:e.fill,strokeWidth:this.getStrokeWidth(h.strokeWidth)},h.getStyle()),{fill:y="gray"}=this.getMarkerStyle(h,{datum:e,highlighted:!1,xKey:r,yKey:s,sizeKey:o,labelKey:a},m),{datum:v,xValue:x,yValue:D,sizeValue:S,label:{text:w},itemId:I}=e,C=He(n.formatDatum(x)),T=He(i.formatDatum(D)),E=`<b>${He(l??r)}</b>: ${C}<br><b>${He(c??s)}</b>: ${T}`;return o&&(E+=`<br><b>${He(u??o)}</b>: ${He(String(S))}`),a&&(E=`<b>${He(d??a)}</b>: ${He(w)}<br>`+E),f.toTooltipHtml({title:p,content:E,backgroundColor:y},{datum:v,itemId:I,xKey:r,xName:l,yKey:s,yName:c,sizeKey:o,sizeName:u,labelKey:a,labelName:d,title:p,color:y,seriesId:this.id})}getLegendData(){if(!this.data?.length||!this.properties.isValid())return[];let{yKey:e,yName:n,title:i,marker:r,visible:s}=this.properties,{shape:o,fill:a,stroke:l,fillOpacity:c,strokeOpacity:u,strokeWidth:d}=r;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:s,label:{text:i??n??e},symbols:[{marker:{shape:o,fill:a??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:c??1,strokeOpacity:u??1,strokeWidth:d??0}}]}]}animateEmptyUpdateReady({markerSelection:e,labelSelection:n}){Vv(this,this.ctx.animationManager,e),Se(this,"labels",this.ctx.animationManager,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new U}getFormattedMarkerStyle(e){let{xKey:n,yKey:i,sizeKey:r,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:n,yKey:i,sizeKey:r,labelKey:s,highlighted:!1})}computeFocusBounds(e){return su(this,e)}};return t.className="BubbleSeries",t.type="bubble",t})(),gj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:pj,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:Qe,color:Dt}}},paletteFactory:Ua},ft=class extends os{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new ui,this.label=new vt,this.tooltip=new qt}};g([b(P)],ft.prototype,"xKey",2);g([b(P,{optional:!0})],ft.prototype,"yKey",2);g([b(P,{optional:!0})],ft.prototype,"xName",2);g([b(P,{optional:!0})],ft.prototype,"yName",2);g([b(we,{optional:!0})],ft.prototype,"fill",2);g([b(Ie)],ft.prototype,"fillOpacity",2);g([b(we,{optional:!0})],ft.prototype,"stroke",2);g([b(O)],ft.prototype,"strokeWidth",2);g([b(Ie)],ft.prototype,"strokeOpacity",2);g([b(gr)],ft.prototype,"lineDash",2);g([b(O)],ft.prototype,"lineDashOffset",2);g([b(O)],ft.prototype,"cornerRadius",2);g([b(H)],ft.prototype,"areaPlot",2);g([b(Aa,{optional:!0})],ft.prototype,"bins",2);g([b(je(["count","sum","mean"],"a histogram aggregation"))],ft.prototype,"aggregation",2);g([b(O,{optional:!0})],ft.prototype,"binCount",2);g([b(z)],ft.prototype,"shadow",2);g([b(z)],ft.prototype,"label",2);g([b(z)],ft.prototype,"tooltip",2);var uM=10,mj=(()=>{let t=class extends as{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,pickModes:[3,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Vc,label:vr}}),this.properties=new ft,this.calculatedBins=[]}deriveBins(e){let n=uf(e[0],e[1],uM),i=va(e[0],e[1],uM),[r]=n,s=o=>[o,o+i];return[[r-i,r],...n.map(s)]}calculateNiceBins(e,n){let i=Math.floor(e[0]),r=e[1],s=n||1,{start:o,binSize:a}=this.calculateNiceStart(i,r,s);return this.getBins(o,r,a,s)}getBins(e,n,i,r){let s=[],o=this.calculatePrecision(i);for(let a=0;a<r;a++){let l=Math.round((e+a*i)*o)/o,c=Math.round((e+(a+1)*i)*o)/o;a===r-1&&(c=Math.max(c,n)),s[a]=[l,c]}return s}calculatePrecision(e){let n=10;if(isFinite(e)&&e>0)for(;e<1;)n*=10,e*=10;return n}calculateNiceStart(e,n,i){let r=Math.abs(n-e)/i,s=Math.floor(Math.log10(r)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:r}}processData(e){return k(this,null,function*(){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));let{xKey:n,yKey:i,areaPlot:r,aggregation:s}=this.properties,o=this.axes.x?.scale,a=this.axes.y?.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({yScale:a,xScale:o}),u=[_t(n,l),qC];if(i){let h=Ay("groupAgg");s==="count"||(s==="sum"?h=GC("groupAgg"):s==="mean"&&(h=HC("groupAgg"))),r&&(h=Ny("groupAgg",h)),u.push(Re(i,c,{invalidValue:void 0}),h)}else{let h=Ay("groupAgg");r&&(h=Ny("groupAgg",h)),u.push(h)}let d=h=>{let f=en(h.domain.keys[0]);if(f.length===0)return h.domain.groups=[],()=>[];let p=gn(this.properties.binCount)?this.calculateNiceBins(f,this.properties.binCount):this.properties.bins??this.deriveBins(f),m=p.length;return this.calculatedBins=[...p],y=>{let v=y.keys[0];for(let x=0;x<m;x++){let D=p[x];if(v>=D[0]&&v<D[1]||x===m-1&&v<=D[1])return D}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&u.push(to(this.processedData,!1)),yield this.requestDataModel(e,this.data,{props:u,groupByFn:d}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:n,dataModel:i}=this;if(!n||!i||!this.calculatedBins.length)return[];let r=i.getDomain(this,"groupAgg","aggregate",n),s=this.calculatedBins?.[0][0],o=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return en(e==="x"?[s,o]:r)}createNodeData(){return k(this,null,function*(){let{id:e,axes:n,processedData:i,ctx:{callbackCache:r}}=this,s=n.x,o=n.y;if(!s||!o)return;let{scale:a}=s,{scale:l}=o,{xKey:c,yKey:u,xName:d,yName:h,fill:f,stroke:p,strokeWidth:m,cornerRadius:y}=this.properties,{formatter:v=E=>String(E.value),fontStyle:x,fontWeight:D,fontSize:S,fontFamily:w,color:I}=this.properties.label,C=[],T={itemId:this.properties.yKey??this.id,nodeData:C,labelData:C,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||!i||i.type!=="grouped"||(i.data.forEach(E=>{let{aggValues:[[A,R]]=[[0,0]],datum:_,datum:{length:G},keys:J,keys:[ee,se]}=E,ne=a.convert(ee),q=a.convert(se),xe=A+R,Xe=l.convert(0),Ce=l.convert(xe),ot=Math.abs(q-ne),Ge=Math.abs(Ce-Xe),Ye=Math.min(ne,q),Le=Math.min(Xe,Ce),jt;xe!==0&&(jt={text:r.call(v,{value:xe,datum:_,seriesId:e,xKey:c,yKey:u,xName:d,yName:h})??String(xe),fontStyle:x,fontWeight:D,fontSize:S,fontFamily:w,fill:I,x:Ye+ot/2,y:Le+Ge/2});let B={x:Ye+ot/2,y:Le+Ge/2},de=o.isReversed();C.push({series:this,datum:_,aggregatedValue:xe,frequency:G,domain:J,yKey:u,xKey:c,x:Ye,y:Le,xValue:ne,yValue:Ce,width:ot,height:Ge,midPoint:B,fill:f,stroke:p,cornerRadius:y,topLeftCornerRadius:!de,topRightCornerRadius:!de,bottomRightCornerRadius:de,bottomLeftCornerRadius:de,opacity:1,strokeWidth:m,label:jt})}),C.sort((E,A)=>E.x-A.x)),T})}nodeFactory(){return new rn}updateDatumSelection(e){return k(this,null,function*(){let{nodeData:n,datumSelection:i}=e;return i.update(n,r=>{r.tag=0,r.crisp=!0},r=>r.domain.join("_"))})}updateDatumNodes(e){return k(this,null,function*(){let{isHighlight:n}=e,{fillOpacity:i,strokeOpacity:r,lineDash:s,lineDashOffset:o,shadow:a,highlightStyle:{item:{fill:l,fillOpacity:c=i,stroke:u,strokeWidth:d}}}=this.properties;e.datumSelection.each((h,f,p)=>{let{cornerRadius:m,topLeftCornerRadius:y,topRightCornerRadius:v,bottomRightCornerRadius:x,bottomLeftCornerRadius:D}=f,S=n&&d!==void 0?d:f.strokeWidth,w=n?c:i;h.fill=(n?l:void 0)??f.fill,h.stroke=(n?u:void 0)??f.stroke,h.fillOpacity=w,h.strokeOpacity=r,h.strokeWidth=S,h.lineDash=s,h.lineDashOffset=o,h.topLeftCornerRadius=y?m:0,h.topRightCornerRadius=v?m:0,h.bottomRightCornerRadius=x?m:0,h.bottomLeftCornerRadius=D?m:0,h.fillShadow=a,h.zIndex=n?Jc.highlightedZIndex:p,h.visible=f.height>0})})}updateLabelSelection(e){return k(this,null,function*(){let{labelData:n,labelSelection:i}=e;return i.update(n,r=>{r.tag=1,r.pointerEvents=1,r.textAlign="center",r.textBaseline="middle"})})}updateLabelNodes(e){return k(this,null,function*(){let n=this.isLabelEnabled();e.labelSelection.each((i,r)=>{let s=r.label;s&&n?(i.text=s.text,i.x=s.x,i.y=s.y,i.fontStyle=s.fontStyle,i.fontWeight=s.fontWeight,i.fontSize=s.fontSize,i.fontFamily=s.fontFamily,i.fill=s.fill,i.visible=!0):i.visible=!1})})}initQuadTree(e){Kv(e,GE(this.contentGroup.children[0]))}pickNodeClosestDatum(e){return qv(this,e)}getTooltipHtml(e){let n=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!n||!i)return mr;let{xKey:r,yKey:s,xName:o,yName:a,fill:l,aggregation:c,tooltip:u}=this.properties,{aggregatedValue:d,frequency:h,domain:[f,p],itemId:m}=e,y=`${He(o??r)}: ${n.formatDatum(f)} - ${n.formatDatum(p)}`,v=s?`<b>${He(a??s)} (${c})</b>: ${i.formatDatum(d)}<br>`:"";v+=`<b>Frequency</b>: ${h}`;let x={title:y,backgroundColor:l,content:v};return u.toTooltipHtml(x,{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},itemId:m,xKey:r,xName:o,yKey:s,yName:a,color:l,title:y,seriesId:this.id})}getLegendData(e){if(!this.data?.length||e!=="category")return[];let{xKey:n,yName:i,fill:r,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:c,label:{text:i??n??"Frequency"},symbols:[{marker:{fill:r??"rgba(0, 0, 0, 0)",stroke:o??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:l,strokeWidth:a}}]}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:n}){let i=jc(Bc(!0,this.axes,"normal"));Je(this.id,"datums",this.ctx.animationManager,[e],i),Se(this,"labels",this.ctx.animationManager,n)}animateWaitingUpdateReady(e){let n=this.processedData?.reduced?.diff,i=jc(Bc(!0,this.axes,"normal"));Je(this.id,"datums",this.ctx.animationManager,[e.datumSelection],i,(r,s)=>Zr(s.domain),n),Se(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e,seriesRect:n}){return Xv(this.contextNodeData?.nodeData[e],this.contentGroup,n)}};return t.className="HistogramSeries",t.type="histogram",t})(),yj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:mj,tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:Qe,color:ro},shadow:{enabled:!1,color:so,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{let{fills:[e],strokes:[n]}=t(1);return{fill:e,stroke:n}}},It=class extends os{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Ha,this.marker=new sn,this.label=new vt,this.tooltip=new qt,this.connectMissingData=!1}};g([b(P)],It.prototype,"xKey",2);g([b(P)],It.prototype,"yKey",2);g([b(P,{optional:!0})],It.prototype,"xName",2);g([b(P,{optional:!0})],It.prototype,"yName",2);g([b(P,{optional:!0})],It.prototype,"stackGroup",2);g([b(O,{optional:!0})],It.prototype,"normalizedTo",2);g([b(P,{optional:!0})],It.prototype,"title",2);g([b(we)],It.prototype,"stroke",2);g([b(O)],It.prototype,"strokeWidth",2);g([b(Ie)],It.prototype,"strokeOpacity",2);g([b(gr)],It.prototype,"lineDash",2);g([b(O)],It.prototype,"lineDashOffset",2);g([b(z)],It.prototype,"interpolation",2);g([b(z)],It.prototype,"marker",2);g([b(z)],It.prototype,"label",2);g([b(z)],It.prototype,"tooltip",2);g([b(H)],It.prototype,"connectMissingData",2);var vj=(()=>{let t=class extends as{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:$v({getOpacity:()=>this.getOpacity()}),label:vr,marker:(n,i)=>M(M({},ru(n)),_c(n,i))}}),this.properties=new It}processData(e){return k(this,null,function*(){if(this.data==null||!this.properties.isValid())return;let{data:n,visible:i,seriesGrouping:{groupIndex:r=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:a,connectMissingData:l,normalizedTo:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,h=this.axes.y?.scale,{isContinuousX:f,xScaleType:p,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:h}),y={invalidValue:null};l&&s>1&&(y.invalidValue=0),i||(y.forceValue=0);let v=[];if(f||v.push(_t(o,p,{id:"xKey"})),v.push(Re(o,p,{id:"xValue"}),Re(a,m,N(M({id:"yValueRaw"},y),{invalidValue:void 0}))),s>1){let x=[`line-stack-${r}-yValues`,`line-stack-${r}-yValues-trailing`,`line-stack-${r}-yValues-marker`];v.push(...ri(a,"window","current",N(M({id:"yValueEnd"},y),{groupId:x[0]}),m),...ri(a,"window-trailing","current",N(M({id:"yValueStart"},y),{groupId:x[1]}),m),...ri(a,"normal","current",N(M({id:"yValueCumulative"},y),{groupId:x[2]}),m)),wc(c)&&v.push(Rc([x[0],x[1],x[2]],c,"range"))}u&&(v.push(Ba(f?["xValue"]:void 0)),this.processedData&&v.push(to(this.processedData))),yield this.requestDataModel(e,n,{props:v}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:n,dataModel:i,axes:r}=this;if(!n||!i||n.data.length===0)return[];let s=r.x,o=r.y,a=i.resolveProcessedDataDefById(this,"xValue");if(e==="x"){let l=i.getDomain(this,"xValue","value",n);return a?.def.type==="value"&&a.def.valueType==="category"?l:en(Hi(l),s)}else{let c=(this.seriesGrouping?.stackCount??1)>1?i.getDomain(this,"yValueEnd","value",n):i.getDomain(this,"yValueRaw","value",n);return en(c,o)}}createNodeData(){return k(this,null,function*(){let{processedData:e,dataModel:n,axes:i}=this,r=i.x,s=i.y;if(!e||!n||!r||!s)return;let{xKey:o,yKey:a,xName:l,yName:c,marker:u,label:d,connectMissingData:h,legendItemName:f}=this.properties,p=(this.seriesGrouping?.stackCount??1)>1,m=r.scale,y=s.scale,v=(m.bandwidth??0)/2,x=(y.bandwidth??0)/2,D=[],S=u.enabled?u.size:0,w=n.resolveProcessedDataIndexById(this,"xValue"),I=n.resolveProcessedDataIndexById(this,"yValueRaw"),C=p?n.resolveProcessedDataIndexById(this,"yValueCumulative"):I,T=p?n.resolveProcessedDataIndexById(this,"yValueEnd"):void 0,E=!0;return e.data?.forEach(({datum:A,values:R})=>{let _=R[w],G=R[I],J=R[C],ee=T!=null?R[T]:void 0;if(G==null){E||(E=!h);return}let se=m.convert(_)+v;if(isNaN(se)){E||(E=!h);return}let ne=y.convert(J)+x,q=this.getLabelText(d,{value:G,datum:A,xKey:o,yKey:a,xName:l,yName:c,legendItemName:f},xe=>be(xe)?xe.toFixed(2):String(xe));D.push({series:this,datum:A,yKey:a,xKey:o,point:{x:se,y:ne,moveTo:E,size:S},midPoint:{x:se,y:ne},cumulativeValue:ee,yValue:G,xValue:_,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:q?{text:q,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0}),E=!1}),{itemId:a,nodeData:D,labelData:D,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:e}=this.properties.marker,n=Vi(e);return new n}updatePathNodes(e){return k(this,null,function*(){let{paths:[n],opacity:i,visible:r,animationEnabled:s}=e;n.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(n.visible=r),Uh(this,n)})}updateMarkerSelection(e){return k(this,null,function*(){let{nodeData:n}=e,{markerSelection:i}=e,{shape:r,enabled:s}=this.properties.marker;return n=r&&s?n:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n,void 0,o=>Zr(o.xValue))})}updateMarkerNodes(e){return k(this,null,function*(){let{markerSelection:n,isHighlight:i}=e,{xKey:r,yKey:s,stroke:o,strokeWidth:a,strokeOpacity:l,marker:c,highlightStyle:u}=this.properties,d=ue(i&&u.item,c.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:l}),h=this.ctx.animationManager.isSkipped();n.each((f,p)=>{this.updateMarkerStyle(f,c,{datum:p,highlighted:i,xKey:r,yKey:s},d,{applyTranslation:h})}),i||c.markClean()})}updateLabelSelection(e){return k(this,null,function*(){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])})}updateLabelNodes(e){return k(this,null,function*(){let{enabled:n,fontStyle:i,fontWeight:r,fontSize:s,fontFamily:o,color:a}=this.properties.label;e.labelSelection.each((l,c)=>{let{point:u,label:d}=c;c&&d&&n?(l.fontStyle=i,l.fontWeight=r,l.fontSize=s,l.fontFamily=o,l.textAlign=d.textAlign,l.textBaseline=d.textBaseline,l.text=d.text,l.x=u.x,l.y=u.y-10,l.fill=a,l.visible=!0):l.visible=!1})})}getTooltipHtml(e){let n=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!n||!i)return mr;let{xKey:r,yKey:s,xName:o,yName:a,strokeWidth:l,marker:c,tooltip:u}=this.properties,{datum:d,xValue:h,yValue:f,itemId:p}=e,m=n.formatDatum(h),y=i.formatDatum(f),v=He(this.properties.title??a),x=He(m+": "+y),D=ue({fill:c.stroke},c.getStyle(),{strokeWidth:l}),{fill:S}=this.getMarkerStyle(c,{datum:e,xKey:r,yKey:s,highlighted:!1},D);return u.toTooltipHtml({title:v,content:x,backgroundColor:S},M({datum:d,itemId:p,xKey:r,xName:o,yKey:s,yName:a,title:v,color:S,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){if(!(this.data?.length&&this.properties.isValid()&&e==="category"))return[];let{yKey:n,yName:i,stroke:r,strokeOpacity:s,strokeWidth:o,lineDash:a,title:l,marker:c,visible:u,legendItemName:d}=this.properties,h="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:n,legendItemName:d,seriesId:this.id,enabled:u,label:{text:d??l??i??n},symbols:[{marker:{shape:c.shape,fill:c.fill??h,stroke:c.stroke??r??h,fillOpacity:c.fillOpacity??1,strokeOpacity:c.strokeOpacity??s??1,strokeWidth:c.strokeWidth??0,enabled:c.enabled},line:{stroke:r??h,strokeOpacity:s,strokeWidth:o,lineDash:a}}]}]}updatePaths(e){return k(this,null,function*(){this.updateLinePaths(e.paths,e.contextData)})}updateLinePaths(e,n){let{interpolation:i}=this.properties,{nodeData:r}=n,[s]=e;s.path.clear(!0);for(let o of Hh(r))Wr($h(r,o),s,i);s.checkPathDirty()}animateEmptyUpdateReady(e){let{markerSelection:n,labelSelection:i,annotationSelections:r,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateLinePaths(o,s),Hv(this,a,...o),dt([n],_c),zv(this,a,n),Se(this,"labels",a,i),Se(this,"annotations",a,...r)}animateReadyResize(e){let{contextData:n,paths:i}=e;this.updateLinePaths(i,n),super.animateReadyResize(e)}animateWaitingUpdateReady(e){let{animationManager:n}=this.ctx,{markerSelection:i,labelSelection:r,annotationSelections:s,contextData:o,paths:a,previousContextData:l}=e,[c]=a;super.resetAllAnimation(e);let u=()=>{this.updateLinePaths(a,o)},d=()=>{n.skipCurrentBatch(),u()};if(o==null||l==null){u(),Oc(this,n,"added",i),bc(this,"path_properties",n,"add",c),Se(this,"labels",n,r),Se(this,"annotations",n,...s);return}let h=BE(o,l,this.processedData?.reduced?.diff,this.properties.interpolation);if(h===void 0){d();return}else if(h.status==="no-op")return;Oc(this,n,void 0,i),Je(this.id,"path_properties",n,[c],h.pathProperties),AE(this.id,"path_update",n,[c],h.path),h.hasMotion&&(Se(this,"labels",n,r),Se(this,"annotations",n,...s))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new U}getFormattedMarkerStyle(e){let{xKey:n,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:n,yKey:i,highlighted:!0})}computeFocusBounds(e){return su(this,e)}};return t.className="LineSeries",t.type="line",t})(),bj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:vj,stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Qe,color:Dt}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{let{marker:e}=wf(t);return{stroke:e.fill,marker:e}}},XE=class extends vt{constructor(){super(...arguments),this.placement="top"}};g([b(ov)],XE.prototype,"placement",2);var tt=class extends os{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new XE,this.tooltip=new qt,this.marker=new sn}};g([b(P)],tt.prototype,"xKey",2);g([b(P)],tt.prototype,"yKey",2);g([b(P,{optional:!0})],tt.prototype,"labelKey",2);g([b(P,{optional:!0})],tt.prototype,"colorKey",2);g([b(P,{optional:!0})],tt.prototype,"xName",2);g([b(P,{optional:!0})],tt.prototype,"yName",2);g([b(P,{optional:!0})],tt.prototype,"labelName",2);g([b(P,{optional:!0})],tt.prototype,"colorName",2);g([b(of,{optional:!0})],tt.prototype,"colorDomain",2);g([b(Gn)],tt.prototype,"colorRange",2);g([b(P,{optional:!0})],tt.prototype,"title",2);g([bt("marker.shape")],tt.prototype,"shape",2);g([bt("marker.size")],tt.prototype,"size",2);g([bt("marker.fill")],tt.prototype,"fill",2);g([bt("marker.fillOpacity")],tt.prototype,"fillOpacity",2);g([bt("marker.stroke")],tt.prototype,"stroke",2);g([bt("marker.strokeWidth")],tt.prototype,"strokeWidth",2);g([bt("marker.strokeOpacity")],tt.prototype,"strokeOpacity",2);g([bt("marker.itemStyler",{optional:!0})],tt.prototype,"itemStyler",2);g([b(z)],tt.prototype,"label",2);g([b(z)],tt.prototype,"tooltip",2);var xj=(()=>{let t=class extends as{constructor(e){super({moduleCtx:e,directionKeys:no,directionNames:io,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:ru,label:vr}}),this.properties=new tt,this.colorScale=new oo}processData(e){return k(this,null,function*(){if(!this.properties.isValid()||this.data==null||!this.visible)return;let n=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:r,yScaleType:s}=this.getScaleInformation({xScale:n,yScale:i}),o=this.colorScale.type,{xKey:a,yKey:l,labelKey:c,colorKey:u,colorDomain:d,colorRange:h}=this.properties,{dataModel:f,processedData:p}=yield this.requestDataModel(e,this.data,{props:[_t(a,r,{id:"xKey-raw"}),_t(l,s,{id:"yKey-raw"}),...c?[_t(c,"band",{id:"labelKey-raw"})]:[],Re(a,r,{id:"xValue"}),Re(l,s,{id:"yValue"}),...u?[Re(u,o,{id:"colorValue"})]:[],...c?[Re(c,"band",{id:"labelValue"})]:[]]});if(u){let m=f.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=d??p.domain.values[m]??[],this.colorScale.range=h,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:n,processedData:i}=this;if(!i||!n)return[];let r=e==="x"?"xValue":"yValue",s=n.resolveProcessedDataDefById(this,r),o=n.getDomain(this,r,"value",i);if(s?.def.type==="value"&&s?.def.valueType==="category")return o;let a=this.axes[e];return en(Hi(o),a)}createNodeData(){return k(this,null,function*(){let{axes:e,dataModel:n,processedData:i,colorScale:r}=this,{xKey:s,yKey:o,labelKey:a,colorKey:l,xName:c,yName:u,labelName:d,marker:h,label:f,visible:p}=this.properties,{placement:m}=f,y=Vi(h.shape),v=e.x,x=e.y;if(!(n&&i&&p&&v&&x))return;let D=n.resolveProcessedDataIndexById(this,"xValue"),S=n.resolveProcessedDataIndexById(this,"yValue"),w=l?n.resolveProcessedDataIndexById(this,"colorValue"):-1,I=a?n.resolveProcessedDataIndexById(this,"labelValue"):-1,C=v.scale,T=x.scale,E=(C.bandwidth??0)/2,A=(T.bandwidth??0)/2,R=[],_=f.getFont();for(let{values:G,datum:J}of i.data??[]){let ee=G[D],se=G[S],ne=C.convert(ee)+E,q=T.convert(se)+A,xe=this.getLabelText(f,{value:a?G[I]:se,datum:J,xKey:s,yKey:o,labelKey:a,xName:c,yName:u,labelName:d}),Xe=Me.getTextSize(xe,_),Ce=l?r.convert(G[w]):void 0;R.push({series:this,itemId:o,yKey:o,xKey:s,datum:J,xValue:ee,yValue:se,capDefaults:{lengthRatioMultiplier:h.getDiameter(),lengthMax:1/0},point:{x:ne,y:q,size:h.size},midPoint:{x:ne,y:q},fill:Ce,label:M({text:xe},Xe),marker:y,placement:m})}return{itemId:o,nodeData:R,labelData:R,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){let{shape:e}=this.properties.marker,n=Vi(e);return new n}updateMarkerSelection(e){return k(this,null,function*(){let{nodeData:n,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?n:[])})}updateMarkerNodes(e){return k(this,null,function*(){let{markerSelection:n,isHighlight:i}=e,{xKey:r,yKey:s,labelKey:o,marker:a,highlightStyle:l}=this.properties,c=ue(i&&l.item,a.getStyle());n.each((u,d)=>{this.updateMarkerStyle(u,a,{datum:d,highlighted:i,xKey:r,yKey:s,labelKey:o},c)}),i||a.markClean()})}updateLabelSelection(e){return k(this,null,function*(){let n=this.isLabelEnabled()?this.chart?.placeLabels().get(this)??[]:[];return e.labelSelection.update(n.map(({datum:i,x:r,y:s})=>N(M({},i),{point:{x:r,y:s,size:i.point.size},placement:"top"})),i=>{i.pointerEvents=1})})}updateLabelNodes(e){return k(this,null,function*(){let{label:n}=this.properties;e.labelSelection.each((i,r)=>{i.text=r.label.text,i.fill=n.color,i.x=r.point?.x??0,i.y=r.point?.y??0,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){let n=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!n||!i)return mr;let{xKey:r,yKey:s,labelKey:o,xName:a,yName:l,labelName:c,title:u=l,marker:d,tooltip:h}=this.properties,{datum:f,xValue:p,yValue:m,label:y,itemId:v}=e,x=ue({fill:e.fill,strokeWidth:this.getStrokeWidth(d.strokeWidth)},d.getStyle()),{fill:D="gray"}=this.getMarkerStyle(d,{datum:e,highlighted:!1,xKey:r,yKey:s,labelKey:o},x),S=He(n.formatDatum(p)),w=He(i.formatDatum(m)),I=`<b>${He(a??r)}</b>: ${S}<br><b>${He(l??s)}</b>: ${w}`;return o&&(I=`<b>${He(c??o)}</b>: ${He(y.text)}<br>`+I),h.toTooltipHtml({title:u,content:I,backgroundColor:D},M({datum:f,itemId:v,xKey:r,xName:a,yKey:s,yName:l,labelKey:o,labelName:c,title:u,color:D,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){let{yKey:n,yName:i,title:r,marker:s,visible:o}=this.properties,{fill:a,stroke:l,fillOpacity:c,strokeOpacity:u,strokeWidth:d}=s;return!this.data?.length||!this.properties.isValid()||e!=="category"?[]:[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:o,label:{text:r??i??n},symbols:[{marker:{shape:s.shape,fill:s.fill??a??"rgba(0, 0, 0, 0)",stroke:s.stroke??l??"rgba(0, 0, 0, 0)",fillOpacity:c??1,strokeOpacity:u??1,strokeWidth:d??0}}]}]}animateEmptyUpdateReady(e){let{markerSelection:n,labelSelection:i,annotationSelections:r}=e;Vv(this,this.ctx.animationManager,n),Se(this,"labels",this.ctx.animationManager,i),Se(this,"annotations",this.ctx.animationManager,...r)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new U}getFormattedMarkerStyle(e){let{xKey:n,yKey:i,labelKey:r}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:n,yKey:i,labelKey:r,highlighted:!0})}computeFocusBounds(e){return su(this,e)}};return t.className="ScatterSeries",t.type="scatter",t})(),Dj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:xj,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:Qe,color:Dt}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Ua},QE=class Ly{constructor(e,n,i,r){this.startAngle=e,this.endAngle=n,this.innerRadius=i,this.outerRadius=r}clone(){let{startAngle:e,endAngle:n,innerRadius:i,outerRadius:r}=this;return new Ly(e,n,i,r)}[qh](e,n){return new Ly(this.startAngle*(1-n)+e.startAngle*n,this.endAngle*(1-n)+e.endAngle*n,this.innerRadius*(1-n)+e.innerRadius*n,this.outerRadius*(1-n)+e.outerRadius*n)}};function Jv({startAngle:t,endAngle:e,innerRadius:n,outerRadius:i}){let r=1/0,s=1/0,o=-1/0,a=-1/0,l=(c,u)=>{r=Math.min(c,r),s=Math.min(u,s),o=Math.max(c,o),a=Math.max(u,a)};return l(n*Math.cos(t),n*Math.sin(t)),l(n*Math.cos(e),n*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),jr(0,t,e)&&l(i,0),jr(Math.PI*.5,t,e)&&l(0,i),jr(Math.PI,t,e)&&l(-i,0),jr(Math.PI*1.5,t,e)&&l(0,-i),new V(r,s,o-r,a-s)}function Yh(t,e,n){let i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:r,outerRadius:s}=n;if(n.startAngle===n.endAngle||i<Math.min(r,s)||i>Math.max(r,s))return!1;let o=Tc(n.startAngle),a=Tc(n.endAngle),l=Math.atan2(e,t);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function dM(t,e){let{startAngle:n,endAngle:i,innerRadius:r,outerRadius:s}=e,o={x:s*Math.cos(n),y:s*Math.sin(n)},a={x:s*Math.cos(i),y:s*Math.sin(i)},l=r===0?{x:0,y:0}:{x:r*Math.cos(n),y:r*Math.sin(n)},c=r===0?{x:0,y:0}:{x:r*Math.cos(i),y:r*Math.sin(i)};return la(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||la(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||gC(0,0,s,n,i,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function JE(t,e){let n={x:t.x,y:t.y},i={x:t.x+t.width,y:t.y},r={x:t.x,y:t.y+t.height},s={x:t.x+t.width,y:t.y+t.height};return dM({start:n,end:i},e)||dM({start:r,end:s},e)}function hM(t,e,n,i){if(n===0&&i===0)return 0;if(Math.asin(Math.abs(1*n)/(t+1*n))+Math.asin(Math.abs(1*i)/(t+1*i))-e<0)return 1;let s=0,o=1;for(let a=0;a<8;a+=1){let l=(s+o)/2;Math.asin(Math.abs(l*n)/(t+l*n))+Math.asin(Math.abs(l*i)/(t+l*i))-e<0?s=l:o=l}return s}var Sj=1e-6;function Yr(t,e){return hf(t,e)<Sj?e:$e(t-e)+e}function ch(t,e,n=0){let r=Math.abs(e-t)>=2*Math.PI?2*Math.PI:$e(e-t);return t=Yr(t,n),e=t+r,{startAngle:t,endAngle:e}}function uh(t,e,n,i,r,s){let o=Math.sin(s),a=Math.cos(s),l=t**2+e**2-n**2,c=NaN,u=NaN,d=NaN,h=NaN;if(a>.5){let D=o/a,S=1+D**2,w=-2*(t+e*D),I=w**2-4*S*l;if(I<0)return;let C=(-w+Math.sqrt(I))/(2*S),T=(-w-Math.sqrt(I))/(2*S);c=C,u=C*D,d=T,h=T*D}else{let D=a/o,S=1+D**2,w=-2*(e+t*D),I=w**2-4*S*l;if(I<0)return;let C=(-w+Math.sqrt(I))/(2*S),T=(-w-Math.sqrt(I))/(2*S);c=C*D,u=C,d=T*D,h=T}let f=a,p=o,m=c*f+u*p,y=d*f+h*p,v=m>0?Yr(Math.atan2(u-e,c-t),i):NaN,x=y>0?Yr(Math.atan2(h-e,d-t),i):NaN;if(v>=i&&v<=r)return v;if(x>=i&&x<=r)return x}function dh(t,e,n,i,r,s){let o=Math.hypot(t,e),a=(o**2-n**2+s**2)/(2*o),l=o-a,c=Math.atan2(e,t),u=Math.acos(-l/n),d=Yr(c+u,i),h=Yr(c-u,i);if(d>=i&&d<=r)return d;if(h>=i&&h<=r)return h}var Zm=class{constructor(t,e,n,i,r){this.cx=t,this.cy=e,this.r=n,this.a0=i,this.a1=r,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){t==null||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){t==null||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Bt=(()=>{let t=class extends nn{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return Jv(this).translate(this.centerX,this.centerY)}normalizedRadii(){let{concentricEdgeInset:e}=this;return{innerRadius:Math.max(Math.min(this.innerRadius,this.outerRadius)+e,0),outerRadius:Math.max(Math.max(this.innerRadius,this.outerRadius)-e,0)}}normalizedClipSector(){let{clipSector:e}=this;if(e==null)return;let{startAngle:n,endAngle:i}=ch(this.startAngle,this.endAngle),{innerRadius:r,outerRadius:s}=this.normalizedRadii(),o=ch(e.startAngle,e.endAngle,n);return new QE(Math.max(n,o.startAngle),Math.min(i,o.endAngle),Math.max(r,e.innerRadius),Math.min(s,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,n,i,r,s,o,a,l){if(e<=0)return;let{startAngle:c,endAngle:u}=ch(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:h}=this.normalizedRadii(),f=this.normalizedClipSector();if(l&&d<=0)return;let p=this.getAngleOffset(d),m=this.getAngleOffset(h),y=l?this.getAngleOffset(d+e):this.getAngleOffset(h-e),v=a?c+y+n:u-y-n,x=l?d+e:h-e,D=x*Math.cos(v),S=x*Math.sin(v);if(f!=null&&(!a&&!(v>=c-1e-6&&v<=f.endAngle-1e-6)||a&&!(v>=f.startAngle+1e-6&&v<=u-1e-6)||l&&!(x>=f.innerRadius-1e-6)||!l&&!(x<=f.outerRadius+1e-6)))return;let w=new Zm(D,S,e,i,r);if(f!=null){l?(w.clipStart(uh(D,S,e,i,r,f.endAngle-p)),w.clipEnd(uh(D,S,e,i,r,f.startAngle+p))):(w.clipStart(uh(D,S,e,i,r,f.startAngle+m)),w.clipEnd(uh(D,S,e,i,r,f.endAngle-m)));let A,R;if(a?(A=dh(D,S,e,i,r,f.innerRadius),R=dh(D,S,e,i,r,f.outerRadius)):(A=dh(D,S,e,i,r,f.outerRadius),R=dh(D,S,e,i,r,f.innerRadius)),w.clipStart(A),w.clipEnd(R),A!=null){let{x:_,y:G}=w.pointAt(A),J=Yr(Math.atan2(G,_),c);a?o?.clipStart(J):s.clipEnd(J)}if(R!=null){let{x:_,y:G}=w.pointAt(R),J=Yr(Math.atan2(G,_),c);a?s.clipStart(J):o?.clipEnd(J)}}if(f!=null){let{x:A,y:R}=w.pointAt((w.a0+w.a1)/2);if(!Yh(A,R,f))return}let{x:I,y:C}=w.pointAt(a===l?w.a0:w.a1),T=Yr(Math.atan2(C,I),c),E=l?o:s;return a?E?.clipStart(T):E?.clipEnd(T),w}updatePath(){let{path:n,centerX:i,centerY:r,concentricEdgeInset:s,radialEdgeInset:o}=this,{startOuterCornerRadius:a,endOuterCornerRadius:l,startInnerCornerRadius:c,endInnerCornerRadius:u}=this,{startAngle:d,endAngle:h}=ch(this.startAngle,this.endAngle),{innerRadius:f,outerRadius:p}=this.normalizedRadii(),m=this.normalizedClipSector(),y=h-d,v=y>=2*Math.PI-1e-6;if(n.clear(),this.innerRadius===0&&this.outerRadius===0||(m?.startAngle??d)===(m?.endAngle??h))return;if(v&&this.clipSector==null&&a===0&&l===0&&c===0&&u===0){n.moveTo(i+p*Math.cos(d),r+p*Math.sin(d)),n.arc(i,r,p,d,h),f>s&&(n.moveTo(i+f*Math.cos(h),r+f*Math.sin(h)),n.arc(i,r,f,h,d,!0)),n.closePath();return}let x=this.getAngleOffset(f),D=this.getAngleOffset(p);if(y<2*D)return;let w=(m?.innerRadius??f)>s,I=f<s||y<2*x,C=p-f,T=Math.max(a,c,l,u),E=T>0?Math.min(C/T,1):1;a*=E,l*=E,c*=E,u*=E;let A=hM(p,y-2*D,-a,-l);if(a*=A,l*=A,!I&&w){let $=hM(f,y-2*x,c,u);c*=$,u*=$}else c=0,u=0;let R=Math.max(a+c,l+u),_=R>0?Math.min(C/R,1):1;a*=_,l*=_,c*=_,u*=_;let G=0,J=0,ee=a/(p-a),se=l/(p-l);if(ee>=0&&ee<.999999)G=Math.asin(ee);else{G=y/2;let $=p/(1/Math.sin(G)+1);a=Math.min($,a)}if(se>=0&&se<.999999)J=Math.asin(se);else{J=y/2;let $=p/(1/Math.sin(J)+1);l=Math.min($,l)}let ne=Math.asin(c/(f+c)),q=Math.asin(u/(f+u)),xe=m?.outerRadius??p,Xe=this.getAngleOffset(xe),Ce=new Zm(0,0,xe,d+Xe,h-Xe),ot=m?.innerRadius??f,Ge=this.getAngleOffset(ot),Ye=w?new Zm(0,0,ot,d+Ge,h-Ge):void 0;m!=null&&(Ce.clipStart(m.startAngle),Ce.clipEnd(m.endAngle),Ye?.clipStart(m.startAngle),Ye?.clipEnd(m.endAngle));let Le=this.arc(a,G,d-Math.PI*.5,d+G,Ce,Ye,!0,!1),jt=this.arc(l,J,h-J,h+Math.PI*.5,Ce,Ye,!1,!1),B=this.arc(u,q,h+Math.PI*.5,h+Math.PI-q,Ce,Ye,!1,!0),de=this.arc(c,ne,d+Math.PI+ne,d+Math.PI*1.5,Ce,Ye,!0,!0);if(I){let $=y<Math.PI*.5?o*(1+Math.cos(y))/Math.sin(y):NaN,Y;$>0&&$<p?Y=Math.max(Math.hypot(o,$),f):Y=f;let De=d+y*.5;n.moveTo(i+Y*Math.cos(De),r+Y*Math.sin(De))}else if(!(de?.isValid()===!0||Ye?.isValid()===!0)){let $=d+y/2,Y=f*Math.cos($),De=f*Math.sin($);n.moveTo(i+Y,r+De)}if(Le?.isValid()===!0){let{cx:$,cy:Y,r:De,a0:at,a1:fe}=Le;n.arc(i+$,r+Y,De,at,fe)}if(Ce.isValid()){let{r:$,a0:Y,a1:De}=Ce;n.arc(i,r,$,Y,De)}if(jt?.isValid()===!0){let{cx:$,cy:Y,r:De,a0:at,a1:fe}=jt;n.arc(i+$,r+Y,De,at,fe)}if(!I){if(B?.isValid()===!0){let{cx:$,cy:Y,r:De,a0:at,a1:fe}=B;n.arc(i+$,r+Y,De,at,fe)}if(Ye?.isValid()===!0){let{r:$,a0:Y,a1:De}=Ye;n.arc(i,r,$,De,Y,!0)}if(de?.isValid()===!0){let{cx:$,cy:Y,r:De,a0:at,a1:fe}=de;n.arc(i+$,r+Y,De,at,fe)}}n.closePath()}isPointInPath(e,n){let i=this.transformPoint(e,n),{startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.clipSector??this;return Yh(i.x-this.centerX,i.y-this.centerY,{startAngle:r,endAngle:s,innerRadius:Math.min(o,a),outerRadius:Math.max(o,a)})}};return t.className="Sector",t})();g([X()],Bt.prototype,"centerX",2);g([X()],Bt.prototype,"centerY",2);g([X()],Bt.prototype,"innerRadius",2);g([X()],Bt.prototype,"outerRadius",2);g([X()],Bt.prototype,"startAngle",2);g([X()],Bt.prototype,"endAngle",2);g([X()],Bt.prototype,"clipSector",2);g([X()],Bt.prototype,"concentricEdgeInset",2);g([X()],Bt.prototype,"radialEdgeInset",2);g([X()],Bt.prototype,"startOuterCornerRadius",2);g([X()],Bt.prototype,"endOuterCornerRadius",2);g([X()],Bt.prototype,"startInnerCornerRadius",2);g([X()],Bt.prototype,"endInnerCornerRadius",2);var pn={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Gr={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},eT=class extends We{constructor(){super(...arguments),this.showInLegend=!1}};g([b(H)],eT.prototype,"showInLegend",2);var eb=class extends vt{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}};g([b(P)],eb.prototype,"text",2);g([b(Pe)],eb.prototype,"spacing",2);var tb=class extends le{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};g([b(we)],tb.prototype,"fill",2);g([b(Ie)],tb.prototype,"fillOpacity",2);var $a=class extends vt{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};g([b(O)],$a.prototype,"offset",2);g([b(Qr)],$a.prototype,"minAngle",2);g([b(O)],$a.prototype,"minSpacing",2);g([b(O)],$a.prototype,"maxCollisionOffset",2);g([b(H)],$a.prototype,"avoidCollisions",2);var nb=class extends vt{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};g([b(Pe)],nb.prototype,"positionOffset",2);g([b(Ie)],nb.prototype,"positionRatio",2);var Mf=class extends le{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};g([b(Gn,{optional:!0})],Mf.prototype,"colors",2);g([b(O)],Mf.prototype,"length",2);g([b(O)],Mf.prototype,"strokeWidth",2);var me=class extends ci{constructor(){super(...arguments),this.fills=Object.values(pn),this.strokes=Object.values(Gr),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.innerLabels=new tf(eb),this.title=new eT,this.innerCircle=new tb,this.shadow=new ui,this.calloutLabel=new $a,this.sectorLabel=new nb,this.calloutLine=new Mf,this.tooltip=new qt}isValid(){let t=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(L.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};g([b(P)],me.prototype,"angleKey",2);g([b(P,{optional:!0})],me.prototype,"angleName",2);g([b(P,{optional:!0})],me.prototype,"radiusKey",2);g([b(P,{optional:!0})],me.prototype,"radiusName",2);g([b(O,{optional:!0})],me.prototype,"radiusMin",2);g([b(O,{optional:!0})],me.prototype,"radiusMax",2);g([b(P,{optional:!0})],me.prototype,"calloutLabelKey",2);g([b(P,{optional:!0})],me.prototype,"calloutLabelName",2);g([b(P,{optional:!0})],me.prototype,"sectorLabelKey",2);g([b(P,{optional:!0})],me.prototype,"sectorLabelName",2);g([b(P,{optional:!0})],me.prototype,"legendItemKey",2);g([b(Gn)],me.prototype,"fills",2);g([b(Gn)],me.prototype,"strokes",2);g([b(Ie)],me.prototype,"fillOpacity",2);g([b(Ie)],me.prototype,"strokeOpacity",2);g([b(gr)],me.prototype,"lineDash",2);g([b(O)],me.prototype,"lineDashOffset",2);g([b(O)],me.prototype,"cornerRadius",2);g([b(tn,{optional:!0})],me.prototype,"itemStyler",2);g([b(Qr)],me.prototype,"rotation",2);g([b(Pe)],me.prototype,"outerRadiusOffset",2);g([b(Ie)],me.prototype,"outerRadiusRatio",2);g([b(Pe,{optional:!0})],me.prototype,"innerRadiusOffset",2);g([b(Ie,{optional:!0})],me.prototype,"innerRadiusRatio",2);g([b(O)],me.prototype,"strokeWidth",2);g([b(Pe)],me.prototype,"sectorSpacing",2);g([b(nI)],me.prototype,"innerLabels",2);g([b(z)],me.prototype,"title",2);g([b(z)],me.prototype,"innerCircle",2);g([b(z)],me.prototype,"shadow",2);g([b(z)],me.prototype,"calloutLabel",2);g([b(z)],me.prototype,"sectorLabel",2);g([b(z)],me.prototype,"calloutLine",2);g([b(z)],me.prototype,"tooltip",2);function Ks(t,e,n,i){let r=[n.convert(0),n.convert(1)],s=[i.convert(0),i.convert(1)],o=Math.PI/-2+$t(e),a=t?"initial":"update",l=({radius:p})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*p}),c=({radius:p})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*p});return{nodes:{toFn:(p,m,y,{prevLive:v})=>{let{startAngle:x,endAngle:D,innerRadius:S,outerRadius:w}=m,{stroke:I,fill:C}=m.sectorFormat;if(y==="removed"&&v?(x=v.datum?.endAngle,D=v.datum?.endAngle):y==="removed"&&!v&&(x=o,D=o),y==="removed"){let T=l(m);S=T.innerRadius,w=T.outerRadius}return{startAngle:x,endAngle:D,outerRadius:w,innerRadius:S,stroke:I,fill:C}},fromFn:(p,m,y,{prevFromProps:v})=>{let{startAngle:x,endAngle:D,innerRadius:S,outerRadius:w}=p,{fill:I,stroke:C}=m.sectorFormat;if(y==="unknown"||y==="added"&&!v?(x=o,D=o,S=m.innerRadius,w=m.outerRadius):y==="added"&&v&&(x=v.endAngle??o,D=v.endAngle??o,S=v.innerRadius??m.innerRadius,w=v.outerRadius??m.outerRadius),y==="added"&&!t){let T=c(m);S=T.innerRadius,w=T.outerRadius}return y==="updated"&&(I=p.fill??I,C=p.stroke??C),{startAngle:x,endAngle:D,innerRadius:S,outerRadius:w,fill:I,stroke:C,phase:a}}},innerCircle:{fromFn:(p,m)=>({size:p.previousDatum?.radius??p.size??0,phase:a}),toFn:(p,m)=>({size:m.radius??0})}}}function ib(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function rb(t,e){let n=e.y-t.centerY,i=e.x-t.centerX,r=Math.atan2(n,i),s=t.getItemNodes();for(let o of s)if(o.datum.missing!==!0&&jr(r,o.startAngle,o.endAngle)){let a=Math.sqrt(i*i+n*n),l=0;return a<o.innerRadius?l=o.innerRadius-a:a>o.outerRadius&&(l=a-o.outerRadius),{datum:o.datum,distance:l}}}function wj(t,e){let n=t.getNodeData();if(n!==void 0)return tT(n[e.datumIndex],t.centerX,t.centerY)}function tT(t,e,n){return Jv(t).translate(e,n)}var If=class extends Nv{constructor(s){var o=s,{useLabelLayer:t=!1,pickModes:e=[3,0],canHaveAxes:n=!1,animationResetFns:i}=o,r=Ve(o,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(N(M({},r),{useLabelLayer:t,pickModes:e,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new U),this.nodeData=[],this.itemSelection=et.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=et.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=et.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=et.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=i,this.animationState=new Yc("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return this.itemGroup.children}getNodeData(){return this.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}labelFactory(){let t=new Me;return t.pointerEvents=1,t}getInnerRadius(){return 0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){let{item:t,label:e}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&dt([this.itemSelection,this.highlightSelection],t),e&&dt([this.labelSelection,this.highlightLabelSelection],e),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){let{item:e,label:n}=this.animationResetFns??{};e&&dt([this.highlightSelection],e),n&&dt([this.highlightLabelSelection],n)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}computeFocusBounds(t){let e=this.getNodeData()?.[t.datumIndex];if(e!==void 0)return this.itemSelection.select(n=>n instanceof nn&&n.datum===e)[0]}},Mj=class extends Qc{constructor(t,e,n,i){super(t,e,n,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},Ij=(()=>{let t=class extends If{constructor(e){super({moduleCtx:e,pickModes:[3,0],useLabelLayer:!0,animationResetFns:{item:ib,label:vr}}),this.properties=new me,this.previousRadiusScale=new Pi,this.radiusScale=new Pi,this.calloutLabelGroup=this.contentGroup.appendChild(new U({name:"pieCalloutLabels"})),this.calloutLabelSelection=new et(this.calloutLabelGroup,U),this.backgroundGroup=this.rootGroup.appendChild(new U({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new U({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ws),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ws),this.innerLabelsGroup=this.contentGroup.appendChild(new U({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new U({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=et.select(this.innerLabelsGroup,Me),this.innerCircleSelection=et.select(this.innerCircleGroup,Ws),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=Mj,this.angleScale=new Pi,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(e=>e))}nodeFactory(){return new Bt}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return k(this,null,function*(){if(this.data==null||!this.properties.isValid())return;let{data:n}=this,{visible:i,seriesItemEnabled:r}=this,{angleKey:s,radiusKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=[],h=[];c?d.push(_t(c,"band",{id:"legendItemKey"})):a?d.push(_t(a,"band",{id:"calloutLabelKey"})):l&&d.push(_t(l,"band",{id:"sectorLabelKey"}));let f=this.radiusScale.type,p=this.radiusScale.type;o&&h.push(Cv(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Re(o,f,{id:"radiusRaw"}),Lc({id:"radiusValue"},[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&h.push(Re(a,"band",{id:"calloutLabelValue"})),l&&h.push(Re(l,"band",{id:"sectorLabelValue"})),c&&h.push(Re(c,"band",{id:"legendItemValue"})),u&&this.processedData&&d.length>0&&h.push(to(this.processedData)),h.push(Ba()),n=n.map((m,y)=>i&&r[y]?m:N(M({},m),{[s]:0})),yield this.requestDataModel(e,n,{props:[...d,Ev(s,p,{id:"angleValue",onlyPositive:!0}),Re(s,p,{id:"angleRaw"}),Lc({id:"angleValue"},[0,1],0,0),...h]});for(let m of this.processedData?.defs?.values??[]){let{id:y,missing:v,property:x}=m,D=vv(this,v);y!=="angleRaw"&&D>0&&L.warnOnce(`no value was found for the key '${String(x)}' on ${D} data element${D>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return k(this,null,function*(){if(!this.nodeDataRefresh)return;let{nodeData:e=[]}=(yield this.createNodeData())??{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){let n=e.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):-1,r=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,s=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,o=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:n,radiusIdx:i,calloutLabelIdx:r,sectorLabelIdx:s,legendItemIdx:o}}createNodeData(){return k(this,null,function*(){let{id:e,processedData:n,dataModel:i,angleScale:r}=this,{rotation:s,innerRadiusRatio:o}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!n||!i||n.type!=="ungrouped")return;let{angleIdx:a,radiusIdx:l,calloutLabelIdx:c,sectorLabelIdx:u,legendItemIdx:d}=this.getProcessedDataIndexes(i),h=0,f=0,p=n.data.map((m,y)=>{let{datum:v,values:x}=m,D=x[a],S=r.convert(h)+$t(s);h=D,f+=D;let w=r.convert(h)+$t(s),I=Math.abs(w-S),C=S+I/2,T=x[a+1],E=l>=0?x[l]??1:1,A=l>=0?x[l+1]:void 0,R=d>=0?x[d]:void 0,_=this.getLabels(v,C,I,!0,x[c],x[u],R),G=this.getSectorFormat(v,y,!1);return M({itemId:y,series:this,datum:v,index:y,angleValue:T,midAngle:C,midCos:Math.cos(C),midSin:Math.sin(C),startAngle:S,endAngle:w,sectorFormat:G,radiusValue:A,radius:E,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(E),0),legendItemValue:R,enabled:this.seriesItemEnabled[y]},_)});return this.zerosumOuterRing.visible=f===0,this.zerosumInnerRing.visible=f===0&&o!=null&&o!==1&&o>0,{itemId:e,nodeData:p,labelData:p}})}getLabels(e,n,i,r,s,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!r||l.enabled?this.properties.calloutLabelKey:void 0,h=!r||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>$t(l.minAngle)&&(p.calloutLabel=N(M({},this.getTextAlignment(n)),{text:this.getLabelText(l,N(M({},f),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(p.sectorLabel={text:this.getLabelText(c,N(M({},f),{value:o}))}),u!=null&&a!=null&&(p.legendItem={key:u,text:a}),p}getTextAlignment(e){let n=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Tc(e),r=-.75*Math.PI,s=i-r,o=Math.floor(s/(Math.PI/2)),a=Qh(o,n.length);return n[a]}getSectorFormat(e,n,i){let{callbackCache:r,highlightManager:s}=this.ctx,{angleKey:o,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,fills:d,strokes:h,itemStyler:f}=this.properties,p=s.getActiveHighlight(),m=i&&p?.series===this&&n===p.itemId,y=h[n%h.length],{fill:v,fillOpacity:x,stroke:D,strokeWidth:S,strokeOpacity:w,lineDash:I,lineDashOffset:C,cornerRadius:T}=ue(m&&this.properties.highlightStyle.item,{fill:d.length>0?d[n%d.length]:void 0,stroke:y,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),E;return f&&(E=r.call(f,{datum:e,angleKey:o,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,fill:v,fillOpacity:x,stroke:D,strokeWidth:S,strokeOpacity:w,lineDash:I,lineDashOffset:C,cornerRadius:T,highlighted:m,seriesId:this.id})),{fill:E?.fill??v,fillOpacity:E?.fillOpacity??x,stroke:E?.stroke??D,strokeWidth:E?.strokeWidth??S,strokeOpacity:E?.strokeOpacity??w,lineDash:E?.lineDash??I,lineDashOffset:E?.lineDashOffset??C,cornerRadius:E?.cornerRadius??T}}getInnerRadius(){let{radius:e}=this,{innerRadiusRatio:n=1,innerRadiusOffset:i=0}=this.properties,r=e*n+i;return r===e||r<0?0:r}getOuterRadius(){let{outerRadiusRatio:e,outerRadiusOffset:n}=this.properties;return Math.max(this.radius*e+n,0)}updateRadiusScale(e){let n=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=n,e&&(this.previousRadiusScale.range=n),this.nodeData=this.nodeData.map(s=>{var o=s,{radius:i}=o,r=Ve(o,["radius"]);return N(M({},r),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})})}getTitleTranslationY(){let e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;let i=2+(this.properties.title?.spacing??0),r=Math.max(0,-e);return-e-i-r}update(n){return k(this,arguments,function*({seriesRect:e}){let{title:i}=this.properties,r={seriesRectWidth:e?.width,seriesRectHeight:e?.height},s=mn(this.nodeDataDependencies,r)!=null;if(s&&(this._nodeDataDependencies=r),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){let o=this.getTitleTranslationY(),a=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(a,0,o),i.node.translationY=isFinite(o)?o:0}for(let o of[this.zerosumInnerRing,this.zerosumOuterRing])o.fillOpacity=0,o.stroke=this.properties.calloutLabel.color,o.strokeWidth=1,o.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){let{oldTitle:e}=this,{title:n}=this.properties;e!==n&&(e&&this.labelGroup?.removeChild(e.node),n&&(n.node.textBaseline="bottom",this.labelGroup?.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){this.nodeData.forEach(e=>{let n=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,n),y:e.midSin*Math.max(0,n)}})}updateSelections(){return k(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return k(this,null,function*(){let{itemSelection:e,highlightSelection:n,highlightLabelSelection:i,calloutLabelSelection:r,labelSelection:s,innerLabelsSelection:o}=this,a=this.ctx.highlightManager.getActiveHighlight(),l=a?.series===this?this.nodeData.filter(u=>u.itemId===a?.itemId):[],c=(u,d)=>{let h=this.nodeData;d&&(h=h.map(f=>N(M({},f),{sectorFormat:M({},f.sectorFormat)}))),u.update(h,void 0,f=>this.getDatumId(f)),this.ctx.animationManager.isSkipped()&&u.cleanup()};c(e,!1),c(n,!0),r.update(this.nodeData,u=>{let d=new St;d.tag=0,d.pointerEvents=1,u.appendChild(d);let h=new Me;h.tag=1,h.pointerEvents=1,u.appendChild(h)}),s.update(this.nodeData),i.update(l),o.update(this.properties.innerLabels,u=>{u.pointerEvents=1})})}updateInnerCircleSelection(){let{innerCircle:e}=this.properties,n=0,i=this.getInnerRadius();if(i>0){let s=Math.min(i,this.getOuterRadius());n=Math.ceil(s*2+1)}let r=e?[{radius:n}]:[];this.innerCircleSelection.update(r)}updateNodes(e){return k(this,null,function*(){let n=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&n?.series===this,this.highlightLabel.visible=i&&n?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((s,{radius:o})=>{s.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:o})});let r=(s,o,a,l)=>{let c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke;let u=this.ctx.animationManager.isSkipped();u&&(s.startAngle=o.startAngle,s.endAngle=o.endAngle,s.innerRadius=o.innerRadius,s.outerRadius=o.outerRadius),(l||u)&&(s.fill=c.fill,s.stroke=c.stroke),s.strokeWidth=c.strokeWidth,s.fillOpacity=c.fillOpacity,s.strokeOpacity=c.strokeOpacity,s.lineDash=c.lineDash,s.lineDashOffset=c.lineDashOffset,s.cornerRadius=c.cornerRadius,s.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);s.inset=d,s.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((s,o,a)=>r(s,o,a,!1)),this.highlightSelection.each((s,o,a)=>{let l=n?.series===this&&s.datum.itemId===n.itemId;r(s,o,a,!0),s.visible=l}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){let{calloutLine:e}=this.properties,n=e.length,i=e.strokeWidth,r=e.colors??this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{let l=o.datum,{calloutLabel:c,outerRadius:u}=l;if(c?.text&&!c.hidden&&u!==0){o.visible=!0,o.strokeWidth=i,o.stroke=r[a%r.length],o.fill=void 0;let d=l.midCos*u,h=l.midSin*u,f=l.midCos*(u+n),p=l.midSin*(u+n);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){let y=c.box,v=f,x=p;f<y.x?v=y.x:f>y.x+y.width&&(v=y.x+y.width),p<y.y?x=y.y:p>y.y+y.height&&(x=y.y+y.height);let D=v-f,S=x-p,w=Math.sqrt(Math.pow(D,2)+Math.pow(S,2)),I=w-s;I>0&&(f=f+D*I/w,p=p+S*I/w)}o.x1=d,o.y1=h,o.x2=f,o.y2=p}else o.visible=!1})}getLabelOverflow(e,n,i){let r=i.x-this.centerX,s=i.x+i.width-this.centerX,o=i.y-this.centerY,a=i.y+i.height-this.centerY,l=1,c=1;n.x+l<r?c=(n.x+n.width-r)/n.width:n.x+n.width-l>s&&(c=(s-n.x)/n.width);let u=n.y+l<o||n.y+n.height-l>a,d=c===1?e.length:Math.floor(e.length*c)-1,h=this.bboxIntersectsSurroundingSeries(n);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(e,n=0,i=0){let{surroundingRadius:r}=this;if(r==null)return!1;let s=[{x:e.x+n,y:e.y+i},{x:e.x+e.width+n,y:e.y+i},{x:e.x+e.width+n,y:e.y+e.height+i},{x:e.x+n,y:e.y+e.height+i}],o=r**2;return s.some(a=>a.x**2+a.y**2>o)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:n,calloutLine:i}=this.properties,{offset:r,minSpacing:s}=n,o=e.convert(0),a=D=>!D.calloutLabel||D.outerRadius===0,l=this.nodeData,c=this.nodeData.filter(D=>!a(D));if(c.forEach(D=>{let S=D.calloutLabel;S!=null&&(S.hidden=!1,S.collisionTextAlign=void 0,S.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(D=>D.midCos<0).sort((D,S)=>D.midSin-S.midSin),d=c.filter(D=>D.midCos>=0).sort((D,S)=>D.midSin-S.midSin),h=c.filter(D=>D.midSin<0&&D.calloutLabel?.textAlign==="center").sort((D,S)=>D.midCos-S.midCos),f=c.filter(D=>D.midSin>=0&&D.calloutLabel?.textAlign==="center").sort((D,S)=>D.midCos-S.midCos),p=new Me,m=D=>{let S=D.calloutLabel;if(S==null)return new V(0,0,0,0);let w=D.outerRadius+i.length+r,I=D.midCos*w,C=D.midSin*w+S.collisionOffsetY;return p.text=S.text,p.x=I,p.y=C,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:S.collisionTextAlign??S.textAlign,textBaseline:S.textBaseline}),p.computeBBox()},y=(D,S,w)=>{let I=m(D).grow(s/2),C=m(S).grow(s/2);if(I.x<C.x+C.width&&I.x+I.width>C.x&&(w==="to-top"?I.y<C.y+C.height:I.y+I.height>C.y)){let E=w==="to-top"?I.y-C.y-C.height:I.y+I.height-C.y;S.calloutLabel.collisionOffsetY=E}},v=D=>{let S=D.slice().sort((I,C)=>Math.abs(I.midSin)-Math.abs(C.midSin))[0],w=D.indexOf(S);for(let I=w-1;I>=0;I--){let C=D[I+1],T=D[I];y(C,T,"to-top")}for(let I=w+1;I<D.length;I++){let C=D[I-1],T=D[I];y(C,T,"to-bottom")}},x=D=>{let S=c.some(A=>A.calloutLabel.collisionOffsetY!==0),w=D.map(A=>m(A)),I=w.map(A=>A.clone().grow(s/2)),C=!1;for(let A=0;A<I.length&&!C;A++){let R=I[A];for(let _=A+1;_<D.length;_++){let G=I[_];if(R.collidesBBox(G)){C=!0;break}}}let T=l.map(A=>{let{startAngle:R,endAngle:_,outerRadius:G}=A;return{startAngle:R,endAngle:_,innerRadius:o,outerRadius:G}}),E=w.some(A=>T.some(R=>JE(A,R)));!C&&!S&&!E||D.filter(A=>A.calloutLabel.textAlign==="center").forEach(A=>{let R=A.calloutLabel;A.midCos<0?R.collisionTextAlign="right":A.midCos>0?R.collisionTextAlign="left":R.collisionTextAlign="center"})};v(u),v(d),x(h),x(f)}updateCalloutLabelNodes(e){let{radiusScale:n}=this,{calloutLabel:i,calloutLine:r}=this.properties,s=r.length,{offset:o,color:a}=i,l=new Me;this.calloutLabelSelection.selectByTag(1).forEach(c=>{let{datum:u}=c,d=u.calloutLabel,h=n.convert(u.radius),f=Math.max(0,h);if(!d?.text||f===0||d.hidden){c.visible=!1;return}let p=f+s+o,m=u.midCos*p,y=u.midSin*p+d.collisionOffsetY,v={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};l.text=d.text,l.x=m,l.y=y,l.setFont(this.properties.calloutLabel),l.setAlign(v);let x=l.computeBBox(),D=d.text,S=!0;if(i.avoidCollisions){let{textLength:w,hasVerticalOverflow:I}=this.getLabelOverflow(d.text,x,e);D=d.text.length===w?d.text:`${d.text.substring(0,w)}\u2026`,S=!I}c.text=D,c.x=m,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign(v),c.fill=a,c.visible=S})}computeLabelsBBox(e,n){return k(this,null,function*(){let{calloutLabel:i,calloutLine:r}=this.properties,s=r.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new Me,d,{title:h}=this.properties;if(h?.text&&h.enabled){let f=this.getTitleTranslationY();isFinite(f)&&(u.text=h.text,u.x=0,u.y=f,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.computeBBox(),c.push(d))}return this.nodeData.forEach(f=>{let p=f.calloutLabel;if(!p||f.outerRadius===0)return null;let m=f.outerRadius+s+o,y=f.midCos*m,v=f.midSin*m+p.collisionOffsetY;u.text=p.text,u.x=y,u.y=v,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});let x=u.computeBBox();if(p.box=x,Math.abs(p.collisionOffsetY)>a){p.hidden=!0;return}if(d){let D=n.y-this.centerY,S=new V(d.x-l,D,d.width+2*l,d.y+d.height+l-D);if(x.collidesBBox(S)){p.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:D,hasVerticalOverflow:S,hasSurroundingSeriesOverflow:w}=this.getLabelOverflow(p.text,x,n),I=p.text.length>2&&D<2;if(S||I||w){p.hidden=!0;return}}p.hidden=!1,c.push(x)}),c.length===0?null:V.merge(c)})}updateSectorLabelNodes(){let{radiusScale:e}=this,n=e.convert(0),{fontSize:i,fontStyle:r,fontWeight:s,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel,u=(d,h)=>{let{sectorLabel:f,outerRadius:p}=h,m=!1;if(f&&p!==0){let y=n*(1-l)+p*l+a;d.fill=c,d.fontStyle=r,d.fontWeight=s,d.fontSize=i,d.fontFamily=o,d.text=f.text,d.x=h.midCos*y,d.y=h.midSin*y,d.textAlign="center",d.textBaseline="middle";let v=d.computeBBox(),x=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:D,endAngle:S}=h,w={startAngle:D,endAngle:S,innerRadius:n,outerRadius:p};x.every(([I,C])=>Yh(I,C,w))&&(m=!0)}d.visible=m};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateInnerLabelNodes(){let e=[],n=[];this.innerLabelsSelection.each((d,h)=>{let{fontStyle:f,fontWeight:p,fontSize:m,fontFamily:y,color:v}=h;d.fontStyle=f,d.fontWeight=p,d.fontSize=m,d.fontFamily=y,d.text=h.text,d.x=0,d.y=0,d.fill=v,d.textAlign="center",d.textBaseline="alphabetic",e.push(d.computeBBox()),n.push(h.spacing)});let i=d=>d===0?0:n[d],r=d=>d===n.length-1?0:n[d],s=e.reduce((d,h,f)=>d+h.height+i(f)+r(f),0),o=Math.max(...e.map(d=>d.width)),a=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2))<=(a>0?a:this.getOuterRadius()),u=[];for(let d=0,h=-s/2;d<e.length;d++){let p=e[d].height+h+i(d);u.push(p),h=p+r(d)}this.innerLabelsSelection.each((d,h,f)=>{d.y=u[f],d.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(e){let{angleKey:n,calloutLabelKey:i,sectorLabelKey:r,legendItemKey:s}=this.properties,{sectorLabel:o,calloutLabel:a,legendItem:l}=e;if(s&&l!==void 0)return l.text;if(i&&i!==n&&a?.text!==void 0)return a.text;if(r&&r!==n&&o?.text!==void 0)return o.text}pickNodeClosestDatum(e){return rb(this,e)}getTooltipHtml(e){if(!this.properties.isValid())return mr;let{datum:n,angleValue:i,sectorFormat:{fill:r},itemId:s}=e,o=He(this.properties.title?.text),a=be(i)?Xh(i):String(i),l=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${a}`:a,backgroundColor:r},{datum:n,itemId:s,title:o,color:r,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){let{visible:n,processedData:i,dataModel:r}=this;if(!r||!i?.data.length||!this.properties.isValid()||e!=="category")return[];let{angleKey:s,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l}=this.properties;if(!l&&(!o||o===s)&&(!a||a===s))return[];let{calloutLabelIdx:c,sectorLabelIdx:u,legendItemIdx:d}=this.getProcessedDataIndexes(r),h=this.properties.title?.showInLegend&&this.properties.title.text,f=[];for(let p=0;p<i.data.length;p++){let{datum:m,values:y}=i.data[p],v=[];h&&v.push(h);let x=this.getLabels(m,2*Math.PI,2*Math.PI,!1,y[c],y[u],y[d]);if(l&&x.legendItem!==void 0?v.push(x.legendItem.text):o&&o!==s&&x.calloutLabel?.text!==void 0?v.push(x.calloutLabel?.text):a&&a!==s&&x.sectorLabel?.text!==void 0&&v.push(x.sectorLabel?.text),v.length===0)continue;let D=this.getSectorFormat(m,p,!1);f.push({legendType:"category",id:this.id,itemId:p,seriesId:this.id,enabled:n&&this.seriesItemEnabled[p],label:{text:v.join(" - ")},symbols:[{marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:l!=null?m[l]:void 0})}return f}onLegendItemClick(e){let{enabled:n,itemId:i,series:r,legendItemName:s}=e;r.id===this.id?this.toggleSeriesItem(i,n):s!=null&&this.toggleOtherSeriesItems(s,n)}toggleSeriesItem(e,n){this.seriesItemEnabled[e]=n,this.nodeData[e]&&(this.nodeData[e].enabled=n),this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,n){if(!this.properties.legendItemKey||!this.dataModel)return;let i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(({values:r},s)=>{r[i]===e&&this.toggleSeriesItem(s,n)})}animateEmptyUpdateReady(e){let{animationManager:n}=this.ctx,i=Ks(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Je(this.id,"nodes",n,[this.itemSelection,this.highlightSelection],i.nodes),Je(this.id,"innerCircle",n,[this.innerCircleSelection],i.innerCircle),Se(this,"callout",n,this.calloutLabelSelection),Se(this,"sector",n,this.labelSelection),Se(this,"highlight",n,this.highlightLabelSelection),Se(this,"inner",n,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:e,highlightSelection:n,processedData:i,radiusScale:r,previousRadiusScale:s}=this,{animationManager:o}=this.ctx,a=i?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(a?.moved.size??0)===0,c=(i?.defs.keys.length??0)>0,u=i?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!u)&&this.ctx.animationManager.skipCurrentBatch();let d=Ks(!1,this.properties.rotation,r,s);Je(this.id,"nodes",o,[e,n],d.nodes,(h,f)=>this.getDatumId(f),a),Je(this.id,"innerCircle",o,[this.innerCircleSelection],d.innerCircle),Se(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Se(this,"sector",this.ctx.animationManager,this.labelSelection),Se(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Se(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:n,radiusScale:i,previousRadiusScale:r}=this,{animationManager:s}=this.ctx,o=Ks(!1,this.properties.rotation,i,r);Je(this.id,"nodes",s,[e,n],o.nodes),Je(this.id,"innerCircle",s,[this.innerCircleSelection],o.innerCircle),Vr(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Vr(this,"sector",this.ctx.animationManager,this.labelSelection),Vr(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Vr(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){let{calloutLabelKey:n,sectorLabelKey:i,legendItemKey:r}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(r)return e[r];if(n)return e[n];if(i)return e[i]}}getDatumId(e){let{index:n}=e,i=this.getDatumIdFromData(e.datum);return i!=null?String(i):`${n}`}onDataChange(){let{data:e,seriesItemEnabled:n}=this;this.seriesItemEnabled=e?.map((i,r)=>n[r]??!0)??[]}};return t.className="DonutSeries",t.type="donut",t})(),Cj={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:Qe,color:$r,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:Qe,color:Dt,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:Qe,color:ro,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:so,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:Qe,color:Dt,spacing:2}}},Ej={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:Qe,color:$r,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:Qe,color:Dt,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:Qe,color:ro,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:so,xOffset:3,yOffset:3,blur:5}}},nT=({takeColors:t,colorsCount:e})=>{let{fills:n,strokes:i}=t(e);return{fills:n,strokes:i,calloutLine:{colors:i}}},Tj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:Ij,tooltipDefaults:{range:"exact"},themeTemplate:Cj,paletteFactory:nT},iT=class extends We{constructor(){super(...arguments),this.showInLegend=!1}};g([b(H)],iT.prototype,"showInLegend",2);var Wa=class extends vt{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};g([b(O)],Wa.prototype,"offset",2);g([b(Qr)],Wa.prototype,"minAngle",2);g([b(O)],Wa.prototype,"minSpacing",2);g([b(O)],Wa.prototype,"maxCollisionOffset",2);g([b(H)],Wa.prototype,"avoidCollisions",2);var sb=class extends vt{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};g([b(Pe)],sb.prototype,"positionOffset",2);g([b(Ie)],sb.prototype,"positionRatio",2);var Cf=class extends le{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};g([b(Gn,{optional:!0})],Cf.prototype,"colors",2);g([b(O)],Cf.prototype,"length",2);g([b(O)],Cf.prototype,"strokeWidth",2);var Te=class extends ci{constructor(){super(...arguments),this.fills=Object.values(pn),this.strokes=Object.values(Gr),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.title=new iT,this.shadow=new ui,this.calloutLabel=new Wa,this.sectorLabel=new sb,this.calloutLine=new Cf,this.tooltip=new qt}};g([b(P)],Te.prototype,"angleKey",2);g([b(P,{optional:!0})],Te.prototype,"angleName",2);g([b(P,{optional:!0})],Te.prototype,"radiusKey",2);g([b(P,{optional:!0})],Te.prototype,"radiusName",2);g([b(O,{optional:!0})],Te.prototype,"radiusMin",2);g([b(O,{optional:!0})],Te.prototype,"radiusMax",2);g([b(P,{optional:!0})],Te.prototype,"calloutLabelKey",2);g([b(P,{optional:!0})],Te.prototype,"calloutLabelName",2);g([b(P,{optional:!0})],Te.prototype,"sectorLabelKey",2);g([b(P,{optional:!0})],Te.prototype,"sectorLabelName",2);g([b(P,{optional:!0})],Te.prototype,"legendItemKey",2);g([b(Gn)],Te.prototype,"fills",2);g([b(Gn)],Te.prototype,"strokes",2);g([b(Ie)],Te.prototype,"fillOpacity",2);g([b(Ie)],Te.prototype,"strokeOpacity",2);g([b(gr)],Te.prototype,"lineDash",2);g([b(O)],Te.prototype,"lineDashOffset",2);g([b(O)],Te.prototype,"cornerRadius",2);g([b(tn,{optional:!0})],Te.prototype,"itemStyler",2);g([b(Qr)],Te.prototype,"rotation",2);g([b(Pe)],Te.prototype,"outerRadiusOffset",2);g([b(Ie)],Te.prototype,"outerRadiusRatio",2);g([b(O)],Te.prototype,"strokeWidth",2);g([b(Pe)],Te.prototype,"sectorSpacing",2);g([b(z)],Te.prototype,"title",2);g([b(z)],Te.prototype,"shadow",2);g([b(z)],Te.prototype,"calloutLabel",2);g([b(z)],Te.prototype,"sectorLabel",2);g([b(z)],Te.prototype,"calloutLine",2);g([b(z)],Te.prototype,"tooltip",2);var Aj=class extends Qc{constructor(t,e,n,i){super(t,e,n,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},Nj=(()=>{let t=class extends If{constructor(e){super({moduleCtx:e,pickModes:[3,0],useLabelLayer:!0,animationResetFns:{item:ib,label:vr}}),this.properties=new Te,this.previousRadiusScale=new Pi,this.radiusScale=new Pi,this.calloutLabelGroup=this.contentGroup.appendChild(new U({name:"pieCalloutLabels"})),this.calloutLabelSelection=new et(this.calloutLabelGroup,U),this.backgroundGroup=this.rootGroup.appendChild(new U({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new U({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ws),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=Aj,this.angleScale=new Pi,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(e=>e))}nodeFactory(){let e=new Bt;return e.miterLimit=1e9,e}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return k(this,null,function*(){if(this.data==null||!this.properties.isValid())return;let{data:n}=this,{visible:i,seriesItemEnabled:r}=this,{angleKey:s,radiusKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=[],h=[];c?d.push(_t(c,"band",{id:"legendItemKey"})):a?d.push(_t(a,"band",{id:"calloutLabelKey"})):l&&d.push(_t(l,"band",{id:"sectorLabelKey"}));let f=this.radiusScale.type,p=this.radiusScale.type;o&&h.push(Cv(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),Re(o,f,{id:"radiusRaw"}),Lc({id:"radiusValue"},[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&h.push(Re(a,"band",{id:"calloutLabelValue"})),l&&h.push(Re(l,"band",{id:"sectorLabelValue"})),c&&h.push(Re(c,"band",{id:"legendItemValue"})),u&&this.processedData&&d.length>0&&h.push(to(this.processedData)),h.push(Ba()),n=n.map((m,y)=>i&&r[y]?m:N(M({},m),{[s]:0})),yield this.requestDataModel(e,n,{props:[...d,Ev(s,p,{id:"angleValue",onlyPositive:!0}),Re(s,p,{id:"angleRaw"}),Lc({id:"angleValue"},[0,1],0,0),...h]});for(let m of this.processedData?.defs?.values??[]){let{id:y,missing:v,property:x}=m,D=vv(this,v);y!=="angleRaw"&&D>0&&L.warnOnce(`no value was found for the key '${String(x)}' on ${D} data element${D>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return k(this,null,function*(){if(!this.nodeDataRefresh)return;let{nodeData:e=[]}=(yield this.createNodeData())??{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){let n=e.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):-1,r=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,s=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,o=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:n,radiusIdx:i,calloutLabelIdx:r,sectorLabelIdx:s,legendItemIdx:o}}createNodeData(){return k(this,null,function*(){let{id:e,processedData:n,dataModel:i,angleScale:r}=this,{rotation:s}=this.properties;if(!n||!i||n.type!=="ungrouped")return;let{angleIdx:o,radiusIdx:a,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:u}=this.getProcessedDataIndexes(i),d=0,h=0,f=n.data.map((p,m)=>{let{datum:y,values:v}=p,x=v[o],D=r.convert(d)+$t(s);d=x,h+=x;let S=r.convert(d)+$t(s),w=Math.abs(S-D),I=D+w/2,C=v[o+1],T=a>=0?v[a]??1:1,E=a>=0?v[a+1]:void 0,A=u>=0?v[u]:void 0,R=this.getLabels(y,I,w,!0,v[l],v[c],A),_=this.getSectorFormat(y,m,!1);return M({itemId:m,series:this,datum:y,index:m,angleValue:C,midAngle:I,midCos:Math.cos(I),midSin:Math.sin(I),startAngle:D,endAngle:S,sectorFormat:_,radiusValue:E,radius:T,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(T),0),legendItemValue:A,enabled:this.seriesItemEnabled[m]},R)});return this.zerosumOuterRing.visible=h===0,{itemId:e,nodeData:f,labelData:f}})}getLabels(e,n,i,r,s,o,a){let{calloutLabel:l,sectorLabel:c,legendItemKey:u}=this.properties,d=!r||l.enabled?this.properties.calloutLabelKey:void 0,h=!r||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!h&&!u)return{};let f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>$t(l.minAngle)&&(p.calloutLabel=N(M({},this.getTextAlignment(n)),{text:this.getLabelText(l,N(M({},f),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),h&&(p.sectorLabel={text:this.getLabelText(c,N(M({},f),{value:o}))}),u!=null&&a!=null&&(p.legendItem={key:u,text:a}),p}getTextAlignment(e){let n=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Tc(e),r=-.75*Math.PI,s=i-r,o=Math.floor(s/(Math.PI/2)),a=Qh(o,n.length);return n[a]}getSectorFormat(e,n,i){let{callbackCache:r,highlightManager:s}=this.ctx,{angleKey:o,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,fills:d,strokes:h,itemStyler:f}=this.properties,p=s.getActiveHighlight(),m=i&&p?.series===this&&n===p.itemId,y=h[n%h.length],{fill:v,fillOpacity:x,stroke:D,strokeWidth:S,strokeOpacity:w,lineDash:I,lineDashOffset:C,cornerRadius:T}=ue(m&&this.properties.highlightStyle.item,{fill:d.length>0?d[n%d.length]:void 0,stroke:y,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),E;return f&&(E=r.call(f,{datum:e,angleKey:o,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:u,fill:v,strokeOpacity:w,stroke:D,strokeWidth:S,fillOpacity:x,lineDash:I,lineDashOffset:C,cornerRadius:T,highlighted:m,seriesId:this.id})),{fill:E?.fill??v,fillOpacity:E?.fillOpacity??x,stroke:E?.stroke??D,strokeWidth:E?.strokeWidth??S,strokeOpacity:E?.strokeOpacity??w,lineDash:E?.lineDash??I,lineDashOffset:E?.lineDashOffset??C,cornerRadius:E?.cornerRadius??T}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){let n=[0,this.getOuterRadius()];this.radiusScale.range=n,e&&(this.previousRadiusScale.range=n),this.nodeData=this.nodeData.map(s=>{var o=s,{radius:i}=o,r=Ve(o,["radius"]);return N(M({},r),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})})}getTitleTranslationY(){let e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;let i=2+(this.properties.title?.spacing??0),r=Math.max(0,-e);return-e-i-r}update(n){return k(this,arguments,function*({seriesRect:e}){let{title:i}=this.properties,r={seriesRectWidth:e?.width,seriesRectHeight:e?.height},s=mn(this.nodeDataDependencies,r)!=null;if(s&&(this._nodeDataDependencies=r),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){let o=this.getTitleTranslationY(),a=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(o)&&!this.bboxIntersectsSurroundingSeries(a,0,o),i.node.translationY=isFinite(o)?o:0}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){let{oldTitle:e}=this,{title:n}=this.properties;e!==n&&(e&&this.labelGroup?.removeChild(e.node),n&&(n.node.textBaseline="bottom",this.labelGroup?.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){this.nodeData.forEach(e=>{let n=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,n),y:e.midSin*Math.max(0,n)}})}updateSelections(){return k(this,null,function*(){yield this.updateGroupSelection()})}updateGroupSelection(){return k(this,null,function*(){let{itemSelection:e,highlightSelection:n,highlightLabelSelection:i,calloutLabelSelection:r,labelSelection:s}=this,o=this.ctx.highlightManager.getActiveHighlight(),a=o?.series===this?this.nodeData.filter(c=>c.itemId===o?.itemId):[],l=(c,u)=>{let d=this.nodeData;u&&(d=d.map(h=>N(M({},h),{sectorFormat:M({},h.sectorFormat)}))),c.update(d,void 0,h=>this.getDatumId(h)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(e,!1),l(n,!0),r.update(this.nodeData,c=>{let u=new St;u.tag=0,u.pointerEvents=1,c.appendChild(u);let d=new Me;d.tag=1,d.pointerEvents=1,c.appendChild(d)}),s.update(this.nodeData),i.update(a)})}updateNodes(e){return k(this,null,function*(){let n=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&n?.series===this,this.highlightLabel.visible=i&&n?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();let r=(s,o,a,l)=>{let c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke;let u=this.ctx.animationManager.isSkipped();u&&(s.startAngle=o.startAngle,s.endAngle=o.endAngle,s.innerRadius=o.innerRadius,s.outerRadius=o.outerRadius),(l||u)&&(s.fill=c.fill,s.stroke=c.stroke),s.strokeWidth=c.strokeWidth,s.fillOpacity=c.fillOpacity,s.strokeOpacity=c.strokeOpacity,s.lineDash=c.lineDash,s.lineDashOffset=c.lineDashOffset,s.cornerRadius=c.cornerRadius,s.fillShadow=this.properties.shadow;let d=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);s.inset=d,s.lineJoin=this.properties.sectorSpacing>=0||d>0?"miter":"round"};this.itemSelection.each((s,o,a)=>r(s,o,a,!1)),this.highlightSelection.each((s,o,a)=>r(s,o,a,!0)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){let{calloutLine:e}=this.properties,n=e.length,i=e.strokeWidth,r=e.colors??this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,a)=>{let l=o.datum,{calloutLabel:c,outerRadius:u}=l;if(c?.text&&!c.hidden&&u!==0){o.visible=!0,o.strokeWidth=i,o.stroke=r[a%r.length],o.fill=void 0;let d=l.midCos*u,h=l.midSin*u,f=l.midCos*(u+n),p=l.midSin*(u+n);if((c.collisionTextAlign??c.collisionOffsetY!==0)&&c.box!=null){let y=c.box,v=f,x=p;f<y.x?v=y.x:f>y.x+y.width&&(v=y.x+y.width),p<y.y?x=y.y:p>y.y+y.height&&(x=y.y+y.height);let D=v-f,S=x-p,w=Math.sqrt(Math.pow(D,2)+Math.pow(S,2)),I=w-s;I>0&&(f=f+D*I/w,p=p+S*I/w)}o.x1=d,o.y1=h,o.x2=f,o.y2=p}else o.visible=!1})}getLabelOverflow(e,n,i){let r=i.x-this.centerX,s=i.x+i.width-this.centerX,o=i.y-this.centerY,a=i.y+i.height-this.centerY,l=1,c=1;n.x+l<r?c=(n.x+n.width-r)/n.width:n.x+n.width-l>s&&(c=(s-n.x)/n.width);let u=n.y+l<o||n.y+n.height-l>a,d=c===1?e.length:Math.floor(e.length*c)-1,h=this.bboxIntersectsSurroundingSeries(n);return{textLength:d,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:h}}bboxIntersectsSurroundingSeries(e,n=0,i=0){let{surroundingRadius:r}=this;if(r==null)return!1;let s=[{x:e.x+n,y:e.y+i},{x:e.x+e.width+n,y:e.y+i},{x:e.x+e.width+n,y:e.y+e.height+i},{x:e.x+n,y:e.y+e.height+i}],o=r**2;return s.some(a=>a.x**2+a.y**2>o)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e}=this,{calloutLabel:n,calloutLine:i}=this.properties,{offset:r,minSpacing:s}=n,o=e.convert(0),a=D=>!D.calloutLabel||D.outerRadius===0,l=this.nodeData,c=this.nodeData.filter(D=>!a(D));if(c.forEach(D=>{let S=D.calloutLabel;S!=null&&(S.hidden=!1,S.collisionTextAlign=void 0,S.collisionOffsetY=0)}),c.length<=1)return;let u=c.filter(D=>D.midCos<0).sort((D,S)=>D.midSin-S.midSin),d=c.filter(D=>D.midCos>=0).sort((D,S)=>D.midSin-S.midSin),h=c.filter(D=>D.midSin<0&&D.calloutLabel?.textAlign==="center").sort((D,S)=>D.midCos-S.midCos),f=c.filter(D=>D.midSin>=0&&D.calloutLabel?.textAlign==="center").sort((D,S)=>D.midCos-S.midCos),p=new Me,m=D=>{let S=D.calloutLabel;if(S==null)return new V(0,0,0,0);let w=D.outerRadius+i.length+r,I=D.midCos*w,C=D.midSin*w+S.collisionOffsetY;return p.text=S.text,p.x=I,p.y=C,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:S.collisionTextAlign??S.textAlign,textBaseline:S.textBaseline}),p.computeBBox()},y=(D,S,w)=>{let I=m(D).grow(s/2),C=m(S).grow(s/2);if(I.x<C.x+C.width&&I.x+I.width>C.x&&(w==="to-top"?I.y<C.y+C.height:I.y+I.height>C.y)){let E=w==="to-top"?I.y-C.y-C.height:I.y+I.height-C.y;S.calloutLabel.collisionOffsetY=E}},v=D=>{let S=D.slice().sort((I,C)=>Math.abs(I.midSin)-Math.abs(C.midSin))[0],w=D.indexOf(S);for(let I=w-1;I>=0;I--){let C=D[I+1],T=D[I];y(C,T,"to-top")}for(let I=w+1;I<D.length;I++){let C=D[I-1],T=D[I];y(C,T,"to-bottom")}},x=D=>{let S=c.some(A=>A.calloutLabel.collisionOffsetY!==0),w=D.map(A=>m(A)),I=w.map(A=>A.clone().grow(s/2)),C=!1;for(let A=0;A<I.length&&!C;A++){let R=I[A];for(let _=A+1;_<D.length;_++){let G=I[_];if(R.collidesBBox(G)){C=!0;break}}}let T=l.map(A=>{let{startAngle:R,endAngle:_,outerRadius:G}=A;return{startAngle:R,endAngle:_,innerRadius:o,outerRadius:G}}),E=w.some(A=>T.some(R=>JE(A,R)));!C&&!S&&!E||D.filter(A=>A.calloutLabel.textAlign==="center").forEach(A=>{let R=A.calloutLabel;A.midCos<0?R.collisionTextAlign="right":A.midCos>0?R.collisionTextAlign="left":R.collisionTextAlign="center"})};v(u),v(d),x(h),x(f)}updateCalloutLabelNodes(e){let{radiusScale:n}=this,{calloutLabel:i,calloutLine:r}=this.properties,s=r.length,{offset:o,color:a}=i,l=new Me;this.calloutLabelSelection.selectByTag(1).forEach(c=>{let{datum:u}=c,d=u.calloutLabel,h=n.convert(u.radius),f=Math.max(0,h);if(!d?.text||f===0||d.hidden){c.visible=!1;return}let p=f+s+o,m=u.midCos*p,y=u.midSin*p+d.collisionOffsetY,v={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};l.text=d.text,l.x=m,l.y=y,l.setFont(this.properties.calloutLabel),l.setAlign(v);let x=l.computeBBox(),D=d.text,S=!0;if(i.avoidCollisions){let{textLength:w,hasVerticalOverflow:I}=this.getLabelOverflow(d.text,x,e);D=d.text.length===w?d.text:`${d.text.substring(0,w)}\u2026`,S=!I}c.text=D,c.x=m,c.y=y,c.setFont(this.properties.calloutLabel),c.setAlign(v),c.fill=a,c.visible=S})}computeLabelsBBox(e,n){return k(this,null,function*(){let{calloutLabel:i,calloutLine:r}=this.properties,s=r.length,{offset:o,maxCollisionOffset:a,minSpacing:l}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let c=[],u=new Me,d,{title:h}=this.properties;if(h?.text&&h.enabled){let f=this.getTitleTranslationY();isFinite(f)&&(u.text=h.text,u.x=0,u.y=f,u.setFont(h),u.setAlign({textBaseline:"bottom",textAlign:"center"}),d=u.computeBBox(),c.push(d))}return this.nodeData.forEach(f=>{let p=f.calloutLabel;if(!p||f.outerRadius===0)return null;let m=f.outerRadius+s+o,y=f.midCos*m,v=f.midSin*m+p.collisionOffsetY;u.text=p.text,u.x=y,u.y=v,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline});let x=u.computeBBox();if(p.box=x,Math.abs(p.collisionOffsetY)>a){p.hidden=!0;return}if(d){let D=n.y-this.centerY,S=new V(d.x-l,D,d.width+2*l,d.y+d.height+l-D);if(x.collidesBBox(S)){p.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:D,hasVerticalOverflow:S,hasSurroundingSeriesOverflow:w}=this.getLabelOverflow(p.text,x,n),I=p.text.length>2&&D<2;if(S||I||w){p.hidden=!0;return}}p.hidden=!1,c.push(x)}),c.length===0?null:V.merge(c)})}updateSectorLabelNodes(){let{radiusScale:e}=this,n=e.convert(0),{fontSize:i,fontStyle:r,fontWeight:s,fontFamily:o,positionOffset:a,positionRatio:l,color:c}=this.properties.sectorLabel,u=n>0,d=this.seriesItemEnabled.filter(Boolean).length===1,h=(f,p)=>{let{sectorLabel:m,outerRadius:y}=p,v=!1;if(m&&y!==0){let x=n*(1-l)+y*l+a;f.fill=c,f.fontStyle=r,f.fontWeight=s,f.fontSize=i,f.fontFamily=o,f.text=m.text,!u&&d?(f.x=0,f.y=0):(f.x=p.midCos*x,f.y=p.midSin*x),f.textAlign="center",f.textBaseline="middle";let S=f.computeBBox(),w=[[S.x,S.y],[S.x+S.width,S.y],[S.x+S.width,S.y+S.height],[S.x,S.y+S.height]],{startAngle:I,endAngle:C}=p,T={startAngle:I,endAngle:C,innerRadius:n,outerRadius:y};w.every(([E,A])=>Yh(E,A,T))&&(v=!0)}f.visible=v};this.labelSelection.each(h),this.highlightLabelSelection.each(h)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}getDatumLegendName(e){let{angleKey:n,calloutLabelKey:i,sectorLabelKey:r,legendItemKey:s}=this.properties,{sectorLabel:o,calloutLabel:a,legendItem:l}=e;if(s&&l!==void 0)return l.text;if(i&&i!==n&&a?.text!==void 0)return a.text;if(r&&r!==n&&o?.text!==void 0)return o.text}pickNodeClosestDatum(e){return rb(this,e)}getTooltipHtml(e){if(!this.properties.isValid())return mr;let{datum:n,angleValue:i,sectorFormat:{fill:r},itemId:s}=e,o=He(this.properties.title?.text),a=be(i)?Xh(i):String(i),l=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${a}`:a,backgroundColor:r},{datum:n,itemId:s,title:o,color:r,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){let{visible:n,processedData:i,dataModel:r}=this;if(!r||!i?.data.length||e!=="category")return[];let{angleKey:s,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l}=this.properties;if(!l&&(!o||o===s)&&(!a||a===s))return[];let{calloutLabelIdx:c,sectorLabelIdx:u,legendItemIdx:d}=this.getProcessedDataIndexes(r),h=this.properties.title?.showInLegend&&this.properties.title.text,f=[];for(let p=0;p<i.data.length;p++){let{datum:m,values:y}=i.data[p],v=[];h&&v.push(h);let x=this.getLabels(m,2*Math.PI,2*Math.PI,!1,y[c],y[u],y[d]);if(l&&x.legendItem!==void 0?v.push(x.legendItem.text):o&&o!==s&&x.calloutLabel?.text!==void 0?v.push(x.calloutLabel?.text):a&&a!==s&&x.sectorLabel?.text!==void 0&&v.push(x.sectorLabel?.text),v.length===0)continue;let D=this.getSectorFormat(m,p,!1);f.push({legendType:"category",id:this.id,itemId:p,seriesId:this.id,enabled:n&&this.seriesItemEnabled[p],label:{text:v.join(" - ")},symbols:[{marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:l!=null?m[l]:void 0})}return f}onLegendItemClick(e){let{enabled:n,itemId:i,series:r,legendItemName:s}=e;r.id===this.id?this.toggleSeriesItem(i,n):s!=null&&this.toggleOtherSeriesItems(s,n)}toggleSeriesItem(e,n){this.seriesItemEnabled[e]=n,this.nodeData[e]&&(this.nodeData[e].enabled=n),this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,n){if(!this.properties.legendItemKey||!this.dataModel)return;let i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(({values:r},s)=>{r[i]===e&&this.toggleSeriesItem(s,n)})}animateEmptyUpdateReady(e){let{animationManager:n}=this.ctx,i=Ks(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Je(this.id,"nodes",n,[this.itemSelection,this.highlightSelection],i.nodes),Se(this,"callout",n,this.calloutLabelSelection),Se(this,"sector",n,this.labelSelection),Se(this,"highlight",n,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:e,highlightSelection:n,processedData:i,radiusScale:r,previousRadiusScale:s}=this,{animationManager:o}=this.ctx,a=i?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(a?.moved.size??0)===0,c=(i?.defs.keys.length??0)>0,u=i?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!u)&&this.ctx.animationManager.skipCurrentBatch();let d=Ks(!1,this.properties.rotation,r,s);Je(this.id,"nodes",o,[e,n],d.nodes,(h,f)=>this.getDatumId(f),a),Se(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Se(this,"sector",this.ctx.animationManager,this.labelSelection),Se(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:n,radiusScale:i,previousRadiusScale:r}=this,{animationManager:s}=this.ctx,o=Ks(!1,this.properties.rotation,i,r);Je(this.id,"nodes",s,[e,n],o.nodes),Vr(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Vr(this,"sector",this.ctx.animationManager,this.labelSelection),Vr(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){let{calloutLabelKey:n,sectorLabelKey:i,legendItemKey:r}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(r)return e[r];if(n)return e[n];if(i)return e[i]}}getDatumId(e){let{index:n}=e,i=this.getDatumIdFromData(e.datum);return i!=null?String(i):`${n}`}onDataChange(){let{data:e,seriesItemEnabled:n}=this;this.seriesItemEnabled=e?.map((i,r)=>n[r]??!0)??[]}};return t.className="PieSeries",t.type="pie",t})(),kj={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:Nj,tooltipDefaults:{range:"exact"},themeTemplate:Ej,paletteFactory:nT},ur=class extends le{constructor(t,e){super(),this.onChange=t,this.onButtonsChange=e,this.align="start",this.position="top",this.size="normal"}};g([Yt(t=>{t.onChange(t.enabled)}),b(H)],ur.prototype,"enabled",2);g([Yt(t=>{t.onChange(t.enabled)}),b(je([...EC]),{optional:!0})],ur.prototype,"align",2);g([Yt(t=>{t.onChange(t.enabled)}),b(je(ca),{optional:!0})],ur.prototype,"position",2);g([Yt(t=>{t.onChange(t.enabled)}),b(je(["small","normal"]),{optional:!0})],ur.prototype,"size",2);g([Yt(t=>{t.onButtonsChange(t.buttons)}),b(Aa,{optional:!0})],ur.prototype,"buttons",2);var Xm="ag-charts-toolbar",ql={align:"ag-charts-toolbar__align",section:"ag-charts-toolbar__section",button:"ag-charts-toolbar__button",icon:"ag-charts-toolbar__icon",label:"ag-charts-toolbar__label"},Nt={top:"ag-charts-toolbar--top",right:"ag-charts-toolbar--right",bottom:"ag-charts-toolbar--bottom",left:"ag-charts-toolbar--left",floating:"ag-charts-toolbar--floating","floating-top":"ag-charts-toolbar--floating-top","floating-bottom":"ag-charts-toolbar--floating-bottom",small:"ag-charts-toolbar--small",normal:"ag-charts-toolbar--normal",hidden:"ag-charts-toolbar--hidden",preventFlash:"ag-charts-toolbar--prevent-flash",floatingHidden:"ag-charts-toolbar--floating-hidden",align:{start:"ag-charts-toolbar__align--start",center:"ag-charts-toolbar__align--center",end:"ag-charts-toolbar__align--end"},button:{active:"ag-charts-toolbar__button--active",hiddenValue:"ag-charts-toolbar__button--hidden-value",hiddenToggled:"ag-charts-toolbar__button--hidden-toggled"}},Rj=`.ag-charts-toolbar{align-items:center;background:none;border:none;display:flex;flex-wrap:nowrap;opacity:1;position:absolute;transform:translateY(0);transition:opacity 0.2s ease-in-out,transform 0.2s ease-in-out}.ag-charts-toolbar--hidden,
.ag-charts-toolbar--prevent-flash{visibility:hidden}.ag-charts-toolbar--floating-hidden{opacity:0;transition:opacity 0.4s ease-in-out}.ag-charts-toolbar--small{--ag-charts-toolbar-size:var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size:var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding:var(--ag-charts-toolbar-button-padding-small)}.ag-charts-toolbar--top,
.ag-charts-toolbar--bottom{flex-direction:row;width:100%}.ag-charts-toolbar--left,
.ag-charts-toolbar--right{flex-direction:column}.ag-charts-toolbar--floating,
.ag-charts-toolbar--floating-top,
.ag-charts-toolbar--floating-bottom{background:none;border:none;flex-direction:row;overflow:hidden;pointer-events:none;width:100%}.ag-charts-toolbar--floating{padding:0;width:auto;z-index:var(--ag-charts-layer-toolbar)}.ag-charts-toolbar--floating-top{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-top:10px}.ag-charts-toolbar--floating-bottom{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-bottom:10px}.ag-charts-toolbar__align{display:flex;flex-direction:inherit;flex-wrap:inherit;gap:var(--ag-charts-toolbar-gap);max-width:100%;width:100%}.ag-charts-toolbar__align--start{justify-content:start}.ag-charts-toolbar__align--center{justify-content:center}.ag-charts-toolbar__align--end{justify-content:end}.ag-charts-toolbar__align--center,
.ag-charts-toolbar__align--end{margin-left:auto}.ag-charts-toolbar--left .ag-charts-toolbar__align--center,
.ag-charts-toolbar--left .ag-charts-toolbar__align--end,
.ag-charts-toolbar--right .ag-charts-toolbar__align--center,
.ag-charts-toolbar--right .ag-charts-toolbar__align--end{margin-left:0;margin-top:auto}.ag-charts-toolbar--floating-top .ag-charts-toolbar__align,
.ag-charts-toolbar--floating-bottom .ag-charts-toolbar__align{transition:transform 0.4s ease-in-out;width:auto}.ag-charts-toolbar__section{display:inherit;flex-direction:inherit;flex-wrap:inherit;justify-content:inherit;max-width:inherit;width:inherit}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);display:flex;font-size:var(--ag-charts-toolbar-font-size);font-weight:500;justify-content:center;margin:0 0 0 -1px;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);pointer-events:all;transition:background-color 0.25s ease-in-out,color 0.25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:first-child{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button:last-child{border-bottom-right-radius:var(--ag-charts-button-radius);border-right:var(--ag-charts-toolbar-border);border-top-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar--left .ag-charts-toolbar__button,
.ag-charts-toolbar--right .ag-charts-toolbar__button{border-left:var(--ag-charts-toolbar-border);border-right:var(--ag-charts-toolbar-border);border-radius:0;margin:-1px 0 0 0;max-width:100%;overflow:hidden}.ag-charts-toolbar--left .ag-charts-toolbar__button:first-child,
.ag-charts-toolbar--right .ag-charts-toolbar__button:first-child{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar--left .ag-charts-toolbar__button:last-child,
.ag-charts-toolbar--right .ag-charts-toolbar__button:last-child{border-bottom:var(--ag-charts-toolbar-border);border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__button--hidden-value,
.ag-charts-toolbar__button--hidden-toggled{display:none}.ag-charts-toolbar__button:hover{background:var(--ag-charts-toolbar-hover-color)}.ag-charts-toolbar .ag-charts-toolbar__button:focus-visible{border-left:var(--ag-charts-toolbar-border);border-color:var(--ag-charts-toolbar-focus-color);box-shadow:var(--ag-charts-focus-border-shadow);z-index:1}.ag-charts-toolbar__button.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);color:var(--ag-charts-toolbar-active-color)}.ag-charts-toolbar__button[aria-disabled='true']{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color)}.ag-charts-toolbar__button:not([aria-disabled='true']){cursor:pointer}.ag-charts-toolbar__icon{height:1.2em;width:1.2em}.ag-charts-toolbar__icon + .ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,
.ag-charts-toolbar__label{pointer-events:none}`,rT=class extends qc{constructor(t){super(),this.ctx=t,this.enabled=!0,this.annotations=new ur(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.annotationOptions=new ur(this.onGroupChanged.bind(this,"annotationOptions"),this.onGroupButtonsChanged.bind(this,"annotationOptions")),this.ranges=new ur(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new ur(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.horizontalSpacing=10,this.verticalSpacing=10,this.floatingDetectionRange=38,this.positions={top:new Set,right:new Set,bottom:new Set,left:new Set,floating:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},right:{},bottom:{},left:{},floating:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={annotations:new Set,annotationOptions:new Set,ranges:new Set,zoom:new Set},this.groupButtons={annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.groupDestroyFns={annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.pendingButtonToggledEvents=[],this.groupProxied=new Map,this.hasNewLocale=!0,t.domManager.addStyles(Xm,Rj),this.elements={};for(let e of ca)this.elements[e]=t.domManager.addChild("canvas-overlay",`toolbar-${e}`),this.renderToolbar(e);this.toggleVisibilities(),this.destroyFns.push(t.interactionManager.addListener("hover",this.onHover.bind(this),31),t.interactionManager.addListener("leave",this.onLeave.bind(this),31),t.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),t.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),t.toolbarManager.addListener("floating-anchor-changed",this.onFloatingAnchorChanged.bind(this)),t.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),t.localeManager.addListener("locale-changed",()=>{this.hasNewLocale=!0}),()=>this.destroyElements())}destroyElements(){this.ctx.domManager.removeStyles(Xm);for(let t of Object.keys(this.elements))this.ctx.domManager.removeChild("canvas-overlay",`toolbar-${t}`)}onHover(t){let{enabled:e,elements:n,floatingDetectionRange:i,ctx:{scene:r}}=this,{offsetY:s,sourceEvent:{target:o}}=t,{FloatingBottom:a,FloatingTop:l}=pc;if(!e)return;let c=n[a],u=n[l],d=c.offsetTop-i,h=s>d&&s<r.canvas.element.offsetHeight||o===c,f=u.offsetTop+u.offsetHeight+i,p=s>0&&s<f||o===u;this.translateFloatingElements(a,h),this.translateFloatingElements(l,p)}onLeave(t){let{enabled:e,ctx:{scene:n}}=this,{relatedElement:i,targetElement:r}=t,{FloatingBottom:s,FloatingTop:o}=pc;!e||r!==n.canvas.element||Hm.some(l=>this.groupButtons[l].some(c=>c===i))||(this.translateFloatingElements(s,!1),this.translateFloatingElements(o,!1))}onGroupChanged(t){this[t]==null||this.groupProxied.has(t)||(this.createGroup(t),this.toggleVisibilities())}onGroupButtonsChanged(t,e){!this.enabled||this.groupProxied.has(t)||(this.createGroupButtons(t,e),this.toggleVisibilities())}onLayoutComplete(){for(let t of ca)this.elements[t].classList.remove(Nt.preventFlash)}onButtonToggled(t){let{group:e,value:n,active:i,enabled:r,visible:s}=t;if(this.groupButtons[e].length===0){this.pendingButtonToggledEvents.push(t);return}for(let o of this.groupButtons[e])o.dataset.toolbarValue===`${n}`&&(o.ariaDisabled=`${!r}`,o.classList.toggle(Nt.button.hiddenToggled,!s),o.classList.toggle(Nt.button.active,i))}onGroupToggled(t){let{caller:e,group:n,visible:i}=t;this.toggleGroup(e,n,i),this.toggleVisibilities()}onFloatingAnchorChanged(t){let{elements:e,groupButtons:n,positions:i,horizontalSpacing:r,verticalSpacing:s,ctx:{domManager:o,toolbarManager:a}}=this,{group:l,anchor:c}=t;if(!i.floating.has(l))return;let u=e.floating;if(u.classList.contains(Nt.hidden))return;let d=c.y-u.offsetHeight-s,h=c.x-u.offsetWidth/2;c.position==="above"&&(d=c.y-u.offsetHeight/2,h=c.x+r);let f=o.getBoundingClientRect();d=ae(0,d,f.height-u.offsetHeight),h=ae(0,h,f.width-u.offsetWidth),u.style.top=`${d}px`,u.style.left=`${h}px`;for(let p of n[l]){if(p.classList.contains(Nt.button.hiddenToggled))return;let m=p.offsetParent;a.buttonMoved(l,p.dataset.toolbarValue,new V(p.offsetLeft-p.offsetWidth+(m?.offsetLeft??0),p.offsetTop+(m?.offsetTop??0),p.offsetWidth,p.offsetWidth))}}onProxyGroupOptions(t){if(!this.enabled)return;let{caller:e,group:n,options:i}=t;this.groupProxied.set(n,i),this[n].set(i),this.toggleGroup(e,n,i.enabled),this.createGroup(n,i.enabled,i.position),i.enabled&&this.createGroupButtons(n,i.buttons)}createGroup(t,e,n){e??(e=this[t].enabled),n??(n=this[t].position);for(let i of ca)e&&n===i?this.positions[i].add(t):this.positions[i].delete(t)}createGroupButtons(t,e=[]){for(let f of this.groupButtons[t])f.remove();if(this.groupButtons[t]=[],this.groupDestroyFns[t].forEach(f=>f()),this.groupDestroyFns[t]=[],e.length===0)return;let{align:n,position:i}=this[t],r=this.positionAlignments[i][n];if(!r)return;let s=0,o=()=>{let f=r.children.item(s);return f||(f=Lt("div"),r.appendChild(f),this.destroyFns.push(()=>f.remove())),f.classList.add(ql.section,Nt[this[t].size]),s++,f},a=o(),l=e.at(0)?.section;for(let f of e){l!==f.section&&(a=o()),l=f.section;let p=this.createButtonElement(t,f);a.appendChild(p),this.groupButtons[t].push(p)}let c=()=>{this.ctx.toolbarManager.cancel(t)},u,d;Yw(i)&&(u=()=>this.translateFloatingElements(i,!0),d=()=>this.translateFloatingElements(i,!1));let h=this.computeAriaOrientation(this[t].position);this.groupDestroyFns[t]=Df({orientation:h,toolbar:r,buttons:this.groupButtons[t],onEscape:c,onFocus:u,onBlur:d}),this.updateToolbarAriaLabel(t,r)}computeAriaOrientation(t){return{top:"horizontal",right:"vertical",bottom:"horizontal",left:"vertical",floating:"horizontal","floating-top":"horizontal","floating-bottom":"horizontal"}[t]}toggleGroup(t,e,n){n?this.groupCallers[e].add(t):this.groupCallers[e].delete(t)}processPendingEvents(){let t=(this.pendingButtonToggledEvents??[]).slice();for(let e of t)this.onButtonToggled(e);this.pendingButtonToggledEvents=[]}performLayout(t){return k(this,null,function*(){return this.enabled&&(this.refreshOuterLayout(t.shrinkRect),this.refreshLocale()),t})}performCartesianLayout(t){return k(this,null,function*(){this.enabled&&this.refreshInnerLayout(t.seriesRect)})}refreshOuterLayout(t){let{elements:e,horizontalSpacing:n,verticalSpacing:i}=this;e.top.classList.contains(Nt.hidden)||t.shrink(e.top.offsetHeight+i,"top"),e.right.classList.contains(Nt.hidden)||t.shrink(e.right.offsetWidth+n,"right"),e.bottom.classList.contains(Nt.hidden)||(t.shrink(e.bottom.offsetHeight+i,"bottom"),e.bottom.style.top=`${t.y+t.height+i}px`),e.left.classList.contains(Nt.hidden)||t.shrink(e.left.offsetWidth+n,"left")}refreshLocale(){let{groupButtons:t,groupProxied:e,hasNewLocale:n}=this;if(n){for(let i of Hm){let r=e.get(i);t[i].forEach(s=>this.refreshButtonLocale(s,this[i],r)),this.updateToolbarAriaLabel(i)}this.hasNewLocale=!1}}refreshInnerLayout(t){let{elements:e,verticalSpacing:n}=this,{FloatingBottom:i,FloatingTop:r}=pc;e.top.style.top=`${t.y-e.top.offsetHeight-n}px`,e.top.style.left=`${t.x}px`,e.top.style.width=`${t.width}px`,e.bottom.style.left=`${t.x}px`,e.bottom.style.width=`${t.width}px`,e.right.style.top=`${t.y}px`,e.right.style.right="0px",e.right.style.height=`${t.height}px`,e.left.style.top=`${t.y}px`,e.left.style.left="0px",e.left.style.height=`${t.height}px`,e[r].style.top=`${t.y}px`,e[i].style.top=`${t.y+t.height-e[i].offsetHeight}px`}refreshButtonLocale(t,e,n){let{dataset:{toolbarValue:i}}=t,r=n?.buttons?.find(({value:s})=>s===i)??e.buttons?.find(({value:s})=>s===i);r&&this.updateButtonText(t,r)}toggleVisibilities(){if(this.elements==null)return;let t=n=>this[n].enabled&&this.groupCallers[n].size>0,e=n=>i=>typeof i.value!="string"&&typeof i.value!="number"||`${i.value}`===n.dataset.toolbarValue;for(let n of ca){let i=this.enabled&&Array.from(this.positions[n].values()).some(t);this.elements[n].classList.toggle(Nt.hidden,!i)}for(let n of Hm){if(this[n]==null)continue;let i=t(n);for(let r of this.groupButtons[n]){let s=i&&this[n].buttons?.some(e(r));r.classList.toggle(Nt.button.hiddenValue,!s)}}}translateFloatingElements(t,e){let{elements:n,verticalSpacing:i,positionAlignments:r}=this,s=n[t],o=Object.values(r[t]);s.classList.toggle(Nt.floatingHidden,!e);let a=t==="floating-bottom"?1:-1;for(let l of o)l.style.transform=e&&l.style.transform!==""?"translateY(0)":`translateY(${(s.offsetHeight+i)*a}px)`}renderToolbar(t="top"){let e=this.elements[t];e.classList.add(Xm,Nt[t],Nt.preventFlash),Yw(t)&&e.classList.add(Nt.floatingHidden);for(let n of EC){let i=Lt("div");i.classList.add(ql.align,Nt.align[n]),e.appendChild(i),this.positionAlignments[t][n]=i}}createButtonElement(t,e){let n=Lt("button");return n.classList.add(ql.button),n.dataset.toolbarGroup=t,n.tabIndex=-1,(typeof e.value=="string"||typeof e.value=="number")&&(n.dataset.toolbarValue=`${e.value}`),n.onclick=yE(n,this.onButtonPress.bind(this,t,e.value)),this.updateButtonText(n,e),this.destroyFns.push(()=>n.remove()),n}updateToolbarAriaLabel(t,e){if(!e){let{align:i,position:r}=this[t];if(e=this.positionAlignments[r][i],!e)return}let n={annotations:"ariaLabelAnnotationsToolbar",annotationOptions:"ariaLabelAnnotationOptionsToolbar",ranges:"ariaLabelRangesToolbar",zoom:"ariaLabelZoomToolbar"};e.ariaLabel=this.ctx.localeManager.t(n[t])}updateButtonText(t,e){if(e.tooltip){let r=this.ctx.localeManager.t(e.tooltip);t.title=r}let n="";if(e.icon!=null&&(n=`<span class="ag-charts-icon-${e.icon} ${ql.icon}"></span>`),e.label!=null){let r=this.ctx.localeManager.t(e.label);n=`${n}<span class="${ql.label}">${r}</span>`}t.innerHTML=n;let i=e.ariaLabel?this.ctx.localeManager.t(e.ariaLabel):void 0;Zs(t,"aria-label",i)}onButtonPress(t,e){this.ctx.toolbarManager.pressButton(t,e)}};g([Yt(t=>{t.processPendingEvents(),t.toggleVisibilities()}),b(H)],rT.prototype,"enabled",2);var sT=1e3*60*60*24,Qm=sT*30,Lj=sT*365,Oj={enabled:!0,position:"left",align:"start",buttons:[{icon:"trend-line",tooltip:"toolbarAnnotationsTrendLine",value:"line",section:"create"},{icon:"parallel-channel",tooltip:"toolbarAnnotationsParallelChannel",value:"parallel-channel",section:"create"},{icon:"disjoint-channel",tooltip:"toolbarAnnotationsDisjointChannel",value:"disjoint-channel",section:"create"},{icon:"horizontal-line",tooltip:"toolbarAnnotationsHorizontalLine",value:"horizontal-line",section:"create"},{icon:"vertical-line",tooltip:"toolbarAnnotationsVerticalLine",value:"vertical-line",section:"create"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear",section:"tools"}]},_j={enabled:!0,position:"floating",align:"start",buttons:[{icon:"line-color",tooltip:"toolbarAnnotationsColor",value:"line-color"},{icon:"lock",tooltip:"toolbarAnnotationsLock",value:"lock"},{icon:"unlock",tooltip:"toolbarAnnotationsUnlock",value:"unlock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},Pj={enabled:!1,position:iu,align:"start",buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:Qm},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*Qm},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*Qm},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:Lj},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]},Fj={enabled:!0,position:"top",align:"end",buttons:[{icon:"zoom-out-alt",tooltip:"toolbarZoomZoomOut",value:"zoom-out"},{icon:"zoom-in-alt",tooltip:"toolbarZoomZoomIn",value:"zoom-in"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right"},{icon:"pan-start",tooltip:"toolbarZoomPanStart",value:"pan-start"},{icon:"pan-end",tooltip:"toolbarZoomPanEnd",value:"pan-end"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset"}]},Bj={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:rT,themeTemplate:{toolbar:{enabled:!0,annotations:Oj,annotationOptions:_j,ranges:Pj,zoom:Fj}}};function jj(){Hr.register(fE,WB,YB,vE,Bj,aj,dj,gj,bj,Dj,Tj,kj,yj);for(let t of[wa,Pa,xf,Da,tu])qr.register(t.type,{instanceConstructor:t,hidden:t===Da})}function Vj(){for(let t of Hr.modules){if(t.packageType==="enterprise"&&!G2(t)&&L.errorOnce("Unexpected enterprise module registered: "+t.identifier),t.type==="root"&&t.themeTemplate)for(let e of t.chartTypes)Ey.set(e,t.themeTemplate);if(t.type==="series"){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);Qt.register(t.identifier,t)}if(t.type==="series-option"&&t.themeTemplate)for(let e of t.seriesTypes)Qt.setThemeTemplate(e,t.themeTemplate);if(t.type==="axis-option"&&t.themeTemplate)for(let e of t.axisTypes){let n=t.themeTemplate[e],i=M(M({},t.themeTemplate),n);for(let r of t.axisTypes)delete i[r];qr.setThemeTemplate(e,i)}t.type==="axis"&&qr.register(t.identifier,t),t.type==="legend"&&bv.register(t.identifier,t)}if(Hr.hasEnterpriseModules()){let t=U2();t.length>0&&L.errorOnce("Enterprise modules expected but not registered: ",t)}}function zj(t){return t.type==="sankey"||t.type==="chord"}var Gj=(()=>{let t=class e extends ja{updateData(){return k(this,null,function*(){yield br(e.prototype,this,"updateData").call(this);let{nodes:n}=this.getOptions();this.series.forEach(i=>{zj(i)&&i.setChartNodes(n)})})}performLayout(){return k(this,null,function*(){let n=yield br(e.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,a=n.clone();n.shrink(i.left,"left"),n.shrink(i.top,"top"),n.shrink(i.right,"right"),n.shrink(i.bottom,"bottom"),this.seriesRect=n,this.animationRect=n,this.hoverRect=n;let l=this.series.some(c=>c.visible);r.visible=l;for(let c of[r,s,o])c.translationX=Math.floor(n.x),c.translationY=Math.floor(n.y),c.setClipRectInGroupCoordinateSpace(new V(a.x,a.y,a.width,a.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:a,paddedRect:n,visible:l},axes:[]}),n})}};return t.className="FlowProportionChart",t.type="flow-proportion",t})(),Uj=(()=>{let t=class e extends ja{constructor(n,i){super(n,i)}performLayout(){return k(this,null,function*(){let n=yield br(e.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,a=n.clone();n.shrink(i.left,"left"),n.shrink(i.top,"top"),n.shrink(i.right,"right"),n.shrink(i.bottom,"bottom"),this.seriesRect=n,this.animationRect=n,this.hoverRect=n;for(let l of[r,s,o])l.translationX=Math.floor(n.x),l.translationY=Math.floor(n.y);return yield Promise.all(this.series.map(l=>k(this,null,function*(){yield l.update({seriesRect:n})}))),r.visible=this.series[0].visible,r.setClipRectInGroupCoordinateSpace(new V(n.x,n.y,n.width,n.height)),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:a,paddedRect:n,visible:!0},axes:[]}),n})}getAriaLabel(){return`hierarchical chart, ${this.getCaptionText()}`}handleSeriesFocus(n,i){this.focus.series=this.series[0];let{focus:{series:r,seriesIndex:s,datumIndex:o},seriesRect:a}=this;if(r===void 0)return;let l=r.pickFocus({datumIndex:o,datumIndexDelta:i,otherIndex:s,otherIndexDelta:n,seriesRect:a});this.updatePickedFocus(l)}};return t.className="HierarchyChart",t.type="hierarchy",t})(),ma=class extends fv{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}};g([b(je(["polygon","circle"],"a polar axis shape"))],ma.prototype,"shape",2);g([b(Ie)],ma.prototype,"innerRadiusRatio",2);var Hj=(()=>{let t=class e extends ja{constructor(n,i){super(n,i),this.padding=new ss(40),this.ctx.axisManager.axisGroup.zIndex=6}performLayout(){return k(this,null,function*(){let n=yield br(e.prototype,this,"performLayout").call(this),i=n.clone();return this.computeSeriesRect(n),yield this.computeCircle(n),this.axes.forEach(r=>r.update()),this.hoverRect=n,this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:i,paddedRect:n,visible:!0},axes:[]}),n})}updateAxes(n,i,r){let s=this.axes.find(u=>u.direction==="x"),o=this.axes.find(u=>u.direction==="y");if(!(s instanceof ma)||!(o instanceof ma))return;let a=s.scale,l=a.ticks?.().map(u=>a.convert(u)),c=o.innerRadiusRatio;s.innerRadiusRatio=c,s.computeRange?.(),s.gridLength=r,o.gridAngles=l,o.gridRange=s.range,o.range=[r,r*c],[s,o].forEach(u=>{u.translation.x=n,u.translation.y=i,u.calculateLayout()})}computeSeriesRect(n){let{seriesArea:{padding:i}}=this;n.shrink(i.left,"left"),n.shrink(i.top,"top"),n.shrink(i.right,"right"),n.shrink(i.bottom,"bottom"),this.seriesRect=n,this.animationRect=n}computeCircle(n){return k(this,null,function*(){let i=this.series.filter(d=>d instanceof If),r=this.axes.filter(d=>d instanceof ma),s=(d,h,f)=>{this.updateAxes(d,h,f),i.forEach(m=>{m.centerX=d,m.centerY=h,m.radius=f});let p=i.filter(m=>m.type==="donut"||m.type==="pie");if(p.length>1){let m=p.map(y=>{let v=y.getInnerRadius();return{series:y,innerRadius:v}}).sort((y,v)=>y.innerRadius-v.innerRadius);m.at(-1).series.surroundingRadius=void 0;for(let y=0;y<m.length-1;y++)m[y].series.surroundingRadius=m[y+1].innerRadius}},o=n.x+n.width/2,a=n.y+n.height/2,l=Math.max(0,Math.min(n.width,n.height)/2),c=l;s(o,a,c);let u=(...h)=>k(this,[...h],function*({hideWhenNecessary:d=!1}={}){let f=[];for(let y of[...r,...i]){let v=yield y.computeLabelsBBox({hideWhenNecessary:d},n);v&&f.push(v)}if(f.length===0){s(o,a,l);return}let p=V.merge(f),m=this.refineCircle(p,c,n);s(m.centerX,m.centerY,m.radius),m.radius!==c&&(c=m.radius)});return yield u(),yield u(),yield u(),yield u({hideWhenNecessary:!0}),yield u({hideWhenNecessary:!0}),{radius:c,centerX:o,centerY:a}})}refineCircle(n,i,r){let o=-i,a=-i,l=i,c=i,u=Math.max(0,o-n.x),d=Math.max(0,a-n.y),h=Math.max(0,n.x+n.width-l),f=Math.max(0,n.y+n.height-c);u=h=Math.max(u,h),d=f=Math.max(d,f);let p=r.width-u-h,m=r.height-d-f,y=Math.min(p,m)/2,v=.5*r.width/2,x=.5*r.height/2,D=Math.min(v,x);if(y<D){y=D;let I=u+h,C=d+f;if(2*y+C>r.height){let T=r.height-2*y;Math.min(d,f)*2>T?(d=T/2,f=T/2):d>f?d=T-f:f=T-d}if(2*y+I>r.width){let T=r.width-2*y;Math.min(u,h)*2>T?(u=T/2,h=T/2):u>h?u=T-h:h=T-u}}let S=u+2*y+h,w=d+2*y+f;return{centerX:r.x+(r.width-S)/2+u+y,centerY:r.y+(r.height-w)/2+d+y,radius:y}}};return t.className="PolarChart",t.type="polar",t})(),Ef=Math.PI/180,Jm=t=>t*Ef,ey=t=>-Math.log(Math.tan(Math.PI*.25+t*Ef*.5)),ty=t=>t/Ef,ny=t=>(Math.atan(Math.exp(-t))-Math.PI*.25)/(Ef*.5),Oy=class _y{constructor(e,n){this.domain=e,this.range=n,this.type="mercator",this.bounds=_y.bounds(e)}static bounds(e){let[[n,i],[r,s]]=e,o=Jm(n),a=ey(i),l=Jm(r),c=ey(s);return new V(Math.min(o,l),Math.min(a,c),Math.abs(l-o),Math.abs(c-a))}static fixedScale(){return new _y([[ty(0),ny(0)],[ty(1),ny(1)]],[[0,0],[1,1]])}convert([e,n]){let[[i,r],[s,o]]=this.range,a=(s-i)/this.bounds.width,l=(o-r)/this.bounds.height;return[(Jm(e)-this.bounds.x)*a+i,(ey(n)-this.bounds.y)*l+r]}invert([e,n]){let[[i,r],[s,o]]=this.range,a=(s-i)/this.bounds.width,l=(o-r)/this.bounds.height;return[ty((e-i)/a+this.bounds.x),ny((n-r)/l+this.bounds.y)]}};function fM(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var $j=(()=>{let t=class e extends ja{constructor(n,i){super(n,i),this.xAxis=new wa(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new wa(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}updateData(){return k(this,null,function*(){yield br(e.prototype,this,"updateData").call(this);let{topology:n}=this.getOptions();this.series.forEach(i=>{fM(i)&&i.setChartTopology(n)})})}performLayout(){return k(this,null,function*(){let n=yield br(e.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:r,annotationRoot:s,highlightRoot:o}=this,a=n.clone();n.shrink(i.left,"left"),n.shrink(i.top,"top"),n.shrink(i.right,"right"),n.shrink(i.bottom,"bottom"),this.seriesRect=n,this.animationRect=n,this.hoverRect=n;let l=this.series.filter(fM),c=l.reduce((h,f)=>{if(!f.visible)return h;let p=f.topologyBounds;return p==null?h:h==null?p:(h.merge(p),h)},void 0),u;if(c!=null){let{lon0:h,lat0:f,lon1:p,lat1:m}=c,y=[[h,f],[p,m]],v=Oy.bounds(y),{width:x,height:D}=n,S=Math.min(x/v.width,D/v.height),w=v.width*S,I=v.height*S,C=(x-w)/2,T=(D-I)/2,E=C,A=T,R=C+w,_=T+I,G=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),J=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),ee=(R-E)/(G.max-G.min),se=E-ee*G.min,ne=(_-A)/(1-J.min-(1-J.max)),q=A-ne*(1-J.max);u=new Oy(y,[[se,q],[se+ee,q+ne]])}l.forEach(h=>{h.scale=u});let d=this.series.some(h=>h.visible);r.visible=d;for(let h of[r,s,o])h.translationX=Math.floor(n.x),h.translationY=Math.floor(n.y),h.setClipRectInGroupCoordinateSpace(new V(n.x,n.y,n.width,n.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:a,paddedRect:n,visible:d},axes:[]}),n})}};return t.className="TopologyChart",t.type="topology",t})();function Rn(t,e){if(Fn(t))return e(t)}function Wj(t,e){let A=t,{xKey:n="date",highKey:i="high",openKey:r="open",lowKey:s="low",closeKey:o="close",volumeKey:a="volume",chartType:l="candlestick",navigator:c=!1,volume:u=!0,rangeToolbar:d=!0,statusBar:h=!0,annotations:f=!0,zoom:p=!0,theme:m,data:y}=A,v=Ve(A,["xKey","highKey","openKey","lowKey","closeKey","volumeKey","chartType","navigator","volume","rangeToolbar","statusBar","annotations","zoom","theme","data"]),x=Kj(m,l,n,i,s,r,o),D=Yj(m,e,r,o,u,a),w={navigator:M({enabled:c},u?{miniChart:{enabled:c,series:[{type:"line",xKey:"date",yKey:a,marker:{enabled:!1}}]}}:null)},I=h?{statusBar:{enabled:!0,data:y,highKey:i,openKey:r,lowKey:s,closeKey:o,volumeKey:u?a:void 0}}:null,C={zoom:{enabled:p,enableIndependentAxes:!0}},T=f||d?{toolbar:{annotationOptions:{enabled:f},annotations:{enabled:f},ranges:{enabled:d}}}:null,E=u?[{type:"number",position:"left",keys:[a],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"},disableZoom:!0}]:[];return M(M(M(M(M({theme:typeof m=="string"?m:M({baseTheme:"ag-financial"},m??{}),animation:{enabled:!1},legend:{enabled:!1},series:[...D,...x],padding:{top:6,right:8},axes:[{type:"number",position:"right",keys:[r,o,i,s],interval:{maxSpacing:Rn(m,R=>R.overrides?.common?.axes?.number?.interval?.maxSpacing)??45},label:{format:Rn(m,R=>R.overrides?.common?.axes?.number?.label?.format)??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...E,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],annotations:{enabled:f},tooltip:{enabled:!1},data:y,titlePadding:4},w),I),C),T),v)}function Yj(t,e,n,i,r,s){if(!r)return[];let o=Rn(t,l=>l.overrides?.bar?.series?.fill),a=o?{fill:o}:{itemStyler({datum:l}){let{up:c,down:u}=e().palette;return{fill:l[n]<l[i]?c?.fill:u?.fill}}};return[M({type:"bar",xKey:"date",yKey:s,tooltip:{enabled:!1},fillOpacity:Rn(t,l=>l.overrides?.bar?.series?.fillOpacity)??.5},a)]}var iy="range-area";function Kj(t,e,n,i,r,s,o){let a={xKey:n,openKey:s,closeKey:o,highKey:i,lowKey:r},l={xKey:n,yKey:o};switch(e){case"ohlc":return[M({type:"ohlc"},a)];case"line":return[N(M({type:"line"},l),{stroke:Rn(t,h=>h.overrides?.line?.series?.stroke)??zh,marker:Rn(t,h=>h.overrides?.line?.series?.marker)??{enabled:!1}})];case"step-line":return[N(M({type:"line"},l),{stroke:Rn(t,h=>h.overrides?.line?.series?.stroke)??zh,interpolation:Rn(t,h=>h.overrides?.line?.series?.interpolation)??{type:"step"},marker:Rn(t,h=>h.overrides?.line?.series?.marker)??{enabled:!1}})];case iy:let c=Rn(t,h=>h.overrides?.["range-area"]?.series?.fill),u=Rn(t,h=>h.overrides?.["range-area"]?.series?.stroke);return[{type:iy,xKey:n,yHighKey:i,yLowKey:o,fill:c??jh,stroke:u??jh},{type:iy,xKey:n,yHighKey:o,yLowKey:r,fill:c??Vh,stroke:u??Vh}];default:case"candlestick":return[M({type:"candlestick"},a)];case"hollow-candlestick":let d=Rn(t,h=>h.overrides?.candlestick?.series?.item);return[N(M({type:"candlestick"},a),{item:{up:{fill:d?.up?.fill??"transparent"}}})]}}var qj={"price-volume":Wj};function Zj(t){let e=[],n=yt.get(eo(t));for(let{type:i,chartTypes:r,optionsKey:s,optionsInnerKey:o,identifier:a}of Fa)if(!(n!=="unknown"&&!r.includes(n))){if(i==="root"||i==="legend"){let l=t[s];if(l==null)continue;o?l[o]&&(e.push(`${s}.${o}`),delete l[o]):(e.push(s),delete t[s])}else if(i==="axis"){if(!("axes"in t)||!t.axes?.some(l=>l.type===a))continue;e.push(`axis[type=${a}]`),t.axes=t.axes.filter(l=>l.type!==a)}else if(i==="axis-option"){if(!("axes"in t)||!t.axes?.some(l=>l[s]))continue;e.push(`axis.${s}`),t.axes.forEach(l=>{l[s]&&delete l[s]})}else if(i==="series"){if(!t.series?.some(l=>l.type===a))continue;e.push(`series[type=${a}]`),t.series=t.series.filter(l=>l.type!==a)}else if(i==="series-option"){if(!t.series?.some(l=>l[s]))continue;e.push(`series.${s}`),t.series.forEach(l=>{l[s]&&delete l[s]})}}if(e.length){let i="ag-charts-enterprise",r="https://charts.ag-grid.com/javascript/installation/";t.mode==="integrated"&&(i="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",r="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),L.warnOnce([`unable to use these enterprise features as '${i}' has not been loaded:`,"",...e,"",`See: ${r}`].join(`
`))}}function Py(t){return t?.up||t?.down||t?.neutral?"user-full":t?.fills||t?.strokes?"user-indexed":"inbuilt"}var hh="white",Xj={fills:Object.values(pn),strokes:Object.values(Gr)},Fy={get cartesian(){return{seriesTypes:yt.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:yt.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:yt.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:yt.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:yt.flowProportionTypes,commonOptions:[]}}},Qj=Object.values(Fy).reduce((t,{commonOptions:e})=>t.concat(e),[]),kn=class oT{getPalette(){return Xj}static getAxisDefaults(e){return ue(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:Qe,color:Dt},label:{fontSize:12,fontFamily:Qe,padding:5,color:Dt,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:Ih},tick:{enabled:!1,width:1,stroke:Ih},gridLine:{enabled:!0,style:[{stroke:Ma,lineDash:[]}]},crossLines:{enabled:!1,fill:vc,stroke:vc,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Qe,padding:5,color:Dt}}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:Bh},padding:{top:Fr,right:Fr,bottom:Fr,left:Fr},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:Qe,color:Dt,wrapping:"hyphenate",layoutStyle:Vs,textAlign:zs},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:Qe,color:$r,wrapping:"hyphenate",layoutStyle:Vs,textAlign:zs},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:Qe,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:Vs,textAlign:zs},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:Dt,fontSize:12,fontFamily:Qe}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Dt},inactiveStyle:{fill:$r},highlightStyle:{fill:Dt},label:{color:Dt}}},tooltip:{enabled:!0,darkTheme:yc,range:void 0,delay:0},overlays:{darkTheme:yc},listeners:{}}}constructor(e={}){let{overrides:n,palette:i}=Rt(e),r=this.createChartConfigPerChartType(this.getDefaults());n&&this.mergeOverrides(r,n);let l=this.getDefaultColors(),{fills:s,strokes:o}=l,a=Ve(l,["fills","strokes"]);this.palette=ue(i,this.getPalette(),M({},a)),this.paletteType=Py(i),this.config=Object.freeze(this.templateTheme(r))}mergeOverrides(e,n){for(let{seriesTypes:i,commonOptions:r}of Object.values(Fy)){let s=M({},n.common);for(let o of Qj)r.includes(o)||delete s[o];if(s)for(let o of i){let a=o;e[a]=ue(s,e[a])}}yt.seriesTypes.forEach(i=>{let r=i;n[r]&&(e[r]=ue(n[r],e[r]))})}createChartConfigPerChartType(e){for(let[n,{seriesTypes:i}]of Object.entries(Fy)){let r=Ey.get(n);for(let s of i)e[s]||(e[s]=Rt(r))}return e}getDefaults(){let e=(n,i)=>{let r={},s=M(M(M({axes:{}},bv.getThemeTemplates()),this.getChartDefaults()),Ey.get(n));for(let o of i){r[o]=ue(Qt.getThemeTemplate(o),r[o]??Rt(s));let{axes:a}=r[o];for(let l of qr.keys())a[l]=ue(a[l],qr.getThemeTemplate(l),oT.cartesianAxisDefault[l])}return r};return ue(e("cartesian",yt.cartesianTypes),e("polar",yt.polarTypes),e("hierarchy",yt.hierarchyTypes),e("topology",yt.topologyTypes),e("flow-proportion",yt.flowProportionTypes))}templateTheme(e){let n=Rt(e),i=this.getTemplateParameters();return _i(n,r=>{if(rt(r))for(let s=0;s<r.length;s++){let o=r[s];i.has(o)&&(r[s]=i.get(o))}else for(let[s,o]of Object.entries(r))i.has(o)&&(r[s]=i.get(o))}),Rt(n)}getDefaultColors(){return{fills:pn,strokes:Gr,up:{fill:pn.BLUE,stroke:Gr.BLUE},down:{fill:pn.ORANGE,stroke:Gr.ORANGE},neutral:{fill:pn.GRAY,stroke:Gr.GRAY}}}getTemplateParameters(){let e=new Map;e.set(yc,!1),e.set(Qe,"Verdana, sans-serif"),e.set(Dt,"rgb(70, 70, 70)"),e.set(IE,"white"),e.set($r,"rgb(140, 140, 140)"),e.set(Ma,"rgb(224,234,241)"),e.set(Ih,"rgb(195, 195, 195)"),e.set(vc,"rgb(70, 70, 70)"),e.set(ro,hh),e.set(Bh,hh),e.set(so,"rgba(0, 0, 0, 0.5)"),e.set(Dn,[pn.ORANGE,pn.YELLOW,pn.GREEN]),e.set(Fr,20),e.set(Vs,"block"),e.set(zs,"center"),e.set(Pv,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(Fv,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(_v,hh),e.set(Sn,pn.BLUE),e.set(wn,pn.BLUE),e.set(Bv,hh),e.set(iu,"top"),e.set(ar,!1);let n=this.getDefaultColors();return e.set(jh,this.palette.up?.stroke??n.up.stroke),e.set(CE,this.palette.up?.fill??n.up.fill),e.set(Vh,this.palette.down?.stroke??n.down.stroke),e.set(EE,this.palette.down?.fill??n.down.fill),e.set(zh,this.palette.neutral?.stroke??n.neutral.stroke),e.set(TE,this.palette.neutral?.fill??n.neutral.fill),e}};kn.cartesianAxisDefault={number:kn.getAxisDefaults({line:{enabled:!1}}),log:kn.getAxisDefaults({base:10,line:{enabled:!1}}),category:kn.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:ar}}),time:kn.getAxisDefaults({gridLine:{enabled:ar}}),"ordinal-time":kn.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:ar},crosshair:{enabled:!0,snap:!0,stroke:$r,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}),"angle-category":kn.getAxisDefaults({gridLine:{enabled:ar}}),"angle-number":kn.getAxisDefaults({gridLine:{enabled:ar}}),"radius-category":kn.getAxisDefaults({line:{enabled:!1},tick:{enabled:!1}}),"radius-number":kn.getAxisDefaults({line:{enabled:!1},tick:{enabled:!1}}),"grouped-category":kn.getAxisDefaults()};var Wi=kn,fh="#192232",Ii={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},rc={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Jj={fills:Object.values(Ii),strokes:Object.values(rc)},Ya=class extends Wi{getDefaultColors(){return{fills:Ii,strokes:rc,up:{fill:Ii.BLUE,stroke:rc.BLUE},down:{fill:Ii.ORANGE,stroke:rc.ORANGE},neutral:{fill:Ii.GRAY,stroke:rc.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(yc,!0),t.set(_v,fh),t.set(Dt,"white"),t.set($r,"#7D91A0"),t.set(Ma,"#545A6E"),t.set(vc,"white"),t.set(Dn,[Ii.ORANGE,Ii.YELLOW,Ii.GREEN]),t.set(Pv,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.set(Fv,["#192834","#3b5164","#496275","#577287","#668399"]),t.set(Bh,fh),t.set(ro,fh),t.set(Sn,Ii.BLUE),t.set(wn,Ii.BLUE),t.set(Bv,fh),t}getPalette(){return Jj}constructor(t){super(t)}},Ci={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},sc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},eV={fills:Object.values(Ci),strokes:Object.values(sc)},tV=class extends Ya{getDefaultColors(){return{fills:M({},Ci),strokes:M({},sc),up:{fill:Ci.GREEN,stroke:sc.GREEN},down:{fill:Ci.RED,stroke:sc.RED},neutral:{fill:Ci.BLUE,stroke:sc.BLUE}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Ci.GREEN,Ci.BLUE,Ci.RED]),t.set(Sn,Ci.BLUE),t.set(wn,Ci.BLUE),t.set(Ma,"#343A4E"),t.set(Fr,0),t.set(Vs,"overlay"),t.set(zs,"left"),t.set(iu,"bottom"),t.set(ar,!0),t}getPalette(){return eV}},Ei={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},oc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},nV={fills:Object.values(Ei),strokes:Object.values(oc)},iV=class extends Wi{getDefaultColors(){return{fills:M({},Ei),strokes:M({},oc),up:{fill:Ei.GREEN,stroke:oc.GREEN},down:{fill:Ei.RED,stroke:oc.RED},neutral:{fill:Ei.BLUE,stroke:oc.BLUE}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Ei.GREEN,Ei.BLUE,Ei.RED]),t.set(Sn,Ei.BLUE),t.set(wn,Ei.BLUE),t.set(Ma,"#F2F3F3"),t.set(Fr,0),t.set(Vs,"overlay"),t.set(zs,"left"),t.set(iu,"bottom"),t.set(ar,!0),t}getPalette(){return nV}},Ti={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},ac={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},rV={fills:Object.values(Ti),strokes:Object.values(ac)},sV=class extends Ya{getDefaultColors(){return{fills:Ti,strokes:ac,up:{fill:Ti.BLUE,stroke:ac.BLUE},down:{fill:Ti.RED,stroke:ac.RED},neutral:{fill:Ti.GRAY,stroke:ac.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Ti.ORANGE,Ti.YELLOW,Ti.GREEN]),t.set(Sn,Ti.BLUE),t.set(wn,Ti.BLUE),t}getPalette(){return rV}},Ai={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},lc={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},oV={fills:Object.values(Ai),strokes:Object.values(lc)},aV=class extends Wi{getDefaultColors(){return{fills:Ai,strokes:lc,up:{fill:Ai.BLUE,stroke:lc.BLUE},down:{fill:Ai.RED,stroke:lc.RED},neutral:{fill:Ai.GRAY,stroke:lc.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Ai.ORANGE,Ai.YELLOW,Ai.GREEN]),t.set(Sn,Ai.BLUE),t.set(wn,Ai.BLUE),t}getPalette(){return oV}},Or={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Ch={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},lV="#bbbbbb",cV="#eeeeee",uV={fills:Object.values(Or),strokes:Object.values(Ch)},dV=class extends Ya{getDefaultColors(){return{fills:Or,strokes:Ch,up:{fill:Or.BLUE,stroke:Ch.BLUE},down:{fill:Or.RED,stroke:Ch.RED},neutral:{fill:lV,stroke:cV}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Or.BLUE,Or.RED]),t.set(Sn,Or.BLUE),t.set(wn,Or.BLUE),t}getPalette(){return uV}},_r={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Eh={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},hV="#bbbbbb",fV="#888888",pV={fills:Object.values(_r),strokes:Object.values(Eh)},gV=class extends Wi{getDefaultColors(){return{fills:_r,strokes:Eh,up:{fill:_r.BLUE,stroke:Eh.BLUE},down:{fill:_r.RED,stroke:Eh.RED},neutral:{fill:hV,stroke:fV}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[_r.BLUE,_r.RED]),t.set(Sn,_r.BLUE),t.set(wn,_r.BLUE),t}getPalette(){return pV}},ti={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},sa={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},mV={fills:Object.values(ti),strokes:Object.values(sa)},yV=class extends Ya{getDefaultColors(){return{fills:N(M({},ti),{RED:ti.ORANGE}),strokes:N(M({},sa),{RED:sa.ORANGE}),up:{fill:ti.BLUE,stroke:sa.BLUE},down:{fill:ti.ORANGE,stroke:sa.ORANGE},neutral:{fill:ti.GRAY,stroke:sa.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[ti.ORANGE,ti.YELLOW,ti.GREEN]),t.set(Sn,ti.BLUE),t.set(wn,ti.BLUE),t}getPalette(){return mV}},ni={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},oa={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},vV={fills:Object.values(ni),strokes:Object.values(oa)},bV=class extends Wi{getDefaultColors(){return{fills:N(M({},ni),{RED:ni.ORANGE}),strokes:N(M({},oa),{RED:oa.ORANGE}),up:{fill:oa.BLUE,stroke:ni.BLUE},down:{fill:oa.ORANGE,stroke:ni.ORANGE},neutral:{fill:oa.GRAY,stroke:ni.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[ni.ORANGE,ni.YELLOW,ni.GREEN]),t.set(Sn,ni.BLUE),t.set(wn,ni.BLUE),t}getPalette(){return vV}},Ni={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},cc={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},xV={fills:Object.values(Ni),strokes:Object.values(cc)},DV=class extends Ya{getDefaultColors(){return{fills:Ni,strokes:cc,up:{fill:Ni.BLUE,stroke:cc.BLUE},down:{fill:Ni.ORANGE,stroke:cc.ORANGE},neutral:{fill:Ni.GRAY,stroke:cc.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[Ni.ORANGE,Ni.YELLOW,Ni.GREEN]),t.set(Sn,Ni.BLUE),t.set(wn,Ni.BLUE),t}getPalette(){return xV}},ki={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},uc={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},SV={fills:Object.values(ki),strokes:Object.values(uc)},wV=class extends Wi{getDefaultColors(){return{fills:ki,strokes:uc,up:{fill:ki.BLUE,stroke:uc.BLUE},down:{fill:ki.ORANGE,stroke:uc.ORANGE},neutral:{fill:ki.GRAY,stroke:uc.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(Dn,[ki.ORANGE,ki.YELLOW,ki.GREEN]),t.set(Sn,ki.BLUE),t.set(wn,ki.BLUE),t}getPalette(){return SV}},xc=()=>new Wi,ry=()=>new Ya,MV={undefined:xc,null:xc,"ag-default":xc,"ag-sheets":()=>new bV,"ag-polychroma":()=>new gV,"ag-vivid":()=>new wV,"ag-material":()=>new aV,"ag-financial":()=>new iV},IV={undefined:ry,null:ry,"ag-default-dark":ry,"ag-sheets-dark":()=>new yV,"ag-polychroma-dark":()=>new dV,"ag-vivid-dark":()=>new DV,"ag-material-dark":()=>new sV,"ag-financial-dark":()=>new tV},aT=M(M({},IV),MV);function CV(t){if(t===null)return;let e=!0,{baseTheme:n,palette:i,overrides:r}=t;if(n!==void 0&&typeof n!="string"&&typeof n!="object"&&(L.warn(`invalid theme.baseTheme type ${typeof n}, expected (string | object).`),e=!1),r!==void 0&&typeof r!="object"&&(L.warn(`invalid theme.overrides type ${typeof r}, expected object.`),e=!1),typeof i=="object"){if(i!==null){let{fills:s,strokes:o}=i;s!==void 0&&!Array.isArray(s)&&(L.warn("theme.overrides.fills must be undefined or an array"),e=!1),o!==void 0&&!Array.isArray(o)&&(L.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else i!==void 0&&(L.warn(`invalid theme.palette type ${typeof i}, expected object.`),e=!1);if(e)return t}function EV(t){if(t===void 0||typeof t=="string"||t instanceof Wi)return t;if(typeof t=="object")return CV(t);L.warn(`invalid theme value type ${typeof t}, expected object or string.`)}function ob(t){let e=EV(t);if(e instanceof Wi)return e;if(e==null||typeof e=="string"){let o=aT[e];return o?o():(L.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),xc())}let n=[],i;for(;typeof e=="object";)n.push(e.overrides),i??(i=e.palette),e=e.baseTheme;let r={baseTheme:e,overrides:ue(...n),palette:i},s=r.baseTheme?ob(r.baseTheme):xc();return new s.constructor(r)}var TV=new Set(["map-shape-background","map-line-background"]),lT=class{constructor(t,e){this.debug=_e.create(!0,"opts");var n;let i={shallow:["data"]};this.userOptions=Rt(t,i);let r=this.optionsType(this.userOptions),s=Rt(t,i);if(this.type=e?.type,this.type!=null){let m=qj[this.type]?.(s,()=>this.activeTheme)??s;this.debug(">>> AgCharts.createOrUpdate() - applying preset",s,m),s=m}this.activeTheme=ob(s.theme),this.type&&(s=this.activeTheme.templateTheme(s)),this.sanityCheckAndCleanup(s),this.defaultAxes=this.getDefaultAxes(s),this.specialOverrides=this.specialOverridesDefaults(M({},e));let d=this.getSeriesThemeConfig(r),{axes:o={},annotations:h={}}=d,f=h,{axesButtons:a=void 0}=f,l=Ve(f,["axesButtons"]),p=d,{series:c}=p,u=Ve(p,["axes","annotations","series"]);this.processedOptions=Rt(ue(s,a!=null?{annotations:{axesButtons:a}}:{},u,this.defaultAxes),i),this.processAxesOptions(this.processedOptions,o),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.annotationThemes=l,(pa(this.processedOptions)||eB(this.processedOptions))&&this.processedOptions.legend?.enabled==null&&((n=this.processedOptions).legend??(n.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),fa.isEnterprise||Zj(this.processedOptions)}getOptions(){return this.processedOptions??{}}diffOptions(t){return mn(t,this.processedOptions)}getSeriesThemeConfig(t){return Rt(this.activeTheme?.config[t]??{})}getDefaultAxes(t){let e=this.optionsType(t),n=Qt.cloneDefaultAxes(e);return Qt.isDefaultAxisSwapNeeded(t)&&this.swapAxesPosition(n),n}optionsType(t){return t.series?.[0]?.type??"line"}sanityCheckAndCleanup(t){this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),t.series?.some(e=>e.type==="bullet")&&t.sync!=null&&t.sync.enabled!==!1&&(L.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){if(pa(t)){let[e,n]=t.axes??[];t.axes=[N(M({},e),{position:n.position}),N(M({},n),{position:e.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map(n=>{let d=ue(e[n.type]?.[n.position],e[n.type]),{crossLines:i}=d,r=Ve(d,["crossLines"]);n.crossLines&&(n.crossLines=dy(n.crossLines,i));let s=r.gridLine?.style;n.gridLine?.style&&s?.length&&(n.gridLine.style=n.gridLine.style.map((f,p)=>f.stroke!=null||f.lineDash!=null?ue(f,s.at(p%s.length)):f));let h=ue(n,r),{top:o,right:a,bottom:l,left:c}=h;return Ve(h,["top","right","bottom","left"])}))}processSeriesOptions(t){let e=this.getDefaultSeriesType(t),n=this.getTooltipPositionDefaults(t),i=Fn(t.theme)?Py(t.theme?.palette):"inbuilt",r={colourIndex:0,userPalette:i},s=t.series?.map(o=>{o.type??(o.type=e);let f=this.getSeriesThemeConfig(o.type).series??{},{innerLabels:a}=f,l=Ve(f,["innerLabels"]),c=TV.has(o.type)?{colourIndex:0,userPalette:i}:r,u=this.getSeriesPalette(o.type,c),d=this.getTooltipRangeDefaults(t,o.type),h=ue(this.getSeriesGroupingOptions(o),o,n,d,l,u,{visible:!0});return h.innerLabels&&(h.innerLabels=dy(h.innerLabels,a)),this.activeTheme.templateTheme(h)});t.series=this.setSeriesGroupingOptions(s??[])}processMiniChartSeriesOptions(t){let e=t.navigator?.miniChart?.series;if(e==null)return;let n={colourIndex:0,userPalette:Fn(t.theme)?Py(t.theme.palette):"inbuilt"};e=e.map(i=>{i.type??(i.type="line");let a=this.getSeriesThemeConfig(i.type).series??{},{innerLabels:r}=a,s=Ve(a,["innerLabels"]),o=ue(this.getSeriesGroupingOptions(i),i,s,this.getSeriesPalette(i.type,n));return this.activeTheme.templateTheme(o)}),t.navigator.miniChart.series=this.setSeriesGroupingOptions(e)}getSeriesPalette(t,e){let n=Qt.getPaletteFactory(t),{colourIndex:i,userPalette:r}=e,{fills:s=[],strokes:o=[]}=this.activeTheme.palette;return n?.({userPalette:r,colorsCount:Math.max(s.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),palette:this.activeTheme.palette,takeColors(a){return e.colourIndex+=a,{fills:my(s,a,i),strokes:my(o,a,i)}}})}getSeriesGroupingOptions(t){let e=Qt.isGroupable(t.type),n=Qt.isStackable(t.type),i=Qt.isStackedByDefault(t.type);t.grouped&&!e&&L.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!n&&L.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:r,stacked:s}=t;return s??(s=(i||t.stackGroup!=null)&&!(e&&r)),r??(r=!0),{stacked:n&&s,grouped:e&&r&&!(n&&s)}}setSeriesGroupingOptions(t){let e=this.getSeriesGrouping(t);this.debug("setSeriesGroupingOptions() - series grouping: ",e);let n={},i=e.reduce((r,s)=>{var o;return s.groupType==="default"||(r[o=s.seriesType]??(r[o]=0),r[s.seriesType]+=s.groupType==="stack"?1:s.series.length),r},{});return e.flatMap(r=>{var s;switch(n[s=r.seriesType]??(n[s]=0),r.groupType){case"stack":let o=n[r.seriesType]++;return r.series.map((a,l)=>Object.assign(a,{seriesGrouping:{groupIndex:o,groupCount:i[r.seriesType],stackIndex:l,stackCount:r.series.length}}));case"group":return r.series.map(a=>Object.assign(a,{seriesGrouping:{groupIndex:n[r.seriesType]++,groupCount:i[r.seriesType],stackIndex:0,stackCount:0}}))}return r.series}).map(a=>{var l=a,{stacked:r,grouped:s}=l,o=Ve(l,["stacked","grouped"]);return o})}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){let e=new Map;return t.reduce((n,i)=>{let r=i.type;if(!i.stacked&&!i.grouped)n.push({groupType:"default",seriesType:r,series:[i]});else{let s=this.getSeriesGroupId(i);if(!e.has(s)){let a={groupType:i.stacked?"stack":"group",seriesType:r,series:[]};e.set(s,a),n.push(a)}e.get(s).series.push(i)}return n},[])}getDefaultSeriesType(t){if(pa(t))return"line";if(yf(t))return"pie";if(Sv(t))return"treemap";if(wv(t))return"map-shape";if(Mv(t))return"sankey";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){let e=t.tooltip?.position;if(!jn(e))return;let{type:n,xOffset:i,yOffset:r}=e,s={};return Bn(n)&&GM(yM,n)&&(s.type=n),be(i)&&(s.xOffset=i),be(r)&&(s.yOffset=r),{tooltip:{position:s}}}getTooltipRangeDefaults(t,e){return{tooltip:{range:t.tooltip?.range??Qt.getTooltipDefauls(e)?.range}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([n,i])=>{t.series?.some(r=>r[n]!=null)&&L.warnOnce(`Property [series.${n}] is deprecated, please use [series.${i}] and multiple series instead.`)})}axesTypeIntegrity(t){if("axes"in t){let e=t.axes??[];for(let{type:n}of e)if(!nB(n)){delete t.axes;let i=Array.from(qr.publicKeys()).join(", ");L.warnOnce(`unknown axis type: ${n}; expected one of: ${i}`)}}}seriesTypeIntegrity(t){t.series=t.series?.filter(({type:e})=>{if(e==null||tB(e)||_2(e))return!0;L.warnOnce(`unknown series type: ${e}; expected one of: ${BC.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){let e=t.series;if(e&&e.length>1&&e.some(n=>Qt.isSolo(n.type))){let n=this.optionsType(t);if(Qt.isSolo(n))L.warn(`series[0] of type '${n}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{let{solo:i,nonSolo:r}=lv(e,o=>Qt.isSolo(o.type)?"solo":"nonSolo"),s=cf(i.map(o=>o.type)).join(", ");L.warn(`Unable to mix these series types with the lead series type: ${s}`),t.series=r}}}enableConfiguredOptions(t){_i(this.userOptions,(e,n)=>{n&&"enabled"in n&&!n._enabledFromTheme&&e.enabled==null&&(n.enabled=!0)},{skip:["data","theme"]},t),_i(t,e=>{e._enabledFromTheme!=null&&delete e._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(t){_i(t,e=>{"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(n=>{n!=="enabled"&&delete e[n]})},{skip:["data","theme"]})}removeLeftoverSymbols(t){_i(t,e=>{if(!(!e||!Fn(e)))for(let[n,i]of Object.entries(e))UM(i)&&delete e[n]},{skip:["data"]})}specialOverridesDefaults(t){if(t.window!=null?FI(t.window):typeof window<"u"?t.window=window:typeof global<"u"&&(t.window=global.window),t.document!=null?PI(t.document):typeof document<"u"?t.document=document:typeof global<"u"&&(t.document=global.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}},Zl=_e.create(!0,"opts");function pM(t){if(pa(t))return"cartesian";if(yf(t))return"polar";if(Sv(t))return"hierarchy";if(wv(t))return"topology";if(Mv(t))return"flow-proportion";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var Kh=(()=>{let t=class{static licenseCheck(e){this.licenseChecked||(this.licenseManager=fa.licenseManager?.(e),this.licenseManager?.setLicenseKey(this.licenseKey,this.gridContext),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static setGridContext(e){this.gridContext=e}static getLicenseDetails(e){return fa.licenseManager?.({}).getLicenseDetails(e)}static getInstance(e){return gM.getInstance(e)}static create(e){this.licenseCheck(e);let n=gM.createOrUpdate(e);return this.licenseManager?.isDisplayWatermark()&&fa.injectWatermark?.(n.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),n}static createFinancialChart(e){return this.create(M({_type:"price-volume"},e))}};return t.licenseChecked=!1,t.gridContext=!1,t})(),Gs=class Pr{static getInstance(e){let n=ja.getInstance(e);return n?Xw.chartInstances.get(n):void 0}static initialiseModules(){Pr.initialised||(jj(),Vj(),Pr.initialised=!0)}static createOrUpdate(e,n){Pr.initialiseModules(),Zl(">>> AgCharts.createOrUpdate() user options",e);let i=n?.chart.chartOptions.type,f=e,{_type:r=i}=f,o=Ve(f,["_type"]);Kh.optionsMutationFn&&(o=Kh.optionsMutationFn(o,r),Zl(">>> AgCharts.createOrUpdate() MUTATED user options",e));let p=o,{overrideDevicePixelRatio:a,document:l,window:c}=p,u=Ve(p,["overrideDevicePixelRatio","document","window"]),d=new lT(u,{overrideDevicePixelRatio:a,document:l,window:c,type:r}),h=n?.chart;return(h==null||pM(u)!==pM(h?.chartOptions.processedOptions))&&(h=Pr.createChartInstance(d,h)),n==null?n=new Xw(h,Pr.callbackApi):n.chart=h,Zl.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[h.id]=h),h.queuedUserOptions.push(u),h.requestFactoryUpdate(m=>{m.applyOptions(d);let y=m.queuedUserOptions.indexOf(u)+1;m.queuedUserOptions.splice(0,y),m.applyInitialState()}),n}static updateUserDelta(e,n){n=Rt(n,{shallow:["data"]}),_i(n,o=>{if(typeof o=="object")for(let[a,l]of Object.entries(o))typeof l>"u"&&Object.assign(o,{[a]:Symbol("UNSET")})},{skip:["data"]});let{chart:i}=e,r=i.getOptions(),s=ue(n,r);Zl(">>> AgCharts.updateUserDelta() user delta",n),Zl("AgCharts.updateUserDelta() - base options",r),Pr.createOrUpdate(s,e)}static createChartInstance(e,n){let i=n?.destroy({keepTransferableResources:!0}),r=Pr.getChartByOptions(e.processedOptions);return new r(e,i)}static getChartByOptions(e){if(pa(e))return LB;if(Sv(e))return Uj;if(yf(e))return Hj;if(wv(e))return $j;if(Mv(e))return Gj;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};Gs.caretaker=new cC(lC);Gs.initialised=!1;Gs.callbackApi={caretaker:Gs.caretaker,createOrUpdate(t,e){return Gs.createOrUpdate(t,e)},updateUserDelta(t,e){return Gs.updateUserDelta(t,e)}};var gM=Gs,AV={};zi(AV,{Arc:()=>Yi,BBox:()=>V,BandScale:()=>Kr,Caption:()=>We,ChangeDetectableProperties:()=>jv,Circle:()=>Ws,ContinuousScale:()=>ke,Diamond:()=>sE,DropShadow:()=>ui,ExtendedPath2D:()=>kc,Group:()=>U,HdpiCanvas:()=>mv,Image:()=>Ka,Label:()=>vt,Line:()=>St,LinearGradientFill:()=>Tf,LinearScale:()=>Pi,Marker:()=>Kt,Node:()=>Ea,OrdinalTimeScale:()=>ii,Path:()=>nn,PointerEvents:()=>OM,RadialColumnShape:()=>Ki,Rect:()=>rn,RedrawType:()=>Ur,Scene:()=>fC,SceneChangeDetection:()=>j,ScenePathChangeDetection:()=>X,Sector:()=>Bt,SectorBox:()=>QE,Selection:()=>et,Shape:()=>Vn,Square:()=>Fh,Text:()=>Me,Tooltip:()=>Hn,Triangle:()=>ga,easing:()=>ev,getFont:()=>$s,getMarker:()=>Vi,getRadialColumnWidth:()=>NV,motion:()=>kV,sectorBox:()=>Jv,toRadians:()=>$t,toTooltipHtml:()=>ba});var Yi=class extends nn{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Us($e(this.startAngle),$e(this.endAngle))}updatePath(){let t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new V(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,e){let n=this.transformPoint(t,e),i=this.computeBBox();return this.type!==0&&i.containsPoint(n.x,n.y)&&this.path.isPointInPath(n.x,n.y)}};Yi.className="Arc";Yi.defaultStyles=Object.assign({},Vn.defaultStyles,{lineWidth:1,fillStyle:null});g([X()],Yi.prototype,"centerX",2);g([X()],Yi.prototype,"centerY",2);g([X()],Yi.prototype,"radius",2);g([X()],Yi.prototype,"startAngle",2);g([X()],Yi.prototype,"endAngle",2);g([X()],Yi.prototype,"counterClockwise",2);g([X()],Yi.prototype,"type",2);var Tf=class extends Vn{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){this._mask!=null&&this.removeChild(this._mask),t!=null&&this.appendChild(t),this._mask=t}isPointInPath(t,e){return this.mask?.isPointInPath(t,e)??!1}computeBBox(){return this.mask?.computeBBox()}render(t){let{mask:e,stops:n}=this,{ctx:i,devicePixelRatio:r}=t,s=1/r,o=e?.computeTransformedBBox();if(e==null||n==null||o==null)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),i.save(),i.clip(e.path.getPath2D()),i.setTransform(r,0,0,r,0,0);let a=Math.floor(o.x),l=Math.ceil(o.x+o.width),c=Math.floor(o.y),u=Math.ceil(o.y+o.height),d=this.direction==="to-right"||this.direction==="to-left",h=this.direction==="to-top"||this.direction==="to-left",f=new oo,[p,m]=d?[a,l]:[c,u];f.domain=n.map((x,D)=>p+(m-p)*D/(n.length-1)),f.range=h?n.slice().reverse():n,f.update();let y=u-c,v=l-a;switch(this.direction){case"to-right":case"to-left":for(let x=a;x<=l;x+=s)i.fillStyle=f.convert(x),i.fillRect(x,c,s,y);break;case"to-bottom":case"to-top":for(let x=c;x<=u;x+=s)i.fillStyle=f.convert(x),i.fillRect(a,x,v,s);break}i.restore()}};g([j({redraw:3})],Tf.prototype,"direction",2);g([j({redraw:3})],Tf.prototype,"stops",2);g([j({redraw:3})],Tf.prototype,"_mask",2);function sy(t,e,n){let i=Math.sqrt(t**2+e**2),s=Math.atan2(e,t)+n;return{x:Math.cos(s)*i,y:Math.sin(s)*i}}var Ki=(()=>{let t=class extends nn{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){let{innerRadius:e,outerRadius:n,columnWidth:i}=this,r=this.getRotation(),s=-i/2,o=i/2,a=-n,l=-e,c=1/0,u=1/0,d=-1/0,h=-1/0;for(let f=0;f<4;f+=1){let{x:p,y:m}=sy(f%2===0?s:o,f<2?a:l,r);c=Math.min(p,c),u=Math.min(m,u),d=Math.max(p,d),h=Math.max(m,h)}return new V(c,u,d-c,h-u)}getRotation(){let{startAngle:e,endAngle:n}=this,i=hf(e,n);return $e(e+i/2+Math.PI/2)}updatePath(){let{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:e,innerRadius:n,outerRadius:i,path:r}=this,s=-e/2,o=e/2,a=-i,l=-n,c=this.getRotation(),u=[[s,l],[s,a],[o,a],[o,l]].map(([d,h])=>sy(d,h,c));r.clear(!0),r.moveTo(u[0].x,u[0].y),r.lineTo(u[1].x,u[1].y),r.lineTo(u[2].x,u[2].y),r.lineTo(u[3].x,u[3].y),r.closePath()}updateBeveledPath(){let{columnWidth:e,path:n,outerRadius:i,innerRadius:r,axisInnerRadius:s,axisOuterRadius:o,isRadiusAxisReversed:a}=this,l=Us(r,s),c=Math.asin(e/2/r),u=this.getRotation(),d=(E,A)=>sy(E,A,u),h=(E,A)=>Math.sqrt(E**2+A**2),f=(E,A)=>A>E?0:Math.sqrt(E**2-A**2),p=(E,A,R)=>R?E<A:E>A,m=l&&!isNaN(c)&&c<Math.PI/6,y=-e/2,v=e/2,x=-i,D=-r*(m?Math.cos(c):1),S=p(o,h(r,e/2),!a);if(S){let E=f(o,r);y=-E,v=E}n.clear(!0);let w=d(y,D);n.moveTo(w.x,w.y);let I=Us(r,i),C=p(o,h(i,e/2),!a);if(I&&m)n.arc(0,0,r,$e(-c-Math.PI/2)+u,$e(c-Math.PI/2)+u,!1);else if(C){let E=-f(o,e/2),A=f(o,i);if(!S){let R=d(y,E);n.lineTo(R.x,R.y)}if(n.arc(0,0,o,Math.atan2(E,y)+u,Math.atan2(x,-A)+u,!1),!Us(A,0)){let R=d(A,x);n.lineTo(R.x,R.y)}n.arc(0,0,o,Math.atan2(x,A)+u,Math.atan2(E,v)+u,!1)}else{let E=d(y,x),A=d(v,x);n.lineTo(E.x,E.y),n.lineTo(A.x,A.y)}let T=d(v,D);if(n.lineTo(T.x,T.y),m)n.arc(0,0,r,$e(c-Math.PI/2)+u,$e(-c-Math.PI/2)+u,!0);else{let E=d(y,D);n.lineTo(E.x,E.y)}n.closePath()}};return t.className="RadialColumnShape",t})();g([X()],Ki.prototype,"isBeveled",2);g([X()],Ki.prototype,"columnWidth",2);g([X()],Ki.prototype,"startAngle",2);g([X()],Ki.prototype,"endAngle",2);g([X()],Ki.prototype,"outerRadius",2);g([X()],Ki.prototype,"innerRadius",2);g([X()],Ki.prototype,"axisInnerRadius",2);g([X()],Ki.prototype,"axisOuterRadius",2);g([X()],Ki.prototype,"isRadiusAxisReversed",2);function NV(t,e,n,i,r){let s=hf(t,e),o=s*(1-i)/2;if(t+=o,e-=o,s<.001)return 2*n*r;if(s>=2*Math.PI){let f=t+s/2;t=f-Math.PI,e=f+Math.PI}let a=n*Math.cos(t),l=n*Math.sin(t),c=n*Math.cos(e),u=n*Math.sin(e),d=Math.floor(Math.sqrt((a-c)**2+(l-u)**2)),h=2*n*r;return Math.max(1,Math.min(h,d))}var Ka=class extends Ea{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){let{ctx:e,forceRender:n,stats:i}=t;if(this.dirty===0&&!n){i&&i.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(e);let r=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(r,0,0,r.width,r.height,this.x,this.y,this.width,this.height),super.render(t)}};g([j({redraw:3})],Ka.prototype,"x",2);g([j({redraw:3})],Ka.prototype,"y",2);g([j({redraw:3})],Ka.prototype,"width",2);g([j({redraw:3})],Ka.prototype,"height",2);g([j({redraw:3})],Ka.prototype,"opacity",2);var kV=M(M({},RM),LI),RV={};zi(RV,{CARTESIAN_AXIS_TYPE:()=>SE,ChartTheme:()=>Wi,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>wn,DEFAULT_ANNOTATION_HANDLE_FILL:()=>Bv,DEFAULT_ANNOTATION_STROKE:()=>Sn,DEFAULT_AXIS_GRID_COLOUR:()=>Ma,DEFAULT_AXIS_LINE_COLOUR:()=>Ih,DEFAULT_BACKGROUND_COLOUR:()=>Bh,DEFAULT_CAPTION_ALIGNMENT:()=>zs,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Vs,DEFAULT_COLOURS:()=>ZB,DEFAULT_CROSS_LINES_COLOUR:()=>vc,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>Dn,DEFAULT_FONT_FAMILY:()=>Qe,DEFAULT_GRIDLINE_ENABLED:()=>ar,DEFAULT_HIERARCHY_FILLS:()=>Pv,DEFAULT_HIERARCHY_STROKES:()=>Fv,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>ro,DEFAULT_INVERTED_LABEL_COLOUR:()=>IE,DEFAULT_LABEL_COLOUR:()=>Dt,DEFAULT_MUTED_LABEL_COLOUR:()=>$r,DEFAULT_PADDING:()=>Fr,DEFAULT_POLAR_SERIES_STROKE:()=>_v,DEFAULT_SHADOW_COLOUR:()=>so,DEFAULT_TOOLBAR_POSITION:()=>iu,FONT_SIZE:()=>bE,FONT_WEIGHT:()=>xE,IS_DARK_THEME:()=>yc,PALETTE_DOWN_FILL:()=>EE,PALETTE_DOWN_STROKE:()=>Vh,PALETTE_NEUTRAL_FILL:()=>TE,PALETTE_NEUTRAL_STROKE:()=>zh,PALETTE_UP_FILL:()=>CE,PALETTE_UP_STROKE:()=>jh,POLAR_AXIS_SHAPE:()=>ME,POLAR_AXIS_TYPE:()=>wE,POSITION:()=>DE,getChartTheme:()=>ob,markerPaletteFactory:()=>wf,singleSeriesPaletteFactory:()=>Ua,themes:()=>LV});var LV=Zy(aT,t=>t?.()),OV={};zi(OV,{BandScale:()=>Kr,ColorScale:()=>oo,ContinuousScale:()=>ke,Invalidating:()=>Mt,LinearScale:()=>Pi,OrdinalTimeScale:()=>ii,TimeScale:()=>df});var _V={};zi(_V,{Color:()=>Li,Debug:()=>_e,Logger:()=>L,Padding:()=>ss,TimeInterval:()=>qs,Vec2:()=>cT,angleBetween:()=>hf,angleDiff:()=>II,areArrayItemsStrictlyEqual:()=>jI,areArrayNumbersEqual:()=>VI,bifurcate:()=>fI,checkDatum:()=>yy,clamp:()=>ae,clampArray:()=>Ah,countFractionDigits:()=>Jh,createId:()=>Gi,day:()=>Gy,deepClone:()=>Rt,displacePointFromVector:()=>lF,extent:()=>Hi,findMinMax:()=>Pn,findRangeExtent:()=>Dc,formatNormalizedPercentage:()=>Ky,formatPercentage:()=>qy,friday:()=>IM,hour:()=>zy,interpolateColor:()=>FM,interpolateNumber:()=>PM,isBetweenAngles:()=>jr,isContinuous:()=>pf,isDate:()=>Gc,isDenseInterval:()=>Ec,isEqual:()=>Us,isNegative:()=>Ia,isNumber:()=>be,isNumberEqual:()=>Us,isNumberObject:()=>AI,isString:()=>Bn,isStringObject:()=>TI,jsonApply:()=>cr,jsonDiff:()=>mn,jsonWalk:()=>_i,millisecond:()=>By,minute:()=>Vy,mod:()=>Qh,monday:()=>DM,month:()=>Hy,normalisedExtent:()=>hI,normalisedExtentWithMetadata:()=>$c,normalizeAngle180:()=>Tc,normalizeAngle360:()=>$e,normalizeAngle360Inclusive:()=>oF,range:()=>Cc,resetIds:()=>LM,round:()=>Yy,sanitizeHtml:()=>He,saturday:()=>CM,second:()=>jy,setAttribute:()=>Zs,shallowClone:()=>kh,sunday:()=>Uy,thursday:()=>MM,tickFormat:()=>xI,tickStep:()=>va,ticks:()=>uf,toDegrees:()=>aF,toFixed:()=>Xh,toRadians:()=>$t,transformIntegratedCategoryValue:()=>ha,tuesday:()=>SM,utcDay:()=>AM,utcHour:()=>TM,utcMinute:()=>EM,utcMonth:()=>NM,utcYear:()=>kM,uuid:()=>rP,wednesday:()=>wM,year:()=>$y,zipObject:()=>YV});var cT={add:PV,angle:zV,apply:WV,equal:UV,distance:jV,distanceSquared:VV,from:HV,fromOffset:$V,length:FV,lengthSquared:BV,required:uT,rotate:GV,sub:ab};function PV(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ab(t,e){return{x:t.x-e.x,y:t.y-e.y}}function FV(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function BV(t){return t.x*t.x+t.y*t.y}function jV(t,e){let n=ab(t,e);return Math.sqrt(n.x*n.x+n.y*n.y)}function VV(t,e){let n=ab(t,e);return n.x*n.x+n.y*n.y}function zV(t,e){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)}function GV(t,e,n=uT()){let i=cT.length(t);return{x:n.x+i*Math.cos(e),y:n.y+i*Math.sin(e)}}function UV(t,e){return t.x===e.x&&t.y===e.y}function HV(t,e){return{x:t,y:e}}function $V(t){return{x:t.offsetX,y:t.offsetY}}function WV(t,e){return t.x=e.x,t.y=e.y,t}function uT(t){return{x:t?.x??0,y:t?.y??0}}function YV(t,e){let n={};if(Array.isArray(e))for(let i=0;i<t.length;i++)n[`${t[i]}`]=e[i];else for(let i=0;i<t.length;i++)n[`${t[i]}`]=e;return n}var KV={};zi(KV,{AND:()=>zn,ARRAY:()=>Aa,ARRAY_OF:()=>pr,AbstractBarSeries:()=>UE,AbstractBarSeriesProperties:()=>Zv,ActionOnSet:()=>Wt,Animation:()=>KM,AnimationManager:()=>yC,AreaSeriesTag:()=>jE,Axis:()=>fv,AxisInterval:()=>La,AxisLabel:()=>st,AxisTick:()=>Oa,BOOLEAN:()=>H,BOOLEAN_ARRAY:()=>FP,Background:()=>nu,BackgroundModule:()=>fE,BaseModuleInstance:()=>qc,BaseProperties:()=>le,COLOR_STRING:()=>we,COLOR_STRING_ARRAY:()=>Gn,CartesianAxis:()=>_a,CartesianSeries:()=>as,CartesianSeriesNodeEvent:()=>kv,CartesianSeriesProperties:()=>os,CategoryAxis:()=>Pa,ChartAxisDirection:()=>av,ChartEventManager:()=>bC,ChartOptions:()=>lT,ChartUpdateType:()=>gc,ContextMenuRegistry:()=>xC,Cursor:()=>SC,CursorManager:()=>wC,DATE:()=>iv,DATE_ARRAY:()=>BP,DATE_OR_DATETIME_MS:()=>rv,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>no,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>io,DEFAULT_TOOLTIP_CLASS:()=>Ri,DEFAULT_TOOLTIP_DARK_CLASS:()=>GI,DEGREE:()=>Qr,DIRECTION:()=>sI,DOMManager:()=>pC,DataController:()=>PC,DataModel:()=>_C,DataModelSeries:()=>Nv,DataService:()=>mf,Default:()=>is,Deprecated:()=>qV,DeprecatedAndRenamedTo:()=>ZV,EMPTY_TOOLTIP_CONTENT:()=>mr,FONT_STYLE:()=>Jr,FONT_WEIGHT:()=>es,FUNCTION:()=>tn,GREATER_THAN:()=>ka,GestureDetector:()=>MC,GroupedCategoryAxis:()=>Da,HierarchyNode:()=>dc,HierarchySeries:()=>JV,HierarchySeriesProperties:()=>ds,HighlightManager:()=>IC,HighlightStyle:()=>eu,INTERACTION_RANGE:()=>lf,INTERPOLATION_STEP_POSITION:()=>LE,INTERPOLATION_TYPE:()=>RE,InteractionManager:()=>HI,InteractionState:()=>xa,InterpolationProperties:()=>Ha,KeyNavManager:()=>CC,LABEL_PLACEMENT:()=>ov,LARGEST_KEY_INTERVAL:()=>KC,LESS_THAN:()=>Na,LINE_CAP:()=>iI,LINE_DASH:()=>gr,LINE_JOIN:()=>jP,Layers:()=>EI,LayoutService:()=>AC,LonLatBBox:()=>ez,MARKER_SHAPE:()=>NE,MATCHING_CROSSLINE_TYPE:()=>cv,MAX_SPACING:()=>lI,MIN_SPACING:()=>aI,MercatorScale:()=>Oy,ModuleRegistry:()=>sC,Motion:()=>ev,NAN:()=>sf,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Ht,NUMBER:()=>Pe,NUMBER_ARRAY:()=>of,NUMBER_OR_NAN:()=>Ta,Navigator:()=>us,NavigatorModule:()=>vE,OBJECT:()=>z,OBJECT_ARRAY:()=>nI,OR:()=>Js,OVERFLOW_STRATEGY:()=>zP,ObserveChanges:()=>Yt,PHASE_METADATA:()=>Ic,PHASE_ORDER:()=>ia,PLACEMENT:()=>oI,PLAIN_OBJECT:()=>JM,POINTER_INTERACTION_TYPES:()=>hv,POSITION:()=>sv,POSITION_TOP_COORDINATES:()=>_h,POSITIVE_NUMBER:()=>O,PolarAxis:()=>ma,PolarSeries:()=>If,PropertiesArray:()=>tf,ProxyOnWrite:()=>NF,ProxyProperty:()=>bt,ProxyPropertyOnWrite:()=>Ft,QUICK_TRANSITION:()=>Rh,RATIO:()=>Ie,REGIONS:()=>$I,RepeatType:()=>YM,SKIP_JS_BUILTINS:()=>Qy,SMALLEST_KEY_INTERVAL:()=>YC,SORT_DOMAIN_GROUPS:()=>qC,STRING:()=>P,STRING_ARRAY:()=>tI,Series:()=>Jc,SeriesGroupingChangedEvent:()=>Tv,SeriesItemHighlightStyle:()=>yr,SeriesMarker:()=>sn,SeriesNodeEvent:()=>Qc,SeriesNodePickMode:()=>QC,SeriesProperties:()=>ci,SeriesTooltip:()=>qt,StateMachine:()=>Yc,TEXT_ALIGN:()=>rI,TEXT_WRAP:()=>af,TICK_INTERVAL:()=>WI,ToolbarManager:()=>TC,Tooltip:()=>Hn,TooltipManager:()=>Ph,TooltipPosition:()=>Ra,UNION:()=>je,UpdateService:()=>NC,VERTICAL_ALIGN:()=>VP,Validate:()=>b,ZoomManager:()=>jC,__FORCE_MODULE_DETECTION:()=>tz,accumulateContinuity:()=>XC,accumulateGroup:()=>ZC,accumulatedValue:()=>$C,accumulativeValueProperty:()=>Ev,addHitTestersToQuadtree:()=>Kv,adjustLabelPlacement:()=>qE,allInStringUnion:()=>mh,animationValidation:()=>Ba,area:()=>Ny,arraysEqual:()=>Hs,assignJsonApplyConstructedArray:()=>uI,backfillPathPointData:()=>Uv,basicContinuousCheckDatumValidation:()=>Iv,bifurcate:()=>fI,buildFormatter:()=>Uc,buildResetPathFn:()=>$v,calculateDefaultTimeTickFormat:()=>XM,calculateLabelChartPadding:()=>kI,calculateLabelTranslation:()=>vy,calculatePlacement:()=>zI,checkCrisp:()=>YE,childrenIter:()=>GE,circularSliceArray:()=>my,clamp:()=>ae,clampArray:()=>Ah,collapsedStartingBarPosition:()=>Bc,computeBarFocusBounds:()=>Xv,computeMarkerFocusBounds:()=>su,computeSectorFocusBounds:()=>tT,computeSectorSeriesFocusBounds:()=>wj,convertValuesToScaleByDefs:()=>XV,countFractionDigits:()=>Jh,createDatumId:()=>Zr,createDeprecationWarning:()=>lb,createElement:()=>Lt,dateToNumber:()=>Jt,deconstructSelectionsOrNodes:()=>nf,deepClone:()=>Rt,deepMerge:()=>DP,defaultTimeTickFormat:()=>nv,determinePathStatus:()=>Wv,diff:()=>to,downloadUrl:()=>_I,enterpriseModule:()=>fa,extent:()=>Hi,extractDecoratedProperties:()=>yP,findMinMax:()=>Pn,findQuadtreeMatch:()=>qv,findRangeExtent:()=>Dc,fixNumericExtent:()=>en,formatNormalizedPercentage:()=>Ky,formatPercentage:()=>qy,fromToMotion:()=>Je,getDocument:()=>dr,getMissCount:()=>vv,getPath:()=>Xy,getPathComponents:()=>OC,getRectConfig:()=>WE,getWindow:()=>ji,groupAccumulativeContinuityProperty:()=>tE,groupAccumulativeValueProperty:()=>ri,groupAverage:()=>HC,groupBy:()=>lv,groupCount:()=>Ay,groupSum:()=>GC,initMenuKeyNav:()=>jB,initToolbarKeyNav:()=>Df,isArray:()=>rt,isBoolean:()=>jM,isDate:()=>zc,isDecoratedObject:()=>ef,isDefined:()=>wc,isEnumKey:()=>xP,isEnumValue:()=>GM,isEqual:()=>Us,isFiniteNumber:()=>be,isFunction:()=>Qs,isHtmlElement:()=>zM,isNegative:()=>Ia,isNumber:()=>gn,isObject:()=>Fn,isObjectLike:()=>bP,isPlainObject:()=>jn,isProperties:()=>Fi,isRegExp:()=>VM,isString:()=>Bn,isSymbol:()=>UM,isValidDate:()=>Gc,jsonApply:()=>cr,jsonDiff:()=>mn,jsonWalk:()=>_i,keyProperty:()=>_t,labelDirectionHandling:()=>RI,listDecoratedProperties:()=>da,makeAccessibleClickListener:()=>yE,mapIterable:()=>WP,mapValues:()=>Zy,markerFadeInAnimation:()=>Oc,markerPaletteFactory:()=>wf,markerScaleInAnimation:()=>Vv,markerSwipeScaleInAnimation:()=>zv,mergeArrayDefaults:()=>dy,mergeDefaults:()=>ue,midpointStartingBarPosition:()=>lj,minMax:()=>Ry,mod:()=>Qh,moduleRegistry:()=>Hr,nearestSquared:()=>Zh,nearestSquaredInContainer:()=>sP,normaliseGroupTo:()=>Rc,normalisePropertyTo:()=>Lc,normalisedExtent:()=>hI,normalisedExtentWithMetadata:()=>$c,pairCategoryData:()=>Fc,pairContinuousData:()=>Pc,partialAssign:()=>js,pathFadeInAnimation:()=>bc,pathFadeOutAnimation:()=>tj,pathRangePoints:()=>$h,pathRangePointsReverse:()=>_E,pathRanges:()=>Hh,pathSwipeInAnimation:()=>Hv,pickByMatchingAngle:()=>rb,plotPath:()=>Wr,predicateWithMessage:()=>Oe,prepareAreaPathAnimation:()=>zE,prepareAreaPathAnimationFns:()=>VE,prepareAxisAnimationContext:()=>Sy,prepareAxisAnimationFunctions:()=>YI,prepareBarAnimationFunctions:()=>jc,prepareLinePathAnimation:()=>BE,prepareLinePathAnimationFns:()=>FE,prepareLinePathPropertyAnimation:()=>Yv,prepareMarkerAnimation:()=>Gv,preparePieSeriesAnimationFunctions:()=>Ks,range:()=>UC,rangedValueProperty:()=>Cv,renderPartialPath:()=>OE,resetAxisGroupFn:()=>KI,resetAxisLabelSelectionFn:()=>ZI,resetAxisLineSelectionFn:()=>XI,resetAxisSelectionFn:()=>qI,resetBarSelectionsFn:()=>Vc,resetIds:()=>LM,resetLabelFn:()=>vr,resetMarkerFn:()=>ru,resetMarkerPositionFn:()=>_c,resetMotion:()=>dt,resetPieSelectionsFn:()=>ib,round:()=>Yy,seriesLabelFadeInAnimation:()=>Se,seriesLabelFadeOutAnimation:()=>Vr,setDocument:()=>PI,setElementBBox:()=>or,setPath:()=>Jy,setWindow:()=>FI,shallowClone:()=>kh,singleSeriesPaletteFactory:()=>Ua,splitPairData:()=>Gh,staticFromToMotion:()=>Ui,stringify:()=>hc,sum:()=>sB,sumValues:()=>vf,times:()=>dI,toArray:()=>gy,toFixed:()=>Xh,toTooltipHtml:()=>ba,trailingAccumulatedValue:()=>WC,trailingAccumulatedValueProperty:()=>hB,unique:()=>cf,updateClipPath:()=>Uh,updateLabelNode:()=>KE,updateRect:()=>$E,validateCrossLineValues:()=>NI,valueProperty:()=>Re,without:()=>hy});function lb(){return(t,e)=>{let n=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");L.warnOnce(n)}}function qV(t,e){let n=lb(),i=e?.default;return fr((r,s,o)=>(o!==i&&n(s.toString(),t),o))}function ZV(t,e){let n=lb();return fr((i,r,s)=>(s!==i[t]&&(n(r.toString(),`Use [${t}] instead.`),Jy(i,t,e?e(s):s)),Nh),(i,r)=>(n(r.toString(),`Use [${t}] instead.`),Xy(i,t)))}function XV({defs:t,values:e,xAxis:n,yAxis:i}){if(!(n&&i))throw new Error("Axes must be defined");let r={};for(let[s,{def:o}]of t)if(Object.hasOwn(e,s)){let{scale:a}=o.type==="key"?n:i;r[s]=Math.round(a.convert(e[s]))}return r}var QV=(()=>{let t=class Th{constructor(n,i,r,s,o,a,l,c,u,d,h){this.series=n,this.index=i,this.datum=r,this.size=s,this.colorValue=o,this.fill=a,this.stroke=l,this.sumSize=c,this.depth=u,this.parent=d,this.children=h,this.midPoint={x:0,y:0}}contains(n){let i=n;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(n,i=Th.Walk.PreOrder){i===Th.Walk.PreOrder&&n(this),this.children.forEach(r=>{r.walk(n,i)}),i===Th.Walk.PostOrder&&n(this)}*[Symbol.iterator](){yield this;for(let n of this.children)yield*au(n)}};return t.Walk={PreOrder:0,PostOrder:1},t})(),dc=QV,JV=class extends Jc{constructor(t){super({moduleCtx:t,pickModes:[3,0],contentGroupVirtual:!1}),this.rootNode=new dc(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.focusPath=[],this.animationState=new Yc("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}processData(){return k(this,null,function*(){let{childrenKey:t,sizeKey:e,colorKey:n,fills:i,strokes:r,colorRange:s}=this.properties,o=0,a=()=>(o+=1,o),l=0,c=1/0,u=-1/0,d=new Array((this.data?.length??0)+1).fill(void 0),h=(v,x)=>{let D=a(),S=x.depth!=null?x.depth+1:0,w=t!=null?v[t]:void 0,I=w==null||w.length===0,C=e!=null?v[e]:void 0;Number.isFinite(C)?C=Math.max(C,0):C=I?1:0;let T=C;l=Math.max(l,S);let E=n!=null?v[n]:void 0;return typeof E=="number"&&(d[D]=E,c=Math.min(c,E),u=Math.max(u,E)),f(new dc(this,D,v,C,E,void 0,void 0,T,S,x,[]),w)},f=(v,x)=>(x?.forEach(D=>{let S=h(D,v);v.children.push(S),v.sumSize+=S.sumSize}),v),p=f(new dc(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),m=[c,u],y;s!=null&&Number.isFinite(c)&&Number.isFinite(u)&&(y=new oo,y.domain=m,y.range=s,y.update()),p.children.forEach((v,x)=>{v.walk(D=>{let S,w=d[D.index];w!=null&&(S=y?.convert(w)),S??(S=i?.[x%i.length]),D.fill=S,D.stroke=y==null?r?.[x%r.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=p,this.maxDepth=l,this.colorDomain=m,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]})}update(e){return k(this,arguments,function*({seriesRect:t}){yield this.updateSelections(),yield this.updateNodes();let n=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",n),this.animationState.transition("update",n)})}resetAllAnimation(t){let e=this.animationResetFns?.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),e!=null&&dt(t.datumSelections,e)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){let e=this.animationResetFns?.datum;e!=null&&dt([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){let{colorKey:e,colorName:n,colorRange:i,visible:r}=this.properties;return t==="gradient"&&e!=null&&i!=null?[{legendType:"gradient",enabled:r,seriesId:this.id,colorName:n,colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}pickFocus(t){if(this.rootNode.children.length===0)return;this.focusPath.length===0&&L.error("this.focusPath should not be empty");let{datumIndexDelta:e,otherIndexDelta:n}=t,{focusPath:i}=this,r=i.length-2;if(n!==0||i.length===1){let s=Math.max(0,r+n);if(i[s+1]!==void 0)return i.length=s+2,this.computeFocusOutputs(i[s+1]);{let o=i[i.length-1];for(;o.nodeDatum.children.length>0&&(o.nodeDatum.depth??-1)<s;){let a={nodeDatum:o.nodeDatum.children[0],childIndex:0};i.push(a),o=a}return this.computeFocusOutputs(o)}}else if(e!==0){let s=i[r+1].childIndex+e,o=i[r].nodeDatum,a=o?.children?.length;if(a!==void 0){let l=ae(0,s,a-1),c={nodeDatum:o.children[l],childIndex:l};return i[r+1]=c,i.length=r+2,this.computeFocusOutputs(c)}}else return this.computeFocusOutputs(i[i.length-1])}getDatumAriaText(t,e){if(!(t instanceof dc)){L.error(`datum is not HierarchyNode: ${t}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(t.depth??-1)+1,count:t.children.length,description:e})}computeFocusOutputs({nodeDatum:t,childIndex:e}){let n=this.computeFocusBounds(t);if(n)return{datum:t,datumIndex:e,otherIndex:t.depth,bounds:n,showFocusBox:!0}}},ds=class extends ci{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(pn),this.strokes=Object.values(Gr)}};g([b(P)],ds.prototype,"childrenKey",2);g([b(P,{optional:!0})],ds.prototype,"sizeKey",2);g([b(P,{optional:!0})],ds.prototype,"colorKey",2);g([b(P,{optional:!0})],ds.prototype,"colorName",2);g([b(Gn)],ds.prototype,"fills",2);g([b(Gn)],ds.prototype,"strokes",2);g([b(Gn,{optional:!0})],ds.prototype,"colorRange",2);var ez=class{constructor(t,e,n,i){this.lon0=t,this.lat0=e,this.lon1=n,this.lat1=i}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},tz=0;var cb=class{chart;_nativeElement;_initialised=!1;ngZone;ngAfterViewInit(){let e=this.patchChartOptions(this.options);this.chart=this.runOutsideAngular(()=>this.createChart(e)),this._initialised=!0,this.chart.chart.waitForUpdate().then(()=>{this.onChartReady.emit(this.chart)})}ngOnChanges(e){this.runOutsideAngular(()=>{!this._initialised||!this.chart||this.chart.update(this.patchChartOptions(this.options))})}ngOnDestroy(){this._initialised&&this.chart&&(this.chart.destroy(),this.chart=void 0,this._initialised=!1)}patchChartOptions(e){let n=i=>{let r=i??{};for(let[s,o]of Object.entries(r))typeof o=="function"&&(r[s]=(...a)=>{this.runInsideAngular(()=>o(...a))})};return n(e?.legend?.listeners),n(e?.listeners),e.series?.forEach(i=>{n(i.listeners)}),e.container?e:N(M({},e),{container:this._nativeElement})}runOutsideAngular(e){return this.ngZone?this.ngZone.runOutsideAngular(e):e()}runInsideAngular(e){return this.ngZone?this.ngZone.run(e):e()}},dT=(()=>{class t extends cb{ngZone;options={};onChartReady=new Et;constructor(n,i){super(),this.ngZone=i,this._nativeElement=n.nativeElement}createChart(n){return Kh.create(n)}static \u0275fac=function(i){return new(i||t)(cn(Po),cn(Ke))};static \u0275cmp=Nr({type:t,selectors:[["ag-charts"]],inputs:{options:"options"},outputs:{onChartReady:"onChartReady"},standalone:!0,features:[Ng,Rr],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return t})();function hT(t){let e=JSON.stringify(t);localStorage.setItem("cake-nance-data",e)}function fT(t,e){console.log("SALARY",t);let n=0;function i(s,o){return n=s.reduce((a,l)=>l.asset!=="Salario"?a+l.amount:a,0),s.forEach(a=>{a.asset==="Salario"&&(a.amount=o-n)}),s}let r=e.findIndex(s=>s.asset=="Salario");return r>-1?(console.log(1),e[r].amount=t):(console.log(2),e.push({asset:"Salario",amount:t})),{chartData:i(e,t),totalSpent:n}}var pT=(()=>{class t{ngZone;viewportHeight=new gt(window.innerHeight);viewportHeight$=this.viewportHeight.asObservable();constructor(n){this.ngZone=n,this.ngZone.runOutsideAngular(()=>{tl(window,"resize").subscribe(()=>{this.ngZone.run(()=>{this.updateViewportHeight()})})})}updateViewportHeight(){this.viewportHeight.next(window.innerHeight)}static \u0275fac=function(i){return new(i||t)(ce(Ke))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iz(t,e){if(t&1){let n=Rg();Ue(0,"div",5)(1,"label",16),un(2,"Size"),qe(),Ue(3,"input",17),Si("input",function(r){bd(n);let s=Vo();return xd(s.updatePieSize(r))}),Go("valueChange",function(r){bd(n);let s=Vo();return xl(s.pieSize,r)||(s.pieSize=r),xd(r)}),qe()()}if(t&2){let n=Vo();ln(3),zo("value",n.pieSize)}}function rz(t,e){if(t&1){let n=Rg();Ue(0,"div")(1,"button",19),Si("click",function(){bd(n);let r=Vo().index,s=Vo();return xd(s.removeGasto(r))}),un(2,"delete"),qe()()}}function sz(t,e){if(t&1&&(Ue(0,"tr")(1,"td"),un(2),qe(),Ue(3,"td"),un(4),qe(),Ue(5,"td"),bl(6,rz,3,0,"div",18),qe()()),t&2){let n=e.$implicit,i=e.index;ln(2),Ad(i==0?"":n.asset),ln(2),Ad(i==0?"":n.amount+"\u20AC"),ln(2),jo("ngIf",i>0)}}var gT=(()=>{class t{viewportService;options;totalSpent;salary=kr(this.loadData().find(n=>n.asset=="Salario")?.amount??0);pieSize=kr(700);top=kr(350);fixedPieSize=kr(!1);viewportHeightOffset=200;gastoAsset=kr("");gastoAmount=kr(0);gastos=kr([]);viewportHeight;subscription;constructor(n){this.viewportService=n,Fg(()=>{this.setPieData()})}updateSalary(n){let i=n.target;this.salary.update(()=>Number(i.value)),this.setPieData()}updatePieSize(n){let i=n.target;this.top.update(()=>Number(i.value)*.5),this.pieSize.update(()=>Number(i.value))}updateFixedPieSize(n){let i=n.target;this.fixedPieSize.update(()=>i.checked),i.checked||this.pieSize.update(()=>this.viewportHeight-this.viewportHeightOffset)}setPieData(){hT([{asset:"Salario",amount:this.salary()},...this.gastos().filter(i=>i.asset!="Salario")]);let n=fT(this.salary(),this.gastos());this.totalSpent=n.totalSpent,this.options={width:this.pieSize(),height:this.pieSize(),data:n.chartData,title:{text:"Pinina's finance"},series:[{type:"pie",angleKey:"amount",calloutLabelKey:"asset",sectorLabelKey:"amount",sectorLabel:{color:"white",formatter:({value:i})=>`${i.toFixed(0)}\u20AC`}}]}}addGasto(){!this.gastoAmount()||!this.gastoAsset()||(this.gastos.update(n=>(n.push({amount:this.gastoAmount(),asset:this.gastoAsset()}),n)),this.setPieData())}removeGasto(n){this.gastos.update(i=>(i.splice(n,1),i)),this.setPieData()}updateAssetToAdd(n){let i=n.target;this.gastoAsset.update(()=>i.value)}updateAmountToAdd(n){let i=n.target;this.gastoAmount.update(()=>Number(i.value))}loadData(){return JSON.parse(localStorage.getItem("cake-nance-data")??"[]")}clearGastos(){let n=[{asset:"Salario",amount:this.salary()}];localStorage.setItem("cake-nance-data",JSON.stringify(n)),this.gastos.update(()=>this.loadData()),this.setPieData()}ngOnInit(){this.subscription=this.viewportService.viewportHeight$.subscribe(n=>{this.viewportHeight=n,this.pieSize.update(()=>n-this.viewportHeightOffset)}),this.setPieData(),this.gastos.update(()=>this.loadData())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)(cn(pT))};static \u0275cmp=Nr({type:t,selectors:[["app-cake-graph"]],standalone:!0,features:[Rr],decls:33,vars:9,consts:[[1,"container-fluid",2,"overflow","hidden"],[2,"flex-grow","2"],["style","display: inline;",4,"ngIf"],[1,"cont"],[3,"options"],[2,"display","inline"],["for","salary",2,"color","green","font-weight","bold","font-size","24px"],["id","salary","type","number","placeholder","Salary",1,"form-control",3,"input","valueChange","value"],[2,"color","red","font-weight","bold"],[2,"margin-bottom","15px"],["type","text","placeholder","Nombre de gasto",1,"form-control",3,"input","valueChange","value"],["type","number","placeholder","importe",1,"form-control",3,"input","valueChange","value"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["for","pieSize"],["id","pieSize","type","number","placeholder","Pie size",3,"input","valueChange","value"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(i,r){i&1&&(Ue(0,"div",0)(1,"div",1),bl(2,iz,4,1,"div",2),Ue(3,"div",3),Di(4,"ag-charts",4),qe()(),Ue(5,"div")(6,"div",5)(7,"label",6),un(8,"Salario: "),qe(),Ue(9,"input",7),Si("input",function(o){return r.updateSalary(o)}),Go("valueChange",function(o){return xl(r.salary,o)||(r.salary=o),o}),qe()(),Di(10,"hr"),Ue(11,"h3",5),un(12,"Gastos: "),qe(),Ue(13,"span",8),un(14),qe(),Di(15,"hr"),Ue(16,"div",9)(17,"input",10),Si("input",function(o){return r.updateAssetToAdd(o)}),Go("valueChange",function(o){return xl(r.gastoAsset,o)||(r.gastoAsset=o),o}),qe(),Ue(18,"input",11),Si("input",function(o){return r.updateAmountToAdd(o)}),Go("valueChange",function(o){return xl(r.gastoAmount,o)||(r.gastoAmount=o),o}),qe(),Ue(19,"button",12),Si("click",function(){return r.addGasto()}),un(20," add "),qe(),Ue(21,"button",13),Si("click",function(){return r.clearGastos()}),un(22," Clear all "),qe()(),Ue(23,"table",14)(24,"thead")(25,"td"),un(26,"Nombre"),qe(),Ue(27,"td"),un(28,"Valor"),qe(),Ue(29,"td"),un(30,"Accion"),qe()(),Ue(31,"tbody"),bl(32,sz,7,3,"tr",15),qe()()()()),i&2&&(ln(2),jo("ngIf",r.fixedPieSize()),ln(),YD("top: "+r.top()+"px"),ln(),jo("options",r.options),ln(5),zo("value",r.salary),ln(5),Nd("",r.totalSpent,"\u20AC"),ln(3),zo("value",r.gastoAsset),ln(),zo("value",r.gastoAmount),ln(14),jo("ngForOf",r.gastos()))},dependencies:[dT,DS,xS],styles:[`.cont[_ngcontent-%COMP%] {
    width: 100%;
    display: flex;
    justify-content: center;
    margin: 0 auto;
  }`]})}return t})();var mT=(()=>{class t{title="cake-nance";static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Nr({type:t,selectors:[["app-root"]],standalone:!0,features:[Rr],decls:5,vars:0,consts:[[1,"main"],[1,"container"],[1,"row"]],template:function(i,r){i&1&&(Ue(0,"main",0)(1,"div",1)(2,"div",2),Di(3,"app-cake-graph"),qe()()(),Di(4,"router-outlet"))},dependencies:[Am,gT]})}return t})();NS(mT,gw).catch(t=>console.error(t));
